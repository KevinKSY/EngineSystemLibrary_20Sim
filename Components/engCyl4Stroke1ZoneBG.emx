<?xml version="1.0" encoding="UTF-8"?>
<Document>
 <Icons>
    <Icon size="256" bpp="32" format="png">
<![CDATA[89504e470d0a1a0a0000000d49484452000001000000010008060000005c72a86600000006624b474400ff00ff00ffa0bda793000000097048597300000ec400000ec401952b0e1b0000172b49444154789ceddd7d6c55e77d07f0ef0fbfe178c4b8018c09c8262f22ac4a81482b2f5b8b1dad25b066c0d20c88a201a92646fe18a19b44c82691546b089b14d2a51d6553e3506d7951ab041629265215f0340169d698fcb1103415db6d171306d86ee257aefddb1fe739dce3ebfb7aee39f7dc7b9fef47baf23df6bdcf7d8c39dff39c97e77744554144769a11750788283a0c00228b3100882cc60020b2180380c86295517780822322f5009e308ba755b533a076f700980da047558f05d4e64600cb0140559f09a24dca9df03460f9109166003d66f1e9a0562c11b90460318053aa7a7f406dbe04602700a8aa04d126e58ebb004416630010598c01406431060091c518004416630010598c01406431060091c518004416630010598c01406431060091c518004416630010598c01406431060091c518004416630010598c01406431060091c518004416630010598c01406431060091c518004416630010598c01406431060091c518004416e3dd8123e0bd332e852ab03b24972b8e00882c5619750708a7026c6b2680d5e67937809e80da5d05a016403f80f301b5790f8026f33cac7f03ca8001103155bd3fa8b644a419f195fe5850c35f11b904603180f341f5d7bb1b14e2bf0165c05d00228b3100882cc60020b2180380c8620c00228b3100882cc6d3802540449601989dc54be77b9eb788c8da0caf1f55d5f7fcf72cb92c3e17f0f435cbd703c06555bde8af57940c03a0341c06d096e37b7698473add00ee48f5c3d6bbee7a745665e5530016df3b6f1e16d4d72f17916655edcdd0eee95c3a9ac3ebdb013c9663db94060380a611919a87962efdc1c35ffad29f6c5eb6ac61c1ecd9188bc5d073ed5ac3c193277f2e227faaaa9d51f793f2c700280d7b91dd2e40ae46937df39b4b971effcbd6d6af7ee5aebb6e01004c4ca046044be6ccc1d1ad5be72dbeedb69fac6f6efe56476fef5b29da6d0da1af007039a476adc5002801aafa61a13e6bdb17bff8835d6bd6acf94a4bcb2d88c5a6fdbc06c0936d6d73f70e0cfcb388b426db27e7e8a0743000e8a6d6050b1e7df8befbb6fde19d77de8a898994afab11c1c10d1be6f75ebb765a445a5475ac80dda400f134200170f6fbabaaaa5ed871df7d0d989840a6477d5515fe6aedda5b1f5cbcf8efa3ee3bf9c7002000c0fae6e67f3cd0d636ab6ec60c2016cbeaf1d5458b6e5160bb883446dd7ff28701401091c60a912dab6ebfbd3a9badbffba854c5735ffb5afd832d2d3f8afa77207f780c80b07ee1c2efec5bb3a6b6727212989ccce9bd4b66cf86aafe818834aaeaa721759142c21180e544a4e6c6e4e4432be6cecd69ebef1d05ec5bb5aa76fdc285df89fa77a1dc310068c763f7de3bb3aea222e795df7dac9837affac6c4c443225213f52f43b9610058ee8f172ddab5a6a9a92edb037fc91e7522685db87006c2bb008842c200b09888d4ff7674f4eedb6b6b7d6ffdddc71fb5b4346c983fff5b51ff4e941b1e04b4dba63f5bb244fd1cfc4b74f7ac59b83e3afaf580fa4505c200b0d8834d4d0f7f79debc59e9aefacb56dd8c195836678e8ac8b2425eba4cf9e12e80c546c7c79737d5d4e43dfc771f2be7cead00b03ceadf8bb2c700b09488d40f8c8fdff685aaaac00260c9adb7cefafdfafa2f47fdbb51f6b80b60afe55f5fb06004b1d8cca01a6cacaec69c9a9a1541b547e16300d8abe5cebabaca20f6ff5d73aaaa3038367657600d52e81800f69a391398916ccebf5f951313188dc5aa036b9042c700b0d7fcb9d5d575418e00ea44706e68a83eb00629740c004bfd6e65655d15802003804a0f03c0521fc5624337c6c711e42e00951e0680bd067e7be3c6282626023b0b3036398965d5d5c341b547e16300d86b607074f44690a7014763313454540c05d51e858f0160af81feb1b189208f010c8d8de1772a2aae06d620858e5702daeb5cc7952bd5f94c034e7cfceff0304627267e1ef52f46d9e308c052aafae9eaeaea1b43e3e3a8aba808a4cd5f0f0f8ffe6c64a42b90c6a8203802b0586345c52f7e333c1cd85c80ffbc7e7d04c0b9a87f2fca1e470016eb8dc5defd9fcf3f5fb3a4ba3aef0381315574f6f7cf04703e80ae5181700460b1f3b1d8bffee8f2e51b416cfd7f393484453535677997a0d2c21180c554b5774375f5ff5d19199935afaa2aafb6ce0c0e7e76626cecc701758d0a842300cbfdeac68d57ce7ff6595ea380582c861f5fbb26008e47fdfb506e180096fb6fe0fb2f5ebd3a1c8bc57c07c0c5e161cc9a98e854d5c1a87f1fca0d03c072aafa6985ea2f7e393cecfbfcff8b57ae0cbc05fc4dd4bf0be58e0140383131f1edc357af0ef8d9fa5f191bc3af62b1eb2c045a9a18000455fdf0f2c4c407174746720e807fe9efefef989c7c3ceadf81fc61001000e0c4e4e4e3ff70f5eab5983b45388bc7c59111bc3f3edea5aaef44dd7ff2870140000055bd7845e4dffe63787838db23ff7f3d3030786272f291a8fb4efef13a00bae9df2727f73c3c63c6ca4522cbefaeac4c7ba3cf178686ae8fa8eee22dc14b1b470034c54f55d7fdddf0f0a54fc6c7536efd7f323434f87e2c76e467aa3f8dbabf941f8e00680a551d1491f5a3a3a36fedada8b8635555559dfbb33155bc383e7efdfdc9c923afabfe6d94fda4603000681a55ed1591df9358acfdbf62b16f6e15f9fcaaaa9c03aae700bbb8e52f1f0c004aca4cea794444767e57751580019eeb2f3f0c004acb044167d4fda070f0202091c518004416630010598c01406431060091c518004416630010598c01406431060091c518004416630010598c01406431060091c518004416630010598c01406431060091c5180044166349b022272207a2ee43911950d5ef45dd8972c100287e4f47dd8122d30d80011010ee0210598c2380d2d1aeaa8f45dd89a888c8bb00daa2ee47b9e10880c8620c00228b3100882cc60020b2180380c8620c00228b3100882cc60020b2180380c8620c00228b3100882cc60020b2180380c8620c00228b3100882cc67a009494882c03f0008075497e7c1ec03baafa4e617b45416300d01422b205c061004d695ed60660af888c007801c021551d2c44ff2858dc05200080882c3155775e43fa95dfab16c07e00174c70508961001044e479001f235e726b04c01138bb00335555bc0f00cb013c09a0cfbcbe09c06b22f2ae883417b8fb94070680e544e425007b3ddfea00b042551f57d57754752cf13daafaa1aa1e02b014c041cf8fda009c6208940e0680c5cc967fa759ec07b0495537a8eac56cdeafaa83aafa14807b009c35df5e0ca043446a02ef30058e01602911598bf896bf1f409baa9ef0d396098c3638a307c01919f0862625800160af239ee79b55f5c37c1a33bb0adb103f2eb05f4496e4d326858f016021b3622e358b6faa6a6710ed9a5381dee3095b836897c2c300b09377c53c1a70dbc7e19c4500808d01b74d016300d8c93b343f1d64c36657c06df39e20dba6e03100ece4ae987dc94ef305a0c77cade529c1e2c600b0db6889b54b016300d8a9c77c5d1c52fb2dee1355ed0de93328000c003bf5b84fccf500415b65be5e08a16d0a1003c04ede0b7e524ee23113849ecde5aa3e11d988f864a2e33efb4705c200b09039efef5eb0b3dbccfd4fa61dce6cbf2e1169ccd4ae090aefdc005f571652e13000ecb5dff3fc5511a9f7fe5044f600586d163f56d54fb368f300a65e60f45efedda43031002ca5aac7009c328b4be1cce26b040073eacedd92f703d89dae2d11a931138bdc50c9f81e2a0e0c00bb6d06d0659eaf00d02d22fb00bc0ca7d80700ec4db7f5179175700ef6b997008f00d896e5888122c600b098b976bf0df110a805f01c8056b37cda8c14a611919522f2368093889f4eec8733b188b5024b046b025ace84c07d22b20bc02100de6301ad227206d32fec590ea021e17b4700ec676dc0d2c200200080aa1e15916f00f846c28f56277bbdc75938bb093ce05782180004e066356077e5ef82334b701d9c79034b3d2fed83533fb013c049aef8a58d014030a7000f9bc511003b4d8190a0a70a5391610014bf56f3f572889fe1bd0fc0a17cab0385642f80d9e044a34031008a5c50d57a5231a7f1dcc2a05d70ce02149d220da592c7d380163397ee7a6b03ee0ea93e0015290680dd0e237e0eff200fe8d987016029115989f8e5badd009e89b03b1411068085ccd0bfddf3ad9d1cfadb89016027efacbd23611f68a4e2c500b08c99fbff8459ecc3d469c1641906807dda119fe9b79bd7eedb8d01601133d57785597cd5efbd00a97c30002c616e07e6deb0b30f536fe145966200d8e308e243fffd2cd8410003c00a66ae7f9b59ec4855e483ecc3002873a6cedf94997e1176878a0c03a0fc798ffaa7adef47f66100943111d90e60bd593cabaa9cdf4f533000ca9419fabba5bd39f4a7a41800e5cb5be4e31955bd186567a8383100ca9029f2b1cd2c76017821c2ee50116300941953dfcf9de9e7d6f7e34c3f4a8a01507e0e223ef47f81a5b4281d0640191191b58817f9b80016f9a00c1800652249910fd6f7a38c1800e5e300e2f5fd58e483b2c2002803a6be9f5bd88333fd286b0c801297a4b4378ffa53d61800a5ef49c48b7cb4f3d6dc940b06400933453ef69945d6f7a39c31004a1b67fa515e786fc01225227b00ac368b6faaeaeb3eda50559564df4ffc5eb2d70521551fa83018002548449a119fe9d78ff8c53fb9b4316d2577bf9f2a14bcdfe78a5b1eb80b509abc43ff9cebfb65bb927ba9aaa40a0d2a5da2cabf692931453e5e368ba754f5fe1cdf7f7325f7bb554f0c02371cbc2191d8aef7b5a9fa93eefbe9da20ff180025c414f9b800a001ce4cbfa5aada9b631b290320d5f732b5e32e039957f06c42c7cf7bc81fee0294962370567ec029f2e17be54fc5dd8abb8f5cdacf264c32ed4a64b3b2737724383c08582244640b80cd66f1acaa1ecaf1fd596f35a31a7a73cb5e780c8012608a7c784b7be774d43f9f15ab5043ef4ca382303e931800a5c25bdfef909f221fb99ef62ba44cc725a2ee5f39e341c02267eafb9d348b1700ac086ab24fae07d7723d8390cd117ebf07fc8a21b8ca010f0216b142cff44b7770cdcf0a97acbd4ced24bec74f1b943dee0214b7c38817f938acaaef85fd81a94220dd25c3b9aed0d9f6c17dad9f36283bdc052852a6c8c739b3d80de79c3fe7f953a0b80b508492d4f763910f0a0503a0381d00b0d43c6f57d6f7a39070172004e6bcfd0300ee01b012c0cc242ffb18402f8093ded37a22b20cc05938937dfae00cfd0743ef345989011010336cdf01603be2f3f4b3d50fe754df513807fedc125f5bd5c73c7fa26c3100f264b6f64f00d883f875fac9f401e841f6e1f0aaaa3e925fef88d2e369c03c98a9b9873175c51f81b335ef8433bc4f7a575e131cad00d699af4b135ed228228dca325f14228e007cf05c9bbfd3f3ed7e00df83733fbe9cf7d945e403c487feae3e38670058e99742c100c89159f9cf62ea16fb209c6bf47d1dac13915d007e6816df03706b42fb3b54f5989fb689d26100e4c0acfca710df527703d896cf157aa6c847379ca3fe237056fccb7042c57b871f8600058ed70164c91ce5f7aefc5d7026e6e47b796e6269ef5e551d53d56fc339abe07ad9d404200a0c4700591291e711df22770168cbf7fc7c427dbfb3aaba26c36bfae15c17c003831408064016ccc539e7cd621f9c2d7f5e2ba119fa77c199e73f62da4c75c6e00080a7cd224f0f5260b80b901def75f93997e14e21b1c847d295df780e4e2d0000d8666a0410e58d23800cccfdf73e368b4987e93edaf416f9e802b03ad3649f84f770144081e00820b3ad9ee7cfe4db98399390f34c3f732d803b0ad8640e4a12e5850190997be4bd2fa00b720e223ef43f98637d3f775e402d804d01f4852cc70048c36caddd0b724e07d0de5ac42bfa5e40ee238ad73ccf57e6db1f2206407a2d9ee7e90ed26594a4c8c7ee5c8b7c241c286cc9a73f440003209316cff39e3cdb3a80787dbf237914f9e8365f5bf2ec0f11032083f99ee797fd3662eafbed378b7d9ee77eb8fd989d471b44001800997857fa163f0d2429eddd04e0d53ccee5bbfdf01d48442e06407a3d9ee7f353bd288399008e213e740780f5004e8ac82511d995e3293df70c424fba1711658301905e8fe7f9123f0da8eaa0aa7e4f55ef8073eaee94e7c78be14c03ee1391e745a4395d5b66572259df887ce195801988c8193865bc46003404519edb5c5db80fce4546b5093f7e13c0d164d71c88c8b3881f3f7820cc4221e694650b92effa0cc0991b719e054b4b1b03200311d907e75a7c20e0229de63a83bf80534fb029e1c717001c02f09a1b3a22f289795d3f80a620ef156026276d45bc44596230a57216c03ba69f799d2aa5c26300646086e53d6631abebf67d7ece163841905834b41fce6ec2e700be6bbed7aeaa8f05f4b9cd704e51261b8de4ea4d38139b42bf85190583019005117905c036b3f8a4aa1e0af1b396c109829d295e320660a59f5b84277c4e0d9c1989bb93fcf82c9c2b1f6fee62a86aa7e99b7bfa711580b5700e6826ea8033c781750b8a9daaf291e101a011c075000a6018c0b2027de601009f98cff53e3e8073ff811a9f6d2f03f051429b9700ec02509f635b3570e64b7c90d0de7500eba2fedbf191e1ef1775074ae561560eef7feee6027deef34902c07d7c02e059008d39b4b7dd8498b78d2d01f5752d8033097d3c10f5df8e8f347fb3a83b504a0f002f256c319784fc79cf2684cea3005e4911062fc1d93548d7def684f7bc91eb163f8b3ed724f49b2150c48fc83b504a0ff39ffb6dcf7fec6100bb42f89cc6842de9b077386d7efe6c8add833300b627693371e50fbcdf099fb73161a47120eabf1f1f49fe4e5177a0d41e494240cd72dea301d3f62ec48f374c5bf993bc7e3ba6efcfbb43fb7d262c9a1356c6ed05fab75a97f0b93c2650648fc83b50aa0fb3720d27ac746ff8f94f6e56d27d49b6e867b20d1638fbdfc9760f8601fcdab3bca7c0ff4e1b3d9f7d093e0f5cf211ce83a701f3602ecd3d82e9b7f4ea47fc349a5b4ff0329ceb095699e5d97056da0730fdbe8023005e00f08ce678cd8139afbf0bce054689372bfd0cc09f6b81ef389c701af5a0aa3e55c8cfa7d41800013033fbf60168cbb3a97e38f70038a4f9971d776f57fe3c805b127edc0de756e43fd4025cca6bae32bc00279002bba49af2c7000890b9c67f139c616fb6b701ef83335ae88473396d602b64c2558cbf01b030e1252370ca8c652a4b1e445fbcf31802bda49afc630084c46c8157c199467c4fc28fddc93497c35cf112e6313c006777c49d8494b87bd0016712d28990fae22dafceb2e645820150c644e45d38bb2553260f9949485be184c1e284b775c3b9cdf9cb41ef1e88c847708e77f4abea17826c9bfc613d80f2d662bef678f7b9d5a9517054e3350a3a3cef590ce700649f88fc53a61a05393a67be369810a2883100ca9bbb754f593e4c554fa8ea0638bb2947e01c17009c9981bb01f488c8db01dd8e2cef126b142c0640994ad87267ac1fa8aa1755f57138f5069e40ea12668d7974abd7f39c454d8b0003a04ca9aaaf954da79630db8aa925cc90e7e9496f5dc5813cdaa1803000ca9bbb156ff1f366557d5d55ef87b37bd00ea742513ebca3929e3cdba2005446dd010a550f9ce3007e2b1a03b87947a2202a10b9a743fb0b71011265c6114079738fba3799229f9131c724dc8ba3cea57b2d150e03a0bc792fead992f25585e1bdcd3aaf022c12bc10a8cc89c82538bb01fd0096e63bc7c0671f6ae0cc05580ce734631377018a034700e5efa8f9da80a9b7282ba42711bf26e13857fee2c1114099335bdf2ec4a71c6f0aeb7aff149fbfc47c7e2d221c8550721c0194397309b0b7f477bb29ef1d3a73e0af03f1fb0dece7ca5f5c18001650d54ec487ff0d004e851d0266e53f85f8d0bf43558fa6790b458001600973996fbb596c0070d64c170e9c886c8433ecbfb9f203d81cc667517e18001651e776626e08d402784e44de0d6a3420228d22f21280e388d71be800b09915808a1303c032260476203eebaf0dc0791179c36f108848b359f1bb31f5966607c195bfa8f12c80a5ccd1f9764c2f5dd605e024804e4d73fb715310b515c9cb9ff5c159f17993d022c700b09cd95f3f80e9958d139d02b01cd34b897975c39930f432b7faa581014000003357603b9cda814d39bcd52d817e42558f85d0350a110380a631c7025a11bf7741a273706e537e92c3fcd2c60020b2d8ff03a59d6339bf439f7a0000000049454e44ae426082]]>
   </Icon>
</Icons>
 <Model version="4.6" build="4.5.1.5561">
    <Sidops>
<![CDATA[Eng_Cyl1 432 320.5 description '<Information>
 <Description>
    <Version>4.6</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
    <LibraryPath>Components\engCyl4Stroke1ZoneBG.emx</LibraryPath>
  <TimeStamp>2016-4-4 13:13:03</TimeStamp>
</Description>
 <Attributes>
  <GlobalRelations>parameters
	string global dllToolbox = &apos;C:\Users\yum\Documents\GitHub\20SimToolBox\dll20SimToolVS10\Release\dll20SimToolVS10&apos;;
	string global fnc_interp = &apos;interpolate&apos;;
// Thermo package
	string dll_ICE = &apos;C:\Users\yum\Documents\GitHub\ThdynCalcPackDLL\DllICELib\Release\DLL_ICElib.dll&apos;;
	string dll_fcn_GetTFromPhF = &apos;getTFromPhF&apos;;	
	string dll_fcn_ThDP = &apos;getThdynCombGas&apos;;   // subroutines names in the dll file
	string dll_fcn_th_MEV = &apos;getPTF&apos;; // subroutines names in the dll file
	string dll_fcn_idealNozzle = &apos;getFlowIdealNozzle&apos;;
	string dll_fcn_comp = &apos;ice_comres&apos;;
	string dll_fcn_HTX = &apos;getHTCoeffHTX&apos;;
	integer nStroke = 4;
	real fs = 0.0683;
// Cylinder dimension
	real S = 0.14;	//Length of stroke
	real lambdaR = 0.2745; //Ratio of crank rod to conneting rod
	real B = 0.127;	//Bore size
	real CR = 18; 	//Compression ratio
	real vDisp = 0.0017734761768412;

// Exhaust valve
	//Profile
	integer ExhProfNoRow1 = 30;
	integer ExhProfNoRow2 = 30;
	real ExhVVProfUp[ExhProfNoRow1] = [
			0;
			0.007;
			0.021;
			0.046;
			0.07;
			0.105;
			0.161;
			0.211;
			0.267;
			0.323;
			0.372;
			0.435;
			0.491;
			0.547;
			0.604;
			0.653;
			0.702;
			0.744;
			0.782;
			0.818;
			0.853;
			0.884;
			0.909;
			0.93;
			0.951;
			0.965;
			0.979;
			0.989;
			0.996;
			1];
	real ExhVVProfDown[ExhProfNoRow1] = [
			1;
			0.996;
			0.993;
			0.982;
			0.972;
			0.958;
			0.937;
			0.912;
			0.884;
			0.856;
			0.821;
			0.786;
			0.744;
			0.702;
			0.656;
			0.614;
			0.565;
			0.509;
			0.442;
			0.379;
			0.319;
			0.253;
			0.196;
			0.14;
			0.095;
			0.06;
			0.032;
			0.018;
			0.006;
			0];
	real ExhLift_max = 0.01425;
	real ExhCA_start_ref = 130; //Reference start CA for start of valve lift
	real ExhdCA_lift_up = 123;	 //Lift up time (should not be changed unless file is changed
	real ExhdCA_lift_down = 123; //Lift down time (should not be changed unless file is changed
	// Valve dimension
	integer noExhVV = 2;
	real DvExh = 0.041; // Valve head diameter
	real betaExh = 0.5235987755983; // Seat angle
	real wExh = 0.002; // Valve seat width
	real DpExh = 0.038; // Inner seat diameter
	real DsExh = 0.0073; // Stem diameter  
// Intake valve
	//Profile
	integer InProfNoRow1, InProfNoRow2;
	real InVVProfUp[ExhProfNoRow1] = [
			0;
			0.007;
			0.021;
			0.046;
			0.07;
			0.105;
			0.161;
			0.211;
			0.267;
			0.323;
			0.372;
			0.435;
			0.491;
			0.547;
			0.604;
			0.653;
			0.702;
			0.744;
			0.782;
			0.818;
			0.853;
			0.884;
			0.909;
			0.93;
			0.951;
			0.965;
			0.979;
			0.989;
			0.996;
			1];
	real InVVProfDown[ExhProfNoRow1] = [
			1;
			0.996;
			0.993;
			0.982;
			0.972;
			0.958;
			0.937;
			0.912;
			0.884;
			0.856;
			0.821;
			0.786;
			0.744;
			0.702;
			0.656;
			0.614;
			0.565;
			0.509;
			0.442;
			0.379;
			0.319;
			0.253;
			0.196;
			0.14;
			0.095;
			0.06;
			0.032;
			0.018;
			0.006;
			0];
	real InLift_max = 0.01425;
	real InCA_start_ref = 343; //Reference start CA for start of valve lift
	real IndCA_lift_up = 121;	 //Lift up time (should not be changed unless file is changed
	real IndCA_lift_down = 121; //Lift down time (should not be changed unless file is changed
	// Valve dimension
	integer noInVV = 2;
	real DvIntake = 0.041; // Valve head diameter
	real betaIntake = 0.5235987755983; // Seat angle
	real wIntake = 0.002; // Valve seat width
	real DpIntake = 0.038; // Inner seat diameter
	real DsIntake = 0.0073; // Stem diameter  



// Thermal loss in cylinder
	//real T_Top = 500;	//Temperature of the cylinder head	
	//real T_Liner = 500;	//Temperature of the cylinder wall
	//real T_Pist = 500;	//Temperature of the piston top
	real mCp = 10000;
	real T_w_init = 600;
	real coeff_alpha = 1.2;
	real C_cylHT[4] = [0;-0.010733;20.1559;-5230.58];

// Initial values
	real m0 = 0.0050749259185325; 
	real E0 = 2970.2692916974;
	real mb0 = 0;
	real p0 = 11688960.272915;
	real T0 = 800;
	real F0 = 0;
	real V0 = 1.0432212804954e-4;
	real phi0 = 0.001;</GlobalRelations>
 </Attributes>
</Information>'; type Submodel  ports   rotation out M;   signal in contSig [8,1]; "IVO dIVO IVareaMullt throttle phiInj EVO dEVO EVareaMulti"   signal out dmf;   signal out dQCyl;   power in ppTFIn [3,1];   power out ppTFOut [3,1]; end; icon bg bottom shadow 11776947  figures   line 440 403 403.1 387 438.2 333 color 0 width 2;   ellipse 426.1 391 453.8 415 color 0 width 2;   ellipse 430.8 323 449.2 339 color 0 width 2;   ellipse 390.4 375 418.1 399 color 0 width 2;   line 414.4 340 414.4 308 463.5 308 463.5 340 color 0 width 2;   line 406.2 364 406.2 252 471.7 252 471.7 364 471.7 364 color 0 width 2;   line 439 228 439 260 color 0 width 2;   line 422.6 228 422.6 260 color 0 width 2;   line 414.4 260 430.8 260 color 0 width 2;   spline 439 260 430.8 276 439 292 447.1 276 439 260 color 0 fill 255;   line 455.3 228 455.3 260 color 0 width 2;   line 447.1 260 463.5 260 color 0 width 2;   text '4Stroke' 448 368 color 0 16;  terminals   M 440 400 fixed;   contSig 440 224 fixed;   dmf 480 288 fixed;   dQCyl 480 320 fixed;   ppTFIn 416 224 fixed;   ppTFOut 464 224 fixed; end; implementation bg  submodels   Constant 536 648    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Signal\Sources\Constant.emx</LibraryPath>  <TimeStamp>2007-10-19 14:48:44</TimeStamp></Description>';    type Constant     ports      signal out output;    end;    icon bg bottom     figures      rectangle 520.1 632 551.9 664 color 0 fill 15132390;      line 524.9 643.6 546.9 643.6 color 16711680 width 2;      line 522.2 654.7 547.9 654.7 color 0;      line 524.5 638.7 524.5 657 color 0;    end;    implementation eqparameters	real C = 100000;		// output valueequations	output = C;     implementation_end;   CrankMechanism1 695.5 648.5    description '<Information> <Description>    <Version>4.5</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration>    <LibraryPath>Mechanics\CrankMechanismKinematics.emx</LibraryPath>  <TimeStamp>2015-10-22 22:30:23</TimeStamp></Description></Information>';    type CrankMechanism     ports      power in p1;      signal out q_rad;      power out p2;      signal out flow;      signal in p_scvg;    end;    icon bg bottom shadow 11776947     figures      ellipse 691 684 715 708 color 0 width 3;      line 704 696 674 670 704 616 color 0 width 3;      ellipse 662 658 686 682 color 0 width 3;      ellipse 695 608 711 624 color 0 width 3;      line 678 624 678 592 726 592 726 624 color 0 width 3;     terminals      p1 704 584 fixed;      q_rad 744 624 fixed;      p2 704 712 fixed;      flow 743 576 fixed;    end;    implementation bg     submodels      FlowSensor2 296 599       knot FlowSensor        ports         power knot in p1 [1];         power knot out p2 [1];         signal knot out flow [1];        restrictions         causality constraint not_equal p1 p2;       end;       icon bg ellipse        figures         ellipse 289.5 593.5 302.5 606.5 color 0 fill 16777215;         text 'f' 296.5 598.5 color 0;       end;       implementation eqequations	p2.f = p1.f;	p1.e = p2.e;	flow = p1.f;      implementation_end;      MSe 216 424       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>  <TimeStamp>2011-11-29 16:12:33</TimeStamp></Description></Information>';       type MSe        ports         power in p;         signal in p_scvg;        restrictions         causality fixed out p;       end;       icon bg bottom        figures         text 'MSe' 216 424 color 0 18 bold;       end;       implementation eqvariables	real flow;equations	p.e = p_scvg;	flow = p.f;implementation_end;      MTF2 296 512       type MTF        ports         power in p1;         power out p2;         signal in pfi;        restrictions         causality constraint not_equal p1 p2;       end;       icon bg        figures         text 'MTF' 296 512 color 0 18 bold;       end;       implementation eqparameters	real global S, lambdaR;variables	real m;	real csin, ccos;equations		csin=sin(pfi);ccos=cos(pfi);	m = S/2.0*(csin + lambdaR*csin*ccos/sqrt(1.0-(lambdaR*csin)^2));					p1.e = 1/(m + 1e-6) * p2.e;	p2.f  = 1/(m + 1e-6) * p1.f;     implementation_end;      plug q_rad 416.1 552;      plug p2 295.9 648.1;      plug flow 415.9 600.1;      plug p_scvg 88 423.9;      plug p1 295.9 312;      OneJunction3 296 424       knot OneJunction        ports         power knot duplicatable none p [1];         signal knot out flow [1];        restrictions         causality constraint one_out p;       end;       icon bg        figures         text '1' 296 424 color 0 18 bold;       end;       implementation eqequations	sum (direct (p.e)) = 0;	equal (collect (p.f));	flow = first (p.f);    implementation_end;      QSensor4 296 551       knot q_        ports         power knot in p1 [1];         power knot out p2 [1];         signal knot out q_rad [1];        restrictions         causality constraint not_equal p1 p2;       end;       icon bg ellipse        figures         ellipse 289.5 546 302.5 559 color 0 fill 16777215;         text 'q' 295.5 550 color 0;       end;       implementation eqparameters//	integer global nCyl;//	integer global iCyl;	integer global nStroke;//	real global pfi0[nCyl];	real global phi0;variables	real q0;	real b;	real q_gr;initialequations	q0 	= phi0*pi/180.0;	b 		= nStroke*180.0;	equations	p2.f 	= p1.f;	p1.e 	= p2.e;	q_rad 	= int (p1.f, q0);	q_gr	= q_rad*180.0/pi;     implementation_end;      Splitter1 360 552       description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';       knot Splitter        ports         signal knot duplicatable out output [1];         signal knot in input [1];       end;       icon bg ellipse        figures         ellipse 356.8 548.8 363.2 555.2 color -1 fill 0;         ellipse 355.7 547.7 364.3 556.3 color -1;        terminals         input 360 552 fixed;       end;       implementation eqequations    collect (output) = input;implementation_end;      TF2 296 472       type TF        ports         power in p1;         power out p2;        restrictions         causality constraint not_equal p1 p2;       end;       icon bg        figures         text 'TF' 296 472 color 0 18 bold;       end;       implementation eqparameters	real global B;variables	real r;initialequations	r=1/(pi*B^2/4.0);equations						p1.e = r * p2.e;	p2.f = r * p1.f;       implementation_end;     end;     connections      FlowSensor2\flow -> flow;      FlowSensor2\p2 => p2;      MTF2\p2 => QSensor4\p1;      OneJunction3\p <= p1;      OneJunction3\p => MSe\p;      OneJunction3\p => TF2\p1;      p_scvg -> MSe\p_scvg;      QSensor4\p2 => FlowSensor2\p1;      QSensor4\q_rad -> Splitter1\input;      Splitter1\output -> MTF2\pfi 360 512;      Splitter1\output -> q_rad;      TF2\p2 => MTF2\p1;     end;    implementation_end;   Demux 720 132.5			specifications active 'outputs_8'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal in input [2,1];   signal out output2; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	[output1; output2] = input;implementation_end;specification_end;				specification 'outputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output;   signal in input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output = input;implementation_end;specification_end;				specification 'outputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal in input [2,1];   signal out output2; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	[output1; output2] = input;implementation_end;specification_end;				specification 'outputs_3'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal in input [3,1]; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '3' 133 82 color 8421504 8;  terminals   output1 128 64 fixed;   output2 128 72 fixed;   output3 128 80 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3] = input;implementation_end;specification_end;				specification 'outputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal in input [4,1]; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4] = input;implementation_end;specification_end;				specification 'outputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal out output5;   signal in input [5,1]; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4; output5] = input;implementation_end;specification_end;				specification 'outputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal out output5;   signal out output6;   signal in input [6,1]; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4; output5; output6] = input;implementation_end;specification_end;				specification 'outputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal out output5;   signal out output6;   signal out output7;   signal in input [7,1]; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4; output5; output6; output7] = input;implementation_end;specification_end;				specification 'outputs_8' description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal out output5;   signal out output6;   signal out output7;   signal out output8;   signal in input [8,1]; end; icon bg bottom  figures   line 680 136 760 136 color 0 width 2;   rectangle 680 132 760 140 color -1;   text '8' 731 131 color 8421504 8;  terminals   output1 688 136 fixed;   output2 696 136 fixed;   output3 704 136 fixed;   output4 712 136 fixed;   output5 728 136 fixed;   output6 736 136 fixed;   output7 744 136 fixed;   output8 752 136 fixed;   input 720 136 fixed; end; implementation eqequations	[output1; output2; output3; output4; output5; output6; output7; output8] = input;implementation_end;specification_end;				specification 'outputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal out output5;   signal out output6;   signal out output7;   signal out output8;   signal out output9;   signal in input [9,1]; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4; output5; output6; output7; output8; output9] = input;implementation_end;specification_end;			end;   Demux1 690.5 336			specifications active 'outputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal in input [2,1];   signal out output2; end; icon bg bottom  figures   line 128 64 128 96 color 0 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	[output1; output2] = input;implementation_end;specification_end;				specification 'outputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output;   signal in input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output = input;implementation_end;specification_end;				specification 'outputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal in input [2,1];   signal out output2; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	[output1; output2] = input;implementation_end;specification_end;				specification 'outputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output;   signal in input [3,1]; end; icon bg bottom  figures   line 688 320 688 352 color 0 width 2;   rectangle 684 320 692 352 color -1;   text '3' 693 346 color 8421504 8;  terminals   output 688 328 fixed;   input 688 336 fixed; end; implementation eqequations	output = input[1];implementation_end;specification_end;				specification 'outputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal in input [4,1]; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4] = input;implementation_end;specification_end;				specification 'outputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal out output5;   signal in input [5,1]; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4; output5] = input;implementation_end;specification_end;				specification 'outputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal out output5;   signal out output6;   signal in input [6,1]; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4; output5; output6] = input;implementation_end;specification_end;				specification 'outputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal out output5;   signal out output6;   signal out output7;   signal in input [7,1]; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4; output5; output6; output7] = input;implementation_end;specification_end;				specification 'outputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal out output5;   signal out output6;   signal out output7;   signal out output8;   signal in input [8,1]; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4; output5; output6; output7; output8] = input;implementation_end;specification_end;				specification 'outputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal out output5;   signal out output6;   signal out output7;   signal out output8;   signal out output9;   signal in input [9,1]; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4; output5; output6; output7; output8; output9] = input;implementation_end;specification_end;			end;   EffortSensor1 704 567    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      pneumatic knot in p1 [1];      pneumatic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 697.1 561.3 710.9 575.4 color 0 fill 16777215;      text 'e' 704.5 565.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   engCylCV 722.5 431			specifications active 'Conv3PortCyl'				specification 'Conv3PortCyl' description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath><TimeStamp>2015-10-26 20:20:12</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>'; type Submodel  ports   power in pTFIn1 [3,1];   pneumatic out ppV;   signal out vCyl;   signal out mCyl;   power out pHT;   power out pTFOut [3,1];   power in pTFIn2 [3,1];  restrictions   causality fixed out pTFIn2; end; icon bg bottom shadow 11776947  figures   line 672 456 672 376 744 376 744 456 712 456 712 448 736 448 736 384 680 384 680 448 704 448 704 456 672 456 color 0 fill 15132390;   line 704 432 680 432 680 424 736 424 736 432 712 432 712 472 704 472 704 432 color 0 fill 6710886;   line 680 384 736 384 736 424 680 424 680 384 color 0 fill 55295;   text 'CV' 712 400 color 0 16;   text 'dW' 704 480 color 0 16;   spline 749 409 757 401 765 409 773 401 color 0;   text 'dQ' 760 424 color 0 16;   spline 749 416 757 408 765 416 773 408 color 0;   spline 749 402 757 394 765 402 773 394 color 0;  terminals   pTFIn1 672 368 fixed;   ppV 704 488 fixed;   vCyl 752 480 fixed;   mCyl 752 464 fixed;   pHT 760 440 fixed;   pTFOut 744 368 fixed;   pTFIn2 712 368 fixed; end; implementation bg  submodels   MSf1 432 448    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>  <TimeStamp>2011-11-29 16:14:18</TimeStamp></Description></Information>';    type MSf     ports      power in p;      signal in flow;     restrictions      causality fixed in p;    end;    icon bg bottom     figures      text 'MSf' 432 448 color 0 18 bold;    end;    implementation eqvariables	real effort;equations	p.f = flow; 	effort = p.e;implementation_end;   MTF 352 480    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\MTF.emx</LibraryPath>  <TimeStamp>2011-11-29 16:15:31</TimeStamp></Description></Information>';    type MTF     ports      pseudopneumatic in ppIn;      pseudothermalh in pTIn;      power in pFIn;      power out ppOut;      power out pTOut;      power out pFOut;      signal in vCyl {m3} ;      pneumatic out ppVOut;      signal out mCyl;     restrictions      causality fixed out pTIn;      causality fixed in pFOut;      causality fixed in pTOut;      causality fixed out ppIn;      causality fixed out pFIn;      causality fixed in ppOut;    end;    icon bg bottom     figures      text 'MTF' 352 480 color 0 'Arial Narrow' 25 bold;     terminals      ppIn 328 456 fixed;      pTIn 352 456 fixed;      pFIn 376 456 fixed;      ppOut 328 504 fixed;      pTOut 352 504 fixed;      pFOut 376 504 fixed;      vCyl 376 488 fixed;      ppVOut 376 480 fixed;      mCyl 376 496 fixed;    end;    implementation eqparameters	string global dll_ICE;           //dll file name	string global dll_fcn_ThDP;			//function name in dll file	real global fs;							// stoichiometric fuel-to-air ratiovariables	real dm {kg/s}; // Rate of change in mass	real dE {J/s}; // Rate of change in internal energy	real dmb {kg/s}; // Rate of change in burned fuel mass	real dV {m3/s}; // Rate of change in volume	real p {Pa};  // pressure of the control volume	real T {K};		// temperature of the control volume	real F; 			// Fuel-to-air equivalent ratio of control volume	real mb {kg};				// mass of burned fuel in the control volume	real ma {kg}; 				// mass of air in the control volume	real R {J/kgK};			// Gas constant of the gas	real u {J/kg};				// Specific internal energy of the gas	real rho {kg/m3};		// Density of the gas	real rhop, rhoT, rhoF; // partial derivative of density w.r.t. p, T, F	real Rp, RT, RF;		// partial derivative of gas constant w.r.t. p, T, F	real up, uT, uF;   // partial derivative of internal energy w.r.t. p, T, F		real hidden u1, u2, u3, u4, D;	real hidden a11, a12, a13, a21, a22, a23;	real hidden RtimesT;	real hidden RtimesTSq;	real hidden inArrThProp[5];	real hidden outArrThProp[16];equations	p = ppOut.e;	T = pTOut.e;	F = pFOut.e;	dV = ppVOut.f;	dm = ppIn.f;	dE = pTIn.f;	dmb = pFIn.f;		// Calculate the thermodynamic properties of the gas	inArrThProp = [p;T;F;fs;1];		outArrThProp = dll(dll_ICE,dll_fcn_ThDP, inArrThProp);		R = outArrThProp[1]; 			u = outArrThProp[4];	Rp = outArrThProp[6];			RT = outArrThProp[7];				RF = outArrThProp[5];			up = outArrThProp[9];				uT = outArrThProp[10];		uF = outArrThProp[8];	RtimesT = R*T;	RtimesTSq = RtimesT*RtimesT;	rho = p/(RtimesT);	rhop = (RtimesT - p*Rp*T)/RtimesTSq;				rhoT = (-p*(RT*T + R))/RtimesTSq;	rhoF = (-p*(RF*T))/RtimesTSq;	mCyl = rho*vCyl;	mb = (F*fs)/(1+F*fs)*mCyl;	ma = mCyl - mb;		// Calculate the derivative of the p, T, F	u1 = dm/mCyl - dV/vCyl;	u2 = (dE - u*dm)/mCyl;	u3 = (dmb*mCyl - dm*mb)/(fs*ma^2);		D = -(rhoT*up - rhop*uT)/rho;	a11 = uT / D; 		a12 = -rhoT/(rho*D);		a13 = (rhoT*uF - rhoF*uT)/(rho*D);	a21 = -up / D;		a22 = rhop/(rho*D);		a23 = -(rhop*uF - rhoF*up)/(rho*D);	ppOut.f = a11*u1 + a12*u2 + a13*u3;	pTOut.f = a21*u1 + a22*u2 + a23*u3;	pFOut.f = u3;		//			ppIn.e = p;	pTIn.e = T;	pFIn.e = F;	ppVOut.e = p;	implementation_end;   plug pTFIn1 208 392.1;   plug ppV 528 480;   plug vCyl 510.8 528;   plug mCyl 512 544;   plug pHT 472 288;   plug pTFOut 493 392;   plug pTFIn2 352.1 240;   PowerDemux 249.5 392			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 248 368 248 416 color 0 width 2;   rectangle 243 376 251 408 color -1;   text '3' 252 402 color 8421504 8;  terminals   output1 248 376 fixed;   output2 248 392 fixed;   output3 248 408 fixed;   input 240 392 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;			end;   PowerDemux1 352 306.5			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 320 304 384 304 color 0 width 2;   rectangle 328 299 360 307 color -1;   text '3' 354 308 color 8421504 8;  terminals   output1 328 304 fixed;   output2 352 304 fixed;   output3 376 304 fixed;   input 352 296 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;			end;   PowerMux 457.5 392			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 456 368 456 416 color 0 width 2;   rectangle 451 368 459 400 color -1;   text '3' 460 394 color 8421504 8;  terminals   input1 456 376 fixed;   input2 456 392 fixed;   input3 456 408 fixed;   output 464 392 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;			end;   PowerSensor2 480 480    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>  <TimeStamp>2011-11-29 16:29:42</TimeStamp></Description></Information>';    knot PowerSensor     ports      pneumatic knot in p1 [1];      pneumatic knot out p2 [1];      signal knot out P [1] {W} ;     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 473.1 472.8 486.9 487.2 color 0 fill 16777215;      text 'P' 480.5 479.8 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	P = p1.e .* p1.f;implementation_end;   QSensor1 424 479    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\QSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:34</TimeStamp></Description>';    knot QSensor     ports      pneumatic knot in p1 [1];      pneumatic knot out p2 [1];      signal knot out vCyl [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 417.1 473.3 430.9 487.4 color 0 fill 16777215;      text 'q' 423.5 477.6 color 0;    end;    implementation eqparameters	real global V0;equations	p2.f = p1.f;	p1.e = p2.e;	vCyl = int (p1.f, V0);     implementation_end;   Splitter1 424 496    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 420.8 492.8 427.2 499.2 color -1 fill 0;      ellipse 419.7 491.7 428.3 500.3 color -1;     terminals      input 424 496 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Thdyn_Cont_Vol_Cyl 352 568			specifications active 'Conventional'				specification 'Conventional' description '<Information> <Description>    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>  <Version>4.5</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration>  <Description>Thermodynamic control volume with varying volume for array of cylinders</Description>    <TimeStamp>2015-10-19 21:36:18</TimeStamp></Description></Information>'; type C  ports   power in pp;   power in pF;   power in pT;  restrictions   causality preferred out pp; end; icon bg bottom  figures   text 'C' 352 568 color 0 51 bold;  terminals   pp 328 544 fixed;   pF 376 544 fixed;   pT 352 544 fixed; end; implementation eqparameters	real global p0; 	real global T0;	real global F0;variables	real interesting p, T, F;equations	p 		= int(pp.f,p0);	T 		= int(pT.f,T0);	F		= int(pF.f,F0);		pp.e = p;	pT.e = T;	pF.e = F;	implementation_end;specification_end;				specification 'cyl'description '<Information> <Description>    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>  <Version>4.5</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration>  <Description>Thermodynamic control volume with varying volume for array of cylinders</Description>    <TimeStamp>2015-10-19 17:31:58</TimeStamp></Description></Information>'; type C  ports   pseudohydraulic in pp;   power in pF;   pseudothermalh in pT;   pneumatic out ppV;   signal out vCyl;   signal out mCyl;  restrictions   causality preferred out pp; end; icon bg bottom  figures   text 'C' 152 480 51 bold;  terminals   pp 128 456 fixed;   pF 176 456 fixed;   pT 152 456 fixed;   ppV 152 504 fixed;   vCyl 176 504 fixed;   mCyl 176 488 fixed; end; implementation eqparameters	integer global iCyl;	integer global nCyl;	real global fs;	string global dll_ICE;	      // dll filename for subroutines	string global dll_fcn_ThDP;   // subroutines names in the dll file	string global dll_fcn_th_MEV; // subroutines names in the dll file	real global mCyl0[nCyl]; 	real global ECyl0[nCyl];	real global mbCyl0[nCyl];	real global VCyl0[nCyl];variables	real interesting m, E, m_b, V;	real interesting p, T, F;	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];	real inarr_th_MEV[9], outarr_th_MEV[3]; 	real p_prev, T_prev, R_prev, u_prev, Cv_prev;initialequations	p_prev = 10e5;	T_prev = 400;	R_prev = 287;	u_prev = 2.8508e+05;	Cv_prev = 7.31e+02;	equations	m 		= int(pp.f,mCyl0[iCyl]);	E 		= int(pT.f,ECyl0[iCyl]);	m_b	= int(pF.f,mbCyl0[iCyl]);	V   	= int(ppV.f,VCyl0[iCyl]);	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);		p = outarr_th_MEV[1];	T = outarr_th_MEV[2];	F = outarr_th_MEV[3];	T_prev = T;	p_prev = p;	inarr_ThermoProp = [p;T;F;fs];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);		R_prev = outarr_ThermoProp[1];	u_prev = outarr_ThermoProp[2];	Cv_prev = outarr_ThermoProp[15];	pp.e = p;	pT.e = T;	pF.e = F;	ppV.e = p;	vCyl = V;	mCyl = m;implementation_end;specification_end;				specification 'Fixed'description '<Information> <Description>    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>  <Version>4.5</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration>  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>    <TimeStamp>2015-10-19 17:21:38</TimeStamp></Description></Information>'; type C  ports   pseudohydraulic in pp;   power in pF;   pseudothermalh in pT;   signal out mCyl;  restrictions   causality preferred out pp; end; icon bg bottom  figures   text 'C' 104 264 51 bold;  terminals   pp 80 240 fixed;   pF 128 240 fixed;   pT 104 240 fixed;   mCyl 128 272 fixed; end; implementation eqparameters	real global fs;	string global dll_ICE;	      // dll filename for subroutines	string global dll_fcn_ThDP;   // subroutines names in the dll file	string global dll_fcn_th_MEV; // subroutines names in the dll file	real global m0; 	real global E0;	real global mb0;	real global V0;variables	real interesting m, E, m_b, V;	real interesting p, T, F;	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];	real inarr_th_MEV[9], outarr_th_MEV[3]; 	real p_prev, T_prev, R_prev, u_prev, Cv_prev;initialequations	p_prev = 10e5;	T_prev = 400;	R_prev = 287;	u_prev = 2.8508e+05;	Cv_prev = 7.31e+02;	V = V0;	equations	m 		= int(pp.f,m0);	E 		= int(pT.f,E0);	m_b	= int(pF.f,mb0);		inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);		p = outarr_th_MEV[1];	T = outarr_th_MEV[2];	F = outarr_th_MEV[3];	T_prev = T;	p_prev = p;	inarr_ThermoProp = [p;T;F;fs];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);		R_prev = outarr_ThermoProp[1];	u_prev = outarr_ThermoProp[2];	Cv_prev = outarr_ThermoProp[15];	pp.e = p;	pT.e = T;	pF.e = F;	mCyl = m;implementation_end;specification_end;				specification 'Varying'description '<Information><Description><LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration><Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description><TimeStamp>2015-10-19 17:21:38</TimeStamp></Description></Information>'; type C  ports   pseudohydraulic in pp;   power in pF;   pseudothermalh in pT;   signal out mCyl;   power out ppV;   signal out vCyl;  restrictions   causality preferred out pp; end; icon bg bottom  figures   text 'C' 104 264 51 bold;  terminals   pp 80 240 fixed;   pF 128 240 fixed;   pT 104 240 fixed;   mCyl 128 272 fixed; end; implementation eqparameters	real global fs;	string global dll_ICE;	      // dll filename for subroutines	string global dll_fcn_ThDP;   // subroutines names in the dll file	string global dll_fcn_th_MEV; // subroutines names in the dll file	real global m0; 	real global E0;	real global mb0;	real global V0;variables	real interesting m, E, m_b, V;	real interesting p, T, F;	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];	real inarr_th_MEV[9], outarr_th_MEV[3]; 	real p_prev, T_prev, R_prev, u_prev, Cv_prev;initialequations	p_prev = 10e5;	T_prev = 400;	R_prev = 287;	u_prev = 2.8508e+05;	Cv_prev = 7.31e+02;	equations	m 		= int(pp.f,m0);	E 		= int(pT.f,E0);	m_b	= int(pF.f,mb0);	V 		= int(ppV.f,V0);		inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);		p = outarr_th_MEV[1];	T = outarr_th_MEV[2];	F = outarr_th_MEV[3];	T_prev = T;	p_prev = p;	inarr_ThermoProp = [p;T;F;fs];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);		R_prev = outarr_ThermoProp[1];	u_prev = outarr_ThermoProp[2];	Cv_prev = outarr_ThermoProp[15];	pp.e = p;	pT.e = T;	pF.e = F;	ppV.e = p;	mCyl = m;	vCyl = V;implementation_end;specification_end;			end;   ZeroJunction 328 376    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      pseudopneumatic knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 328 376 color 0 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;   ZeroJunction1 352 392    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      pseudothermalh knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 352 392 color 0 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;   ZeroJunction2 376 408    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      power knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 376 408 color 0 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;  end;  connections   MTF\mCyl -> mCyl 416 504 456 544;   MTF\pFOut => Thdyn_Cont_Vol_Cyl\pF;   MTF\ppOut => Thdyn_Cont_Vol_Cyl\pp;   MTF\ppVOut => QSensor1\p1;   MTF\pTOut => Thdyn_Cont_Vol_Cyl\pT;   PowerDemux\output1 => ZeroJunction\p;   PowerDemux\output2 => ZeroJunction1\p;   PowerDemux\output3 => ZeroJunction2\p;   PowerDemux1\input <= pTFIn2;   PowerDemux1\output1 => ZeroJunction\p;   PowerDemux1\output2 => ZeroJunction1\p;   PowerDemux1\output3 => ZeroJunction2\p;   PowerMux\output => pTFOut;   PowerSensor2\P -> MSf1\flow;   PowerSensor2\p2 => ppV;   pTFIn1 => PowerDemux\input;   QSensor1\p2 => PowerSensor2\p1;   QSensor1\vCyl -> Splitter1\input;   Splitter1\output -> MTF\vCyl;   vCyl <- Splitter1\output 456 528;   ZeroJunction\p => MTF\ppIn;   ZeroJunction\p => PowerMux\input1;   ZeroJunction1\p => MSf1\p;   ZeroJunction1\p => MTF\pTIn;   ZeroJunction1\p => pHT;   ZeroJunction1\p => PowerMux\input2;   ZeroJunction2\p => MTF\pFIn;   ZeroJunction2\p => PowerMux\input3;  end;  figures   text 'Global Parameters
     real global slag, Diam, alam, Veps;
     real global pfi0[ncyl];
     real global nstroke;
     real global fs;
     string global dll_ICE;	      // dll filename for subroutines
     string global dll_fcn_ThDP;   // subroutines names in the dll file
     string global dll_fcn_th_MEV; // subroutines names in the dll file

     real global p0[nCyl]; 
     real global T0[nCyl];
     real global F0[nCyl];' 208 120 color 0 16; implementation_end;specification_end;				specification 'Energy2PortFixedAdiab'description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath><TimeStamp>2015-11-3 00:03:12</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations>parameters	real m0 = 4.08190848280315;	real E0 = 884402.21053548;	real mb0 = 0;	real V0 = 1.15;	real p0 = 310000;	real T0 = 304.45;	real F0 = 0;</GlobalRelations></Attributes></Information>'; type Submodel  ports   power in pTFIn [3,1];   signal out mCyl;   power out pTFOut [3,1]; end; icon bg bottom shadow 11776947  figures   rectangle 961 279.2 1033 303.2 color 0 fill 12632256;   rectangle 961 247.2 1033 271.2 color 0 fill 12632256;   rectangle 969 255.2 1025 295.2 color 0 fill 55295;   text 'CV' 996.5 276.2 color 0 16;   line 1021 275.2 1045 275.2 color 0 fill 12632256 width 4 end open;   line 957 275.2 981 275.2 color 0 fill 12632256 width 4 end open;  terminals   pTFIn 953 275.2 fixed;   mCyl 992 280 fixed;   pTFOut 1049 275.2 fixed; end; implementation bg  submodels   plug pTFIn 208 392.1;   plug mCyl 509 536;   plug pTFOut 493 392.1;   PowerDemux 249.4 392			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 249.5 368 249.5 416 color 0 width 2;   rectangle 243.3 376 253.3 408 color -1;   text '3' 254.5 402 color 8421504 8;  terminals   output1 249.5 376 fixed;   output2 249.5 392 fixed;   output3 249.5 408 fixed;   input 239.5 392 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;			end;   PowerMux 457.4 392			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 457.5 368 457.5 416 color 0 width 2;   rectangle 451.3 368 461.3 400 color -1;   text '3' 462.5 394 color 8421504 8;  terminals   input1 457.5 376 fixed;   input2 457.5 392 fixed;   input3 457.5 408 fixed;   output 467.5 392 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;			end;   Thdyn_Cont_Vol_Cyl 352 528			specifications active 'Fixed'				specification 'Fixed' description '<Information> <Description>    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>  <Version>4.5</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration>  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>    <TimeStamp>2015-10-19 17:21:38</TimeStamp></Description></Information>'; type C  ports   pseudohydraulic in pp;   power in pF;   pseudothermalh in pT;   signal out mCyl;  restrictions   causality preferred out pp; end; icon bg bottom  figures   text 'C' 352 528 color 0 51 bold;  terminals   pp 344.8 520.7 fixed;   pF 359.2 520.7 fixed;   pT 352 520.7 fixed;   mCyl 359.2 530.4 fixed; end; implementation eqparameters	real global fs;	string global dll_ICE;	      // dll filename for subroutines	string global dll_fcn_ThDP;   // subroutines names in the dll file	string global dll_fcn_th_MEV; // subroutines names in the dll file	real global m0; 	real global E0;	real global mb0;	real global V0;variables	real interesting m, E, m_b, V;	real interesting p, T, F;	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];	real inarr_th_MEV[9], outarr_th_MEV[3]; 	real p_prev, T_prev, R_prev, u_prev, Cv_prev;initialequations	p_prev = 10e5;	T_prev = 400;	R_prev = 287;	u_prev = 2.8508e+05;	Cv_prev = 7.31e+02;	V = V0;	equations	m 		= int(pp.f,m0);	E 		= int(pT.f,E0);	m_b	= int(pF.f,mb0);		inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);		p = outarr_th_MEV[1];	T = outarr_th_MEV[2];	F = outarr_th_MEV[3];	T_prev = T;	p_prev = p;	inarr_ThermoProp = [p;T;F;fs;1];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);		R_prev = outarr_ThermoProp[1];	u_prev = outarr_ThermoProp[4];	Cv_prev = outarr_ThermoProp[15];	pp.e = p;	pT.e = T;	pF.e = F;	mCyl = m;implementation_end;specification_end;				specification 'Varying'description '<Information> <Description>    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>  <Version>4.5</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration>  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>    <TimeStamp>2015-10-27 22:31:23</TimeStamp></Description></Information>'; type C  ports   pseudohydraulic in pp;   power in pF;   pseudothermalh in pT;   signal out mCyl;   power out ppV;   signal out vCyl;  restrictions   causality preferred out pp; end; icon bg bottom  figures   text 'C' 712 560 51 bold;  terminals   pp 688 536 fixed;   pF 736 536 fixed;   pT 712 536 fixed;   mCyl 736 568 fixed;   ppV 712 584 fixed;   vCyl 736 584 fixed; end; implementation eqparameters	real global fs;	string global dll_ICE;	      // dll filename for subroutines	string global dll_fcn_ThDP;   // subroutines names in the dll file	string global dll_fcn_th_MEV; // subroutines names in the dll file	real global m0; 	real global E0;	real global mb0;	real global V0;variables	real interesting m, E, m_b, V;	real interesting p, T, F;	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];	real inarr_th_MEV[9], outarr_th_MEV[3]; 	real p_prev, T_prev, R_prev, u_prev, Cv_prev;initialequations	p_prev = 10e5;	T_prev = 400;	R_prev = 287;	u_prev = 2.8508e+05;	Cv_prev = 7.31e+02;	equations	m 		= int(pp.f,m0);	E 		= int(pT.f,E0);	m_b	= int(pF.f,mb0);	V 		= int(ppV.f,V0);		inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);		p = outarr_th_MEV[1];	T = outarr_th_MEV[2];	F = outarr_th_MEV[3];	T_prev = T;	p_prev = p;	inarr_ThermoProp = [p;T;F;fs;1];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);		R_prev = outarr_ThermoProp[1];	u_prev = outarr_ThermoProp[4];	Cv_prev = outarr_ThermoProp[15];	pp.e = p;	pT.e = T;	pF.e = F;	ppV.e = p;	mCyl = m;	vCyl = V;implementation_end;specification_end;			end;   ZeroJunction1 352 392    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      pseudothermalh knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 352 392 color 0 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;   ZeroJunction2 376 408    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      power knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 376 408 color 0 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;   ZeroJunction3 328 376    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      pseudohydraulic knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 328 376 color 0 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;  end;  connections   PowerDemux\output1 => ZeroJunction3\p;   PowerDemux\output2 => ZeroJunction1\p;   PowerDemux\output3 => ZeroJunction2\p;   PowerMux\output => pTFOut;   pTFIn => PowerDemux\input;   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;   ZeroJunction1\p => PowerMux\input2;   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;   ZeroJunction2\p => PowerMux\input3;   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;   ZeroJunction3\p => PowerMux\input1;   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;  end; implementation_end;specification_end;				specification 'Energy2PortFixedVol'description '<Information> <Description>    <Version>4.5</Version><IsMainModel>1</IsMainModel>    <LibraryPath>ControlVolumes\ControlVolumeEnergy3Port.emx</LibraryPath>  <TimeStamp>2015-10-19 16:55:50</TimeStamp></Description></Information>'; type Submodel  ports   power in pTFIn1 [3,1];   signal out mCyl;   power out pHT;   power out pTFOut [3,1]; end; icon bg bottom shadow 11776947  figures   spline 729.2 780 737.2 772 745.2 780 753.2 772;   text 'dQ' 741.2 792 16;   spline 729.2 788 737.2 780 745.2 788 753.2 780;   spline 729.2 772 737.2 764 745.2 772 753.2 764;   rectangle 654.7 748 726.7 804 fill 12632256;   rectangle 662.7 756 718.7 796 fill 55295;   text 'CV' 691.2 777 16;  terminals   pTFIn1 654.7 740 fixed;   mCyl 686.7 812 fixed;   pHT 742.7 804 fixed;   pTFOut 726.7 740 fixed; end; implementation bg  submodels   plug pTFIn1 208 392.1;   plug mCyl 509 535.9;   plug pHT 472.1 288;   plug pTFOut 493 392.1;   PowerDemux 248 392			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 248 368 248 416 width 2;   rectangle 243 376 251 408 color -1;   text '3' 252 402 color 8421504 8;  terminals   output1 248 376 fixed;   output2 248 392 fixed;   output3 248 408 fixed;   input 240 392 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;			end;   PowerMux 456 392			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 456 368 456 416 width 2;   rectangle 451 368 459 400 color -1;   text '3' 460 394 color 8421504 8;  terminals   input1 456 376 fixed;   input2 456 392 fixed;   input3 456 408 fixed;   output 464 392 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;			end;   Thdyn_Cont_Vol_Cyl 352 528			specifications active 'Fixed'				specification 'Fixed' description '<Information> <Description>    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>  <Version>4.5</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration>  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>    <TimeStamp>2015-10-19 17:21:38</TimeStamp></Description></Information>'; type C  ports   pseudohydraulic in pp;   power in pF;   pseudothermalh in pT;   signal out mCyl;  restrictions   causality preferred out pp; end; icon bg bottom  figures   text 'C' 352 528 51 bold;  terminals   pp 328 504 fixed;   pF 376 504 fixed;   pT 352 504 fixed;   mCyl 376 536 fixed; end; implementation eqparameters	real global fs;	string global dll_ICE;	      // dll filename for subroutines	string global dll_fcn_ThDP;   // subroutines names in the dll file	string global dll_fcn_th_MEV; // subroutines names in the dll file	real global m0; 	real global E0;	real global mb0;	real global V0;variables	real interesting m, E, m_b, V;	real interesting p, T, F;	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];	real inarr_th_MEV[9], outarr_th_MEV[3]; 	real p_prev, T_prev, R_prev, u_prev, Cv_prev;initialequations	p_prev = 10e5;	T_prev = 400;	R_prev = 287;	u_prev = 2.8508e+05;	Cv_prev = 7.31e+02;	V = V0;	equations	m 		= int(pp.f,m0);	E 		= int(pT.f,E0);	m_b	= int(pF.f,mb0);		inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);		p = outarr_th_MEV[1];	T = outarr_th_MEV[2];	F = outarr_th_MEV[3];	T_prev = T;	p_prev = p;	inarr_ThermoProp = [p;T;F;fs;1];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);		R_prev = outarr_ThermoProp[1];	u_prev = outarr_ThermoProp[4];	Cv_prev = outarr_ThermoProp[15];	pp.e = p;	pT.e = T;	pF.e = F;	mCyl = m;implementation_end;specification_end;				specification 'Varying'description '<Information> <Description>    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>  <Version>4.5</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration>  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>    <TimeStamp>2015-10-27 22:31:23</TimeStamp></Description></Information>'; type C  ports   pseudohydraulic in pp;   power in pF;   pseudothermalh in pT;   signal out mCyl;   power out ppV;   signal out vCyl;  restrictions   causality preferred out pp; end; icon bg bottom  figures   text 'C' 712 560 51 bold;  terminals   pp 688 536 fixed;   pF 736 536 fixed;   pT 712 536 fixed;   mCyl 736 568 fixed;   ppV 712 584 fixed;   vCyl 736 584 fixed; end; implementation eqparameters	real global fs;	string global dll_ICE;	      // dll filename for subroutines	string global dll_fcn_ThDP;   // subroutines names in the dll file	string global dll_fcn_th_MEV; // subroutines names in the dll file	real global m0; 	real global E0;	real global mb0;	real global V0;variables	real interesting m, E, m_b, V;	real interesting p, T, F;	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];	real inarr_th_MEV[9], outarr_th_MEV[3]; 	real p_prev, T_prev, R_prev, u_prev, Cv_prev;initialequations	p_prev = 10e5;	T_prev = 400;	R_prev = 287;	u_prev = 2.8508e+05;	Cv_prev = 7.31e+02;	equations	m 		= int(pp.f,m0);	E 		= int(pT.f,E0);	m_b	= int(pF.f,mb0);	V 		= int(ppV.f,V0);		inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);		p = outarr_th_MEV[1];	T = outarr_th_MEV[2];	F = outarr_th_MEV[3];	T_prev = T;	p_prev = p;	inarr_ThermoProp = [p;T;F;fs;1];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);		R_prev = outarr_ThermoProp[1];	u_prev = outarr_ThermoProp[4];	Cv_prev = outarr_ThermoProp[15];	pp.e = p;	pT.e = T;	pF.e = F;	ppV.e = p;	mCyl = m;	vCyl = V;implementation_end;specification_end;			end;   ZeroJunction1 352 392    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      pseudothermalh knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 352 392 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;   ZeroJunction2 376 408    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      power knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 376 408 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;   ZeroJunction3 328 376    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      pseudohydraulic knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 328 376 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;  end;  connections   PowerDemux\output1 => ZeroJunction3\p;   PowerDemux\output2 => ZeroJunction1\p;   PowerDemux\output3 => ZeroJunction2\p;   PowerMux\output => pTFOut;   pTFIn1 => PowerDemux\input;   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;   ZeroJunction1\p => pHT;   ZeroJunction1\p => PowerMux\input2;   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;   ZeroJunction2\p => PowerMux\input3;   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;   ZeroJunction3\p => PowerMux\input1;   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;  end; implementation_end;specification_end;				specification 'Energy3PortCyl'description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath><TimeStamp>2015-10-23 00:13:56</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>'; type Submodel  ports   power in pTFIn1 [3,1];   pneumatic out ppV;   signal out vCyl;   signal out mCyl;   power out pHT;   power out pTFOut [3,1];   power in pTFIn2 [3,1];  restrictions   causality fixed out pTFIn2; end; icon bg bottom shadow 11776947  figures   line 672 456 672 376 744 376 744 456 712 456 712 448 736 448 736 384 680 384 680 448 704 448 704 456 672 456 color 0 fill 15132390;   line 704 432 680 432 680 424 736 424 736 432 712 432 712 472 704 472 704 432 color 0 fill 6710886;   line 680 384 736 384 736 424 680 424 680 384 color 0 fill 55295;   text 'CV' 712 400 color 0 16;   text 'dW' 704 480 color 0 16;   spline 749 409 757 401 765 409 773 401 color 0;   text 'dQ' 760 424 color 0 16;   spline 749 416 757 408 765 416 773 408 color 0;   spline 749 402 757 394 765 402 773 394 color 0;  terminals   pTFIn1 672 368 fixed;   ppV 704 488 fixed;   vCyl 752 480 fixed;   mCyl 752 464 fixed;   pHT 760 440 fixed;   pTFOut 744 368 fixed;   pTFIn2 712 368 fixed; end; implementation bg  submodels   MSf 232 496    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>  <TimeStamp>2011-11-29 16:14:18</TimeStamp></Description></Information>';    type MSf     ports      power in p;      signal in flow;     restrictions      causality fixed in p;    end;    icon bg bottom     figures      text 'MSf' 232 496 color 0 18 bold;    end;    implementation eqvariables	real effort;equations	p.f = flow; 	effort = p.e;implementation_end;   plug ppV 352 656;   plug vCyl 510.8 552;   plug mCyl 509 535.9;   plug pHT 472 288;   plug pTFOut 493 392;   plug pTFIn2 352.1 240;   plug pTFIn1 208 392.1;   PowerDemux 249.4 392			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 249.5 368 249.5 416 color 0 width 2;   rectangle 243.3 376 253.3 408 color -1;   text '3' 254.5 402 color 8421504 8;  terminals   output1 249.5 376 fixed;   output2 249.5 392 fixed;   output3 249.5 408 fixed;   input 239.5 392 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;			end;   PowerDemux1 352 306.2			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 320 305.8 384 305.8 color 0 width 2;   rectangle 328 299.3 360 309.8 color -1;   text '3' 354 311.1 color 8421504 8;  terminals   output1 328 305.8 fixed;   output2 352 305.8 fixed;   output3 376 305.8 fixed;   input 352 295.4 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;			end;   PowerMux 457.4 392			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 457.5 368 457.5 416 color 0 width 2;   rectangle 451.3 368 461.3 400 color -1;   text '3' 462.5 394 color 8421504 8;  terminals   input1 457.5 376 fixed;   input2 457.5 392 fixed;   input3 457.5 408 fixed;   output 467.5 392 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;			end;   PowerSensor1 352 608    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>  <TimeStamp>2011-11-29 16:29:42</TimeStamp></Description></Information>';    knot PowerSensor     ports      pneumatic knot in p1 [1];      pneumatic knot out p2 [1];      signal knot out P [1] {W} ;     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 345.1 600.8 358.9 615.2 color 0 fill 16777215;      text 'P' 352.5 607.8 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	P = p1.e .* p1.f;implementation_end;   Thdyn_Cont_Vol_Cyl 352 528			specifications active 'Varying'				specification 'Fixed'description '<Information> <Description>    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>  <Version>4.5</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration>  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>    <TimeStamp>2015-10-19 17:21:38</TimeStamp></Description></Information>'; type C  ports   pseudohydraulic in pp;   power in pF;   pseudothermalh in pT;   signal out mCyl;  restrictions   causality preferred out pp; end; icon bg bottom  figures   text 'C' 712 560 51 bold;  terminals   pp 688 536 fixed;   pF 736 536 fixed;   pT 712 536 fixed;   mCyl 736 568 fixed; end; implementation eqparameters	real global fs;	string global dll_ICE;	      // dll filename for subroutines	string global dll_fcn_ThDP;   // subroutines names in the dll file	string global dll_fcn_th_MEV; // subroutines names in the dll file	real global m0; 	real global E0;	real global mb0;	real global V0;variables	real interesting m, E, m_b, V;	real interesting p, T, F;	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];	real inarr_th_MEV[9], outarr_th_MEV[3]; 	real p_prev, T_prev, R_prev, u_prev, Cv_prev;initialequations	p_prev = 10e5;	T_prev = 400;	R_prev = 287;	u_prev = 2.8508e+05;	Cv_prev = 7.31e+02;	V = V0;	equations	m 		= int(pp.f,m0);	E 		= int(pT.f,E0);	m_b	= int(pF.f,mb0);		inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);		p = outarr_th_MEV[1];	T = outarr_th_MEV[2];	F = outarr_th_MEV[3];	T_prev = T;	p_prev = p;	inarr_ThermoProp = [p;T;F;fs;1];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);		R_prev = outarr_ThermoProp[1];	u_prev = outarr_ThermoProp[4];	Cv_prev = outarr_ThermoProp[15];	pp.e = p;	pT.e = T;	pF.e = F;	mCyl = m;implementation_end;specification_end;				specification 'Varying' description '<Information> <Description>    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>  <Version>4.5</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration>  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>    <TimeStamp>2015-10-27 22:31:23</TimeStamp></Description></Information>'; type C  ports   pseudohydraulic in pp;   power in pF;   pseudothermalh in pT;   signal out mCyl;   power out ppV;   signal out vCyl;  restrictions   causality preferred out pp; end; icon bg bottom  figures   text 'C' 352 528 color 0 51 bold;  terminals   pp 344.8 520.7 fixed;   pF 359.2 520.7 fixed;   pT 352 520.7 fixed;   mCyl 359.2 530.4 fixed;   ppV 352 535.3 fixed;   vCyl 359.2 535.3 fixed; end; implementation eqparameters	real global fs;	string global dll_ICE;	      // dll filename for subroutines	string global dll_fcn_ThDP;   // subroutines names in the dll file	string global dll_fcn_th_MEV; // subroutines names in the dll file	real global m0; 	real global E0;	real global mb0;	real global V0;variables	real interesting m, E, m_b, V;	real interesting p, T, F;	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];	real inarr_th_MEV[9], outarr_th_MEV[3]; 	real p_prev, T_prev, R_prev, u_prev, Cv_prev;initialequations	p_prev = 10e5;	T_prev = 400;	R_prev = 287;	u_prev = 2.8508e+05;	Cv_prev = 7.31e+02;	equations	m 		= int(pp.f,m0);	E 		= int(pT.f,E0);	m_b	= int(pF.f,mb0);	V 		= int(ppV.f,V0);		inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);		p = outarr_th_MEV[1];	T = outarr_th_MEV[2];	F = outarr_th_MEV[3];	T_prev = T;	p_prev = p;	inarr_ThermoProp = [p;T;F;fs;1];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);		R_prev = outarr_ThermoProp[1];	u_prev = outarr_ThermoProp[4];	Cv_prev = outarr_ThermoProp[15];	pp.e = p;	pT.e = T;	pF.e = F;	ppV.e = p;	mCyl = m;	vCyl = V;implementation_end;specification_end;			end;   ZeroJunction1 352 392    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      pseudothermalh knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 352 392 color 0 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;   ZeroJunction2 376 408    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      power knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 376 408 color 0 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;   ZeroJunction3 328 376    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      pseudohydraulic knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 328 376 color 0 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;  end;  connections   PowerDemux\output1 => ZeroJunction3\p;   PowerDemux\output2 => ZeroJunction1\p;   PowerDemux\output3 => ZeroJunction2\p;   PowerDemux1\input <= pTFIn2;   PowerDemux1\output1 => ZeroJunction3\p;   PowerDemux1\output2 => ZeroJunction1\p;   PowerDemux1\output3 => ZeroJunction2\p;   PowerMux\output => pTFOut;   PowerSensor1\P -> MSf\flow 232 608;   PowerSensor1\p2 => ppV;   pTFIn1 => PowerDemux\input;   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;   Thdyn_Cont_Vol_Cyl\ppV => PowerSensor1\p1;   Thdyn_Cont_Vol_Cyl\vCyl -> vCyl;   ZeroJunction1\p => MSf\p;   ZeroJunction1\p => pHT;   ZeroJunction1\p => PowerMux\input2;   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;   ZeroJunction2\p => PowerMux\input3;   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;   ZeroJunction3\p => PowerMux\input1;   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;  end;  figures   text 'Global Parameters
     real global slag, Diam, alam, Veps;
     real global pfi0[ncyl];
     real global nstroke;
     real global fs;
     string global dll_ICE;	      // dll filename for subroutines
     string global dll_fcn_ThDP;   // subroutines names in the dll file
     string global dll_fcn_th_MEV; // subroutines names in the dll file

     real global p0[nCyl]; 
     real global T0[nCyl];
     real global F0[nCyl];' 208 120 color 0 16; implementation_end;specification_end;				specification 'Energy3PortFixedAdiab'description '<Information> <Description>    <Version>4.6</Version><IsMainModel>1</IsMainModel>    <LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath>  <TimeStamp>2016-3-30 23:40:37</TimeStamp><KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description> <Attributes>  <GlobalRelations>parameters	real m0 = 4.08190848280315;	real E0 = 884402.21053548;	real mb0 = 0;	real V0 = 1.15;	real p0 = 310000;	real T0 = 304.45;	real F0 = 0;</GlobalRelations> </Attributes></Information>'; type Submodel  ports   power in pTFIn1 [3,1];   signal out mCyl;   power out pTFOut [3,1];   power out pTFOut2 [3,1]; end; icon bg bottom shadow 11776947  figures   line 1028 289 1056 305 color 0 fill 12632256 width 4 end open;   line 1027 261 1055 245 color 0 fill 12632256 width 4 end open;   line 946 277 970 277 color 0 fill 12632256 width 4 end open;   line 975 296 1017 296 1036.8 308.5 1039.5 304.3 1017 288 975 288 975 296 975 296 color 0 fill 12632256;   line 1018 276 1045.5 259 1049 265 1031.3 276 1050.8 288 1047.3 293.8 1018 276 1018 276 color 0 fill 12632256;   line 974.6 288 974.6 264 1014.6 264 1038.6 248 1046.3 259.3 1018.3 276 1047.3 293.3 1038.6 304 1014.6 288 974.6 288 974.6 288 color 0 fill 55295;   text 'CV' 1008 277 color 0 16;   line 974.5 256 1016.5 256 1035.7 242.7 1039.5 248 1016.5 264 974.5 264 974.5 256 974.5 256 color 0 fill 12632256;  terminals   pTFIn1 944 280 fixed;   mCyl 992 280 fixed;   pTFOut 1064 240 fixed;   pTFOut2 1065 307.3 fixed; end; implementation bg  submodels   plug pTFIn1 208 392.1;   plug mCyl 509 536;   plug pTFOut 493 392.1;   plug pTFOut2 352 240;   PowerDemux 250.9 392			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 249.5 368 249.5 416 color 0 width 2;   rectangle 243.3 376 253.3 408 color -1;   text '3' 254.5 402 color 8421504 8;  terminals   output1 249.5 376 fixed;   output2 249.5 392 fixed;   output3 249.5 408 fixed;   input 239.5 392 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;			end;   PowerMux 458.9 392			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 457.5 368 457.5 416 color 0 width 2;   rectangle 451.3 368 461.3 400 color -1;   text '3' 462.5 394 color 8421504 8;  terminals   input1 457.5 376 fixed;   input2 457.5 392 fixed;   input3 457.5 408 fixed;   output 467.5 392 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;			end;   PowerMux1 352 300.5			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 color 0 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 336 304 368 304 color 0 width 2;   rectangle 336 300 368 308 color -1;   text '3' 362 299 color 8421504 8;  terminals   input1 344 304 fixed;   input2 352 304 fixed;   input3 360 304 fixed;   output 352 304 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;			end;   Thdyn_Cont_Vol_Cyl 352 528			specifications active 'Fixed'				specification 'Fixed' description '<Information> <Description>    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>  <Version>4.5</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration>  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>    <TimeStamp>2015-10-19 17:21:38</TimeStamp></Description></Information>'; type C  ports   pseudohydraulic in pp;   power in pF;   pseudothermalh in pT;   signal out mCyl;  restrictions   causality preferred out pp; end; icon bg bottom  figures   text 'C' 352 528 color 0 51 bold;  terminals   pp 344.8 520.7 fixed;   pF 359.2 520.7 fixed;   pT 352 520.7 fixed;   mCyl 359.2 530.4 fixed; end; implementation eqparameters	real global fs;	string global dll_ICE;	      // dll filename for subroutines	string global dll_fcn_ThDP;   // subroutines names in the dll file	string global dll_fcn_th_MEV; // subroutines names in the dll file	real global m0; 	real global E0;	real global mb0;	real global V0;variables	real interesting m, E, m_b, V;	real interesting p, T, F;	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];	real inarr_th_MEV[9], outarr_th_MEV[3]; 	real p_prev, T_prev, R_prev, u_prev, Cv_prev;initialequations	p_prev = 10e5;	T_prev = 400;	R_prev = 287;	u_prev = 2.8508e+05;	Cv_prev = 7.31e+02;	V = V0;	equations	m 		= int(pp.f,m0);	E 		= int(pT.f,E0);	m_b	= int(pF.f,mb0);		inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);		p = outarr_th_MEV[1];	T = outarr_th_MEV[2];	F = outarr_th_MEV[3];	T_prev = T;	p_prev = p;	inarr_ThermoProp = [p;T;F;fs;1];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);		R_prev = outarr_ThermoProp[1];	u_prev = outarr_ThermoProp[4];	Cv_prev = outarr_ThermoProp[15];	pp.e = p;	pT.e = T;	pF.e = F;	mCyl = m;implementation_end;specification_end;				specification 'Varying'description '<Information> <Description>    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>  <Version>4.5</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration>  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>    <TimeStamp>2015-10-27 22:31:23</TimeStamp></Description></Information>'; type C  ports   pseudohydraulic in pp;   power in pF;   pseudothermalh in pT;   signal out mCyl;   power out ppV;   signal out vCyl;  restrictions   causality preferred out pp; end; icon bg bottom  figures   text 'C' 712 560 51 bold;  terminals   pp 688 536 fixed;   pF 736 536 fixed;   pT 712 536 fixed;   mCyl 736 568 fixed;   ppV 712 584 fixed;   vCyl 736 584 fixed; end; implementation eqparameters	real global fs;	string global dll_ICE;	      // dll filename for subroutines	string global dll_fcn_ThDP;   // subroutines names in the dll file	string global dll_fcn_th_MEV; // subroutines names in the dll file	real global m0; 	real global E0;	real global mb0;	real global V0;variables	real interesting m, E, m_b, V;	real interesting p, T, F;	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];	real inarr_th_MEV[9], outarr_th_MEV[3]; 	real p_prev, T_prev, R_prev, u_prev, Cv_prev;initialequations	p_prev = 10e5;	T_prev = 400;	R_prev = 287;	u_prev = 2.8508e+05;	Cv_prev = 7.31e+02;	equations	m 		= int(pp.f,m0);	E 		= int(pT.f,E0);	m_b	= int(pF.f,mb0);	V 		= int(ppV.f,V0);		inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);		p = outarr_th_MEV[1];	T = outarr_th_MEV[2];	F = outarr_th_MEV[3];	T_prev = T;	p_prev = p;	inarr_ThermoProp = [p;T;F;fs;1];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);		R_prev = outarr_ThermoProp[1];	u_prev = outarr_ThermoProp[4];	Cv_prev = outarr_ThermoProp[15];	pp.e = p;	pT.e = T;	pF.e = F;	ppV.e = p;	mCyl = m;	vCyl = V;implementation_end;specification_end;			end;   ZeroJunction1 352 392    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      pseudothermalh knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 352 392 color 0 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;   ZeroJunction2 376 408    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      power knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 376 408 color 0 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;   ZeroJunction3 328 376    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      pseudohydraulic knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 328 376 color 0 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;  end;  connections   PowerDemux\output1 => ZeroJunction3\p;   PowerDemux\output2 => ZeroJunction1\p;   PowerDemux\output3 => ZeroJunction2\p;   PowerMux\output => pTFOut;   PowerMux1\output => pTFOut2;   pTFIn1 => PowerDemux\input;   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;   ZeroJunction1\p => PowerMux\input2;   ZeroJunction1\p => PowerMux1\input2;   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;   ZeroJunction2\p => PowerMux\input3;   ZeroJunction2\p => PowerMux1\input3;   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;   ZeroJunction3\p => PowerMux\input1;   ZeroJunction3\p => PowerMux1\input1;   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;  end; implementation_end;specification_end;			end;   exhVV 872 312			specifications active 'ExhVVVarLift'				specification 'ExhVV'description '<Information> <Description>    <Version>4.5</Version><IsMainModel>1</IsMainModel>    <LibraryPath>Components\PoppetValve.emx</LibraryPath>  <TimeStamp>2015-11-2 23:50:38</TimeStamp><KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   power in pTFIn [3,1];   signal in CA;   signal in VONom;   signal in dVONom;   power out pTFOut [3,1];   signal out aOpenEff;   signal out Cd;   signal in areaMultiplier; end; icon bg bottom shadow 11776947  figures   line 224 209 256 209 color 0 fill 15132390;   line 224 209 224 257 color 0 fill 15132390;   line 304 211 304 255 color 0 fill 15132390;   line 272 209 304 209 color 0 fill 15132390;   line 264 224 240 240 288 240 264 224 color 0 fill 8355711;   line 256 209 256 217 240 225 232 225 232 257 224 257 color 0 fill 15132390;   line 272 209 272 217 288 225 296 225 296 257 304 257 304 209 272 209 color 0 fill 12632256;   line 256 209 224 209 224 257 232 257 232 225 240 225 256 217 256 209 color 0 fill 12632256;   line 264 225 264 193 color 0 fill 15132390;   text 'PoppetValve' 264 265 color 0 16;  terminals   pTFIn 208 232 fixed;   CA 304 184 fixed;   VONom 224 184 fixed;   dVONom 248 184 fixed;   pTFOut 320 232 fixed;   aOpenEff 320 208 fixed;   Cd 320 184 fixed;   areaMultiplier 280 184 fixed; end; implementation bg  submodels   EffortSensor1 272 319    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      power knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;      text 'e' 272.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   EffortSensor2 416 319    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      pseudohydraulic knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;      text 'e' 416.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   ExhVVArea 328.1 200.1			specifications active 'Exhaust'				specification 'Exhaust' description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:54:56</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;   text 'VVArea' 328 200 color 0 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	real global DvExh;		 	// Valve Seat diameter	real global betaExh;   	// valve seat angle	real global wExh;      	// valve seat width	real global DpExh;    		// Valve port diameter	real global DsExh; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));		else 			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);			else				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);			end;		end;				L_Dv = lift/DvExh;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;				specification 'Intake'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 22:48:36</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 fill 15132390;   text 'VVArea' 328 200 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	real global DvIntake;		 	// Valve Seat diameter	real global betaIntake;   	// valve seat angle	real global wIntake;      	// valve seat width	real global DpIntake;    		// Valve port diameter	real global DsIntake; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));		else 			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);			else				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);			end;		end;				L_Dv = lift/DvIntake;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;			end;   ExhVVLift1 304 120			specifications active 'Exhaust'				specification 'Exhaust' description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-11-2 23:44:24</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 267.9 104 340.1 136 color 0 fill 15132390;   text 'VVLift' 304 120 color 0 16;  terminals   lift 304 144 fixed;   CA 328 96 fixed;   CA_start_nom 280 96 fixed;   dCA_lift_nom 304 96 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox;	string global fnc_interp;	integer global ExhProfNoRow1;	integer global ExhProfNoRow2;	real global ExhVVProfUpX[ExhProfNoRow1];	real global ExhVVProfUpY[ExhProfNoRow1];	real global ExhVVProfDownX[ExhProfNoRow2];	real global ExhVVProfDownY[ExhProfNoRow2];	real global ExhLift_max;	integer global nStroke;	real global ExhCA_start_ref; //Reference start CA for start of valve lift	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed	real global ExhdCA_lift_top_ref; //Reference duration for lift upvariables	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = ExhProfNoRow1;	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;			inarr2[1] = ExhProfNoRow2;	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			equations	CA_start = CA_start_nom*ExhCA_start_ref;	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;		dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= ExhdCA_lift_up then			inarr1[ExhProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);							inarr2[ExhProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = ExhLift_max*lift; implementation_end;specification_end;				specification 'Intake'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:16:35</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 763.9 96 836.1 128 fill 15132390;   text 'VVLift' 800 112 16;  terminals   lift 800 136 fixed;   CA 824 88 fixed;   CA_start_nom 776 88 fixed;   dCA_lift_nom 800 88 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox = 'dllTool20Sim.dll';	string global fnc_interp = 'interpolate';	integer global InProfNoRow1;	integer global InProfNoRow2;	real global InVVProfUpX[InProfNoRow1]; 	real global InVVProfUpY[InProfNoRow1];	real global InVVProfDownX[InProfNoRow2];	real global InVVProfDownY[InProfNoRow2];	real global InLift_max = 1;	real global nstorke = 2;	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift upvariables	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = InProfNoRow1;	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;			inarr2[1] = InProfNoRow2;	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			equations	CA_start = CA_start_nom*InCA_start_ref;	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;		dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;	phi = CA*180/pi mod (nstorke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= IndCA_lift_up then			inarr1[InProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= IndCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);							inarr2[InProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = InLift_max*lift; implementation_end;specification_end;			end;   MultiplyDivide1 352 248    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>  <TimeStamp>2007-9-27 10:14:59</TimeStamp></Description>';    knot MultiplyDivide     ports      signal knot duplicatable in multiply [1];      signal knot duplicatable in divide [1];      signal knot out output [1];    end;    icon bg ellipse     figures      ellipse 344 240 360 256 color 0 fill 16777215;    end;    implementation eqequations	output = mul (collect (multiply)) ./ mul (collect (divide));     implementation_end;   plug pTFOut 504 336;   plug aOpenEff 520.1 280;   plug areaMultiplier 448 32;   plug pTFIn 200 336;   plug dVONom 304 56;   plug VONom 280.1 32;   plug CA 327.8 69.9;   plug Cd 328 264;   PowerDemux 241.5 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 240 312 240 360 color 0 width 2;   rectangle 235 320 243 352 color -1;   text '3' 244 346 color 8421504 8;  terminals   output1 240 320 fixed;   output2 240 336 fixed;   output3 240 352 fixed;   input 232 336 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;			end;   PowerMux 449.5 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 448 312 448 360 color 0 width 2;   rectangle 443 312 451 344 color -1;   text '3' 452 338 color 8421504 8;  terminals   input1 448 320 fixed;   input2 448 336 fixed;   input3 448 352 fixed;   output 456 336 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;			end;   Splitter1 352 280    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;      ellipse 347.7 275.7 356.3 284.3 color -1;     terminals      input 352 280 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Submodel2 352 359.5    description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 16:30:00</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate> </Description></Information>';    type Submodel     ports      signal in Aeff; "Effective area of nozzle (m2)"      pseudohydraulic in ppIn;      pseudothermalh in pTIn;      power in pFIn;      pseudohydraulic out ppOut;      pseudothermalh out pTOut;      power out pFOut;     restrictions      causality fixed in ppOut;      causality fixed in pFOut;      causality fixed in ppIn;      causality fixed in pTIn;      causality fixed in pFIn;    end;    icon bg bottom     figures      text 'R' 352 336 color 0 53 bold;      text 'IdealNozzleCompFlow' 352 376 color 0 16;     terminals      Aeff 352 304 fixed;      ppIn 320 320 fixed;      pTIn 320 336 fixed;      pFIn 320 352 fixed;      ppOut 384 320 fixed;      pTOut 384 336 fixed;      pFOut 384 352 fixed;    end;    implementation eq/* Ideal Nozzle ModelUses ideal nozzle equation for compressible flows assuming isentropic process. Flow restriction field. No states.Input   - Effective area of nozzle (Aeff)  - p,T,F in  - p,T,F outOutput  - dm, dE, dmb in  - dm, dE, dmb out*/parameters 	real global fs;	string global dll_ICE;	string global dll_fcn_idealNozzle;variables	real pIn, TIn, FIn, pOut;	real dm, dE, dmb;	real aa, d, pr;	real	inArrFlow[7];	real outArrFlow[3];equations  // start typing here 	aa = ppIn.e / ppOut.e;	if (aa > 1) then		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;		pOut = ppOut.e;	else		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;		pOut = ppIn.e;	end;		// Calculate thermodynamic properties from (T,P,x)	inArrFlow = [1;Aeff;pIn;pOut;TIn;FIn;fs];	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);			dm = outArrFlow[1]*d;	dE = outArrFlow[2]*d;		dmb = outArrFlow[3]*d;	ppIn.dm = dm;	ppOut.dm  = dm;	pTIn.dH = dE;	pTOut.dH = dE;	pFIn.f = dmb;	pFOut.f = dmb;implementation_end;  end;  connections   areaMultiplier -> MultiplyDivide1\multiply 448 248;   CA -> ExhVVLift1\CA;   dVONom -> ExhVVLift1\dCA_lift_nom;   EffortSensor1\effort -> ExhVVArea\pIn 272 160 328 160;   EffortSensor1\p2 => Submodel2\ppIn;   EffortSensor2\effort -> ExhVVArea\pOut 416 160 352 160;   EffortSensor2\p2 => PowerMux\input1;   ExhVVArea\aEff -> MultiplyDivide1\multiply;   ExhVVArea\Cd -> Cd;   ExhVVLift1\lift -> ExhVVArea\lift;   MultiplyDivide1\output -> Splitter1\input;   PowerDemux\output1 => EffortSensor1\p1;   PowerDemux\output2 => Submodel2\pTIn;   PowerDemux\output3 => Submodel2\pFIn;   PowerMux\output => pTFOut;   pTFIn => PowerDemux\input;   Splitter1\output -> aOpenEff;   Splitter1\output -> Submodel2\Aeff;   Submodel2\pFOut => PowerMux\input3;   Submodel2\ppOut => EffortSensor2\p1;   Submodel2\pTOut => PowerMux\input2;   VONom -> ExhVVLift1\CA_start_nom;  end;  figures   text 'Global parameters      real global lift_max;     // Maximum lift of the vavle      real global nstorke;     // number of stroke      real hidden global CA_start_ref;        //Reference start CA for start of valve lift      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed      real hidden global dCA_lift_top_ref;   //Reference duration for lift up      real global Dv;		 	// Valve Seat diameter      real global beta;   	// valve seat angle      real global w;      	// valve seat width      real global Dp;    		// Valve port diameter      real global Ds; 			// Valve stem diameter      ' 288 504 color 0 16; implementation_end;specification_end;				specification 'ExhVVVarLift' description '<Information><Description><Version>4.6</Version><IsMainModel>1</IsMainModel><LibraryPath>Components\PoppetValve.emx</LibraryPath><TimeStamp>2016-4-1 23:10:28</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>'; type Submodel  ports   power in pTFIn [3,1];   signal in CA;   signal in VONom;   signal in dVONom;   power out pTFOut [3,1];   signal out aOpenEff;   signal out Cd;   signal in areaMultiplier; end; icon bg bottom shadow 11776947  figures   line 832 289 864 289 color 0 fill 15132390;   line 832 289 832 337 color 0 fill 15132390;   line 912 291 912 335 color 0 fill 15132390;   line 880 289 912 289 color 0 fill 15132390;   line 872 304 848 320 896 320 872 304 color 0 fill 8355711;   line 864 289 864 297 848 305 840 305 840 337 832 337 color 0 fill 15132390;   line 880 289 880 297 896 305 904 305 904 337 912 337 912 289 880 289 color 0 fill 12632256;   line 864 289 832 289 832 337 840 337 840 305 848 305 864 297 864 289 color 0 fill 12632256;   line 872 305 872 273 color 0 fill 15132390;   text 'PoppetValve' 872 345 color 0 16;  terminals   pTFIn 816 312 fixed;   CA 912 264 fixed;   VONom 832 264 fixed;   dVONom 856 264 fixed;   pTFOut 928 312 fixed;   aOpenEff 928 288 fixed;   Cd 928 264 fixed;   areaMultiplier 888 264 fixed; end; implementation bg  submodels   EffortSensor1 272 319    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      power knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;      text 'e' 272.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   EffortSensor2 416 319    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      pseudohydraulic knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;      text 'e' 416.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   IntakeVVArea 328.1 200.1			specifications active 'Exhaust'				specification 'Exhaust' description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:54:56</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;   text 'VVArea' 328 200 color 0 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	integer global noExhVV;	real global DvExh;		 	// Valve Seat diameter	real global betaExh;   	// valve seat angle	real global wExh;      	// valve seat width	real global DpExh;    		// Valve port diameter	real global DsExh; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));		else 			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);			else				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);			end;		end;				L_Dv = lift/DvExh;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;				specification 'Intake'description '<Information> <Description>    <Version>4.6</Version>  <LibraryPath>Components\ValveArea.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2016-4-4 11:12:58</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;   text 'VVArea' 328 200 color 0 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	integer global noInVV; 		// numver of intake valves	real global DvIntake;		 	// Valve Seat diameter	real global betaIntake;   	// valve seat angle	real global wIntake;      	// valve seat width	real global DpIntake;    		// Valve port diameter	real global DsIntake; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));		else 			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);			else				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);			end;		end;				L_Dv = lift/DvIntake;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;			end;   IntakeVVLift1 304 120			specifications active 'ExhaustVarLift'				specification 'Exhaust'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-11-2 23:44:24</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 763.9 96 836.1 128 fill 15132390;   text 'VVLift' 800 112 16;  terminals   lift 800 136 fixed;   CA 824 88 fixed;   CA_start_nom 776 88 fixed;   dCA_lift_nom 800 88 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox;	string global fnc_interp;	integer global ExhProfNoRow1;	integer global ExhProfNoRow2;	real global ExhVVProfUpX[ExhProfNoRow1];	real global ExhVVProfUpY[ExhProfNoRow1];	real global ExhVVProfDownX[ExhProfNoRow2];	real global ExhVVProfDownY[ExhProfNoRow2];	real global ExhLift_max;	integer global nStroke;	real global ExhCA_start_ref; //Reference start CA for start of valve lift	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed	real global ExhdCA_lift_top_ref; //Reference duration for lift upvariables	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = ExhProfNoRow1;	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;			inarr2[1] = ExhProfNoRow2;	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			equations	CA_start = CA_start_nom*ExhCA_start_ref;	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;		dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= ExhdCA_lift_up then			inarr1[ExhProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);							inarr2[ExhProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = ExhLift_max*lift; implementation_end;specification_end;				specification 'ExhaustVarLift' description '<Information> <Description>    <Version>4.6</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2016-4-4 11:19:41</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description> <Attributes>  <GlobalRelations></GlobalRelations> </Attributes></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 267.9 104 340.1 136 color 0 fill 15132390;   text 'VVLift' 304 120 color 0 16;  terminals   lift 304 144 fixed;   CA 328 96 fixed;   CA_start_nom 280 96 fixed;   dCA_lift_nom 304 96 fixed; end; implementation eqparameters	string global dllToolbox;	string global fnc_interp;	integer ExhProfNoRow1 = 30;	integer ExhProfNoRow2 = 30;	real global ExhVVProfUp[ExhProfNoRow1];	real global ExhVVProfDown[ExhProfNoRow1];	real global ExhLift_max;	integer global nStroke;	real global ExhCA_start_ref; //Reference start CA for start of valve lift	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift upvariables	real inarr1[ExhProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[ExhProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real CA_start_cyc;	real dCA_total_ref;	real phi;	integer i;	boolean reset;initialequations	CA_start_cyc = 720;	reset = true;	inarr1[1] = ExhProfNoRow1;	for i = 1 to ExhProfNoRow1 do		inarr1[i+1] = i / ExhProfNoRow1;	end;	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUp;			inarr2[1] = ExhProfNoRow2;	for i = 1 to ExhProfNoRow2 do		inarr2[i+1] = i / ExhProfNoRow2;	end;		inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDown;		dCA_total_ref = ExhdCA_lift_up + ExhdCA_lift_down;		equations	CA_start = CA_start_nom*ExhCA_start_ref;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and reset == true then		reset = false;		CA_start_cyc = CA_start;		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);		dCA_lift = dCA_total - dCA_total_ref;		end;	if phi > CA_start_cyc then		if phi < CA_start_cyc + dCA_total then			CA_VV = (phi - CA_start_cyc)/ExhdCA_lift_up;			if CA_VV <= 1 then				inarr1[ExhProfNoRow1*2+2] = CA_VV;				lift = dll(dllToolbox, fnc_interp, inarr1);			else 					CA_VV = (phi - CA_start_cyc)/(ExhdCA_lift_up + dCA_lift);				if CA_VV <= 1 then					lift = 1;			  	else 						CA_VV = (phi - (CA_start_cyc + ExhdCA_lift_up + dCA_lift))/ExhdCA_lift_down;					inarr2[ExhProfNoRow2*2+2] = CA_VV;					lift = dll(dllToolbox, fnc_interp,inarr2);				end;			end;		else			lift = 0;		end;	else		lift = 0;			if reset == false then			reset = true;			CA_start_cyc = 720;		end;								end;				lift = ExhLift_max*lift; implementation_end;specification_end;				specification 'Intake'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:16:35</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 267.9 96 340.1 128 color 0 fill 15132390;   text 'VVLift' 304 112 color 0 16;  terminals   lift 304 136 fixed;   CA 328 88 fixed;   CA_start_nom 280 88 fixed;   dCA_lift_nom 304 88 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox = 'dllTool20Sim.dll';	string global fnc_interp = 'interpolate';	integer global InProfNoRow1;	integer global InProfNoRow2;	real global InVVProfUpX[InProfNoRow1]; 	real global InVVProfUpY[InProfNoRow1];	real global InVVProfDownX[InProfNoRow2];	real global InVVProfDownY[InProfNoRow2];	real global InLift_max = 1;	real global nstorke = 0;	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift upvariables	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = InProfNoRow1;	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;			inarr2[1] = InProfNoRow2;	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			equations	CA_start = CA_start_nom*InCA_start_ref;	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;		dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;	phi = CA*180/pi mod (nstorke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= IndCA_lift_up then			inarr1[InProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= IndCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);							inarr2[InProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = InLift_max*lift; implementation_end;specification_end;				specification 'IntakeLiftVar'description '<Information><Description><Version>4.6</Version><LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2016-4-1 23:07:16</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 267.9 104 340.1 136 color 0 fill 15132390;   text 'VVLift' 304 120 color 0 16;  terminals   lift 304 144 fixed;   CA 328 96 fixed;   CA_start_nom 280 96 fixed;   dCA_lift_nom 304 96 fixed; end; implementation eqparameters	string global dllToolbox;	string global fnc_interp;		integer global InProfNoRow1;	integer global InProfNoRow2;	real global InVVProfUp[InProfNoRow1];	real global InVVProfDown[InProfNoRow1];	real global InLift_max;	real global nStroke;	real global InCA_start_ref; //Reference start CA for start of valve lift	real global IndCA_lift_up;	 //Lift up time (should not be changed unless file is changed	real global IndCA_lift_down; //Lift down time (should not be changed unless file is changed//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift upvariables	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real CA_start_cyc;	real dCA_total_ref;	real phi;	integer i;	boolean reset;initialequations	CA_start_cyc = 180*nStroke;	reset = true;	inarr1[1] = InProfNoRow1;	for i = 1 to InProfNoRow1 do		inarr1[i+1] = i / InProfNoRow1;	end;	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUp;			inarr2[1] = InProfNoRow2;	for i = 1 to InProfNoRow2 do		inarr2[i+1] = i / InProfNoRow2;	end;		inarr2[InProfNoRow2+2:InProfNoRow2*2+1] = InVVProfDown;		dCA_total_ref = IndCA_lift_up + IndCA_lift_down;		equations	CA_start = CA_start_nom*InCA_start_ref;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and reset == true then		reset = false;		CA_start_cyc = CA_start;		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);		dCA_lift = dCA_total - dCA_total_ref;		end;	if phi > CA_start_cyc then		if phi < CA_start_cyc + dCA_total then			CA_VV = (phi - CA_start_cyc)/IndCA_lift_up;			if CA_VV <= 1 then				inarr1[InProfNoRow1*2+2] = CA_VV;				lift = dll(dllToolbox, fnc_interp, inarr1);			else 					CA_VV = (phi - CA_start_cyc)/(IndCA_lift_up + dCA_lift);				if CA_VV <= 1 then					lift = 1;			  	else 						CA_VV = (phi - (CA_start_cyc + IndCA_lift_up + dCA_lift))/IndCA_lift_down;					inarr2[InProfNoRow2*2+2] = CA_VV;					lift = dll(dllToolbox, fnc_interp,inarr2);				end;			end;		else			lift = 0;		end;	else		lift = 0;			if reset == false then			reset = true;			CA_start_cyc = 720;		end;								end;				lift = InLift_max*lift; implementation_end;specification_end;			end;   MultiplyDivide1 352 248    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>  <TimeStamp>2007-9-27 10:14:59</TimeStamp></Description>';    knot MultiplyDivide     ports      signal knot duplicatable in multiply [1];      signal knot duplicatable in divide [1];      signal knot out output [1];    end;    icon bg ellipse     figures      ellipse 344 240 360 256 color 0 fill 16777215;    end;    implementation eqequations	output = mul (collect (multiply)) ./ mul (collect (divide));     implementation_end;   plug pTFOut 504 336;   plug aOpenEff 520.1 280;   plug areaMultiplier 448 32;   plug pTFIn 200 336;   plug dVONom 304 56;   plug VONom 280.1 32;   plug CA 327.8 69.9;   plug Cd 328 264;   PowerDemux 241.5 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 240 312 240 360 color 0 width 2;   rectangle 235 320 243 352 color -1;   text '3' 244 346 color 8421504 8;  terminals   output1 240 320 fixed;   output2 240 336 fixed;   output3 240 352 fixed;   input 232 336 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;			end;   PowerMux 449.5 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 448 312 448 360 color 0 width 2;   rectangle 443 312 451 344 color -1;   text '3' 452 338 color 8421504 8;  terminals   input1 448 320 fixed;   input2 448 336 fixed;   input3 448 352 fixed;   output 456 336 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;			end;   Splitter1 352 280    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;      ellipse 347.7 275.7 356.3 284.3 color -1;     terminals      input 352 280 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Submodel2 352 359.5    description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 16:30:00</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate> </Description></Information>';    type Submodel     ports      signal in Aeff; "Effective area of nozzle (m2)"      pseudohydraulic in ppIn;      pseudothermalh in pTIn;      power in pFIn;      pseudohydraulic out ppOut;      pseudothermalh out pTOut;      power out pFOut;     restrictions      causality fixed in ppOut;      causality fixed in pFOut;      causality fixed in ppIn;      causality fixed in pTIn;      causality fixed in pFIn;    end;    icon bg bottom     figures      text 'R' 352 336 color 0 53 bold;      text 'IdealNozzle
CompFlow' 352 376 color 0 16;     terminals      Aeff 352 304 fixed;      ppIn 320 320 fixed;      pTIn 320 336 fixed;      pFIn 320 352 fixed;      ppOut 384 320 fixed;      pTOut 384 336 fixed;      pFOut 384 352 fixed;    end;    implementation eq/* Ideal Nozzle ModelUses ideal nozzle equation for compressible flows assuming isentropic process. Flow restriction field. No states.Input   - Effective area of nozzle (Aeff)  - p,T,F in  - p,T,F outOutput  - dm, dE, dmb in  - dm, dE, dmb out*/parameters 	real global fs;	string global dll_ICE;	string global dll_fcn_idealNozzle;variables	real pIn, TIn, FIn, pOut;	real dm, dE, dmb;	real aa, d, pr;	real	inArrFlow[7];	real outArrFlow[3];equations  // start typing here 	aa = ppIn.e / ppOut.e;	if (aa > 1) then		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;		pOut = ppOut.e;	else		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;		pOut = ppIn.e;	end;		// Calculate thermodynamic properties from (T,P,x)	inArrFlow = [1;Aeff;pIn;pOut;TIn;FIn;fs];	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);			dm = outArrFlow[1]*d;	dE = outArrFlow[2]*d;		dmb = outArrFlow[3]*d;	ppIn.dm = dm;	ppOut.dm  = dm;	pTIn.dH = dE;	pTOut.dH = dE;	pFIn.f = dmb;	pFOut.f = dmb;implementation_end;  end;  connections   areaMultiplier -> MultiplyDivide1\multiply 448 248;   CA -> IntakeVVLift1\CA;   dVONom -> IntakeVVLift1\dCA_lift_nom;   EffortSensor1\effort -> IntakeVVArea\pIn 272 160 328 160;   EffortSensor1\p2 => Submodel2\ppIn;   EffortSensor2\effort -> IntakeVVArea\pOut 416 160 352 160;   EffortSensor2\p2 => PowerMux\input1;   IntakeVVArea\aEff -> MultiplyDivide1\multiply;   IntakeVVArea\Cd -> Cd;   IntakeVVLift1\lift -> IntakeVVArea\lift;   MultiplyDivide1\output -> Splitter1\input;   PowerDemux\output1 => EffortSensor1\p1;   PowerDemux\output2 => Submodel2\pTIn;   PowerDemux\output3 => Submodel2\pFIn;   PowerMux\output => pTFOut;   pTFIn => PowerDemux\input;   Splitter1\output -> aOpenEff;   Splitter1\output -> Submodel2\Aeff;   Submodel2\pFOut => PowerMux\input3;   Submodel2\ppOut => EffortSensor2\p1;   Submodel2\pTOut => PowerMux\input2;   VONom -> IntakeVVLift1\CA_start_nom;  end;  figures   text 'Global parameters
      real global lift_max;     // Maximum lift of the vavle
      real global nstorke;     // number of stroke
      real hidden global CA_start_ref;        //Reference start CA for start of valve lift
      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed
      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed
      real hidden global dCA_lift_top_ref;   //Reference duration for lift up
      real global Dv;		 	// Valve Seat diameter
      real global beta;   	// valve seat angle
      real global w;      	// valve seat width
      real global Dp;    		// Valve port diameter
      real global Ds; 			// Valve stem diameter
      
' 288 504 color 0 16; implementation_end;specification_end;				specification 'IntakeVV'description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>Components\PoppetValve.emx</LibraryPath><TimeStamp>2015-10-20 15:58:52</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>'; type Submodel  ports   power in pTFIn [3,1];   signal in CA;   signal in VONom;   signal in dVONom;   power out pTFOut [3,1];   signal out aOpenEff;   signal out Cd;   signal in areaMultiplier; end; icon bg bottom shadow 11776947  figures   line 488 289 520 289 color 0 fill 15132390;   line 488 289 488 337 color 0 fill 15132390;   line 568 291 568 335 color 0 fill 15132390;   line 536 289 568 289 color 0 fill 15132390;   line 528 304 504 320 552 320 528 304 color 0 fill 8355711;   line 520 289 520 297 504 305 496 305 496 337 488 337 color 0 fill 15132390;   line 536 289 536 297 552 305 560 305 560 337 568 337 568 289 536 289 color 0 fill 12632256;   line 520 289 488 289 488 337 496 337 496 305 504 305 520 297 520 289 color 0 fill 12632256;   line 528 305 528 273 color 0 fill 15132390;   text 'PoppetValve' 528 345 color 0 16;  terminals   pTFIn 472 312 fixed;   CA 568 264 fixed;   VONom 488 264 fixed;   dVONom 512 264 fixed;   pTFOut 584 312 fixed;   aOpenEff 584 288 fixed;   Cd 584 264 fixed;   areaMultiplier 544 264 fixed; end; implementation bg  submodels   EffortSensor1 272 320    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      power knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;      text 'e' 272.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   EffortSensor2 416 320    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      pseudohydraulic knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;      text 'e' 416.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   ExhVVLift1 304 112			specifications active 'Intake'				specification 'Exhaust'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-11-2 23:44:24</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 763.9 96 836.1 128 fill 15132390;   text 'VVLift' 800 112 16;  terminals   lift 800 136 fixed;   CA 824 88 fixed;   CA_start_nom 776 88 fixed;   dCA_lift_nom 800 88 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox;	string global fnc_interp;	integer global ExhProfNoRow1;	integer global ExhProfNoRow2;	real global ExhVVProfUpX[ExhProfNoRow1];	real global ExhVVProfUpY[ExhProfNoRow1];	real global ExhVVProfDownX[ExhProfNoRow2];	real global ExhVVProfDownY[ExhProfNoRow2];	real global ExhLift_max;	integer global nStroke;	real global ExhCA_start_ref; //Reference start CA for start of valve lift	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed	real global ExhdCA_lift_top_ref; //Reference duration for lift upvariables	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = ExhProfNoRow1;	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;			inarr2[1] = ExhProfNoRow2;	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			equations	CA_start = CA_start_nom*ExhCA_start_ref;	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;		dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= ExhdCA_lift_up then			inarr1[ExhProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);							inarr2[ExhProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = ExhLift_max*lift; implementation_end;specification_end;				specification 'Intake' description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:16:35</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 267.9 96 340.1 128 color 0 fill 15132390;   text 'VVLift' 304 112 color 0 16;  terminals   lift 304 136 fixed;   CA 328 88 fixed;   CA_start_nom 280 88 fixed;   dCA_lift_nom 304 88 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox = 'dllTool20Sim.dll';	string global fnc_interp = 'interpolate';	integer global InProfNoRow1;	integer global InProfNoRow2;	real global InVVProfUpX[InProfNoRow1]; 	real global InVVProfUpY[InProfNoRow1];	real global InVVProfDownX[InProfNoRow2];	real global InVVProfDownY[InProfNoRow2];	real global InLift_max = 1;	real global nstorke = 0;	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift upvariables	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = InProfNoRow1;	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;			inarr2[1] = InProfNoRow2;	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			equations	CA_start = CA_start_nom*InCA_start_ref;	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;		dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;	phi = CA*180/pi mod (nstorke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= IndCA_lift_up then			inarr1[InProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= IndCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);							inarr2[InProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = InLift_max*lift; implementation_end;specification_end;			end;   IntakeVVArea 328.1 200.1			specifications active 'Intake'				specification 'Exhaust'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:54:56</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 fill 15132390;   text 'VVArea' 328 200 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	real global DvExh;		 	// Valve Seat diameter	real global betaExh;   	// valve seat angle	real global wExh;      	// valve seat width	real global DpExh;    		// Valve port diameter	real global DsExh; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));		else 			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);			else				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);			end;		end;				L_Dv = lift/DvExh;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;				specification 'Intake' description '<Information><Description><Version>4.5</Version><LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2015-6-22 22:48:36</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;   text 'VVArea' 328 200 color 0 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	real global DvIntake;		 	// Valve Seat diameter	real global betaIntake;   	// valve seat angle	real global wIntake;      	// valve seat width	real global DpIntake;    		// Valve port diameter	real global DsIntake; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));		else 			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);			else				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);			end;		end;				L_Dv = lift/DvIntake;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;			end;   MultiplyDivide1 352 248    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>  <TimeStamp>2007-9-27 10:14:59</TimeStamp></Description>';    knot MultiplyDivide     ports      signal knot duplicatable in multiply [1];      signal knot duplicatable in divide [1];      signal knot out output [1];    end;    icon bg ellipse     figures      ellipse 344 240 360 256 color 0 fill 16777215;    end;    implementation eqequations	output = mul (collect (multiply)) ./ mul (collect (divide));     implementation_end;   plug pTFOut 504 336;   plug aOpenEff 520.1 280;   plug areaMultiplier 448 32;   plug pTFIn 200 336;   plug dVONom 304 56;   plug VONom 280.1 32;   plug CA 327.8 69.9;   plug Cd 328 264;   PowerDemux 240 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 240 312 240 360 color 0 width 2;   rectangle 235 320 243 352 color -1;   text '3' 244 346 color 8421504 8;  terminals   output1 240 320 fixed;   output2 240 336 fixed;   output3 240 352 fixed;   input 232 336 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;			end;   PowerMux 448 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 448 312 448 360 color 0 width 2;   rectangle 443 312 451 344 color -1;   text '3' 452 338 color 8421504 8;  terminals   input1 448 320 fixed;   input2 448 336 fixed;   input3 448 352 fixed;   output 456 336 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;			end;   Splitter1 352 280    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;      ellipse 347.7 275.7 356.3 284.3 color -1;     terminals      input 352 280 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Submodel2 352 351    description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 16:30:00</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate> </Description></Information>';    type Submodel     ports      signal in Aeff; "Effective area of nozzle (m2)"      pseudohydraulic in ppIn;      pseudothermalh in pTIn;      power in pFIn;      pseudohydraulic out ppOut;      pseudothermalh out pTOut;      power out pFOut;     restrictions      causality fixed in ppOut;      causality fixed in pFOut;      causality fixed in ppIn;      causality fixed in pTIn;      causality fixed in pFIn;    end;    icon bg bottom     figures      text 'R' 352 336 color 0 53 bold;      text 'IdealNozzleCompFlow' 352 376 color 0 16;     terminals      Aeff 352 304 fixed;      ppIn 320 320 fixed;      pTIn 320 336 fixed;      pFIn 320 352 fixed;      ppOut 384 320 fixed;      pTOut 384 336 fixed;      pFOut 384 352 fixed;    end;    implementation eq/* Ideal Nozzle ModelUses ideal nozzle equation for compressible flows assuming isentropic process. Flow restriction field. No states.Input   - Effective area of nozzle (Aeff)  - p,T,F in  - p,T,F outOutput  - dm, dE, dmb in  - dm, dE, dmb out*/parameters 	real global fs;	string global dll_ICE;	string global dll_fcn_idealNozzle;variables	real pIn, TIn, FIn, pOut;	real dm, dE, dmb;	real aa, d, pr;	real	inArrFlow[4];	real outArrFlow[3];equations  // start typing here 	aa = ppIn.e / ppOut.e;	if (aa > 1) then		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;		pOut = ppOut.e;	else		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;		pOut = ppIn.e;	end;		// Calculate thermodynamic properties from (T,P,x)	inArrFlow = [1,Aeff,pIn,TIn,FIn,pOut,fs];	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);			dm = outArrFlow[1]*d;	dE = outArrFlow[2]*d;		dmb = outArrFlow[3]*d;	ppIn.dm = dm;	ppOut.dm  = dm;	pTIn.dH = dE;	pTOut.dH = dE;	pFIn.f = dmb;	pFOut.f = dmb;implementation_end;  end;  connections   areaMultiplier -> MultiplyDivide1\multiply 448 248;   CA -> ExhVVLift1\CA;   dVONom -> ExhVVLift1\dCA_lift_nom;   EffortSensor1\effort -> IntakeVVArea\pIn 272 160 328 160;   EffortSensor1\p2 => Submodel2\ppIn;   EffortSensor2\effort -> IntakeVVArea\pOut 416 160 352 160;   EffortSensor2\p2 => PowerMux\input1;   ExhVVLift1\lift -> IntakeVVArea\lift;   IntakeVVArea\aEff -> MultiplyDivide1\multiply;   IntakeVVArea\Cd -> Cd;   MultiplyDivide1\output -> Splitter1\input;   PowerDemux\output1 => EffortSensor1\p1;   PowerDemux\output2 => Submodel2\pTIn;   PowerDemux\output3 => Submodel2\pFIn;   PowerMux\output => pTFOut;   pTFIn => PowerDemux\input;   Splitter1\output -> aOpenEff;   Splitter1\output -> Submodel2\Aeff;   Submodel2\pFOut => PowerMux\input3;   Submodel2\ppOut => EffortSensor2\p1;   Submodel2\pTOut => PowerMux\input2;   VONom -> ExhVVLift1\CA_start_nom;  end;  figures   text 'Global parameters      real global lift_max;     // Maximum lift of the vavle      real global nstorke;     // number of stroke      real hidden global CA_start_ref;        //Reference start CA for start of valve lift      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed      real hidden global dCA_lift_top_ref;   //Reference duration for lift up      real global Dv;		 	// Valve Seat diameter      real global beta;   	// valve seat angle      real global w;      	// valve seat width      real global Dp;    		// Valve port diameter      real global Ds; 			// Valve stem diameter      ' 288 504 color 0 16; implementation_end;specification_end;				specification 'IntakeVVVarLift'description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>Components\PoppetValve.emx</LibraryPath><TimeStamp>2015-10-20 15:58:52</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>'; type Submodel  ports   power in pTFIn [3,1];   signal in CA;   signal in VONom;   signal in dVONom;   power out pTFOut [3,1];   signal out aOpenEff;   signal out Cd;   signal in areaMultiplier; end; icon bg bottom shadow 11776947  figures   line 488 289 520 289 color 0 fill 15132390;   line 488 289 488 337 color 0 fill 15132390;   line 568 291 568 335 color 0 fill 15132390;   line 536 289 568 289 color 0 fill 15132390;   line 528 304 504 320 552 320 528 304 color 0 fill 8355711;   line 520 289 520 297 504 305 496 305 496 337 488 337 color 0 fill 15132390;   line 536 289 536 297 552 305 560 305 560 337 568 337 568 289 536 289 color 0 fill 12632256;   line 520 289 488 289 488 337 496 337 496 305 504 305 520 297 520 289 color 0 fill 12632256;   line 528 305 528 273 color 0 fill 15132390;   text 'PoppetValve' 528 345 color 0 16;  terminals   pTFIn 472 312 fixed;   CA 568 264 fixed;   VONom 488 264 fixed;   dVONom 512 264 fixed;   pTFOut 584 312 fixed;   aOpenEff 584 288 fixed;   Cd 584 264 fixed;   areaMultiplier 544 264 fixed; end; implementation bg  submodels   EffortSensor1 272 320    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      power knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;      text 'e' 272.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   EffortSensor2 416 320    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      pseudohydraulic knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;      text 'e' 416.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   IntakeVVArea 328.1 200.1			specifications active 'Intake'				specification 'Exhaust'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:54:56</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 fill 15132390;   text 'VVArea' 328 200 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	real global DvExh;		 	// Valve Seat diameter	real global betaExh;   	// valve seat angle	real global wExh;      	// valve seat width	real global DpExh;    		// Valve port diameter	real global DsExh; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));		else 			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);			else				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);			end;		end;				L_Dv = lift/DvExh;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;				specification 'Intake' description '<Information><Description><Version>4.5</Version><LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2015-6-22 22:48:36</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;   text 'VVArea' 328 200 color 0 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	real global noInVV;	real global DvIntake;		 	// Valve Seat diameter	real global betaIntake;   	// valve seat angle	real global wIntake;      	// valve seat width	real global DpIntake;    		// Valve port diameter	real global DsIntake; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));		else 			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);			else				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);			end;		end;				L_Dv = lift/DvIntake;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*noInVV*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;			end;   IntakeVVLift1 304 120			specifications active 'IntakeLiftVar'				specification 'Exhaust'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-11-2 23:44:24</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 763.9 96 836.1 128 fill 15132390;   text 'VVLift' 800 112 16;  terminals   lift 800 136 fixed;   CA 824 88 fixed;   CA_start_nom 776 88 fixed;   dCA_lift_nom 800 88 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox;	string global fnc_interp;	integer global ExhProfNoRow1;	integer global ExhProfNoRow2;	real global ExhVVProfUpX[ExhProfNoRow1];	real global ExhVVProfUpY[ExhProfNoRow1];	real global ExhVVProfDownX[ExhProfNoRow2];	real global ExhVVProfDownY[ExhProfNoRow2];	real global ExhLift_max;	integer global nStroke;	real global ExhCA_start_ref; //Reference start CA for start of valve lift	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed	real global ExhdCA_lift_top_ref; //Reference duration for lift upvariables	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = ExhProfNoRow1;	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;			inarr2[1] = ExhProfNoRow2;	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			equations	CA_start = CA_start_nom*ExhCA_start_ref;	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;		dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= ExhdCA_lift_up then			inarr1[ExhProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);							inarr2[ExhProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = ExhLift_max*lift; implementation_end;specification_end;				specification 'ExhaustVarLift'description '<Information><Description><Version>4.5</Version><LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2015-10-20 15:16:35</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 355.9 256 428.1 288 color 0 fill 15132390;   text 'VVLift' 392 272 color 0 16;  terminals   lift 392 296 fixed;   CA 416 248 fixed;   CA_start_nom 368 248 fixed;   dCA_lift_nom 392 248 fixed; end; implementation eqparameters	string dllToolbox = 'C:\Users\yum\Documents\GitHub\20SimToolBox\dll20SimToolVS10\Release\dll20SimToolVS10';	string global fnc_interp = 'interpolate';	integer global ExhProfNoRow1 = 30;	integer global ExhProfNoRow2 = 30;	real global ExhVVProfUp[ExhProfNoRow1] = [			0;			0.007;			0.021;			0.046;			0.07;			0.105;			0.161;			0.211;			0.267;			0.323;			0.372;			0.435;			0.491;			0.547;			0.604;			0.653;			0.702;			0.744;			0.782;			0.818;			0.853;			0.884;			0.909;			0.93;			0.951;			0.965;			0.979;			0.989;			0.996;			1];	real global ExhVVProfDown[ExhProfNoRow1] = [			1;			0.996;			0.993;			0.982;			0.972;			0.958;			0.937;			0.912;			0.884;			0.856;			0.821;			0.786;			0.744;			0.702;			0.656;			0.614;			0.565;			0.509;			0.442;			0.379;			0.319;			0.253;			0.196;			0.14;			0.095;			0.06;			0.032;			0.018;			0.006;			0];	real global ExhLift_max = 0.01425;	real global nStroke = 4;	real hidden global ExhCA_start_ref = 130; //Reference start CA for start of valve lift	real hidden global ExhdCA_lift_up = 123;	 //Lift up time (should not be changed unless file is changed	real hidden global ExhdCA_lift_down = 123; //Lift down time (should not be changed unless file is changed//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift upvariables	real inarr1[ExhProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[ExhProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real CA_start_cyc;	real dCA_total_ref;	real phi;	integer i;	boolean reset;initialequations	CA_start_cyc = 720;	reset = true;	inarr1[1] = ExhProfNoRow1;	for i = 1 to ExhProfNoRow1 do		inarr1[i+1] = i / ExhProfNoRow1;	end;	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUp;			inarr2[1] = ExhProfNoRow2;	for i = 1 to ExhProfNoRow2 do		inarr2[i+1] = i / ExhProfNoRow2;	end;		inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDown;		dCA_total_ref = ExhdCA_lift_up + ExhdCA_lift_down;		equations	CA_start = CA_start_nom*ExhCA_start_ref;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and reset == true then		reset = false;		CA_start_cyc = CA_start;		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);		dCA_lift = dCA_total - dCA_total_ref;		end;	if phi > CA_start_cyc then		if phi < CA_start_cyc + dCA_total then			CA_VV = (phi - CA_start_cyc)/ExhdCA_lift_up;			if CA_VV <= 1 then				inarr1[ExhProfNoRow1*2+2] = CA_VV;				lift = dll(dllToolbox, fnc_interp, inarr1);			else 					CA_VV = (phi - CA_start_cyc)/(ExhdCA_lift_up + dCA_lift);				if CA_VV <= 1 then					lift = 1;			  	else 						CA_VV = (phi - (CA_start_cyc + ExhdCA_lift_up + dCA_lift))/ExhdCA_lift_down;					inarr2[ExhProfNoRow2*2+2] = CA_VV;					lift = dll(dllToolbox, fnc_interp,inarr2);				end;			end;		else			lift = 0;		end;	else		lift = 0;			if reset == false then			reset = true;			CA_start_cyc = 720;		end;								end;				lift = ExhLift_max*lift; implementation_end;specification_end;				specification 'Intake'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:16:35</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 267.9 96 340.1 128 color 0 fill 15132390;   text 'VVLift' 304 112 color 0 16;  terminals   lift 304 136 fixed;   CA 328 88 fixed;   CA_start_nom 280 88 fixed;   dCA_lift_nom 304 88 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox = 'dllTool20Sim.dll';	string global fnc_interp = 'interpolate';	integer global InProfNoRow1;	integer global InProfNoRow2;	real global InVVProfUpX[InProfNoRow1]; 	real global InVVProfUpY[InProfNoRow1];	real global InVVProfDownX[InProfNoRow2];	real global InVVProfDownY[InProfNoRow2];	real global InLift_max = 1;	real global nstorke = 0;	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift upvariables	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = InProfNoRow1;	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;			inarr2[1] = InProfNoRow2;	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			equations	CA_start = CA_start_nom*InCA_start_ref;	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;		dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;	phi = CA*180/pi mod (nstorke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= IndCA_lift_up then			inarr1[InProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= IndCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);							inarr2[InProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = InLift_max*lift; implementation_end;specification_end;				specification 'IntakeLiftVar' description '<Information><Description><Version>4.6</Version><LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2016-4-1 23:07:16</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 267.9 104 340.1 136 color 0 fill 15132390;   text 'VVLift' 304 120 color 0 16;  terminals   lift 304 144 fixed;   CA 328 96 fixed;   CA_start_nom 280 96 fixed;   dCA_lift_nom 304 96 fixed; end; implementation eqparameters	string dllToolbox = 'C:\Users\yum\Documents\GitHub\20SimToolBox\dll20SimToolVS10\Release\dll20SimToolVS10';	string global fnc_interp = 'interpolate';	integer global InProfNoRow1 = 30;	integer global InProfNoRow2 = 30;	real global InVVProfUp[InProfNoRow1] = [0;0.007;0.021;0.046;0.070;0.105;0.161;0.211;0.267;0.323;														  0.372;0.435;0.491;0.547;0.604;0.653;0.702;0.744;0.782;0.818;														  0.853;0.884;0.909;0.930;0.951;0.965;0.979;0.989;0.996;1];	real global InVVProfDown[InProfNoRow1] = [1;0.996;0.993;0.982;0.972;0.958;0.937;0.912;0.884;0.856;														0.821;0.786;0.744;0.702;0.656;0.614;0.565;0.509;0.442;0.379;														0.319;0.253;0.196;0.140;0.095;0.060;0.032;0.018;0.006;0];	real global InLift_max = 0.014;	real global nStroke = 4;	real hidden global InCA_start_ref = 343; //Reference start CA for start of valve lift	real hidden global IndCA_lift_up = 121;	 //Lift up time (should not be changed unless file is changed	real hidden global IndCA_lift_down = 121; //Lift down time (should not be changed unless file is changed//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift upvariables	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real CA_start_cyc;	real dCA_total_ref;	real phi;	integer i;	boolean reset;initialequations	CA_start_cyc = 720;	reset = true;	inarr1[1] = InProfNoRow1;	for i = 1 to InProfNoRow1 do		inarr1[i+1] = i / InProfNoRow1;	end;	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUp;			inarr2[1] = InProfNoRow2;	for i = 1 to InProfNoRow2 do		inarr2[i+1] = i / InProfNoRow2;	end;		inarr2[InProfNoRow2+2:InProfNoRow2*2+1] = InVVProfDown;		dCA_total_ref = IndCA_lift_up + IndCA_lift_down;		equations	CA_start = CA_start_nom*InCA_start_ref;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and reset == true then		reset = false;		CA_start_cyc = CA_start;		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);		dCA_lift = dCA_total - dCA_total_ref;		end;	if phi > CA_start_cyc then		if phi < CA_start_cyc + dCA_total then			CA_VV = (phi - CA_start_cyc)/IndCA_lift_up;			if CA_VV <= 1 then				inarr1[InProfNoRow1*2+2] = CA_VV;				lift = dll(dllToolbox, fnc_interp, inarr1);			else 					CA_VV = (phi - CA_start_cyc)/(IndCA_lift_up + dCA_lift);				if CA_VV <= 1 then					lift = 1;			  	else 						CA_VV = (phi - (CA_start_cyc + IndCA_lift_up + dCA_lift))/IndCA_lift_down;					inarr2[InProfNoRow2*2+2] = CA_VV;					lift = dll(dllToolbox, fnc_interp,inarr2);				end;			end;		else			lift = 0;		end;	else		lift = 0;			if reset == false then			reset = true;			CA_start_cyc = 720;		end;								end;				lift = InLift_max*lift; implementation_end;specification_end;			end;   MultiplyDivide1 352 248    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>  <TimeStamp>2007-9-27 10:14:59</TimeStamp></Description>';    knot MultiplyDivide     ports      signal knot duplicatable in multiply [1];      signal knot duplicatable in divide [1];      signal knot out output [1];    end;    icon bg ellipse     figures      ellipse 344 240 360 256 color 0 fill 16777215;    end;    implementation eqequations	output = mul (collect (multiply)) ./ mul (collect (divide));     implementation_end;   plug pTFOut 504 336;   plug aOpenEff 520.1 280;   plug areaMultiplier 448 32;   plug pTFIn 200 336;   plug dVONom 304 56;   plug VONom 280.1 32;   plug CA 327.8 69.9;   plug Cd 328 264;   PowerDemux 240 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 240 312 240 360 color 0 width 2;   rectangle 235 320 243 352 color -1;   text '3' 244 346 color 8421504 8;  terminals   output1 240 320 fixed;   output2 240 336 fixed;   output3 240 352 fixed;   input 232 336 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;			end;   PowerMux 448 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 448 312 448 360 color 0 width 2;   rectangle 443 312 451 344 color -1;   text '3' 452 338 color 8421504 8;  terminals   input1 448 320 fixed;   input2 448 336 fixed;   input3 448 352 fixed;   output 456 336 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;			end;   Splitter1 352 280    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;      ellipse 347.7 275.7 356.3 284.3 color -1;     terminals      input 352 280 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Submodel2 352 351    description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 16:30:00</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate> </Description></Information>';    type Submodel     ports      signal in Aeff; "Effective area of nozzle (m2)"      pseudohydraulic in ppIn;      pseudothermalh in pTIn;      power in pFIn;      pseudohydraulic out ppOut;      pseudothermalh out pTOut;      power out pFOut;     restrictions      causality fixed in ppOut;      causality fixed in pFOut;      causality fixed in ppIn;      causality fixed in pTIn;      causality fixed in pFIn;    end;    icon bg bottom     figures      text 'R' 352 336 color 0 53 bold;      text 'IdealNozzleCompFlow' 352 376 color 0 16;     terminals      Aeff 352 304 fixed;      ppIn 320 320 fixed;      pTIn 320 336 fixed;      pFIn 320 352 fixed;      ppOut 384 320 fixed;      pTOut 384 336 fixed;      pFOut 384 352 fixed;    end;    implementation eq/* Ideal Nozzle ModelUses ideal nozzle equation for compressible flows assuming isentropic process. Flow restriction field. No states.Input   - Effective area of nozzle (Aeff)  - p,T,F in  - p,T,F outOutput  - dm, dE, dmb in  - dm, dE, dmb out*/parameters 	real global fs;	string global dll_ICE;	string global dll_fcn_idealNozzle;variables	real pIn, TIn, FIn, pOut;	real dm, dE, dmb;	real aa, d, pr;	real	inArrFlow[4];	real outArrFlow[3];equations  // start typing here 	aa = ppIn.e / ppOut.e;	if (aa > 1) then		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;		pOut = ppOut.e;	else		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;		pOut = ppIn.e;	end;		// Calculate thermodynamic properties from (T,P,x)	inArrFlow = [1,Aeff,pIn,TIn,FIn,pOut,fs];	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);			dm = outArrFlow[1]*d;	dE = outArrFlow[2]*d;		dmb = outArrFlow[3]*d;	ppIn.dm = dm;	ppOut.dm  = dm;	pTIn.dH = dE;	pTOut.dH = dE;	pFIn.f = dmb;	pFOut.f = dmb;implementation_end;  end;  connections   areaMultiplier -> MultiplyDivide1\multiply 448 248;   CA -> IntakeVVLift1\CA;   dVONom -> IntakeVVLift1\dCA_lift_nom;   EffortSensor1\effort -> IntakeVVArea\pIn 272 160 328 160;   EffortSensor1\p2 => Submodel2\ppIn;   EffortSensor2\effort -> IntakeVVArea\pOut 416 160 352 160;   EffortSensor2\p2 => PowerMux\input1;   IntakeVVArea\aEff -> MultiplyDivide1\multiply;   IntakeVVArea\Cd -> Cd;   IntakeVVLift1\lift -> IntakeVVArea\lift;   MultiplyDivide1\output -> Splitter1\input;   PowerDemux\output1 => EffortSensor1\p1;   PowerDemux\output2 => Submodel2\pTIn;   PowerDemux\output3 => Submodel2\pFIn;   PowerMux\output => pTFOut;   pTFIn => PowerDemux\input;   Splitter1\output -> aOpenEff;   Splitter1\output -> Submodel2\Aeff;   Submodel2\pFOut => PowerMux\input3;   Submodel2\ppOut => EffortSensor2\p1;   Submodel2\pTOut => PowerMux\input2;   VONom -> IntakeVVLift1\CA_start_nom;  end;  figures   text 'Global parameters      real global lift_max;     // Maximum lift of the vavle      real global nstorke;     // number of stroke      real hidden global CA_start_ref;        //Reference start CA for start of valve lift      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed      real hidden global dCA_lift_top_ref;   //Reference duration for lift up      real global Dv;		 	// Valve Seat diameter      real global beta;   	// valve seat angle      real global w;      	// valve seat width      real global Dp;    		// Valve port diameter      real global Ds; 			// Valve stem diameter      ' 288 504 color 0 16; implementation_end;specification_end;			end;   FlowSensor 712 335.6    description '<Information><Description><Version>4.2</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath><TimeStamp>2011-11-29 15:50:53</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';    knot FlowSensor     ports      power knot in p1 [3,1];      power knot out p2 [3,1];      signal knot out flow [3,1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 705.1 328.8 718.9 343.1 color 0 fill 16777215;      text 'f' 712 335.2 color 0;    end;    implementation eqequations	p2.f = p1.f;	p1.e = p2.e;	flow = p1.f;implementation_end;   FlowSensor1 800 455.2    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:12</TimeStamp></Description>';    knot FlowSensor     ports      pseudothermal knot in p1 [1];      pseudothermal knot out p2 [1];      signal knot out flow [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 793.1 448.8 806.9 463.1 color 0 fill 16777215;      text 'f' 800.5 454.3 color 0;    end;    implementation eqequations	p2.f = p1.f;	p1.e = p2.e;	flow = p1.f;      implementation_end;   intakeVV 528 312			specifications active 'IntakeVVVarLift'				specification 'ExhVV'description '<Information> <Description>    <Version>4.5</Version><IsMainModel>1</IsMainModel>    <LibraryPath>Components\PoppetValve.emx</LibraryPath>  <TimeStamp>2015-11-2 23:50:38</TimeStamp><KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   power in pTFIn [3,1];   signal in CA;   signal in VONom;   signal in dVONom;   power out pTFOut [3,1];   signal out aOpenEff;   signal out Cd;   signal in areaMultiplier; end; icon bg bottom shadow 11776947  figures   line 224 209 256 209 color 0 fill 15132390;   line 224 209 224 257 color 0 fill 15132390;   line 304 211 304 255 color 0 fill 15132390;   line 272 209 304 209 color 0 fill 15132390;   line 264 224 240 240 288 240 264 224 color 0 fill 8355711;   line 256 209 256 217 240 225 232 225 232 257 224 257 color 0 fill 15132390;   line 272 209 272 217 288 225 296 225 296 257 304 257 304 209 272 209 color 0 fill 12632256;   line 256 209 224 209 224 257 232 257 232 225 240 225 256 217 256 209 color 0 fill 12632256;   line 264 225 264 193 color 0 fill 15132390;   text 'PoppetValve' 264 265 color 0 16;  terminals   pTFIn 208 232 fixed;   CA 304 184 fixed;   VONom 224 184 fixed;   dVONom 248 184 fixed;   pTFOut 320 232 fixed;   aOpenEff 320 208 fixed;   Cd 320 184 fixed;   areaMultiplier 280 184 fixed; end; implementation bg  submodels   EffortSensor1 272 319    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      power knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;      text 'e' 272.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   EffortSensor2 416 319    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      pseudohydraulic knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;      text 'e' 416.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   ExhVVArea 328.1 200.1			specifications active 'Exhaust'				specification 'Exhaust' description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:54:56</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;   text 'VVArea' 328 200 color 0 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	real global DvExh;		 	// Valve Seat diameter	real global betaExh;   	// valve seat angle	real global wExh;      	// valve seat width	real global DpExh;    		// Valve port diameter	real global DsExh; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));		else 			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);			else				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);			end;		end;				L_Dv = lift/DvExh;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;				specification 'Intake'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 22:48:36</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 fill 15132390;   text 'VVArea' 328 200 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	real global DvIntake;		 	// Valve Seat diameter	real global betaIntake;   	// valve seat angle	real global wIntake;      	// valve seat width	real global DpIntake;    		// Valve port diameter	real global DsIntake; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));		else 			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);			else				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);			end;		end;				L_Dv = lift/DvIntake;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;			end;   ExhVVLift1 304 120			specifications active 'Exhaust'				specification 'Exhaust' description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-11-2 23:44:24</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 267.9 104 340.1 136 color 0 fill 15132390;   text 'VVLift' 304 120 color 0 16;  terminals   lift 304 144 fixed;   CA 328 96 fixed;   CA_start_nom 280 96 fixed;   dCA_lift_nom 304 96 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox;	string global fnc_interp;	integer global ExhProfNoRow1;	integer global ExhProfNoRow2;	real global ExhVVProfUpX[ExhProfNoRow1];	real global ExhVVProfUpY[ExhProfNoRow1];	real global ExhVVProfDownX[ExhProfNoRow2];	real global ExhVVProfDownY[ExhProfNoRow2];	real global ExhLift_max;	integer global nStroke;	real global ExhCA_start_ref; //Reference start CA for start of valve lift	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed	real global ExhdCA_lift_top_ref; //Reference duration for lift upvariables	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = ExhProfNoRow1;	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;			inarr2[1] = ExhProfNoRow2;	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			equations	CA_start = CA_start_nom*ExhCA_start_ref;	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;		dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= ExhdCA_lift_up then			inarr1[ExhProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);							inarr2[ExhProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = ExhLift_max*lift; implementation_end;specification_end;				specification 'Intake'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:16:35</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 763.9 96 836.1 128 fill 15132390;   text 'VVLift' 800 112 16;  terminals   lift 800 136 fixed;   CA 824 88 fixed;   CA_start_nom 776 88 fixed;   dCA_lift_nom 800 88 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox = 'dllTool20Sim.dll';	string global fnc_interp = 'interpolate';	integer global InProfNoRow1;	integer global InProfNoRow2;	real global InVVProfUpX[InProfNoRow1]; 	real global InVVProfUpY[InProfNoRow1];	real global InVVProfDownX[InProfNoRow2];	real global InVVProfDownY[InProfNoRow2];	real global InLift_max = 1;	real global nstorke = 2;	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift upvariables	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = InProfNoRow1;	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;			inarr2[1] = InProfNoRow2;	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			equations	CA_start = CA_start_nom*InCA_start_ref;	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;		dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;	phi = CA*180/pi mod (nstorke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= IndCA_lift_up then			inarr1[InProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= IndCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);							inarr2[InProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = InLift_max*lift; implementation_end;specification_end;			end;   MultiplyDivide1 352 248    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>  <TimeStamp>2007-9-27 10:14:59</TimeStamp></Description>';    knot MultiplyDivide     ports      signal knot duplicatable in multiply [1];      signal knot duplicatable in divide [1];      signal knot out output [1];    end;    icon bg ellipse     figures      ellipse 344 240 360 256 color 0 fill 16777215;    end;    implementation eqequations	output = mul (collect (multiply)) ./ mul (collect (divide));     implementation_end;   plug pTFOut 504 336;   plug aOpenEff 520.1 280;   plug areaMultiplier 448 32;   plug pTFIn 200 336;   plug dVONom 304 56;   plug VONom 280.1 32;   plug CA 327.8 69.9;   plug Cd 328 264;   PowerDemux 241.5 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 240 312 240 360 color 0 width 2;   rectangle 235 320 243 352 color -1;   text '3' 244 346 color 8421504 8;  terminals   output1 240 320 fixed;   output2 240 336 fixed;   output3 240 352 fixed;   input 232 336 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;			end;   PowerMux 449.5 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 448 312 448 360 color 0 width 2;   rectangle 443 312 451 344 color -1;   text '3' 452 338 color 8421504 8;  terminals   input1 448 320 fixed;   input2 448 336 fixed;   input3 448 352 fixed;   output 456 336 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;			end;   Splitter1 352 280    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;      ellipse 347.7 275.7 356.3 284.3 color -1;     terminals      input 352 280 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Submodel2 352 359.5    description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 16:30:00</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate> </Description></Information>';    type Submodel     ports      signal in Aeff; "Effective area of nozzle (m2)"      pseudohydraulic in ppIn;      pseudothermalh in pTIn;      power in pFIn;      pseudohydraulic out ppOut;      pseudothermalh out pTOut;      power out pFOut;     restrictions      causality fixed in ppOut;      causality fixed in pFOut;      causality fixed in ppIn;      causality fixed in pTIn;      causality fixed in pFIn;    end;    icon bg bottom     figures      text 'R' 352 336 color 0 53 bold;      text 'IdealNozzleCompFlow' 352 376 color 0 16;     terminals      Aeff 352 304 fixed;      ppIn 320 320 fixed;      pTIn 320 336 fixed;      pFIn 320 352 fixed;      ppOut 384 320 fixed;      pTOut 384 336 fixed;      pFOut 384 352 fixed;    end;    implementation eq/* Ideal Nozzle ModelUses ideal nozzle equation for compressible flows assuming isentropic process. Flow restriction field. No states.Input   - Effective area of nozzle (Aeff)  - p,T,F in  - p,T,F outOutput  - dm, dE, dmb in  - dm, dE, dmb out*/parameters 	real global fs;	string global dll_ICE;	string global dll_fcn_idealNozzle;variables	real pIn, TIn, FIn, pOut;	real dm, dE, dmb;	real aa, d, pr;	real	inArrFlow[7];	real outArrFlow[3];equations  // start typing here 	aa = ppIn.e / ppOut.e;	if (aa > 1) then		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;		pOut = ppOut.e;	else		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;		pOut = ppIn.e;	end;		// Calculate thermodynamic properties from (T,P,x)	inArrFlow = [1;Aeff;pIn;pOut;TIn;FIn;fs];	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);			dm = outArrFlow[1]*d;	dE = outArrFlow[2]*d;		dmb = outArrFlow[3]*d;	ppIn.dm = dm;	ppOut.dm  = dm;	pTIn.dH = dE;	pTOut.dH = dE;	pFIn.f = dmb;	pFOut.f = dmb;implementation_end;  end;  connections   areaMultiplier -> MultiplyDivide1\multiply 448 248;   CA -> ExhVVLift1\CA;   dVONom -> ExhVVLift1\dCA_lift_nom;   EffortSensor1\effort -> ExhVVArea\pIn 272 160 328 160;   EffortSensor1\p2 => Submodel2\ppIn;   EffortSensor2\effort -> ExhVVArea\pOut 416 160 352 160;   EffortSensor2\p2 => PowerMux\input1;   ExhVVArea\aEff -> MultiplyDivide1\multiply;   ExhVVArea\Cd -> Cd;   ExhVVLift1\lift -> ExhVVArea\lift;   MultiplyDivide1\output -> Splitter1\input;   PowerDemux\output1 => EffortSensor1\p1;   PowerDemux\output2 => Submodel2\pTIn;   PowerDemux\output3 => Submodel2\pFIn;   PowerMux\output => pTFOut;   pTFIn => PowerDemux\input;   Splitter1\output -> aOpenEff;   Splitter1\output -> Submodel2\Aeff;   Submodel2\pFOut => PowerMux\input3;   Submodel2\ppOut => EffortSensor2\p1;   Submodel2\pTOut => PowerMux\input2;   VONom -> ExhVVLift1\CA_start_nom;  end;  figures   text 'Global parameters      real global lift_max;     // Maximum lift of the vavle      real global nstorke;     // number of stroke      real hidden global CA_start_ref;        //Reference start CA for start of valve lift      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed      real hidden global dCA_lift_top_ref;   //Reference duration for lift up      real global Dv;		 	// Valve Seat diameter      real global beta;   	// valve seat angle      real global w;      	// valve seat width      real global Dp;    		// Valve port diameter      real global Ds; 			// Valve stem diameter      ' 288 504 color 0 16; implementation_end;specification_end;				specification 'ExhVVVarLift'description '<Information> <Description>    <Version>4.6</Version><IsMainModel>1</IsMainModel>    <LibraryPath>Components\PoppetValve.emx</LibraryPath>  <TimeStamp>2016-4-1 23:10:28</TimeStamp><KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   power in pTFIn [3,1];   signal in CA;   signal in VONom;   signal in dVONom;   power out pTFOut [3,1];   signal out aOpenEff;   signal out Cd;   signal in areaMultiplier; end; icon bg bottom shadow 11776947  figures   line 488 289 520 289 color 0 fill 15132390;   line 488 289 488 337 color 0 fill 15132390;   line 568 291 568 335 color 0 fill 15132390;   line 536 289 568 289 color 0 fill 15132390;   line 528 304 504 320 552 320 528 304 color 0 fill 8355711;   line 520 289 520 297 504 305 496 305 496 337 488 337 color 0 fill 15132390;   line 536 289 536 297 552 305 560 305 560 337 568 337 568 289 536 289 color 0 fill 12632256;   line 520 289 488 289 488 337 496 337 496 305 504 305 520 297 520 289 color 0 fill 12632256;   line 528 305 528 273 color 0 fill 15132390;   text 'PoppetValve' 528 345 color 0 16;  terminals   pTFIn 472 312 fixed;   CA 568 264 fixed;   VONom 488 264 fixed;   dVONom 512 264 fixed;   pTFOut 584 312 fixed;   aOpenEff 584 288 fixed;   Cd 584 264 fixed;   areaMultiplier 544 264 fixed; end; implementation bg  submodels   EffortSensor1 272 320    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      power knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;      text 'e' 272.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   EffortSensor2 416 320    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      pseudohydraulic knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;      text 'e' 416.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   ExhVVLift 304 120			specifications active 'ExhaustVarLift'				specification 'Exhaust'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-11-2 23:44:24</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 763.9 96 836.1 128 fill 15132390;   text 'VVLift' 800 112 16;  terminals   lift 800 136 fixed;   CA 824 88 fixed;   CA_start_nom 776 88 fixed;   dCA_lift_nom 800 88 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox;	string global fnc_interp;	integer global ExhProfNoRow1;	integer global ExhProfNoRow2;	real global ExhVVProfUpX[ExhProfNoRow1];	real global ExhVVProfUpY[ExhProfNoRow1];	real global ExhVVProfDownX[ExhProfNoRow2];	real global ExhVVProfDownY[ExhProfNoRow2];	real global ExhLift_max;	integer global nStroke;	real global ExhCA_start_ref; //Reference start CA for start of valve lift	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed	real global ExhdCA_lift_top_ref; //Reference duration for lift upvariables	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = ExhProfNoRow1;	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;			inarr2[1] = ExhProfNoRow2;	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			equations	CA_start = CA_start_nom*ExhCA_start_ref;	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;		dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= ExhdCA_lift_up then			inarr1[ExhProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);							inarr2[ExhProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = ExhLift_max*lift; implementation_end;specification_end;				specification 'ExhaustVarLift' description '<Information><Description><Version>4.5</Version><LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2015-10-20 15:16:35</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 267.9 104 340.1 136 color 0 fill 15132390;   text 'VVLift' 304 120 color 0 16;  terminals   lift 304 144 fixed;   CA 328 96 fixed;   CA_start_nom 280 96 fixed;   dCA_lift_nom 304 96 fixed; end; implementation eqparameters	string dllToolbox = 'C:\Users\yum\Documents\GitHub\20SimToolBox\dll20SimToolVS10\Release\dll20SimToolVS10';	string global fnc_interp = 'interpolate';	integer global ExhProfNoRow1 = 30;	integer global ExhProfNoRow2 = 30;	real global ExhVVProfUp[ExhProfNoRow1] = [			0;			0.007;			0.021;			0.046;			0.07;			0.105;			0.161;			0.211;			0.267;			0.323;			0.372;			0.435;			0.491;			0.547;			0.604;			0.653;			0.702;			0.744;			0.782;			0.818;			0.853;			0.884;			0.909;			0.93;			0.951;			0.965;			0.979;			0.989;			0.996;			1];	real global ExhVVProfDown[ExhProfNoRow1] = [			1;			0.996;			0.993;			0.982;			0.972;			0.958;			0.937;			0.912;			0.884;			0.856;			0.821;			0.786;			0.744;			0.702;			0.656;			0.614;			0.565;			0.509;			0.442;			0.379;			0.319;			0.253;			0.196;			0.14;			0.095;			0.06;			0.032;			0.018;			0.006;			0];	real global ExhLift_max = 0.01425;	real global nStroke = 4;	real hidden global ExhCA_start_ref = 130; //Reference start CA for start of valve lift	real hidden global ExhdCA_lift_up = 123;	 //Lift up time (should not be changed unless file is changed	real hidden global ExhdCA_lift_down = 123; //Lift down time (should not be changed unless file is changed//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift upvariables	real inarr1[ExhProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[ExhProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real CA_start_cyc;	real dCA_total_ref;	real phi;	integer i;	boolean reset;initialequations	CA_start_cyc = 720;	reset = true;	inarr1[1] = ExhProfNoRow1;	for i = 1 to ExhProfNoRow1 do		inarr1[i+1] = i / ExhProfNoRow1;	end;	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUp;			inarr2[1] = ExhProfNoRow2;	for i = 1 to ExhProfNoRow2 do		inarr2[i+1] = i / ExhProfNoRow2;	end;		inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDown;		dCA_total_ref = ExhdCA_lift_up + ExhdCA_lift_down;		equations	CA_start = CA_start_nom*ExhCA_start_ref;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and reset == true then		reset = false;		CA_start_cyc = CA_start;		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);		dCA_lift = dCA_total - dCA_total_ref;		end;	if phi > CA_start_cyc then		if phi < CA_start_cyc + dCA_total then			CA_VV = (phi - CA_start_cyc)/ExhdCA_lift_up;			if CA_VV <= 1 then				inarr1[ExhProfNoRow1*2+2] = CA_VV;				lift = dll(dllToolbox, fnc_interp, inarr1);			else 					CA_VV = (phi - CA_start_cyc)/(ExhdCA_lift_up + dCA_lift);				if CA_VV <= 1 then					lift = 1;			  	else 						CA_VV = (phi - (CA_start_cyc + ExhdCA_lift_up + dCA_lift))/ExhdCA_lift_down;					inarr2[ExhProfNoRow2*2+2] = CA_VV;					lift = dll(dllToolbox, fnc_interp,inarr2);				end;			end;		else			lift = 0;		end;	else		lift = 0;			if reset == false then			reset = true;			CA_start_cyc = 720;		end;								end;				lift = ExhLift_max*lift; implementation_end;specification_end;				specification 'Intake'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:16:35</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 267.9 96 340.1 128 color 0 fill 15132390;   text 'VVLift' 304 112 color 0 16;  terminals   lift 304 136 fixed;   CA 328 88 fixed;   CA_start_nom 280 88 fixed;   dCA_lift_nom 304 88 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox = 'dllTool20Sim.dll';	string global fnc_interp = 'interpolate';	integer global InProfNoRow1;	integer global InProfNoRow2;	real global InVVProfUpX[InProfNoRow1]; 	real global InVVProfUpY[InProfNoRow1];	real global InVVProfDownX[InProfNoRow2];	real global InVVProfDownY[InProfNoRow2];	real global InLift_max = 1;	real global nstorke = 0;	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift upvariables	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = InProfNoRow1;	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;			inarr2[1] = InProfNoRow2;	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			equations	CA_start = CA_start_nom*InCA_start_ref;	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;		dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;	phi = CA*180/pi mod (nstorke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= IndCA_lift_up then			inarr1[InProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= IndCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);							inarr2[InProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = InLift_max*lift; implementation_end;specification_end;				specification 'IntakeLiftVar' description '<Information><Description><Version>4.6</Version><LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2016-4-1 23:07:16</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 267.9 104 340.1 136 color 0 fill 15132390;   text 'VVLift' 304 120 color 0 16;  terminals   lift 304 144 fixed;   CA 328 96 fixed;   CA_start_nom 280 96 fixed;   dCA_lift_nom 304 96 fixed; end; implementation eqparameters	string dllToolbox = 'C:\Users\yum\Documents\GitHub\20SimToolBox\dll20SimToolVS10\Release\dll20SimToolVS10';	string global fnc_interp = 'interpolate';	integer global InProfNoRow1 = 30;	integer global InProfNoRow2 = 30;	real global InVVProfUp[InProfNoRow1] = [0;0.007;0.021;0.046;0.070;0.105;0.161;0.211;0.267;0.323;														  0.372;0.435;0.491;0.547;0.604;0.653;0.702;0.744;0.782;0.818;														  0.853;0.884;0.909;0.930;0.951;0.965;0.979;0.989;0.996;1];	real global InVVProfDown[InProfNoRow1] = [1;0.996;0.993;0.982;0.972;0.958;0.937;0.912;0.884;0.856;														0.821;0.786;0.744;0.702;0.656;0.614;0.565;0.509;0.442;0.379;														0.319;0.253;0.196;0.140;0.095;0.060;0.032;0.018;0.006;0];	real global InLift_max = 0.014;	real global nStroke = 4;	real hidden global InCA_start_ref = 343; //Reference start CA for start of valve lift	real hidden global IndCA_lift_up = 121;	 //Lift up time (should not be changed unless file is changed	real hidden global IndCA_lift_down = 121; //Lift down time (should not be changed unless file is changed//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift upvariables	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real CA_start_cyc;	real dCA_total_ref;	real phi;	integer i;	boolean reset;initialequations	CA_start_cyc = 720;	reset = true;	inarr1[1] = InProfNoRow1;	for i = 1 to InProfNoRow1 do		inarr1[i+1] = i / InProfNoRow1;	end;	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUp;			inarr2[1] = InProfNoRow2;	for i = 1 to InProfNoRow2 do		inarr2[i+1] = i / InProfNoRow2;	end;		inarr2[InProfNoRow2+2:InProfNoRow2*2+1] = InVVProfDown;		dCA_total_ref = IndCA_lift_up + IndCA_lift_down;		equations	CA_start = CA_start_nom*InCA_start_ref;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and reset == true then		reset = false;		CA_start_cyc = CA_start;		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);		dCA_lift = dCA_total - dCA_total_ref;		end;	if phi > CA_start_cyc then		if phi < CA_start_cyc + dCA_total then			CA_VV = (phi - CA_start_cyc)/IndCA_lift_up;			if CA_VV <= 1 then				inarr1[InProfNoRow1*2+2] = CA_VV;				lift = dll(dllToolbox, fnc_interp, inarr1);			else 					CA_VV = (phi - CA_start_cyc)/(IndCA_lift_up + dCA_lift);				if CA_VV <= 1 then					lift = 1;			  	else 						CA_VV = (phi - (CA_start_cyc + IndCA_lift_up + dCA_lift))/IndCA_lift_down;					inarr2[InProfNoRow2*2+2] = CA_VV;					lift = dll(dllToolbox, fnc_interp,inarr2);				end;			end;		else			lift = 0;		end;	else		lift = 0;			if reset == false then			reset = true;			CA_start_cyc = 720;		end;								end;				lift = InLift_max*lift; implementation_end;specification_end;			end;   IntakeVVArea 328.1 200.1			specifications active 'Exhaust'				specification 'Exhaust' description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:54:56</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;   text 'VVArea' 328 200 color 0 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	real global noExhVV;	real global DvExh;		 	// Valve Seat diameter	real global betaExh;   	// valve seat angle	real global wExh;      	// valve seat width	real global DpExh;    		// Valve port diameter	real global DsExh; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));		else 			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);			else				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);			end;		end;				L_Dv = lift/DvExh;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;				specification 'Intake' description '<Information><Description><Version>4.5</Version><LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2015-6-22 22:48:36</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;   text 'VVArea' 328 200 color 0 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	real global DvIntake;		 	// Valve Seat diameter	real global betaIntake;   	// valve seat angle	real global wIntake;      	// valve seat width	real global DpIntake;    		// Valve port diameter	real global DsIntake; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));		else 			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);			else				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);			end;		end;				L_Dv = lift/DvIntake;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;			end;   MultiplyDivide1 352 248    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>  <TimeStamp>2007-9-27 10:14:59</TimeStamp></Description>';    knot MultiplyDivide     ports      signal knot duplicatable in multiply [1];      signal knot duplicatable in divide [1];      signal knot out output [1];    end;    icon bg ellipse     figures      ellipse 344 240 360 256 color 0 fill 16777215;    end;    implementation eqequations	output = mul (collect (multiply)) ./ mul (collect (divide));     implementation_end;   plug pTFOut 504 336;   plug aOpenEff 520.1 280;   plug areaMultiplier 448 32;   plug pTFIn 200 336;   plug dVONom 304 56;   plug VONom 280.1 32;   plug CA 327.8 69.9;   plug Cd 328 264;   PowerDemux 240 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 240 312 240 360 color 0 width 2;   rectangle 235 320 243 352 color -1;   text '3' 244 346 color 8421504 8;  terminals   output1 240 320 fixed;   output2 240 336 fixed;   output3 240 352 fixed;   input 232 336 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;			end;   PowerMux 448 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 448 312 448 360 color 0 width 2;   rectangle 443 312 451 344 color -1;   text '3' 452 338 color 8421504 8;  terminals   input1 448 320 fixed;   input2 448 336 fixed;   input3 448 352 fixed;   output 456 336 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;			end;   Splitter1 352 280    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;      ellipse 347.7 275.7 356.3 284.3 color -1;     terminals      input 352 280 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Submodel2 352 351    description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 16:30:00</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate> </Description></Information>';    type Submodel     ports      signal in Aeff; "Effective area of nozzle (m2)"      pseudohydraulic in ppIn;      pseudothermalh in pTIn;      power in pFIn;      pseudohydraulic out ppOut;      pseudothermalh out pTOut;      power out pFOut;     restrictions      causality fixed in ppOut;      causality fixed in pFOut;      causality fixed in ppIn;      causality fixed in pTIn;      causality fixed in pFIn;    end;    icon bg bottom     figures      text 'R' 352 336 color 0 53 bold;      text 'IdealNozzleCompFlow' 352 376 color 0 16;     terminals      Aeff 352 304 fixed;      ppIn 320 320 fixed;      pTIn 320 336 fixed;      pFIn 320 352 fixed;      ppOut 384 320 fixed;      pTOut 384 336 fixed;      pFOut 384 352 fixed;    end;    implementation eq/* Ideal Nozzle ModelUses ideal nozzle equation for compressible flows assuming isentropic process. Flow restriction field. No states.Input   - Effective area of nozzle (Aeff)  - p,T,F in  - p,T,F outOutput  - dm, dE, dmb in  - dm, dE, dmb out*/parameters 	real global fs;	string global dll_ICE;	string global dll_fcn_idealNozzle;variables	real pIn, TIn, FIn, pOut;	real dm, dE, dmb;	real aa, d, pr;	real	inArrFlow[4];	real outArrFlow[3];equations  // start typing here 	aa = ppIn.e / ppOut.e;	if (aa > 1) then		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;		pOut = ppOut.e;	else		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;		pOut = ppIn.e;	end;		// Calculate thermodynamic properties from (T,P,x)	inArrFlow = [1,Aeff,pIn,TIn,FIn,pOut,fs];	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);			dm = outArrFlow[1]*d;	dE = outArrFlow[2]*d;		dmb = outArrFlow[3]*d;	ppIn.dm = dm;	ppOut.dm  = dm;	pTIn.dH = dE;	pTOut.dH = dE;	pFIn.f = dmb;	pFOut.f = dmb;implementation_end;  end;  connections   areaMultiplier -> MultiplyDivide1\multiply 448 248;   CA -> ExhVVLift\CA;   dVONom -> ExhVVLift\dCA_lift_nom;   EffortSensor1\effort -> IntakeVVArea\pIn 272 160 328 160;   EffortSensor1\p2 => Submodel2\ppIn;   EffortSensor2\effort -> IntakeVVArea\pOut 416 160 352 160;   EffortSensor2\p2 => PowerMux\input1;   ExhVVLift\lift -> IntakeVVArea\lift;   IntakeVVArea\aEff -> MultiplyDivide1\multiply;   IntakeVVArea\Cd -> Cd;   MultiplyDivide1\output -> Splitter1\input;   PowerDemux\output1 => EffortSensor1\p1;   PowerDemux\output2 => Submodel2\pTIn;   PowerDemux\output3 => Submodel2\pFIn;   PowerMux\output => pTFOut;   pTFIn => PowerDemux\input;   Splitter1\output -> aOpenEff;   Splitter1\output -> Submodel2\Aeff;   Submodel2\pFOut => PowerMux\input3;   Submodel2\ppOut => EffortSensor2\p1;   Submodel2\pTOut => PowerMux\input2;   VONom -> ExhVVLift\CA_start_nom;  end;  figures   text 'Global parameters      real global lift_max;     // Maximum lift of the vavle      real global nstorke;     // number of stroke      real hidden global CA_start_ref;        //Reference start CA for start of valve lift      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed      real hidden global dCA_lift_top_ref;   //Reference duration for lift up      real global Dv;		 	// Valve Seat diameter      real global beta;   	// valve seat angle      real global w;      	// valve seat width      real global Dp;    		// Valve port diameter      real global Ds; 			// Valve stem diameter      ' 288 504 color 0 16; implementation_end;specification_end;				specification 'IntakeVV'description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>Components\PoppetValve.emx</LibraryPath><TimeStamp>2015-10-20 15:58:52</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>'; type Submodel  ports   power in pTFIn [3,1];   signal in CA;   signal in VONom;   signal in dVONom;   power out pTFOut [3,1];   signal out aOpenEff;   signal out Cd;   signal in areaMultiplier; end; icon bg bottom shadow 11776947  figures   line 488 289 520 289 color 0 fill 15132390;   line 488 289 488 337 color 0 fill 15132390;   line 568 291 568 335 color 0 fill 15132390;   line 536 289 568 289 color 0 fill 15132390;   line 528 304 504 320 552 320 528 304 color 0 fill 8355711;   line 520 289 520 297 504 305 496 305 496 337 488 337 color 0 fill 15132390;   line 536 289 536 297 552 305 560 305 560 337 568 337 568 289 536 289 color 0 fill 12632256;   line 520 289 488 289 488 337 496 337 496 305 504 305 520 297 520 289 color 0 fill 12632256;   line 528 305 528 273 color 0 fill 15132390;   text 'PoppetValve' 528 345 color 0 16;  terminals   pTFIn 472 312 fixed;   CA 568 264 fixed;   VONom 488 264 fixed;   dVONom 512 264 fixed;   pTFOut 584 312 fixed;   aOpenEff 584 288 fixed;   Cd 584 264 fixed;   areaMultiplier 544 264 fixed; end; implementation bg  submodels   EffortSensor1 272 320    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      power knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;      text 'e' 272.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   EffortSensor2 416 320    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      pseudohydraulic knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;      text 'e' 416.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   ExhVVLift1 304 112			specifications active 'Intake'				specification 'Exhaust'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-11-2 23:44:24</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 763.9 96 836.1 128 fill 15132390;   text 'VVLift' 800 112 16;  terminals   lift 800 136 fixed;   CA 824 88 fixed;   CA_start_nom 776 88 fixed;   dCA_lift_nom 800 88 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox;	string global fnc_interp;	integer global ExhProfNoRow1;	integer global ExhProfNoRow2;	real global ExhVVProfUpX[ExhProfNoRow1];	real global ExhVVProfUpY[ExhProfNoRow1];	real global ExhVVProfDownX[ExhProfNoRow2];	real global ExhVVProfDownY[ExhProfNoRow2];	real global ExhLift_max;	integer global nStroke;	real global ExhCA_start_ref; //Reference start CA for start of valve lift	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed	real global ExhdCA_lift_top_ref; //Reference duration for lift upvariables	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = ExhProfNoRow1;	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;			inarr2[1] = ExhProfNoRow2;	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			equations	CA_start = CA_start_nom*ExhCA_start_ref;	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;		dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= ExhdCA_lift_up then			inarr1[ExhProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);							inarr2[ExhProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = ExhLift_max*lift; implementation_end;specification_end;				specification 'Intake' description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:16:35</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 267.9 96 340.1 128 color 0 fill 15132390;   text 'VVLift' 304 112 color 0 16;  terminals   lift 304 136 fixed;   CA 328 88 fixed;   CA_start_nom 280 88 fixed;   dCA_lift_nom 304 88 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox = 'dllTool20Sim.dll';	string global fnc_interp = 'interpolate';	integer global InProfNoRow1;	integer global InProfNoRow2;	real global InVVProfUpX[InProfNoRow1]; 	real global InVVProfUpY[InProfNoRow1];	real global InVVProfDownX[InProfNoRow2];	real global InVVProfDownY[InProfNoRow2];	real global InLift_max = 1;	real global nstorke = 0;	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift upvariables	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = InProfNoRow1;	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;			inarr2[1] = InProfNoRow2;	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			equations	CA_start = CA_start_nom*InCA_start_ref;	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;		dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;	phi = CA*180/pi mod (nstorke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= IndCA_lift_up then			inarr1[InProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= IndCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);							inarr2[InProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = InLift_max*lift; implementation_end;specification_end;			end;   IntakeVVArea 328.1 200.1			specifications active 'Intake'				specification 'Exhaust'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:54:56</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 fill 15132390;   text 'VVArea' 328 200 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	real global DvExh;		 	// Valve Seat diameter	real global betaExh;   	// valve seat angle	real global wExh;      	// valve seat width	real global DpExh;    		// Valve port diameter	real global DsExh; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));		else 			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);			else				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);			end;		end;				L_Dv = lift/DvExh;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;				specification 'Intake' description '<Information><Description><Version>4.5</Version><LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2015-6-22 22:48:36</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;   text 'VVArea' 328 200 color 0 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	real global DvIntake;		 	// Valve Seat diameter	real global betaIntake;   	// valve seat angle	real global wIntake;      	// valve seat width	real global DpIntake;    		// Valve port diameter	real global DsIntake; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));		else 			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);			else				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);			end;		end;				L_Dv = lift/DvIntake;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;			end;   MultiplyDivide1 352 248    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>  <TimeStamp>2007-9-27 10:14:59</TimeStamp></Description>';    knot MultiplyDivide     ports      signal knot duplicatable in multiply [1];      signal knot duplicatable in divide [1];      signal knot out output [1];    end;    icon bg ellipse     figures      ellipse 344 240 360 256 color 0 fill 16777215;    end;    implementation eqequations	output = mul (collect (multiply)) ./ mul (collect (divide));     implementation_end;   plug pTFOut 504 336;   plug aOpenEff 520.1 280;   plug areaMultiplier 448 32;   plug pTFIn 200 336;   plug dVONom 304 56;   plug VONom 280.1 32;   plug CA 327.8 69.9;   plug Cd 328 264;   PowerDemux 240 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 240 312 240 360 color 0 width 2;   rectangle 235 320 243 352 color -1;   text '3' 244 346 color 8421504 8;  terminals   output1 240 320 fixed;   output2 240 336 fixed;   output3 240 352 fixed;   input 232 336 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;			end;   PowerMux 448 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 448 312 448 360 color 0 width 2;   rectangle 443 312 451 344 color -1;   text '3' 452 338 color 8421504 8;  terminals   input1 448 320 fixed;   input2 448 336 fixed;   input3 448 352 fixed;   output 456 336 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;			end;   Splitter1 352 280    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;      ellipse 347.7 275.7 356.3 284.3 color -1;     terminals      input 352 280 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Submodel2 352 351    description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 16:30:00</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate> </Description></Information>';    type Submodel     ports      signal in Aeff; "Effective area of nozzle (m2)"      pseudohydraulic in ppIn;      pseudothermalh in pTIn;      power in pFIn;      pseudohydraulic out ppOut;      pseudothermalh out pTOut;      power out pFOut;     restrictions      causality fixed in ppOut;      causality fixed in pFOut;      causality fixed in ppIn;      causality fixed in pTIn;      causality fixed in pFIn;    end;    icon bg bottom     figures      text 'R' 352 336 color 0 53 bold;      text 'IdealNozzleCompFlow' 352 376 color 0 16;     terminals      Aeff 352 304 fixed;      ppIn 320 320 fixed;      pTIn 320 336 fixed;      pFIn 320 352 fixed;      ppOut 384 320 fixed;      pTOut 384 336 fixed;      pFOut 384 352 fixed;    end;    implementation eq/* Ideal Nozzle ModelUses ideal nozzle equation for compressible flows assuming isentropic process. Flow restriction field. No states.Input   - Effective area of nozzle (Aeff)  - p,T,F in  - p,T,F outOutput  - dm, dE, dmb in  - dm, dE, dmb out*/parameters 	real global fs;	string global dll_ICE;	string global dll_fcn_idealNozzle;variables	real pIn, TIn, FIn, pOut;	real dm, dE, dmb;	real aa, d, pr;	real	inArrFlow[4];	real outArrFlow[3];equations  // start typing here 	aa = ppIn.e / ppOut.e;	if (aa > 1) then		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;		pOut = ppOut.e;	else		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;		pOut = ppIn.e;	end;		// Calculate thermodynamic properties from (T,P,x)	inArrFlow = [1,Aeff,pIn,TIn,FIn,pOut,fs];	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);			dm = outArrFlow[1]*d;	dE = outArrFlow[2]*d;		dmb = outArrFlow[3]*d;	ppIn.dm = dm;	ppOut.dm  = dm;	pTIn.dH = dE;	pTOut.dH = dE;	pFIn.f = dmb;	pFOut.f = dmb;implementation_end;  end;  connections   areaMultiplier -> MultiplyDivide1\multiply 448 248;   CA -> ExhVVLift1\CA;   dVONom -> ExhVVLift1\dCA_lift_nom;   EffortSensor1\effort -> IntakeVVArea\pIn 272 160 328 160;   EffortSensor1\p2 => Submodel2\ppIn;   EffortSensor2\effort -> IntakeVVArea\pOut 416 160 352 160;   EffortSensor2\p2 => PowerMux\input1;   ExhVVLift1\lift -> IntakeVVArea\lift;   IntakeVVArea\aEff -> MultiplyDivide1\multiply;   IntakeVVArea\Cd -> Cd;   MultiplyDivide1\output -> Splitter1\input;   PowerDemux\output1 => EffortSensor1\p1;   PowerDemux\output2 => Submodel2\pTIn;   PowerDemux\output3 => Submodel2\pFIn;   PowerMux\output => pTFOut;   pTFIn => PowerDemux\input;   Splitter1\output -> aOpenEff;   Splitter1\output -> Submodel2\Aeff;   Submodel2\pFOut => PowerMux\input3;   Submodel2\ppOut => EffortSensor2\p1;   Submodel2\pTOut => PowerMux\input2;   VONom -> ExhVVLift1\CA_start_nom;  end;  figures   text 'Global parameters      real global lift_max;     // Maximum lift of the vavle      real global nstorke;     // number of stroke      real hidden global CA_start_ref;        //Reference start CA for start of valve lift      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed      real hidden global dCA_lift_top_ref;   //Reference duration for lift up      real global Dv;		 	// Valve Seat diameter      real global beta;   	// valve seat angle      real global w;      	// valve seat width      real global Dp;    		// Valve port diameter      real global Ds; 			// Valve stem diameter      ' 288 504 color 0 16; implementation_end;specification_end;				specification 'IntakeVVVarLift' description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>Components\PoppetValve.emx</LibraryPath><TimeStamp>2015-10-20 15:58:52</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>'; type Submodel  ports   power in pTFIn [3,1];   signal in CA;   signal in VONom;   signal in dVONom;   power out pTFOut [3,1];   signal out aOpenEff;   signal out Cd;   signal in areaMultiplier; end; icon bg bottom shadow 11776947  figures   line 488 289 520 289 color 0 fill 15132390;   line 488 289 488 337 color 0 fill 15132390;   line 568 291 568 335 color 0 fill 15132390;   line 536 289 568 289 color 0 fill 15132390;   line 528 304 504 320 552 320 528 304 color 0 fill 8355711;   line 520 289 520 297 504 305 496 305 496 337 488 337 color 0 fill 15132390;   line 536 289 536 297 552 305 560 305 560 337 568 337 568 289 536 289 color 0 fill 12632256;   line 520 289 488 289 488 337 496 337 496 305 504 305 520 297 520 289 color 0 fill 12632256;   line 528 305 528 273 color 0 fill 15132390;   text 'PoppetValve' 528 345 color 0 16;  terminals   pTFIn 472 312 fixed;   CA 568 264 fixed;   VONom 488 264 fixed;   dVONom 512 264 fixed;   pTFOut 584 312 fixed;   aOpenEff 584 288 fixed;   Cd 584 264 fixed;   areaMultiplier 544 264 fixed; end; implementation bg  submodels   EffortSensor1 272 319    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      power knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;      text 'e' 272.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   EffortSensor2 416 319    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      pseudohydraulic knot in p1 [1];      pseudohydraulic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;      text 'e' 416.5 317.6 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   IntakeVVArea 328.1 200.1			specifications active 'Intake'				specification 'Exhaust'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:54:56</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;   text 'VVArea' 328 200 color 0 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	integer global noExhVV;	real global DvExh;		 	// Valve Seat diameter	real global betaExh;   	// valve seat angle	real global wExh;      	// valve seat width	real global DpExh;    		// Valve port diameter	real global DsExh; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));		else 			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);			else				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);			end;		end;				L_Dv = lift/DvExh;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;				specification 'Intake' description '<Information> <Description>    <Version>4.6</Version>  <LibraryPath>Components\ValveArea.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2016-4-4 11:12:58</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   signal in lift {m} ;   signal in pIn {Pa} ;   signal in pOut {Pa} ;   signal out aOpen {m2} ; "Open area"   signal out Cd; "Discharge coefficient"   signal out aEff {m2} ; "Effective area of nozzle" end; icon bg bottom  figures   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;   text 'VVArea' 328 200 color 0 16;  terminals   lift 304 176 fixed;   pIn 328 176 fixed;   pOut 352 176 fixed;   aOpen 304 224 fixed;   Cd 328 224 fixed;   aEff 352 224 fixed; end; implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	integer global noInVV; 		// numver of intake valves	real global DvIntake;		 	// Valve Seat diameter	real global betaIntake;   	// valve seat angle	real global wIntake;      	// valve seat width	real global DpIntake;    		// Valve port diameter	real global DsIntake; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));		else 			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);			else				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);			end;		end;				L_Dv = lift/DvIntake;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;specification_end;			end;   IntakeVVLift1 304 120			specifications active 'IntakeLiftVar'				specification 'Exhaust'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-11-2 23:44:24</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 763.9 96 836.1 128 fill 15132390;   text 'VVLift' 800 112 16;  terminals   lift 800 136 fixed;   CA 824 88 fixed;   CA_start_nom 776 88 fixed;   dCA_lift_nom 800 88 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox;	string global fnc_interp;	integer global ExhProfNoRow1;	integer global ExhProfNoRow2;	real global ExhVVProfUpX[ExhProfNoRow1];	real global ExhVVProfUpY[ExhProfNoRow1];	real global ExhVVProfDownX[ExhProfNoRow2];	real global ExhVVProfDownY[ExhProfNoRow2];	real global ExhLift_max;	integer global nStroke;	real global ExhCA_start_ref; //Reference start CA for start of valve lift	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed	real global ExhdCA_lift_top_ref; //Reference duration for lift upvariables	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = ExhProfNoRow1;	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;			inarr2[1] = ExhProfNoRow2;	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			equations	CA_start = CA_start_nom*ExhCA_start_ref;	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;		dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= ExhdCA_lift_up then			inarr1[ExhProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);							inarr2[ExhProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = ExhLift_max*lift; implementation_end;specification_end;				specification 'ExhaustVarLift'description '<Information> <Description>    <Version>4.6</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2016-4-4 11:19:41</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description> <Attributes>  <GlobalRelations></GlobalRelations> </Attributes></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 267.9 104 340.1 136 color 0 fill 15132390;   text 'VVLift' 304 120 color 0 16;  terminals   lift 304 144 fixed;   CA 328 96 fixed;   CA_start_nom 280 96 fixed;   dCA_lift_nom 304 96 fixed; end; implementation eqparameters	string global dllToolbox;	string global fnc_interp;	integer global ExhProfNoRow1;	integer global ExhProfNoRow2;	real global ExhVVProfUp[ExhProfNoRow1];	real global ExhVVProfDown[ExhProfNoRow1];	real global ExhLift_max;	real global nStroke;	real global ExhCA_start_ref; //Reference start CA for start of valve lift	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift upvariables	real inarr1[ExhProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[ExhProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real CA_start_cyc;	real dCA_total_ref;	real phi;	integer i;	boolean reset;initialequations	CA_start_cyc = 720;	reset = true;	inarr1[1] = ExhProfNoRow1;	for i = 1 to ExhProfNoRow1 do		inarr1[i+1] = i / ExhProfNoRow1;	end;	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUp;			inarr2[1] = ExhProfNoRow2;	for i = 1 to ExhProfNoRow2 do		inarr2[i+1] = i / ExhProfNoRow2;	end;		inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDown;		dCA_total_ref = ExhdCA_lift_up + ExhdCA_lift_down;		equations	CA_start = CA_start_nom*ExhCA_start_ref;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and reset == true then		reset = false;		CA_start_cyc = CA_start;		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);		dCA_lift = dCA_total - dCA_total_ref;		end;	if phi > CA_start_cyc then		if phi < CA_start_cyc + dCA_total then			CA_VV = (phi - CA_start_cyc)/ExhdCA_lift_up;			if CA_VV <= 1 then				inarr1[ExhProfNoRow1*2+2] = CA_VV;				lift = dll(dllToolbox, fnc_interp, inarr1);			else 					CA_VV = (phi - CA_start_cyc)/(ExhdCA_lift_up + dCA_lift);				if CA_VV <= 1 then					lift = 1;			  	else 						CA_VV = (phi - (CA_start_cyc + ExhdCA_lift_up + dCA_lift))/ExhdCA_lift_down;					inarr2[ExhProfNoRow2*2+2] = CA_VV;					lift = dll(dllToolbox, fnc_interp,inarr2);				end;			end;		else			lift = 0;		end;	else		lift = 0;			if reset == false then			reset = true;			CA_start_cyc = 720;		end;								end;				lift = ExhLift_max*lift; implementation_end;specification_end;				specification 'Intake'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-10-20 15:16:35</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 267.9 96 340.1 128 color 0 fill 15132390;   text 'VVLift' 304 112 color 0 16;  terminals   lift 304 136 fixed;   CA 328 88 fixed;   CA_start_nom 280 88 fixed;   dCA_lift_nom 304 88 fixed; end; implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	string global dllToolbox = 'dllTool20Sim.dll';	string global fnc_interp = 'interpolate';	integer global InProfNoRow1;	integer global InProfNoRow2;	real global InVVProfUpX[InProfNoRow1]; 	real global InVVProfUpY[InProfNoRow1];	real global InVVProfDownX[InProfNoRow2];	real global InVVProfDownY[InProfNoRow2];	real global InLift_max = 1;	real global nstorke = 0;	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift upvariables	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;initialequations	inarr1[1] = InProfNoRow1;	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;			inarr2[1] = InProfNoRow2;	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			equations	CA_start = CA_start_nom*InCA_start_ref;	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;		dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;	phi = CA*180/pi mod (nstorke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= IndCA_lift_up then			inarr1[InProfNoRow1*2+2] = CA_VV;			lift = dll(dllToolbox, fnc_interp, inarr1);		else 	if CA_VV <= IndCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);							inarr2[InProfNoRow2*2+2] = CA_VV;							lift = dll(dllToolbox, fnc_interp,inarr2);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = InLift_max*lift; implementation_end;specification_end;				specification 'IntakeLiftVar' description '<Information><Description><Version>4.6</Version><LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2016-4-1 23:07:16</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>'; type ExhVVLift  ports   signal out lift;   signal in CA;   signal in CA_start_nom;   signal in dCA_lift_nom; end; icon bg bottom  figures   rectangle 267.9 104 340.1 136 color 0 fill 15132390;   text 'VVLift' 304 120 color 0 16;  terminals   lift 304 144 fixed;   CA 328 96 fixed;   CA_start_nom 280 96 fixed;   dCA_lift_nom 304 96 fixed; end; implementation eqparameters	string global dllToolbox;	string global fnc_interp;		integer InProfNoRow1 = 30;	integer InProfNoRow2 = 30;	real global InVVProfUp[InProfNoRow1];	real global InVVProfDown[InProfNoRow1];	real global InLift_max;	integer global nStroke;	real global InCA_start_ref; //Reference start CA for start of valve lift	real global IndCA_lift_up;	 //Lift up time (should not be changed unless file is changed	real global IndCA_lift_down; //Lift down time (should not be changed unless file is changed//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift upvariables	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1	real CA_start, dCA_lift, dCA_total, CA_VV;	real CA_start_cyc;	real dCA_total_ref;	real phi;	integer i;	boolean reset;initialequations	CA_start_cyc = 180*nStroke;	reset = true;	inarr1[1] = InProfNoRow1;	for i = 1 to InProfNoRow1 do		inarr1[i+1] = i / InProfNoRow1;	end;	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUp;			inarr2[1] = InProfNoRow2;	for i = 1 to InProfNoRow2 do		inarr2[i+1] = i / InProfNoRow2;	end;		inarr2[InProfNoRow2+2:InProfNoRow2*2+1] = InVVProfDown;		dCA_total_ref = IndCA_lift_up + IndCA_lift_down;		equations	CA_start = CA_start_nom*InCA_start_ref;	phi = CA*180/pi mod (nStroke*180);	if phi > CA_start and reset == true then		reset = false;		CA_start_cyc = CA_start;		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);		dCA_lift = dCA_total - dCA_total_ref;		end;	if phi > CA_start_cyc then		if phi < CA_start_cyc + dCA_total then			CA_VV = (phi - CA_start_cyc)/IndCA_lift_up;			if CA_VV <= 1 then				inarr1[InProfNoRow1*2+2] = CA_VV;				lift = dll(dllToolbox, fnc_interp, inarr1);			else 					CA_VV = (phi - CA_start_cyc)/(IndCA_lift_up + dCA_lift);				if CA_VV <= 1 then					lift = 1;			  	else 						CA_VV = (phi - (CA_start_cyc + IndCA_lift_up + dCA_lift))/IndCA_lift_down;					inarr2[InProfNoRow2*2+2] = CA_VV;					lift = dll(dllToolbox, fnc_interp,inarr2);				end;			end;		else			lift = 0;		end;	else		lift = 0;			if reset == false then			reset = true;			CA_start_cyc = 720;		end;								end;				lift = InLift_max*lift; implementation_end;specification_end;			end;   MultiplyDivide1 352 248    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>  <TimeStamp>2007-9-27 10:14:59</TimeStamp></Description>';    knot MultiplyDivide     ports      signal knot duplicatable in multiply [1];      signal knot duplicatable in divide [1];      signal knot out output [1];    end;    icon bg ellipse     figures      ellipse 344 240 360 256 color 0 fill 16777215;    end;    implementation eqequations	output = mul (collect (multiply)) ./ mul (collect (divide));     implementation_end;   plug pTFOut 504 336;   plug aOpenEff 520.1 280;   plug areaMultiplier 448 32;   plug pTFIn 200 336;   plug dVONom 304 56;   plug VONom 280.1 32;   plug CA 327.8 69.9;   plug Cd 328 264;   PowerDemux 241.5 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 240 312 240 360 color 0 width 2;   rectangle 235 320 243 352 color -1;   text '3' 244 346 color 8421504 8;  terminals   output1 240 320 fixed;   output2 240 336 fixed;   output3 240 352 fixed;   input 232 336 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;			end;   PowerMux 449.5 336			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 448 312 448 360 color 0 width 2;   rectangle 443 312 451 344 color -1;   text '3' 452 338 color 8421504 8;  terminals   input1 448 320 fixed;   input2 448 336 fixed;   input3 448 352 fixed;   output 456 336 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;			end;   Splitter1 352 280    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;      ellipse 347.7 275.7 356.3 284.3 color -1;     terminals      input 352 280 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Submodel2 352 359.5    description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 16:30:00</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate> </Description></Information>';    type Submodel     ports      signal in Aeff; "Effective area of nozzle (m2)"      pseudohydraulic in ppIn;      pseudothermalh in pTIn;      power in pFIn;      pseudohydraulic out ppOut;      pseudothermalh out pTOut;      power out pFOut;     restrictions      causality fixed in ppOut;      causality fixed in pFOut;      causality fixed in ppIn;      causality fixed in pTIn;      causality fixed in pFIn;    end;    icon bg bottom     figures      text 'R' 352 336 color 0 53 bold;      text 'IdealNozzle
CompFlow' 352 376 color 0 16;     terminals      Aeff 352 304 fixed;      ppIn 320 320 fixed;      pTIn 320 336 fixed;      pFIn 320 352 fixed;      ppOut 384 320 fixed;      pTOut 384 336 fixed;      pFOut 384 352 fixed;    end;    implementation eq/* Ideal Nozzle ModelUses ideal nozzle equation for compressible flows assuming isentropic process. Flow restriction field. No states.Input   - Effective area of nozzle (Aeff)  - p,T,F in  - p,T,F outOutput  - dm, dE, dmb in  - dm, dE, dmb out*/parameters 	real global fs;	string global dll_ICE;	string global dll_fcn_idealNozzle;variables	real pIn, TIn, FIn, pOut;	real dm, dE, dmb;	real aa, d, pr;	real	inArrFlow[7];	real outArrFlow[3];equations  // start typing here 	aa = ppIn.e / ppOut.e;	if (aa > 1) then		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;		pOut = ppOut.e;	else		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;		pOut = ppIn.e;	end;		// Calculate thermodynamic properties from (T,P,x)	inArrFlow = [1;Aeff;pIn;pOut;TIn;FIn;fs];	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);			dm = outArrFlow[1]*d;	dE = outArrFlow[2]*d;		dmb = outArrFlow[3]*d;	ppIn.dm = dm;	ppOut.dm  = dm;	pTIn.dH = dE;	pTOut.dH = dE;	pFIn.f = dmb;	pFOut.f = dmb;implementation_end;  end;  connections   areaMultiplier -> MultiplyDivide1\multiply 448 248;   CA -> IntakeVVLift1\CA;   dVONom -> IntakeVVLift1\dCA_lift_nom;   EffortSensor1\effort -> IntakeVVArea\pIn 272 160 328 160;   EffortSensor1\p2 => Submodel2\ppIn;   EffortSensor2\effort -> IntakeVVArea\pOut 416 160 352 160;   EffortSensor2\p2 => PowerMux\input1;   IntakeVVArea\aEff -> MultiplyDivide1\multiply;   IntakeVVArea\Cd -> Cd;   IntakeVVArea\lift <- IntakeVVLift1\lift;   MultiplyDivide1\output -> Splitter1\input;   PowerDemux\output1 => EffortSensor1\p1;   PowerDemux\output2 => Submodel2\pTIn;   PowerDemux\output3 => Submodel2\pFIn;   PowerMux\output => pTFOut;   pTFIn => PowerDemux\input;   Splitter1\output -> aOpenEff;   Splitter1\output -> Submodel2\Aeff;   Submodel2\pFOut => PowerMux\input3;   Submodel2\ppOut => EffortSensor2\p1;   Submodel2\pTOut => PowerMux\input2;   VONom -> IntakeVVLift1\CA_start_nom;  end;  figures   text 'Global parameters
      real global lift_max;     // Maximum lift of the vavle
      real global nstorke;     // number of stroke
      real hidden global CA_start_ref;        //Reference start CA for start of valve lift
      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed
      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed
      real hidden global dCA_lift_top_ref;   //Reference duration for lift up
      real global Dv;		 	// Valve Seat diameter
      real global beta;   	// valve seat angle
      real global w;      	// valve seat width
      real global Dp;    		// Valve port diameter
      real global Ds; 			// Valve stem diameter
      
' 288 504 color 0 16; implementation_end;specification_end;			end;   plug ppTFOut 968 312;   plug ppTFIn 400 312;   plug dQCyl 799.9 423.8;   plug dmf 624 336;   plug contSig 720 56;   plug M 704.1 751.9;   pMaxFinder 928.2 544    description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>PerformanceIndexCalc\pMaxFinder.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-11-14 21:37:42</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>';    type 'Submodel-Equation'     ports      signal in phi;      signal out pMax;      signal in pCyl;      signal out phiAtPMax;    end;    implementation eqparameters	integer global nStroke;variables	real phi360, phiComb;	real lastTime;	integer newCycle;	real pMaxTemp, phiAtPMaxTemp;initialequations	lastTime = 0;	newCycle = 1;	pMaxTemp = 0;	phiAtPMaxTemp = 0;equations	phi360 = phi*180/pi mod (180*nStroke);	if (phi360 > 180) then		phiComb = phi360 - 360;	else 		phiComb = phi360;	end;	if (time > lastTime) then		if ((phiComb>-10) and (phiComb<40) and (pCyl > 5.0e5)) then			if (newCycle==1) then				pMax = pMaxTemp;				phiAtPMax = phiAtPMaxTemp;				pMaxTemp = 0.0;				newCycle = 0;			end;			if (pCyl > pMaxTemp) then				pMaxTemp = pCyl;				phiAtPMaxTemp = phiComb;			end;		else 			newCycle = 1;		end;		lastTime = time;	end;implementation_end;   PowerMux 712 307.5			specifications active 'inputs_3'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;				specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;				specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 696 304 728 304 color 0 width 2;   rectangle 696 300 728 308 color -1;   text '3' 722 309 color 8421504 8;  terminals   input1 704 304 fixed;   input2 712 304 fixed;   input3 720 304 fixed;   output 712 304 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;				specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;				specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;				specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;				specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;				specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;				specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;			end;   PowerSensor 704 528    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>  <TimeStamp>2011-11-29 16:29:42</TimeStamp></Description></Information>';    knot PowerSensor     ports      pneumatic knot in p1 [1];      pneumatic knot out p2 [1];      signal knot out P [1] {W} ;     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 697.1 520.8 710.9 535.2 color 0 fill 16777215;      text 'P' 704.5 527.8 color 0;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	P = p1.e .* p1.f;implementation_end;   ROHR 711.4 256.5			specifications active 'FixedShapeVarDurComb'				specification 'FixedShapeFixedDurComb'description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>FlowRestriction\CombROHR.emx</LibraryPath>  <TimeStamp>2015-11-14 17:37:19</TimeStamp><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>'; type Submodel  ports   signal in pfi;   signal in x_lev;   signal in fiinj;   signal in omega;   power out pp;   power out pT;   power out pF;   signal out Comb_state; end; icon bg  figures   rectangle 332.5 280.9 387.4 311 fill 15132390;   text 'name' 360 296 16; end; implementation eqparameters	integer global nCyl;	integer global nStroke;	real global hn;//	real global fiinj;	real global mqf_max;	real global fs;	real global S, B, lambdaR, CR;// Englib	string global dll_ICE;//	string dll_fcn_rohr    = 'ice_rohr';//	string dll_icemax    = 'ice_pfimax';//	string hidden dll_fcn_ThDP = 'thdyn_CombGasZach'; // subroutines names in the dll file//	string dll_fcn_rohr = 		'ice_rohr2';	real global wiebe_para[9];variables	real phi;	real phi_comb;	real P, F, T;	real dmf;	real mqf;//	real inarr_ROHR[20], outarr_ROHR[13];	real fiig;//	real hidden inarr_pfimax[3], outarr_pfimax[2];//	real hidden inarr_ThermoProp[3], outarr_ThermoProp[13];//	real Pmax, Pmax_pfi;//	real bmepnom, omeganom;//	real eta_i, sfoc;//	real mfPC, mf, Oldmf, OldmfPC;	boolean reset;		real dphi_comb, igdel, dmf_nom;	real yp, ym, yl, yptomp, ymtomm, yltoml, df1dy, df2dy, df3dy;	initialequations	Comb_state = 0;	// 0: Start of new cycle / 1 : injection started / 2 : start of combustion / 5: end of combustion//	if fiinj > 180 then fiinj = fiinj - 360; end;		fiig = 0;	reset = true;	mqf = 0;	dmf = 0;	dphi_comb = wiebe_para[3] + wiebe_para[6];code	P=pp.e; F=pF.e; T=pT.e;	phi = pfi*180/pi mod 360;	if phi > 180 then 		phi_comb= phi - 360;  	else		phi_comb = phi;	end;	if phi_comb > fiinj and Comb_state == 0 then		Comb_state = 1;		mqf = mqf_max * x_lev;		igdel = 180/pi*omega*1e-3*0.0405*exp(5473/T)*(P*1e-5)^(-0.757);		if igdel > 30 then			Comb_state = 5;		end;		fiig = fiinj + igdel;		reset = false;			else if phi_comb > fiig and phi_comb < fiig + dphi_comb and Comb_state == 1 then				Comb_state = 2;				reset = true;			else	if phi_comb > fiig + dphi_comb and reset == true then						Comb_state = 5;						reset = false;					end;			end;	end;				if phi_comb > -20 and phi_comb < -15 then		Comb_state = 0;		reset = true;	end;				switch Comb_state		case 2 do			yp = max([(phi_comb - fiig) / wiebe_para[4];0]);			ym = max([0;(phi_comb - (fiig + wiebe_para[3]))/wiebe_para[5]]);			yl = max([0;(phi_comb - (fiig + wiebe_para[3]))/wiebe_para[6]]);			yptomp = yp^wiebe_para[7];			ymtomm = ym^wiebe_para[8];			yltoml = yl^wiebe_para[9];			df1dy = 6.9*(wiebe_para[7] + 1)*yptomp*exp(-6.9*yp*yptomp) / wiebe_para[4];			df2dy = 6.9*(wiebe_para[8] + 1)*ymtomm*exp(-6.9*ym*ymtomm) / wiebe_para[5];			df3dy = 6.9*(wiebe_para[9] + 1)*yltoml*exp(-6.9*yl*yltoml) / wiebe_para[6];			dmf_nom = wiebe_para[1]*df1dy + wiebe_para[2]*df2dy + (1-wiebe_para[1] - wiebe_para[2])*df3dy;			dmf = mqf*dmf_nom*omega*180/pi;		default do			dmf = 0;	end;		pp.f=dmf;	pF.f= dmf;	pT.f=dmf*hn;	/*	inarr_pfimax=[time; phi; P];	outarr_pfimax=dll(dll_ICE,dll_icemax, inarr_pfimax);	Pmax=outarr_pfimax[1];Pmax_pfi=outarr_pfimax[2];	p_max = [Pmax;Pmax_pfi];	*/implementation_end;specification_end;				specification 'FixedShapeVarDurComb' description '<Information><Description><Version>4.6</Version><LibraryPath>Combustion\CombFixedROHR.emx</LibraryPath><TimeStamp>2016-3-30 23:27:23</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>'; type Submodel  ports   signal in pfi;   signal in x_lev;   signal in fiinj;   signal in omega;   power out pp;   power out pT;   power out pF;   signal out Comb_state; end; icon bg bottom  figures   rectangle 680.9 241.5 741.9 271.5 color 0 fill 15132390;   text 'name' 711.4 256.5 color 0 16;  terminals   pfi 704 232 fixed;   x_lev 687.4 232 fixed;   fiinj 721.9 232 fixed;   omega 739.5 232 fixed;   Comb_state 739.5 280 fixed; end; implementation eqparameters	integer global nCyl;	integer global nStroke;	real global hn;//	real global fiinj;	real global mqf_max;	real global fs;	real global S, B, lambdaR, CR;// Englib	string global dll_ICE;//	string dll_fcn_rohr    = 'ice_rohr';//	string dll_icemax    = 'ice_pfimax';//	string hidden dll_fcn_ThDP = 'thdyn_CombGasZach'; // subroutines names in the dll file//	string dll_fcn_rohr = 		'ice_rohr2';	real global wiebe_para[9];variables	real phi;	real phi_comb;	real P, F, T;	real dmf;	real mqf;//	real inarr_ROHR[20], outarr_ROHR[13];	real fiig;//	real hidden inarr_pfimax[3], outarr_pfimax[2];//	real hidden inarr_ThermoProp[3], outarr_ThermoProp[13];//	real Pmax, Pmax_pfi;//	real bmepnom, omeganom;//	real eta_i, sfoc;//	real mfPC, mf, Oldmf, OldmfPC;	boolean reset;	real wiebe3Temp, wiebe4Temp, wiebe5Temp, wiebe6Temp;  // Wiebe parameters related to combustion duration		real dphi_comb, igdel, dmf_nom;	real yp, ym, yl, yptomp, ymtomm, yltoml, df1dy, df2dy, df3dy;	initialequations	Comb_state = 0;	// 0: Start of new cycle / 1 : injection started / 2 : start of combustion / 5: end of combustion//	if fiinj > 180 then fiinj = fiinj - 360; end;		fiig = 0;	reset = true;	mqf = 0;	dmf = 0;	wiebe3Temp = wiebe_para[3];	wiebe4Temp = wiebe_para[4];		wiebe5Temp = wiebe_para[5];	wiebe6Temp = wiebe_para[6];		dphi_comb = wiebe3Temp + wiebe6Temp;code	P=pp.e; F=pF.e; T=pT.e;	phi = pfi*180/pi mod 360;	if phi > 180 then 		phi_comb= phi - 360;  	else		phi_comb = phi;	end;	if phi_comb > fiinj and Comb_state == 0 then		Comb_state = 1;		mqf = mqf_max * x_lev;		igdel = 180/pi*omega*1e-3*0.0405*exp(5473/T)*(P*1e-5)^(-0.757);		// Vary combustion duration according to amount of injection		wiebe3Temp = 0.6*wiebe_para[3]*(1+0.6667*x_lev);		wiebe4Temp = 0.6*wiebe_para[4]*(1+0.6667*x_lev);		wiebe5Temp = 0.6*wiebe_para[5]*(1+0.6667*x_lev);		wiebe6Temp = 0.6*wiebe_para[6]*(1+0.6667*x_lev);		dphi_comb = wiebe3Temp + wiebe6Temp;		// For constant duration, use following		// dphi_comb = wiebe_para[3] + wiebe_para[6];				// **********************************************************				if igdel > 30 then			Comb_state = 5;		end;		fiig = fiinj + igdel;		reset = false;			else if phi_comb > fiig and phi_comb < fiig + dphi_comb and Comb_state == 1 then				Comb_state = 2;				reset = true;			else	if phi_comb > fiig + dphi_comb and reset == true then						Comb_state = 5;						reset = false;					end;			end;	end;				if phi_comb > -20 and phi_comb < -15 then		Comb_state = 0;		reset = true;	end;				switch Comb_state		case 2 do			yp = max([(phi_comb - fiig) / wiebe4Temp;0]);			ym = max([0;(phi_comb - (fiig + wiebe3Temp))/wiebe5Temp]);			yl = max([0;(phi_comb - (fiig + wiebe3Temp))/wiebe6Temp]);			yptomp = yp^wiebe_para[7];			ymtomm = ym^wiebe_para[8];			yltoml = yl^wiebe_para[9];			df1dy = 6.9*(wiebe_para[7] + 1)*yptomp*exp(-6.9*yp*yptomp) / wiebe4Temp;			df2dy = 6.9*(wiebe_para[8] + 1)*ymtomm*exp(-6.9*ym*ymtomm) / wiebe5Temp;			df3dy = 6.9*(wiebe_para[9] + 1)*yltoml*exp(-6.9*yl*yltoml) / wiebe6Temp;			dmf_nom = wiebe_para[1]*df1dy + wiebe_para[2]*df2dy + (1-wiebe_para[1] - wiebe_para[2])*df3dy;			dmf = mqf*dmf_nom*omega*180/pi;		default do			dmf = 0;	end;		pp.f=dmf;	pF.f= dmf;	pT.f=dmf*hn;	/*	inarr_pfimax=[time; phi; P];	outarr_pfimax=dll(dll_ICE,dll_icemax, inarr_pfimax);	Pmax=outarr_pfimax[1];Pmax_pfi=outarr_pfimax[2];	p_max = [Pmax;Pmax_pfi];	*/implementation_end;specification_end;			end;   SFOC 544 528.2    description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>PerformanceIndexCalc\SFOC.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-11-14 21:29:40</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>';    type 'Submodel-Equation'     ports      signal in phi;      signal in powCyl;      signal in dmf;    end;    implementation eq/* Equation SubmodelEnter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).*/parameters	integer global nStroke;variables	integer reset;		real phiTwoPi;	real mf, mfTemp, mfCyc, W, WCyc, WTemp;	real ISFC;initialequations	mfTemp = 0;	WTemp = 0;	reset = 1;		ISFC = 0;equations	phiTwoPi = phi mod (nStroke*pi);	mf = int(dmf);	W = int(powCyl);		if phiTwoPi > (nStroke-0.5)*pi and reset == 0 then		reset = 1;		mfCyc = mf - mfTemp;		WCyc = W - WTemp;		ISFC = mfCyc / WCyc * 3.6e9;		mfTemp = mf;		WTemp = W;	end;			if phiTwoPi > pi/10 and phiTwoPi < pi/8 and reset == 1 then		reset = 0;	end;implementation_end;   Splitter1 1000 408    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 996.8 404.8 1003.2 411.2 color -1 fill 0;      ellipse 995.7 403.7 1004.3 412.3 color -1;     terminals      input 1000 408 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Splitter2 912 208    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 908.8 204.8 915.2 211.2 color -1 fill 0;      ellipse 907.7 203.7 916.3 212.3 color -1;     terminals      input 912 208 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Splitter3 704 208    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 700.8 204.8 707.2 211.2 color -1 fill 0;      ellipse 699.7 203.7 708.3 212.3 color -1;     terminals      input 704 208 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Splitter4 832 544    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 828.8 540.8 835.2 547.2 color -1 fill 0;      ellipse 827.7 539.7 836.3 548.3 color -1;     terminals      input 832 544 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Splitter5 928 624    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 924.8 620.8 931.2 627.2 color -1 fill 0;      ellipse 923.7 619.7 932.3 628.3 color -1;     terminals      input 928 624 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Splitter6 656 336    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 652.8 332.8 659.2 339.2 color -1 fill 0;      ellipse 651.7 331.7 660.3 340.3 color -1;     terminals      input 656 336 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Splitter7 784 624    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 780.8 620.8 787.2 627.2 color -1 fill 0;      ellipse 779.7 619.7 788.3 628.3 color -1;     terminals      input 784 624 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Submodel2 880.9 448    description '<Information>  <Description>    <LibraryPath>engine\HeatTransferEichelberg.emx</LibraryPath>    <TimeStamp>2014-10-9 23:04:23</TimeStamp>    <Version>4.4</Version>  </Description></Information>';    type Submodel     ports      power in pQ;      signal in Vol;      signal in Pcyl;      signal in omega;      power out pQOut;    end;    icon bg bottom     figures      text 'dQ' 880.9 448 color 0 36;     terminals      pQ 856 456 fixed;      Vol 904 456 fixed;      Pcyl 856 432 fixed;      omega 904 432 fixed;    end;    implementation bg     submodels      plug pQ 30 135;      plug Vol 112.5 52.5;      plug Pcyl 165 52.5;      plug omega 217.6 52.5;      plug pQOut 248 136;      R1 168 136       type R        ports         power in pTCyl;         power out pTwall;         signal in Vol;         signal in Pcyl;         signal in omega;        restrictions         causality fixed in pTCyl;       end;       icon bg bottom        figures         text 'R' 168 136 color 0 18 bold;       end;       implementation eqparameters	real global S, B;	real Cylhead= 1;variables	real hidden Area, AreaLin, AreaPis, alfa;	real Q;initialequations	AreaPis = 2*pi/4.0*B^2;	equations					AreaLin=Vol*4.0/B;	Area = AreaPis + AreaLin;	alfa = Cylhead*sqrt(Pcyl*pTCyl.e*1.0e-5)*(S*omega/pi)^0.333;	Q = alfa*Area*(pTCyl.e-pTwall.e);    	pTCyl.f= Q;	pTwall.f= Q;implementation_end;      ZeroJunction1 97.5 135       knot ZeroJunction        ports         power knot duplicatable none p [1];         signal knot out effort [1];        restrictions         causality constraint one_in p;       end;       icon bg        figures         text '0' 97.5 135 color 0 18 bold;       end;       implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);    implementation_end;     end;     connections      omega -> R1\omega;      Pcyl -> R1\Pcyl;      pQ => ZeroJunction1\p;      R1\pTwall => pQOut;      Vol -> R1\Vol;      ZeroJunction1\p => R1\pTCyl;     end;    implementation_end;   TWall 959.9 448			specifications active 'constant'				specification 'constant' description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Graphical.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>True</KeepParameterValues><TimeStamp>2007-11-1 22:32:34</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>'; type 'Submodel-Graphical'  ports   pseudothermal in port1;  restrictions   causality fixed out port1; end; icon bg shadow 11776947  figures   rectangle 934.9 432.9 985 463.1 color 0 fill 15132390;   text 'name' 959.9 448 color 0 16; end; implementation bg  submodels   MSe 432 144    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>  <TimeStamp>2011-11-29 16:12:33</TimeStamp></Description></Information>';    type MSe     ports      power in p;      signal in effort;     restrictions      causality fixed out p;    end;    icon bg bottom     figures      text 'MSe' 432 144 color 0 18 bold;    end;    implementation eqvariables	real flow;equations	p.e = effort;	flow = p.f;implementation_end;   plug port1 320 144;   tWallConst 504 144    description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Sources\Constant.emx</LibraryPath><TimeStamp>2007-10-19 14:48:44</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';    type Constant     ports      signal out output;    end;    icon bg bottom     figures      rectangle 488.1 128 519.9 160 color 0 fill 15132390;      line 492.9 139.6 514.9 139.6 color 16711680 width 2;      line 490.2 150.7 515.9 150.7 color 0;      line 492.5 134.7 492.5 153 color 0;    end;    implementation eqparameters	real global T_w_init;		// output valueequations	output = T_w_init;     implementation_end;  end;  connections   MSe\effort <- tWallConst\output;   MSe\p <= port1;  end; implementation_end;specification_end;				specification 'heatCapacity_empiricalWallCooling_poly'description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Graphical.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>True</KeepParameterValues><TimeStamp>2007-11-1 22:32:34</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>'; type 'Submodel-Graphical'  ports   pseudothermal in port1;  restrictions   causality fixed out port1; end; icon bg shadow 11776947  figures   rectangle 934.9 432.9 985 463.1 color 0 fill 15132390;   text 'name' 959.9 448 color 0 16; end; implementation bg  submodels   C 408 208    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\C.emx</LibraryPath>  <TimeStamp>2011-11-29 15:58:35</TimeStamp></Description></Information>';    type C     ports      power in p;      signal out state;     restrictions      causality preferred out p;    end;    icon bg bottom     figures      text 'C' 408 208 color 0 18 bold;    end;    implementation eqparameters	real global mCp;	real global T_w_init;variables	real global E_init;initialequations	E_init = mCp*T_w_init;		equations	state = int(p.f, E_init);	p.e = state / mCp;implementation_end;   plug port1 320 144;   R 496 144    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\R.emx</LibraryPath>  <TimeStamp>2011-11-29 16:35:37</TimeStamp></Description></Information>';    type R     ports      power in p;    end;    icon bg bottom     figures      text 'R' 496 144 color 0 18 bold;    end;    implementation eqparameters	real global C_cylHT[4];	integer global ncyl;variables	real T_w;	equations	T_w = p.e;	p.f = (((C_cylHT[1]*T_w + C_cylHT[2])*T_w + C_cylHT[3])*T_w + C_cylHT[4])*1e3/ncyl;implementation_end;   ZeroJunction 408 144    description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';    knot ZeroJunction     ports      pseudothermal knot duplicatable none p [1];      signal knot out effort [1];     restrictions      causality constraint one_in p;    end;    icon bg     figures      text '0' 408 144 color 0 18 bold;    end;    implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;  end;  connections   port1 => ZeroJunction\p;   ZeroJunction\p => C\p;   ZeroJunction\p => R\p;  end; implementation_end;specification_end;			end;  end;  connections   Constant\output -> CrankMechanism1\p_scvg;   contSig -> Demux\input;   CrankMechanism1\flow -> Splitter1\input 1000 576;   CrankMechanism1\p2 => M;   CrankMechanism1\q_rad -> Splitter7\input;   Demux\output1 -> intakeVV\VONom 488 208;   Demux\output2 -> intakeVV\dVONom 512 208;   Demux\output3 -> intakeVV\areaMultiplier 544 208;   Demux\output4 -> ROHR\x_lev 688 184;   Demux\output5 -> ROHR\fiinj 720 184;   Demux\output6 -> exhVV\VONom 832 200;   Demux\output7 -> exhVV\dVONom 856 200;   Demux\output8 -> exhVV\areaMultiplier 888 200;   Demux1\output -> Splitter6\input;   dmf <- Splitter6\output;   EffortSensor1\effort -> Splitter4\input;   EffortSensor1\p2 => CrankMechanism1\p1;   engCylCV\pHT => FlowSensor1\p1;   engCylCV\ppV => PowerSensor\p1;   engCylCV\pTFIn2 <= FlowSensor\p2;   engCylCV\pTFOut => exhVV\pTFIn 744 312;   engCylCV\vCyl -> Submodel2\Vol 904 480;   exhVV\pTFOut => ppTFOut;   FlowSensor\flow -> Demux1\input;   FlowSensor\p1 <= PowerMux\output;   FlowSensor1\flow -> dQCyl;   FlowSensor1\p2 => Submodel2\pQ;   intakeVV\CA <- Splitter3\output 568 208;   intakeVV\pTFIn <= ppTFIn;   intakeVV\pTFOut => engCylCV\pTFIn1 672 312;   pMaxFinder\phi <- Splitter5\output;   PowerSensor\P -> SFOC\powCyl;   PowerSensor\p2 => EffortSensor1\p1;   ROHR\pF => PowerMux\input3;   ROHR\pp => PowerMux\input1;   ROHR\pT => PowerMux\input2;   Splitter1\output -> ROHR\omega 1000 232;   Splitter2\output -> exhVV\CA;   Splitter2\output -> Splitter3\input 880 208;   Splitter3\output -> ROHR\pfi;   Splitter4\output -> pMaxFinder\pCyl;   Splitter4\output -> Submodel2\Pcyl 832 544 832 432;   Splitter5\output -> Splitter2\input 1136 624 1136 208;   Splitter6\output -> SFOC\dmf 656 512 608 512;   Splitter7\output -> SFOC\phi 784 544 600 544;   Splitter7\output -> Splitter5\input;   Submodel2\omega <- Splitter1\output 904 408;   TWall\port1 <= Submodel2\pQOut;  end;  figures   line 704 536 704 544 color 0; implementation_end;]]>
  </Sidops>
</Model>
</Document>
