<?xml version="1.0" encoding="UTF-8"?>
<Document>
 <Icons>
    <Icon size="256" bpp="32" format="png">
<![CDATA[89504e470d0a1a0a0000000d49484452000001000000010008060000005c72a86600000006624b474400ff00ff00ffa0bda793000000097048597300000ec400000ec401952b0e1b000015b549444154789ceddd7d8c5c5779c7f1efd3846c0ca489a16263d1ca765ac976f9c30988c6a928b6a3aa8e538a138a643b4572cc8b8cf34f124ae598969aa012c7458a83a8582cd26c82da24a888c4458a1d09c5718562a794aca3aa3816c2bb069a75529ab50b786d91f6e91ff78ce7eeecbccfb9f3767e1f69b47367ef9c39f2fafee6dc97f35c737744244dbfd6eb0e8848ef28004412a600104998024024610a0091845ddaeb0e483c6676257057587ccedd0f476af74ee02a60cadd1f8dd4e606e05a0077bf37469bd23ad369c0e161668b81a9b0f8b9581b96999d04960287dcfdc6486d3e0c6c0570778bd1a6b44ebb002209530088244c01209230058048c214002209530088244c01209230058048c214002209530088244c01209230058048c214002209530088244c01209230058048c214002209530088244c01209230058048c214002209530088244c01209230058048c214002209530088244c01209230058048c214002209d3dd817b207f675c2954b43b240f2b8d0044127669af3b201c8ad8d6e5c00de1f9243015a9dd55c00260063816a9cde5c0a2f0bca87f03694001d063ee7e63acb6cc6c31e58dfed158c35f333b092c058ec5ea6f7e37a8c07f036940bb002209530088244c012092300580d46566237f04ef58d5eb8e48211400d2c84dbf070b4ef7ba17520805803472f955bdee811446a701078099ad049ad90eafce3d5f6266ab1bac7fdedd5f68b0cec131b06b68fedc5a139f0bb9be36b93ec069773fd1e4bad20405c060d80bac6df13db787473d93c035f55670f7b33798bdf16378530b9ffd5c0bebb6b2fe38f0d116db963ab40b2075bdcfece31be1fcf5300d6cee757f242e8d0006c3dd34b70bd0aaf3f57e6966a37f069fff045cf17e189985af007fda44bb6ba2f46e3e1d8b8c4c013000dcfda55e7cee07e1c01760d15b8077c36537c38def33fbf877dd1faaf73e773fdca52e4a87b40b2055dd6af6c54fc2ef2ccebdb605ae5a0ef79bd9b29e754ca25200c83c66b6fa5df0b1f57045fef54b81bf85b7df02cf98d9488fba27112900648eb0dffff84e5858edf76f033e0b8b3e048f75b96b52000580cc91dfefaf257f3ca06b1d93422800e4a20f9b3df46958b6b8f1aa3a1e302414000264fbfdcbe1437f006f6e66fd4b81fbe0edebe1e982bb2605520008663672333cf11735f6fb6b7907f031187dafd99f17d43529980240f8203cf4d7f0b62bdb78ef0678cbd5f059331b8dde31299c0220716636fa7ff027ef81cbda79ffa5c00e58b01e3e1fb96bd2050a80c4ad87cfef80059d5c12ba0a2ebb04366a14307814000933b3d14b60e3aa36bffd4b340a185c0a80b46dda0a23312684bc172e7b053e12a129e9220540c23e085bde93dd48a36323c007e0420bc53da40f2800126566233f85e5ef8cd8e6fbe1adef823f8cd8a4144c0190ae55ebe17cccf9e0cbe04dbf0d7f1cb149299802205d57bf33f2dfff0a6036bb3e48068402205d578f66bbeed1bc0578adc5ab09a5b7140089fa5d78e7db231d002c19015e6a722e81f4070540a27e00bffc55af3b213da70048d799ff695014b455178095702e669b522c0540bace9c85a88380f3c042f865cc36a5580a80749d9981ff8dd9e02f81b7c2cf62b629c55200a4ebe8810ee70054fa4fe03cfc6bcc36a5580a8044b9fbabbf805fc51cafff04ce7f0726223629055300246c14beffd388ed7d176681a3119b9482290012760a9efd61a433016f0087b3eb0a8ec5684fba430190b063f00f7f1fe94cc08f80df8223ee7e21467bd21d0a8084b9fba90bf05faf4568eb79f8f97ef87a84a6a48b140089fb313c76acc351c01bc0d7c180a7e2f44aba450190b8ff80bffb329c7ba383364e0057c061773f1bab5fd21d0a80c4b9fbab97c0f77fd4411b5f8633df86bf8cd629e91a0580b01f3eb517ceb4f3ded7801fc3ebeefe52e46e4917280004777fe934bc78a28df77e0d660ec01dd13b255da1001000f6c31d5f84ff6ee558c009e07b30e1eecf14d52f299602400070f713afc13ffe4b93d379df003e0d67f7c36d05774d0aa400908bfed9fdce31f8f71f6653fbeb7a105e9f858fbbfbabdde89b14430120737c13d6fd0d9c7ca5ce3aff0467bf0763df71ff66d73a26858859155a8680bb9f35b3f5e7e1db77c335abb25a9f40362cf832bcfe3d18fb86fb5ff5b09b12890240e671f75366f65e83f17f830f6f825ffc0cec285cf61bb04ddffcc34301205585493db799d9d62fc02ae08ccef50f1f0580d41582e070affb21c5d04140918429004412a600104998024024610a00918429004412a600104998024024610a00918429004412a600104998024024610a00918429004412a600104998024024610a00918429004412a692607dcecc76f5ba0f7de68cbb7fa9d79d18160a80fef7b95e77a0cf4c020a8048b40b2092308d0006c7b8bb7fb4d79de815337b1658dbeb7e0c1b8d004412a600104998024024610a00918429004412a600104998024024610a00918429004412a600104998024024610a00918429004412a60010499802402461aa07205599d94ae026605d955f1f039e71f767badb2b894d01207398d946602fb0a8ce6a6b81bbcd6c167810d8e3ee67bbd13f894bbb000280992d0b55779ea0fec69fb700d8091c0fc1210346012098d903c0cb944b6ecd026364bb0097bbbbe51fc0b5c03dc074587f11f084993d6b668bbbdc7de98002207166f6307077eea503c075ee7e87bb3fe3ee172adfe3ee2fb9fb1e6005b03bf7abb5c02185c0e05000242c7cf36f0d8b33c02dee7eb3bb9f68e6fdee7ed6dd3f032c078e8497970207cc6c247a87253a0540a2cc6c35e56ffe1960adbbef6fa7ad10186bc9460f908d0c74439301a00048d758eef9adeefe52278d855d85cd948f0bec34b3659db429c5530024286c982bc2e293ee7e3846bbe15460fe78c2a618ed4a71140069ca6f98fb22b7fd14d95904800d91db96c8140069ca0fcd9f8bd970d81528b5b93c66db129f02204da50d73bada69be08a6c2cf053a25d8df1400693b3f60ed4a640a80344d859f4b0b6a7f49e989bb9f2ae833240205409aa64a4fc2f500b1ad0a3f8f17d0b644a4004853fe829f9a9378c204a1fb5ab9aacfcc36509e4cf4549bfd932e510024289cf72f5db0b33dccfdaf669c6cb6df84998d366a3704457e6e405b57164af72800d2b533f7fc7133bb32ff4b33bb13b8212cbeeceeaf36d1e62ee65e60f442e7dd9422290012e5ee8f0287c2e20ab2597ca300e1d45de99b7c06d85eaf2d331b09138b4aa1d2f03dd21f140069bb159808cfaf0326cd6c07f00859b10f80bbeb7dfb9bd93ab2837da54b806781cd4d8e18a4c71400090bd7eeafa51c020b80fb813561f9b9305298c7ccae37b3a78183944f27ce904d2c52adc001a19a80890b21f06e33db06ec01f2c702d698d9f3ccbfb0e75a6061c56b63c04ed5061c2c0a0001c0ddf799d907800f54fcea866aebe71c21db4dd001bf01a40010e06235e0d2c63f41364b701dd9bc8115b955a7c9ea071e060e6ac31f6c0a00219c02dc1b166781ada14048eca9c2d2671400fd6f4df879bac0cfc8df07604fa7d5810a723770159a68149502a0cfc5aad6534b388d572a0c3a417616a0eff469280d3c9d064c58b874375f1b707b41f501a44f2900d2b697f239fcdd3aa0971e0540a2ccec7aca97eb4e02f7f6b03bd2230a800485a1ff78eea5ad1afaa7490190a6fcacbdb1a20f344aff52002426ccfdbf2b2c4e33775ab0244601909e71ca33fdb6ebdafdb429001212a6fa5e17161f6ff75e80323c14008908b7032bddb0739ab9b7f092442900d2314679e8bf53053b041400490873fdd786c503b58a7c487a1400432ed4f99b33d3af87dd913ea300187ef9a3fe75ebfb497a140043ccccb600ebc3e21177d7fc7e99430130a4c2d0bf54da5b437fa94a0130bcf2453eee75f713bdec8cf42705c0100a453e3687c509e0c11e7647fa980260c884fa7ea5997ea5fa7e9ae92755290086cf6eca43ff07554a4bea51000c11335b4db9c8c77154e4431a50000c892a453e54df4f1a52000c8f5d94ebfba9c8873445013004427dbf52610fcdf493a62900065c95d2de3aea2f4d53000cbe7b2817f918d7adb9a5150a8001168a7cec088baaef272d53000c36cdf4938ee8de8003caccee046e088b4fbafb37da68c3ddddaabd5ef95ab5f562a8d507e90e05c00032b3c59467facd50bef8a79536e66de4a5d76b8542fe756db8c341bb0083293ff46fb9be5fb31b799ebb5badd090c165eefa9b0e9250e4e391b078c8dd6f6cf1fd1737f276bfd52b83a0140ef990a86c37bf6eadfed47bbd5e1bd23e05c00009453e8e030bc966faad70f7532db65133006abdd6a89dd23234dec09b099d76de23edd12ec0601923dbf8212bf2d1f6c65f4be95bbcf468a5fd66c2a4d1ae44331bbb7647e2d141c00161661b815bc3e21177dfd3e2fb9bfed6ecd5d05bdfecdda7001800a1c847beb4774b47fd3bd9b0ba35f46e342a28e23345013028f2f5fdf6b453e4a3d5d37eddd4e8b844affb37cc7410b0cf85fa7e07c3e271e0ba58937d5a3db8d6ea1984668ef0b77bc0af1f826b18e820601febf64cbf7a07d7dad9e0aab5d7a89dcaf7b4d386344fbb00fd6d2fe5221f7bddfd85a23fb05608d4bb64b8d50dbad93e94d66da70d698e7601fa5428f271342c4e929df3d73c7f894abb007da84a7d3f15f990422800fad32e6045783eeeaaef2705d12e4001c279fb9b80e5c0f5c0e555567b1938051ccc9fd633b395c011b2c93ed36443ffb385775a92a40088240cdb6f07b6509ea7dfac19b2537dfbc80efc954a7c6df236e6f98b344b01d0a1f06d7f177027e5ebf4ab9906a6683e1c1e77f7db3aeb9d487d3a0dd8813035772f7337fc59b26ff3c364c3fbaa77e50dc1b10658177eaea85865d4cc465d65bea4401a01b421776dfed6dccb33c097c8eec7d7f23ebb99bd4879e85f324d760640957ea5100a8016858dff0873bfb177935da3dfd6c13a33db067c352cbe00fc7a45fbb7bbfba3edb42d528f02a00561e33f44f99b7a12d8dcc9157aa1c8c724d951ff59b20dff3459a8e4eff0a31090e8741d4093c251fefcc63f413631a7d3cb732b4b7b9f72f70beefe29b2b30a258f849a0022d16804d024337b80f237f204b0b6d3f3f315f5fd8eb8fbef37586786ecba001d18942814004d0817e71c0b8bd364dffc1d6d8461e83f4136cf7f36b459eb8cc12ee0736151a707251aed0234277f5d7ecb65b86ba82cf25175e30fee27ab0500b039d40810e99846000d84fbefbd1c16ab0ed3db68335fe46302b8a1d1649f8af7681420516804d0d8a6dcf37b3b6d2c9c496879a65fb816a0340ab8251c9414e98802a0b1d291f7e94817e4eca63cf4dfdd627dbfd2bc8005c02d11fa22895300d411bead4b17e43c17a1bdd5942bfa1ea7f511c513b9e7d777da1f1105407d4b72cfeb1da46ba84a918fedad16f9a83850b8a493fe888002a09125b9e7531db6b58b727dbfb10e8a7c4c869f4b3aec8f8802a081ab73cf4fb7db48a8efb7332c4ee79eb7a3d48fab3a68430450003492dfe897b4d34095d2de8b80c73b38975fea47db812452a200a86f2af7fcea5a2b357039f028e5a13bc07ae0a0999d34b36d2d9ed22b9d4198aab79248331400f54de59e2f6ba701773febee5f72f76bc84edd1dcafd7a29d934e069337bc0cc16d76b2bec4a54eb9b485b7425600366f63c5919af5960618cf2dce1eac21d6417192da8f8f593c0be6ad71c98d97d948f1fdc5464a19070ca7209d5777dce90cd8d38a682a5834d01d08099ed20bb161f2217e90cd7197c92ac9ee0a28a5f1f07f6004f9442c7cc5e09ebcd008b62de2b204c4eda44b944596530d572047826f4b3a353a5d27d0a8006c2b07c2a2c3675dd7e9b9fb3912c082a8b86ce90ed26fc02f842786ddcdd3f1ae97317939da2ac361a69d59364139b0abf8599c4a1006882993d066c0e8bf7b8fb9e023f6b2559106cadb1ca05e0fa766e115ef13923643312b757f9f511b22b1f2fee62b8fbe1d0b7d2e9c755c06ab2039a950e90cd7150dd827ee7ee7a347800a3c0eb8003e780955dfacc5dc02be173f38f17c9ee3f30d266db2b811f54b47912d8065cd9625b2364f3255eac68ef75605dafff767a34f8fbf5ba0383f2081b47fe3ff7e22e7dee035502a0f47805b80f186da1bd2d21c4f26d6c8cd4d7d5c0f3157ddcd5ebbf9d1e75fe66bdeec0203d80872bbe319715fc79f75584ce4780c76a84c1c364bb06f5dadb52f19e6fb5fa8ddf449f472afaad10e8e347cf3b30488ff09ffbe9dc7fec73c0b6023e67b4e29bf45c7e381d7e7f5f8ddd83e7812d55daacdcf8a3f7bbe2f336548c3476f5faefa74795bf53af3b30688f2a21e061b9e3d140687b1be5e30df336fe2aeb6f61fefe7c6968bf2384c5e28a8d714b97feadd6557cae8e09f4d9a3e71d18d447d8b8ce556c74df6ae73f79d8487754f9467fbed96021dbffaeb67b700ef8496ef9ce2eff3b6dc87df649da3c70a947310f9d06ec40b834778cf9b7f49aa17c1aad544ff034d9f504abc2f255641bed4dccbf2fe02cf02070afb778cd4138afbf8dec02a3ca9b95fe1cf88477f98ec315a75177bbfb67baf9f9529b02208230b36f07b0b6c3a666c8ee01b0c73b2f3b5eba5df903c09b2b7e3d49762bf2af7a172ee50d57191e270ba46897544be7140011856bfc6f211bf6367b1bf069b2d1c261b2cb69a36d90155731fe14f8cd8a5566c9ca8c352a4b1ea32ff9790c512fa996f629000a12be8157914d235e5ef1ebd2649ad3456e7815f3186e22db1d294d42aadc3d38403609697f417dc997575759f33ea100186266f62cd96ec99cc9436112d226b230585af1b649b2db9c3f127bf7c0cc7e4076bc63c6dddf16b36d698fea010cb725e1e7547e9fdbb31a05fbbc5ca3e040ee3d4bc90e404e9bd9571ad52868d1d1f073610821e93105c0702b7dbbd72c1fe6eefbddfd66b2dd9431b2e30290cd0cdc0e4c99d9d3916e47d6718935894b0130a42abeb91bd60f74f713ee7e0759bd81bba85dc26cb4836e9dca3d5751d33ea0001852eeded6c6e6734b986d626e09333a3c3d99afab78a68376241205c0702b7d8b2f69e7cdeefe0d77bf916cf7609cac425127f2a392a90edb92082eed7507a4505364c701daad680c5cbc23518c0a44a5d3a133ddb800491ad30860b8958eba2f0a453e7b261c93285d1c75b4debad23d0a80e196bfa86763cdb5ba237f9b755d05d8277421d09033b39364bb0133c08a4ee718b4d98711b2b9004bc94e332ed22e407fd00860f8ed0b3f1732f71665dd740fe56b129ed2c6df3f34021872e1db7782f294e35b8abadebfc6e72f0b9fbf801e8e42a43a8d00865cb804385ffa7b3c94f72e5c38f07780f2fd06766ae3ef2f0a8004b8fb61cac3ff85c0a1a243206cfc87280ffd0fb8fbbe3a6f911e500024225ce63b1e16170247c274e1e8cc6c03d9b0ffe2c60fdc5ac4674967140009f1ec7662a5105800dc6f66cfc61a0d98d9a8993d0c3c45b9dec001e0565500ea4f0a80c48410b89df2acbfb5c03133fb56bb4160668bc3863fc9dc5b9aed461b7f5fd359804485a3f3e3cc2f5d36011c040e7b9ddb8f8782a86ba85efe6c9a6cc3d74d42fb9c022071617f7d17f32b1b573a045ccbfc526279936413861ed1b7fe605000080061aec016b2da818b5a786ba904fa7e777fb480ae49811400324f3816b086f2bd0b2a1d25bb4df9410df3079b02402461ff0f17a36815653a7d220000000049454e44ae426082]]>
   </Icon>
</Icons>
 <Model version="4.5" build="4.5.1.5561">
    <Sidops>
<![CDATA[Eng_Cyl1 416 400.5 description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
    <LibraryPath>Components\engCyl4Stroke1ZoneBG.emx</LibraryPath>
  <TimeStamp>2015-6-25 13:59:33</TimeStamp>
</Description>
</Information>'; type Submodel  ports   rotation out M;   signal out pMax [2,1]; "phipMax_pMax"   signal in contSig [8,1]; "IVO dIVO IVareaMullt throttle phiInj EVO dEVO EVareaMulti"   signal out dmf;   signal out dQCyl;   power in ppTFIn [3,1];   power out ppTFOut [3,1];  restrictions   causality fixed in ppTFIn;   causality fixed in ppTFOut; end; icon bg bottom shadow 11776947  figures   line 424 483 387.1 467 422.2 413 width 2;   ellipse 410.1 471 437.8 495 width 2;   ellipse 414.8 403 433.2 419 width 2;   ellipse 374.4 455 402.1 479 width 2;   line 398.4 420 398.4 388 447.5 388 447.5 420 width 2;   line 390.2 444 390.2 332 455.7 332 455.7 444 455.7 444 width 2;   line 423 308 423 340 width 2;   line 406.6 308 406.6 340 width 2;   line 398.4 340 414.8 340 width 2;   spline 423 340 414.8 356 423 372 431.1 356 423 340 fill 255;   line 439.3 308 439.3 340 width 2;   line 431.1 340 447.5 340 width 2;   text '4Stroke' 432 448 16;  terminals   M 424 480 fixed;   pMax 464 336 fixed;   contSig 424 304 fixed;   dmf 464 368 fixed;   dQCyl 464 400 fixed;   ppTFIn 400 304 fixed;   ppTFOut 448 304 fixed; end; implementation bg  submodels   CrankMechanism 695.5 640.5    description '<Information> <Description>    <Version>4.4</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>  <AllowLibraryUpdate>True</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct>       <member>        <name>MaskChoice</name>        <value>         <int>1</int>        </value>       </member>       <member>        <name>BitmapFilename</name>        <value>         <string></string>        </value>       </member>       <member>        <name>ScriptFilename</name>        <value>         <string></string>        </value>       </member>       <member>        <name>Scaling</name>        <value>         <double>1</double>        </value>       </member>      </struct>     </value>    </member>   </struct>  </Configuration>    <LibraryPath>engine\CrankMechanismKinematics.emx</LibraryPath>  <TimeStamp>2014-10-9 22:51:25</TimeStamp></Description></Information>';    type q_gr360     ports      power in p1;      signal out q_rad;      signal out P;      power out p2;      signal out flow;      signal in p_scvg;    end;    icon bg bottom shadow 11776947     figures      ellipse 691 676 715 700 width 3;      line 704 688 674 662 704 608 width 3;      ellipse 662 650 686 674 width 3;      ellipse 695 600 711 616 width 3;      line 678 616 678 584 726 584 726 616 width 3;     terminals      p1 704 576 fixed;      q_rad 744 616 fixed;      P 744 592 fixed;      p2 704 704 fixed;      flow 704 688 fixed;    end;    implementation bg     submodels      FlowSensor2 296 599       knot FlowSensor        ports         power knot in p1 [1];         power knot out p2 [1];         signal knot out flow [1];        restrictions         causality constraint not_equal p1 p2;       end;       icon bg ellipse        figures         ellipse 289.5 593.5 302.5 606.5 fill 16777215;         text 'f' 296.5 598.5;       end;       implementation eqequations	p2.f = p1.f;	p1.e = p2.e;	flow = p1.f;      implementation_end;      MSe 216 424       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>  <TimeStamp>2011-11-29 16:12:33</TimeStamp></Description></Information>';       type MSe        ports         power in p;         signal in p_scvg;        restrictions         causality fixed out p;       end;       icon bg bottom        figures         text 'MSe' 216 424 18 bold;       end;       implementation eqvariables	real flow;equations	p.e = p_scvg;	flow = p.f;implementation_end;      MTF2 296 512       type MTF        ports         power in p1;         power out p2;         signal in pfi;        restrictions         causality constraint not_equal p1 p2;       end;       icon bg        figures         text 'MTF' 296 512 18 bold;       end;       implementation eqparameters	real global slag, alam;variables	real m;	real csin, ccos;equations		csin=sin(pfi);ccos=cos(pfi);	m = slag/2.0*(csin + alam*csin*ccos/sqrt(1.0-(alam*csin)^2));					p1.e = 1/(m + 1e-20) * p2.e;	p2.f  = 1/(m + 1e-20) * p1.f;     implementation_end;      plug q_rad 416.1 552;      plug P 408 376;      plug p2 295.9 648.1;      plug flow 415.9 600.1;      plug p_scvg 88 423.9;      plug p1 295.9 312;      OneJunction3 296 424       knot OneJunction        ports         power knot duplicatable none p [1];         signal knot out flow [1];        restrictions         causality constraint one_out p;       end;       icon bg        figures         text '1' 296 424 18 bold;       end;       implementation eqequations	sum (direct (p.e)) = 0;	equal (collect (p.f));	flow = first (p.f);    implementation_end;      PowerSensor2 296 376       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>  <TimeStamp>2011-11-29 16:29:42</TimeStamp></Description></Information>';       knot PowerSensor        ports         power knot in p1 [1];         power knot out p2 [1];         signal knot out P [1] {W} ;        restrictions         causality constraint not_equal p1 p2;       end;       icon bg ellipse        figures         ellipse 289.1 368.8 302.9 383.2 fill 16777215;         text 'P' 296.5 375.8;       end;       implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	P = p1.e .* p1.f;implementation_end;      QSensor4 296 551       knot q_        ports         power knot in p1 [1];         power knot out p2 [1];         signal knot out q_rad [1];        restrictions         causality constraint not_equal p1 p2;       end;       icon bg ellipse        figures         ellipse 289.5 546 302.5 559 fill 16777215;         text 'q' 295.5 550;       end;       implementation eqparameters	integer global ncyl;	integer icyl= 1;	real global nstroke;	real global pfi0[ncyl];variables	real q0;	real b;	real q_gr;initialequations	q0=pfi0[icyl]*pi/180.0;	b 		= nstroke*180.0;	equations	p2.f 	= p1.f;	p1.e 	= p2.e;	q_rad 	= int (p1.f, q0);	q_gr	= q_rad*180.0/pi;     implementation_end;      Splitter1 360 552       description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';       knot Splitter        ports         signal knot duplicatable out output [1];         signal knot in input [1];       end;       icon bg ellipse        figures         ellipse 356.8 548.8 363.2 555.2 color -1 fill 0;         ellipse 355.7 547.7 364.3 556.3 color -1;        terminals         input 360 552 fixed;       end;       implementation eqequations    collect (output) = input;implementation_end;      TF2 296 472       type TF        ports         power in p1;         power out p2;        restrictions         causality constraint not_equal p1 p2;       end;       icon bg        figures         text 'TF' 296 472 18 bold;       end;       implementation eqparameters	real global Diam;variables	real r;initialequations	r=1/(pi*Diam^2/4.0);equations						p1.e = r * p2.e;	p2.f = r * p1.f;       implementation_end;     end;     connections      OneJunction3\p => TF2\p1;      p1 => PowerSensor2\p1;      TF2\p2 => MTF2\p1;      OneJunction3\p => MSe\p;      MTF2\p2 => QSensor4\p1;      PowerSensor2\p2 => OneJunction3\p;      QSensor4\p2 => FlowSensor2\p1;      FlowSensor2\p2 => p2;      Splitter1\output -> q_rad;      QSensor4\q_rad -> Splitter1\input;      PowerSensor2\P -> P;      FlowSensor2\flow -> flow;      Splitter1\output -> MTF2\pfi 360 512;      p_scvg -> MSe\p_scvg;     end;    implementation_end;   Demux 720 134.5			specifications active 'outputs_8'				specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal in input [2,1];   signal out output2; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	[output1; output2] = input;implementation_end;specification_end;				specification 'outputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output;   signal in input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output = input;implementation_end;specification_end;				specification 'outputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal in input [2,1];   signal out output2; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	[output1; output2] = input;implementation_end;specification_end;				specification 'outputs_3'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal in input [3,1]; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '3' 133 82 color 8421504 8;  terminals   output1 128 64 fixed;   output2 128 72 fixed;   output3 128 80 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3] = input;implementation_end;specification_end;				specification 'outputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal in input [4,1]; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4] = input;implementation_end;specification_end;				specification 'outputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal out output5;   signal in input [5,1]; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4; output5] = input;implementation_end;specification_end;				specification 'outputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal out output5;   signal out output6;   signal in input [6,1]; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4; output5; output6] = input;implementation_end;specification_end;				specification 'outputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal out output5;   signal out output6;   signal out output7;   signal in input [7,1]; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4; output5; output6; output7] = input;implementation_end;specification_end;				specification 'outputs_8' description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal out output5;   signal out output6;   signal out output7;   signal out output8;   signal in input [8,1]; end; icon bg bottom  figures   line 680 136 760 136 width 2;   rectangle 680 132 760 140 color -1;   text '8' 731 131 color 8421504 8;  terminals   output1 688 136 fixed;   output2 696 136 fixed;   output3 704 136 fixed;   output4 712 136 fixed;   output5 728 136 fixed;   output6 736 136 fixed;   output7 744 136 fixed;   output8 752 136 fixed;   input 720 136 fixed; end; implementation eqequations	[output1; output2; output3; output4; output5; output6; output7; output8] = input;implementation_end;specification_end;				specification 'outputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type Demux  ports   signal out output1;   signal out output2;   signal out output3;   signal out output4;   signal out output5;   signal out output6;   signal out output7;   signal out output8;   signal out output9;   signal in input [9,1]; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	[output1; output2; output3; output4; output5; output6; output7; output8; output9] = input;implementation_end;specification_end;			end;   EffortSensor1 704 544    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';    knot EffortSensor     ports      pneumatic knot in p1 [1];      pneumatic knot out p2 [1];      signal knot out effort [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 697.1 537.3 710.9 551.4 fill 16777215;      text 'e' 704.5 541.6;    end;    implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;   FlowSensor1 800 455.9    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:12</TimeStamp></Description>';    knot FlowSensor     ports      pseudothermal knot in p1 [1];      pseudothermal knot out p2 [1];      signal knot out flow [1];     restrictions      causality constraint not_equal p1 p2;    end;    icon bg ellipse     figures      ellipse 793.1 448.8 806.9 463.1 fill 16777215;      text 'f' 800.5 454.3;    end;    implementation eqequations	p2.f = p1.f;	p1.e = p2.e;	flow = p1.f;      implementation_end;   plug pMax 632 256;   plug contSig 720 56;   plug dmf 639.9 312;   plug dQCyl 800 423.9;   plug ppTFIn 416 344;   plug ppTFOut 952 344;   plug M 704 751.9;   ROHR1 712.6 256    description '<Information> <Description>    <LibraryPath>Combustion\CombFixedROHR.emx</LibraryPath>  <TimeStamp>2015-6-22 23:47:51</TimeStamp>  <Version>4.5</Version></Description></Information>';    type Submodel     ports      power out pTF [3,1];      signal in x_lev; "Controller Input (Throttle)"      signal in omega; "Engine speed (rad/s)"      signal integer out Comb_state; "0: Start of new cycle / 1 : injection started / 2 : start of combustion / 5: end of combustion"      signal out p_max [2,1];      signal in pfi;      signal in fiinj;     restrictions      causality fixed in pTF;    end;    icon bg bottom     figures      rectangle 675.9 240 749.3 272 fill 12895428;      text 'name' 715.3 256 16;     terminals      pTF 712 280 fixed;      x_lev 688 232 fixed;      omega 736 232 fixed;      Comb_state 752 280 fixed;      p_max 664 256 fixed;      pfi 720 232 fixed;      fiinj 704 232 fixed;    end;    implementation eqparameters	integer global ncyl;	real global nstroke;	real global hn;//	real global fiinj;	real global mqf_max;	real global pemax;	real global ommax;	real global T_L;	real global T_H;	real global fs;	real global slag, Diam, alam, Veps;	integer global CASE;//Fuel composition [C H O N]	real global FC[4];// Englib	string global dll_ICE;//	string dll_fcn_rohr    = 'ice_rohr';	string dll_icemax    = 'ice_pfimax';	string hidden dll_fcn_ThDP = 'thdyn_CombGasZach'; // subroutines names in the dll file//	string dll_fcn_rohr = 		'ice_rohr2';	real wiebe_para[9] = [0.07;0.57;3.05;11;24;56.3;1.5;1;0.7];variables	real phi;	real phi_comb;	real P, F, T, V_cyl, m_cyl0, Vc;	real dmf;	real mqf_des, mqf, mqf_min;//	real inarr_ROHR[20], outarr_ROHR[13];	real fiig;	real hidden inarr_pfimax[3], outarr_pfimax[2];	real hidden inarr_ThermoProp[3], outarr_ThermoProp[13];	real Pmax, Pmax_pfi;//	real bmepnom, omeganom;//	real eta_i, sfoc;//	real mfPC, mf, Oldmf, OldmfPC;	boolean reset;		real dphi_comb, igdel, dmf_nom;	real yp, ym, yl, yptomp, ymtomm, yltoml, df1dy, df2dy, df3dy;	initialequations	Comb_state = 0;	// 0: Start of new cycle / 1 : injection started / 2 : start of combustion / 5: end of combustion//	if fiinj > 180 then fiinj = fiinj - 360; end;		fiig = 0;	reset = true;	mqf = 0;	dmf = 0;	Vc	= pi*Diam^2/4.0*slag/(Veps-1);	dphi_comb = wiebe_para[3] + wiebe_para[6];code	P=pTF.e[1]; T=pTF.e[2]; F=pTF.e[3];	phi = pfi*180/pi mod (4*nstroke);// Deternmine the mass of fuel per cycle not exceeding the stoichiometric ratio	if phi > 180 then 		phi_comb= phi - 360;  	else		phi_comb = phi;	end;	if phi_comb > fiinj and Comb_state == 0 then		Comb_state = 1;		mqf_des = mqf_max * x_lev;		inarr_ThermoProp = [P;T;F];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);			V_cyl = pi*Diam^2*slag^2/8*alam*(alam + 1 - (alam*cos(pfi) + sqrt(1 - (alam*sin(pfi))^2))) + Vc;		m_cyl0 = P*V_cyl/outarr_ThermoProp[1]/T;			mqf_min = m_cyl0*fs;			mqf = min([mqf_des;m_cyl0*fs]);		igdel = 180/pi*omega*180/pi*0.00020*exp(4650/T)*(P*1e-5)^(-1.19);		if igdel > 30 then			Comb_state = 5;		end;		fiig = fiinj + igdel;		reset = false;			else if phi_comb > fiig and phi_comb < fiig + dphi_comb and Comb_state == 1 then				Comb_state = 2;				reset = true;			else	if phi_comb > fiig + dphi_comb and reset == true then						Comb_state = 5;						reset = false;					end;			end;	end;				if phi_comb > -20 and phi_comb < -15 then		Comb_state = 0;		reset = true;	end;				switch Comb_state		case 2 do			yp = max([(phi_comb - fiig) / wiebe_para[4];0]);			ym = max([0;(phi_comb - (fiig + wiebe_para[3]))/wiebe_para[5]]);			yl = max([0;(phi_comb - (fiig + wiebe_para[3]))/wiebe_para[6]]);			yptomp = yp^wiebe_para[7];			ymtomm = ym^wiebe_para[8];			yltoml = yl^wiebe_para[9];			df1dy = 6.9*(wiebe_para[7] + 1)*yptomp*exp(-6.9*yp*yptomp) / wiebe_para[4];			df2dy = 6.9*(wiebe_para[8] + 1)*ymtomm*exp(-6.9*ym*ymtomm) / wiebe_para[5];			df3dy = 6.9*(wiebe_para[9] + 1)*yltoml*exp(-6.9*yl*yltoml) / wiebe_para[6];			dmf_nom = wiebe_para[1]*df1dy + wiebe_para[2]*df2dy + (1-wiebe_para[1] - wiebe_para[2])*df3dy;			dmf = mqf*dmf_nom*omega*180/pi;		default do			dmf = 0;	end;	// Calculate normalized BMEP and omega (0~1)//	bmepnom = max([0.5;0/pemax]);//	bmepnom = min([1;bmepnom]);//	omeganom = max([0.61;omega/ommax]);//	omeganom = min([1;omeganom]);// Calculate the rate of heat release//	inarr_ROHR[1:11]=[nstroke; fiinj; pfi; P; T; omega; mqf ; hn; bmepnom; Comb_state; fiig];//	inarr_ROHR[12:20] = WiebePara;//	outarr_ROHR=dll(dll_ICE,dll_fcn_rohr, inarr_ROHR);//	if Comb_state == 1 //	dmf = outarr_ROHR[1];//	dqf = outarr_ROHR[2];//	Comb_state = outarr_ROHR[3];//	fiig = outarr_ROHR[4];//	WiebePara = outarr_ROHR[5:13];//	if dmf>0 and dmf<1e-4 then//		dmf = 0;//	end;	pTF.f[1]=dmf;	pTF.f[2]= dmf*hn;	pTF.f[3]=dmf;	//	if Comb_state == 5 then//		reset = true;//	end;	// Get Pmax for cycle 		inarr_pfimax=[time; phi; P];	outarr_pfimax=dll(dll_ICE,dll_icemax, inarr_pfimax);	Pmax=outarr_pfimax[1];Pmax_pfi=outarr_pfimax[2];	p_max = [Pmax;Pmax_pfi];implementation_end;   Splitter1 1000 432    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 996.8 428.8 1003.2 435.2 color -1 fill 0;      ellipse 995.7 427.7 1004.3 436.3 color -1;     terminals      input 1000 432 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Splitter2 880 208    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 876.8 204.8 883.2 211.2 color -1 fill 0;      ellipse 875.7 203.7 884.3 212.3 color -1;     terminals      input 880 208 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Splitter3 720 208    description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';    knot Splitter     ports      signal knot duplicatable out output [1];      signal knot in input [1];    end;    icon bg ellipse     figures      ellipse 716.8 204.8 723.2 211.2 color -1 fill 0;      ellipse 715.7 203.7 724.3 212.3 color -1;     terminals      input 720 208 fixed;    end;    implementation eqequations    collect (output) = input;implementation_end;   Submodel1 840 344    description '<Information> <Description>    <Version>4.5</Version><IsMainModel>1</IsMainModel>    <LibraryPath>Components\PoppetValve.emx</LibraryPath>  <TimeStamp>2015-6-23 08:17:08</TimeStamp></Description></Information>';    type Submodel     ports      power in pTFIn [3,1];      signal in CA;      signal in VONom;      signal in dVONom;      power out pTFOut [3,1];      signal out aOpenEff;      signal out Cd;      signal in areaMultiplier;    end;    icon bg bottom shadow 11776947     figures      line 800 321 832 321 fill 15132390;      line 800 321 800 369 fill 15132390;      line 880 323 880 367 fill 15132390;      line 848 321 880 321 fill 15132390;      line 840 336 816 352 864 352 840 336 fill 8355711;      line 832 321 832 329 816 337 808 337 808 369 800 369 fill 15132390;      line 848 321 848 329 864 337 872 337 872 369 880 369 880 321 848 321 fill 12632256;      line 832 321 800 321 800 369 808 369 808 337 816 337 832 329 832 321 fill 12632256;      line 840 337 840 305 fill 15132390;      text 'PoppetValve' 840 377 16;     terminals      pTFIn 784 344 fixed;      CA 880 296 fixed;      VONom 800 296 fixed;      dVONom 824 296 fixed;      pTFOut 896 344 fixed;      aOpenEff 896 320 fixed;      Cd 896 296 fixed;      areaMultiplier 856 296 fixed;    end;    implementation bg     submodels      EffortSensor1 272 319       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';       knot EffortSensor        ports         power knot in p1 [1];         pseudohydraulic knot out p2 [1];         signal knot out effort [1];        restrictions         causality constraint not_equal p1 p2;       end;       icon bg ellipse        figures         ellipse 265.1 313.3 278.9 327.4 fill 16777215;         text 'e' 272.5 317.6;       end;       implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;      EffortSensor2 416 319       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';       knot EffortSensor        ports         pseudohydraulic knot in p1 [1];         pseudohydraulic knot out p2 [1];         signal knot out effort [1];        restrictions         causality constraint not_equal p1 p2;       end;       icon bg ellipse        figures         ellipse 409.1 313.3 422.9 327.4 fill 16777215;         text 'e' 416.5 317.6;       end;       implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;      ExhVVLift 304 112       description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 22:48:51</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct>       <member>        <name>MaskChoice</name>        <value>         <int>1</int>        </value>       </member>       <member>        <name>BitmapFilename</name>        <value>         <string></string>        </value>       </member>       <member>        <name>ScriptFilename</name>        <value>         <string></string>        </value>       </member>       <member>        <name>Scaling</name>        <value>         <double>1</double>        </value>       </member>      </struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>';       type ExhVVLift        ports         signal out lift;         signal in CA;         signal in CA_start_nom;         signal in dCA_lift_nom;       end;       icon bg bottom        figures         rectangle 267.9 96 340.1 128 fill 15132390;         text 'VVLift' 304 112 16;        terminals         lift 304 136 fixed;         CA 328 88 fixed;         CA_start_nom 280 88 fixed;         dCA_lift_nom 304 88 fixed;       end;       implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	real global lift_max;	real global nstorke;	real hidden global CA_start_ref; //Reference start CA for start of valve lift	real hidden global dCA_lift_up;	 //Lift up time (should not be changed unless file is changed	real hidden global dCA_lift_down; //Lift down time (should not be changed unless file is changed	real hidden global dCA_lift_top_ref; //Reference duration for lift upvariables	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;code	CA_start = CA_start_nom*CA_start_ref;	dCA_lift = dCA_lift_nom*dCA_lift_top_ref;		dCA_total = dCA_lift_up + dCA_lift + dCA_lift_down;	phi = CA*180/pi mod (nstorke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= dCA_lift_up then			lift = table('ExhVVProfUp.csv',CA_VV);		else 	if CA_VV <= dCA_lift_up + dCA_lift then					lift = 1;			  	else 	if CA_VV <= dCA_lift_up + dCA_lift + dCA_lift_down then							CA_VV = phi - (CA_start + dCA_lift_up + dCA_lift);							lift = table('ExhVVProfDown.csv',CA_VV);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = lift_max*lift; implementation_end;      MultiplyDivide1 352 248       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>  <TimeStamp>2007-9-27 10:14:59</TimeStamp></Description>';       knot MultiplyDivide        ports         signal knot duplicatable in multiply [1];         signal knot duplicatable in divide [1];         signal knot out output [1];       end;       icon bg ellipse        figures         ellipse 344 240 360 256 fill 16777215;       end;       implementation eqequations	output = mul (collect (multiply)) ./ mul (collect (divide));     implementation_end;      plug dVONom 304 56;      plug pTFOut 504 336;      plug Cd 328 264;      plug areaMultiplier 448 32;      plug pTFIn 200 336;      plug VONom 280.1 32;      plug CA 327.8 69.9;      plug aOpenEff 520.1 280;      PowerDemux 241.5 336						specifications active 'inputs_3'							specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;							specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;							specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;							specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 240 312 240 360 width 2;   rectangle 235 320 243 352 color -1;   text '3' 244 346 color 8421504 8;  terminals   output1 240 320 fixed;   output2 240 336 fixed;   output3 240 352 fixed;   input 232 336 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;							specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;							specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;							specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;							specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;							specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;							specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;						end;      PowerMux 449.5 336						specifications active 'inputs_3'							specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;							specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;							specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;							specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 448 312 448 360 width 2;   rectangle 443 312 451 344 color -1;   text '3' 452 338 color 8421504 8;  terminals   input1 448 320 fixed;   input2 448 336 fixed;   input3 448 352 fixed;   output 456 336 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;							specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;							specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;							specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;							specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;							specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;							specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;						end;      Splitter1 352 280       description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';       knot Splitter        ports         signal knot duplicatable out output [1];         signal knot in input [1];       end;       icon bg ellipse        figures         ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;         ellipse 347.7 275.7 356.3 284.3 color -1;        terminals         input 352 280 fixed;       end;       implementation eqequations    collect (output) = input;implementation_end;      Submodel2 352 359.5       description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 16:30:00</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate> </Description></Information>';       type Submodel        ports         signal in Aeff; "Effective area of nozzle (m2)"         pseudohydraulic in ppIn;         pseudothermalh in pTIn;         power in pFIn;         pseudohydraulic out ppOut;         pseudothermalh out pTOut;         power out pFOut;        restrictions         causality fixed in ppOut;         causality fixed in pFOut;         causality fixed in ppIn;         causality fixed in pTIn;         causality fixed in pFIn;       end;       icon bg bottom        figures         text 'R' 352 336 53 bold;         text 'IdealNozzle
CompFlow' 352 376 16;        terminals         Aeff 352 304 fixed;         ppIn 320 320 fixed;         pTIn 320 336 fixed;         pFIn 320 352 fixed;         ppOut 384 320 fixed;         pTOut 384 336 fixed;         pFOut 384 352 fixed;       end;       implementation eq/* Ideal Nozzle ModelUses ideal nozzle equation for compressible flows assuming isentropic process. Flow restriction field. No states.Input   - Effective area of nozzle (Aeff)  - p,T,F in  - p,T,F outOutput  - dm, dE, dmb in  - dm, dE, dmb out*/parameters 	real global fs;	string global dll_ICE;	string global dll_fcn_idealNozzle;variables	real pIn, TIn, FIn, pOut;	real dm, dE, dmb;	real aa, d, pr;	real	inArrFlow[4];	real outArrFlow[3];equations  // start typing here 	aa = ppIn.e / ppOut.e;	if (aa > 1) then		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;		pOut = ppOut.e;	else		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;		pOut = ppIn.e;	end;		// Calculate thermodynamic properties from (T,P,x)	inArrFlow = [1,Aeff,pIn,TIn,FIn,pOut,fs];	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);			dm = outArrFlow[1];	dE = outArrFlow[2];		dmb = outArrFlow[3];	ppIn.dm = dm;	ppOut.dm  = dm;	pTIn.dH = dE;	pTOut.dH = dE;	pFIn.f = dmb;	pFOut.f = dmb;implementation_end;      Submodel3 328.1 208.1       description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 22:48:36</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>';       type Submodel        ports         signal in lift {m} ;         signal in pIn {Pa} ;         signal in pOut {Pa} ;         signal out aOpen {m2} ; "Open area"         signal out Cd; "Discharge coefficient"         signal out aEff {m2} ; "Effective area of nozzle"       end;       icon bg        figures         rectangle 287.8 193.1 368.4 223.2 fill 15132390;         text 'VVArea' 328 208 16;        terminals         lift 304 184 fixed;         pIn 328 184 fixed;         pOut 352 184 fixed;         aOpen 304 232 fixed;         Cd 328 232 fixed;         aEff 352 232 fixed;       end;       implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	real global Dv;		 	// Valve Seat diameter	real global beta;   	// valve seat angle	real global w;      	// valve seat width	real global Dp;    		// Valve port diameter	real global Ds; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (w / (sin(beta)*cos(beta)))) then			aOpen = pi*(lift)*cos(beta)*(Dv - 2*w + lift/2*sin(beta*2));		else 			if (lift <= (sqrt((Dp^2 - Ds^2)/(4*(Dv - w)) - w^2) + w*tan(beta))) then				aOpen = pi*(Dv - w)*sqrt((lift - w*tan(beta))^2 + w^2);			else				aOpen = 0.25*pi*(Dp^2 - Ds^2);			end;		end;				L_Dv = lift/Dv;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;     end;     connections      Submodel3\pIn <- EffortSensor1\effort 328 160 272 160 'pIn';      Submodel3\pOut <- EffortSensor2\effort 352 160 416 160 'pOut';      PowerDemux\output1 => EffortSensor1\p1;      PowerDemux\output2 => Submodel2\pTIn;      PowerDemux\output3 => Submodel2\pFIn;      EffortSensor1\p2 => Submodel2\ppIn;      Submodel2\ppOut => EffortSensor2\p1;      Submodel2\pTOut => PowerMux\input2;      Submodel2\pFOut => PowerMux\input3;      EffortSensor2\p2 => PowerMux\input1;      pTFIn => PowerDemux\input;      PowerMux\output => pTFOut;      ExhVVLift\lift -> Submodel3\lift;      Submodel3\aEff -> MultiplyDivide1\multiply;      CA -> ExhVVLift\CA;      VONom -> ExhVVLift\CA_start_nom;      dVONom -> ExhVVLift\dCA_lift_nom;      Submodel3\Cd -> Cd;      MultiplyDivide1\output -> Splitter1\input;      areaMultiplier -> MultiplyDivide1\multiply 448 248;      Splitter1\output -> Submodel2\Aeff;      Splitter1\output -> aOpenEff;     end;     figures      text 'Global parameters
      real global lift_maxEV;     // Maximum lift of the vavle
      real global nstorke;     // number of stroke
      real hidden global CA_start_refEV;        //Reference start CA for start of valve lift
      real hidden global dCA_lift_upEV;	//Lift up time (should not be changed unless file is changed
      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed
      real hidden global dCA_lift_top_ref;   //Reference duration for lift up
      real global Dv;		 	// Valve Seat diameter
      real global beta;   	// valve seat angle
      real global w;      	// valve seat width
      real global Dp;    		// Valve port diameter
      real global Ds; 			// Valve stem diameter
      
' 288 504 16;    implementation_end;   Submodel2 880.9 448    description '<Information>  <Description>    <LibraryPath>engine\HeatTransferEichelberg.emx</LibraryPath>    <TimeStamp>2014-10-9 23:04:23</TimeStamp>    <Version>4.4</Version>  </Description></Information>';    type Submodel     ports      power in pQ;      signal in Vol;      signal in Pcyl;      signal in omega;      signal out T_w_phys;    end;    icon bg bottom     figures      text 'dQ' 880.9 448 36;     terminals      pQ 856 456 fixed;      Vol 904 456 fixed;      Pcyl 856 432 fixed;      omega 904 432 fixed;      T_w_phys 880 432 fixed;    end;    implementation bg     submodels      C 272 200       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\C.emx</LibraryPath>  <TimeStamp>2011-11-29 15:58:35</TimeStamp></Description></Information>';       type C        ports         power in p;         signal out state;        restrictions         causality preferred out p;       end;       icon bg bottom        figures         text 'C' 272 200 18 bold;       end;       implementation eqparameters	real global mCp;	real global T_w_init;variables	real global E_init;initialequations	E_init = mCp*T_w_init;		equations	state = int(p.f, E_init);	p.e = state / mCp;implementation_end;      plug pQ 30 135;      plug Vol 112.5 52.5;      plug Pcyl 165 52.5;      plug omega 217.5 52.5;      plug T_w_phys 272 48;      R 360 136       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\R.emx</LibraryPath>  <TimeStamp>2011-11-29 16:35:37</TimeStamp></Description></Information>';       type R        ports         power in p;       end;       icon bg bottom        figures         text 'R' 360 136 18 bold;       end;       implementation eqparameters	real global C_cylHT[4];	integer global ncyl;variables	real T_w;	equations	T_w = p.e;	p.f = (((C_cylHT[1]*T_w + C_cylHT[2])*T_w + C_cylHT[3])*T_w + C_cylHT[4])*1e3/ncyl;implementation_end;      R1 168 136       type R        ports         power in pTCyl;         power out pTwall;         signal in Vol;         signal in Pcyl;         signal in omega;        restrictions         causality fixed in pTCyl;       end;       icon bg bottom        figures         text 'R' 168 136 18 bold;       end;       implementation eqparameters	real global slag, Diam;	real Cylhead= 1;variables	real hidden Area, AreaLin, AreaPis, alfa;	real Q;initialequations	AreaPis = 2*pi/4.0*Diam^2;	equations					AreaLin=Vol*4.0/Diam;	Area = AreaPis + AreaLin;	alfa = Cylhead*sqrt(Pcyl*pTCyl.e*1.0e-5)*(slag*omega/pi)^0.333;	Q = alfa*Area*(pTCyl.e-pTwall.e);    	pTCyl.f= Q;	pTwall.f= Q;implementation_end;      ZeroJunction 272 136       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';       knot ZeroJunction        ports         power knot duplicatable none p [1];         signal knot out effort [1];        restrictions         causality constraint one_in p;       end;       icon bg        figures         text '0' 272 136 18 bold;       end;       implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;      ZeroJunction1 97.5 135       knot ZeroJunction        ports         power knot duplicatable none p [1];         signal knot out effort [1];        restrictions         causality constraint one_in p;       end;       icon bg        figures         text '0' 97.5 135 18 bold;       end;       implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);    implementation_end;     end;     connections      pQ => ZeroJunction1\p;      ZeroJunction1\p => R1\pTCyl;      R1\pTwall => ZeroJunction\p;      ZeroJunction\p => C\p;      ZeroJunction\p => R\p;      Vol -> R1\Vol;      Pcyl -> R1\Pcyl;      omega -> R1\omega;      ZeroJunction\effort -> T_w_phys;     end;    implementation_end;   Submodel3 568 344    description '<Information> <Description>    <Version>4.5</Version><IsMainModel>1</IsMainModel>    <LibraryPath>Components\IntakePoppetValve.emx</LibraryPath>  <TimeStamp>2015-6-23 09:46:34</TimeStamp></Description></Information>';    type Submodel     ports      power in pTFIn [3,1];      signal in CA;      signal in VONom;      signal in dVONom;      power out pTFOut [3,1];      signal out aOpenEff;      signal out Cd;      signal in areaMultiplier;    end;    icon bg bottom shadow 11776947     figures      line 528 321 560 321 fill 15132390;      line 528 321 528 369 fill 15132390;      line 608 323 608 367 fill 15132390;      line 576 321 608 321 fill 15132390;      line 568 336 544 352 592 352 568 336 fill 8355711;      line 560 321 560 329 544 337 536 337 536 369 528 369 fill 15132390;      line 576 321 576 329 592 337 600 337 600 369 608 369 608 321 576 321 fill 12632256;      line 560 321 528 321 528 369 536 369 536 337 544 337 560 329 560 321 fill 12632256;      line 568 337 568 305 fill 15132390;      text 'IntakePoppetValve' 568 377 16;     terminals      pTFIn 512 344 fixed;      CA 608 296 fixed;      VONom 528 296 fixed;      dVONom 552 296 fixed;      pTFOut 624 344 fixed;      aOpenEff 624 320 fixed;      Cd 624 296 fixed;      areaMultiplier 584 296 fixed;    end;    implementation bg     submodels      EffortSensor1 272 320       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';       knot EffortSensor        ports         power knot in p1 [1];         pseudohydraulic knot out p2 [1];         signal knot out effort [1];        restrictions         causality constraint not_equal p1 p2;       end;       icon bg ellipse        figures         ellipse 265.1 313.3 278.9 327.4 fill 16777215;         text 'e' 272.5 317.6;       end;       implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;      EffortSensor2 416 320       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>  <TimeStamp>2007-9-27 9:59:27</TimeStamp></Description>';       knot EffortSensor        ports         pseudohydraulic knot in p1 [1];         pseudohydraulic knot out p2 [1];         signal knot out effort [1];        restrictions         causality constraint not_equal p1 p2;       end;       icon bg ellipse        figures         ellipse 409.1 313.3 422.9 327.4 fill 16777215;         text 'e' 416.5 317.6;       end;       implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	effort = p1.e;     implementation_end;      ExhVVLift 304 112       description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 22:48:51</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct>       <member>        <name>MaskChoice</name>        <value>         <int>1</int>        </value>       </member>       <member>        <name>BitmapFilename</name>        <value>         <string></string>        </value>       </member>       <member>        <name>ScriptFilename</name>        <value>         <string></string>        </value>       </member>       <member>        <name>Scaling</name>        <value>         <double>1</double>        </value>       </member>      </struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>';       type ExhVVLift        ports         signal out lift;         signal in CA;         signal in CA_start_nom;         signal in dCA_lift_nom;       end;       icon bg bottom        figures         rectangle 267.9 96 340.1 128 fill 15132390;         text 'VVLift' 304 112 16;        terminals         lift 304 136 fixed;         CA 328 88 fixed;         CA_start_nom 280 88 fixed;         dCA_lift_nom 304 88 fixed;       end;       implementation eqparameters//	real CA_start_nom = 1.1;//	real dCA_lift_nom = 1;	real global lift_maxIV;	real global nstorke;	real hidden global CA_start_refIV; //Reference start CA for start of valve lift	real hidden global dCA_lift_upIV;	 //Lift up time (should not be changed unless file is changed	real hidden global dCA_lift_downIV; //Lift down time (should not be changed unless file is changed	real hidden global dCA_lift_top_refIV; //Reference duration for lift upvariables	real CA_start, dCA_lift, dCA_total, CA_VV;	real phi;code	CA_start = CA_start_nom*CA_start_refIV;	dCA_lift = dCA_lift_nom*dCA_lift_top_refIV;		dCA_total = dCA_lift_upIV + dCA_lift + dCA_lift_downIV;	phi = CA*180/pi mod (nstorke*180);	if phi > CA_start and phi < CA_start + dCA_total then		CA_VV = phi - CA_start;		if CA_VV <= dCA_lift_upIV then			lift = table('ExhVVProfUp.csv',CA_VV);		else 	if CA_VV <= dCA_lift_upIV + dCA_lift then					lift = 1;			  	else 	if CA_VV <= dCA_lift_upIV + dCA_lift + dCA_lift_downIV then							CA_VV = phi - (CA_start + dCA_lift_upIV + dCA_lift);							lift = table('ExhVVProfDown.csv',CA_VV);					 	else 					 		lift = 0;							end;				end;		end;	else		lift = 0;		end;				lift = lift_maxIV*lift; implementation_end;      MultiplyDivide1 352 248       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>  <TimeStamp>2007-9-27 10:14:59</TimeStamp></Description>';       knot MultiplyDivide        ports         signal knot duplicatable in multiply [1];         signal knot duplicatable in divide [1];         signal knot out output [1];       end;       icon bg ellipse        figures         ellipse 344 240 360 256 fill 16777215;       end;       implementation eqequations	output = mul (collect (multiply)) ./ mul (collect (divide));     implementation_end;      plug dVONom 304 56;      plug pTFOut 504 336;      plug Cd 328 264;      plug areaMultiplier 448 32;      plug pTFIn 200 336;      plug VONom 280.1 32;      plug CA 327.8 69.9;      plug aOpenEff 520.1 280;      PowerDemux 240 336						specifications active 'inputs_3'							specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;							specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;							specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;							specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 240 312 240 360 width 2;   rectangle 235 320 243 352 color -1;   text '3' 244 346 color 8421504 8;  terminals   output1 240 320 fixed;   output2 240 336 fixed;   output3 240 352 fixed;   input 232 336 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;							specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;							specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;							specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;							specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;							specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;							specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;						end;      PowerMux 448 336						specifications active 'inputs_3'							specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;							specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;							specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;							specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 448 312 448 360 width 2;   rectangle 443 312 451 344 color -1;   text '3' 452 338 color 8421504 8;  terminals   input1 448 320 fixed;   input2 448 336 fixed;   input3 448 352 fixed;   output 456 336 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;							specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;							specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;							specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;							specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;							specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;							specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;						end;      Splitter1 352 280       description '<Description><Version>4.0</Version>   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>  <TimeStamp>2008-01-17 11:28:29</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues></Description>';       knot Splitter        ports         signal knot duplicatable out output [1];         signal knot in input [1];       end;       icon bg ellipse        figures         ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;         ellipse 347.7 275.7 356.3 284.3 color -1;        terminals         input 352 280 fixed;       end;       implementation eqequations    collect (output) = input;implementation_end;      Submodel2 352 351       description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 16:30:00</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate> </Description></Information>';       type Submodel        ports         signal in Aeff; "Effective area of nozzle (m2)"         pseudohydraulic in ppIn;         pseudothermalh in pTIn;         power in pFIn;         pseudohydraulic out ppOut;         pseudothermalh out pTOut;         power out pFOut;        restrictions         causality fixed in ppOut;         causality fixed in pFOut;         causality fixed in ppIn;         causality fixed in pTIn;         causality fixed in pFIn;       end;       icon bg bottom        figures         text 'R' 352 336 53 bold;         text 'IdealNozzle
CompFlow' 352 376 16;        terminals         Aeff 352 304 fixed;         ppIn 320 320 fixed;         pTIn 320 336 fixed;         pFIn 320 352 fixed;         ppOut 384 320 fixed;         pTOut 384 336 fixed;         pFOut 384 352 fixed;       end;       implementation eq/* Ideal Nozzle ModelUses ideal nozzle equation for compressible flows assuming isentropic process. Flow restriction field. No states.Input   - Effective area of nozzle (Aeff)  - p,T,F in  - p,T,F outOutput  - dm, dE, dmb in  - dm, dE, dmb out*/parameters 	real global fs;	string global dll_ICE;	string global dll_fcn_idealNozzle;variables	real pIn, TIn, FIn, pOut;	real dm, dE, dmb;	real aa, d, pr;	real	inArrFlow[4];	real outArrFlow[3];equations  // start typing here 	aa = ppIn.e / ppOut.e;	if (aa > 1) then		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;		pOut = ppOut.e;	else		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;		pOut = ppIn.e;	end;		// Calculate thermodynamic properties from (T,P,x)	inArrFlow = [1,Aeff,pIn,TIn,FIn,pOut,fs];	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);			dm = outArrFlow[1];	dE = outArrFlow[2];		dmb = outArrFlow[3];	ppIn.dm = dm;	ppOut.dm  = dm;	pTIn.dH = dE;	pTOut.dH = dE;	pFIn.f = dmb;	pFOut.f = dmb;implementation_end;      Submodel3 328.1 208.1       description '<Information> <Description>    <Version>4.5</Version>  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <TimeStamp>2015-6-22 22:48:36</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate>  <Configuration>   <struct>    <member>     <name>DocumentationMask</name>     <value>      <struct></struct>     </value>    </member>   </struct>  </Configuration> </Description></Information>';       type Submodel        ports         signal in lift {m} ;         signal in pIn {Pa} ;         signal in pOut {Pa} ;         signal out aOpen {m2} ; "Open area"         signal out Cd; "Discharge coefficient"         signal out aEff {m2} ; "Effective area of nozzle"       end;       icon bg        figures         rectangle 287.8 193.1 368.4 223.2 fill 15132390;         text 'VVArea' 328 208 16;        terminals         lift 304 184 fixed;         pIn 328 184 fixed;         pOut 352 184 fixed;         aOpen 304 232 fixed;         Cd 328 232 fixed;         aEff 352 232 fixed;       end;       implementation eq/* Poppet Valve Area Calculation	This calcuates the opening area, discharge coefficient and effective opening	area for poppet valve.		Input		lift : Valve lift [m]		pIn : Upstream pressure [Pa]		pOut : Downstream pressure [Pa]	Output		aOpen : Valve opening [m2]		Cd : Discharge coefficient		aEff : Effective valve opening [m2]			Version  | Created by     | Place      |  Changes	------------------------------------------------------	1.0      | Kevin K. Yum   | NTNU       | First model	*/constants	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];	// Discharge coeffcient correction factors	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];	// Discharge coefficient correction factor		// The fit model was taken from the Sher, E. (1990). Scavenging 	// the two-stroke engine. Progress in Energy and Combustion Science, 	// 16(2), 95-124. parameters	real global DvIV;		 	// Valve Seat diameter	real global betaIV;   	// valve seat angle	real global wIV;      	// valve seat width	real global DpIV;    		// Valve port diameter	real global DsIV; 			// Valve stem diametervariables	real L_Dv, pr;equations	if (lift > 0) then		if (lift < (wIV / (sin(betaIV)*cos(betaIV)))) then			aOpen = pi*(lift)*cos(betaIV)*(DvIV - 2*wIV + lift/2*sin(betaIV*2));		else 			if (lift <= (sqrt((DpIV^2 - DsIV^2)/(4*(DvIV - wIV)) - wIV^2) + wIV*tan(betaIV))) then				aOpen = pi*(DvIV - wIV)*sqrt((lift - wIV*tan(betaIV))^2 + wIV^2);			else				aOpen = 0.25*pi*(DpIV^2 - DsIV^2);			end;		end;				L_Dv = lift/DvIV;		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 	            CdCorrCoeffQ[3]);		if (pIn > pOut) then			pr = pIn/pOut;		else			pr = pOut/pIn;		end;			Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);		aEff = aOpen*Cd;	else		aOpen = 0;		Cd = 0;		aEff = 0;	end;		 implementation_end;     end;     connections      Submodel3\pIn <- EffortSensor1\effort 328 160 272 160 'pIn';      Submodel3\pOut <- EffortSensor2\effort 352 160 416 160 'pOut';      PowerDemux\output1 => EffortSensor1\p1;      PowerDemux\output3 => Submodel2\pFIn;      EffortSensor1\p2 => Submodel2\ppIn;      Submodel2\ppOut => EffortSensor2\p1;      Submodel2\pTOut => PowerMux\input2;      Submodel2\pFOut => PowerMux\input3;      EffortSensor2\p2 => PowerMux\input1;      pTFIn => PowerDemux\input;      PowerMux\output => pTFOut;      PowerDemux\output2 => Submodel2\pTIn;      VONom -> ExhVVLift\CA_start_nom;      dVONom -> ExhVVLift\dCA_lift_nom;      Submodel3\Cd -> Cd;      MultiplyDivide1\output -> Splitter1\input;      areaMultiplier -> MultiplyDivide1\multiply 448 248;      Splitter1\output -> Submodel2\Aeff;      Splitter1\output -> aOpenEff;      ExhVVLift\lift -> Submodel3\lift;      Submodel3\aEff -> MultiplyDivide1\multiply;      CA -> ExhVVLift\CA;     end;     figures      text 'Global parameters
real global lift_maxIV;     // Maximum lift of the vavle
real global nstorke;     // number of stroke
real hidden global CA_start_refIV;        //Reference start CA for start of valve lift
real hidden global dCA_lift_upIV;	//Lift up time (should not be changed unless file is changed
real hidden global dCA_lift_downIV;     //Lift down time (should not be changed unless file is changed
real hidden global dCA_lift_top_refIV;   //Reference duration for lift up
real global DvIV;		 	// Valve Seat diameter
real global betaIV;   	// valve seat angle
real global wIV;      	// valve seat width
real global DpIV;    		// Valve port diameter
real global DsIV; 			// Valve stem diameter
real global fs;
' 288 504 16;    implementation_end;   Submodel4 712 312    description '<Description><Version>4.0</Version>   <LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues>   <TimeStamp>2007-11-1 22:32:1</TimeStamp>   <AllowLibraryUpdate>False</AllowLibraryUpdate></Description>';    type 'Submodel-Equation'     ports      power in p1 [3,1];      power out p2 [3,1];      signal out flow;    end;    icon bg ellipse     figures      ellipse 702 302 722 322;      text 'f' 710 310 16;     terminals      flow 712 312 fixed;    end;    implementation eq/* Equation SubmodelEnter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).*/equations  // start typing here	p1.e = p2.e;	p1.f = p2.f;	flow = p1.f[1] implementation_end;   Submodel5 722.5 447    description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>ControlVolumes\ControlVolumeEnergy3Port.emx</LibraryPath>
  <TimeStamp>2015-6-25 13:58:48</TimeStamp>
</Description>
</Information>';    type Submodel     ports      power in pTFIn1 [3,1];      pneumatic out ppV;      signal out vCyl;      signal out mCyl;      power out pHT;      power out pTFOut [3,1];      power in pTFIn2 [3,1];     restrictions      causality fixed out pTFIn2;    end;    icon bg bottom shadow 11776947     figures      line 672 472 672 392 744 392 744 472 712 472 712 464 736 464 736 400 680 400 680 464 704 464 704 472 672 472 fill 15132390;      line 704 448 680 448 680 440 736 440 736 448 712 448 712 488 704 488 704 448 fill 6710886;      line 680 400 736 400 736 440 680 440 680 400 fill 55295;      text 'CV' 712 416 16;      text 'dW' 704 496 16;      spline 749 425 757 417 765 425 773 417;      text 'dQ' 760 440 16;      spline 749 432 757 424 765 432 773 424;      spline 749 418 757 410 765 418 773 410;     terminals      pTFIn1 672 384 fixed;      ppV 704 504 fixed;      vCyl 752 496 fixed;      mCyl 752 480 fixed;      pHT 760 456 fixed;      pTFOut 744 384 fixed;      pTFIn2 712 384 fixed;    end;    implementation bg     submodels      MSf 232 496       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>  <TimeStamp>2011-11-29 16:14:18</TimeStamp></Description></Information>';       type MSf        ports         power in p;         signal in flow;        restrictions         causality fixed in p;       end;       icon bg bottom        figures         text 'MSf' 232 496 18 bold;       end;       implementation eqvariables	real effort;equations	p.f = flow; 	effort = p.e;implementation_end;      plug ppV 352 656;      plug vCyl 510.8 552;      plug mCyl 509 535.9;      plug pHT 472 288;      plug pTFOut 493 392;      plug pTFIn2 352.1 240;      plug pTFIn1 208 392.1;      PowerDemux 248 392						specifications active 'inputs_3'							specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;							specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;							specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;							specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 248 368 248 416 width 2;   rectangle 243 376 251 408 color -1;   text '3' 252 402 color 8421504 8;  terminals   output1 248 376 fixed;   output2 248 392 fixed;   output3 248 408 fixed;   input 240 392 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;							specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;							specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;							specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;							specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;							specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;							specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;						end;      PowerDemux1 352 304.5						specifications active 'inputs_3'							specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;							specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;							specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;							specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 320 304 384 304 width 2;   rectangle 328 299 360 307 color -1;   text '3' 354 308 color 8421504 8;  terminals   output1 328 304 fixed;   output2 352 304 fixed;   output3 376 304 fixed;   input 352 296 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;							specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;							specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;							specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;							specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;							specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;							specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;						end;      PowerMux 456 392						specifications active 'inputs_3'							specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;							specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;							specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;							specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 456 368 456 416 width 2;   rectangle 451 368 459 400 color -1;   text '3' 460 394 color 8421504 8;  terminals   input1 456 376 fixed;   input2 456 392 fixed;   input3 456 408 fixed;   output 464 392 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;							specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;							specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;							specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;							specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;							specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;							specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;						end;      PowerSensor1 352 608       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>  <TimeStamp>2011-11-29 16:29:42</TimeStamp></Description></Information>';       knot PowerSensor        ports         pneumatic knot in p1 [1];         pneumatic knot out p2 [1];         signal knot out P [1] {W} ;        restrictions         causality constraint not_equal p1 p2;       end;       icon bg ellipse        figures         ellipse 345.1 600.8 358.9 615.2 fill 16777215;         text 'P' 352.5 607.8;       end;       implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	P = p1.e .* p1.f;implementation_end;      Thdyn_Cont_Vol_Eng_Cyl 352 528       description '<Description> <LibraryPath>Bond Graph\C.emx</LibraryPath> <Version>No Version Info</Version> <IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate>   <Configuration><struct>  <member>    <name>DocumentationMask</name>    <value>      <struct>        <member>          <name>MaskChoice</name>          <value>            <int>1</int>          </value>        </member>        <member>          <name>BitmapFilename</name>          <value>            <string></string>          </value>        </member>        <member>          <name>ScriptFilename</name>          <value>            <string></string>          </value>        </member>        <member>          <name>Scaling</name>          <value>            <double>1</double>          </value>        </member>      </struct>    </value>  </member></struct></Configuration><Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description></Description>';       type C        ports         pseudohydraulic in pp;         power in pF;         pseudothermalh in pT;         pneumatic out ppV;         signal out Cyl_vol;         signal out m_air_cyl;         pseudothermal out pHT;        restrictions         causality preferred out pp;         causality fixed out pHT;       end;       icon bg bottom        figures         text 'C' 352 528 51 bold;        terminals         pp 328 504 fixed;         pF 376 504 fixed;         pT 352 504 fixed;         ppV 352 552 fixed;         Cyl_vol 376 552 fixed;         m_air_cyl 376 536 fixed;         pHT 376 520 fixed;       end;       implementation eqparameters	integer icyl = 1;	integer global ncyl;	real global slag, Diam, alam, Veps;	real global pfi0[ncyl];	real global nstroke;	real global fs;	string global dll_ICE;	      // dll filename for subroutines	string global dll_fcn_ThDP;   // subroutines names in the dll file	string global dll_fcn_th_MEV; // subroutines names in the dll file	real global p0[ncyl]; 	real global T0[ncyl];	real global F0[ncyl];variables	real hidden m0, E0, m_b0, V0, Vc, pfi;	real interesting m, E, m_b, V;	real interesting p, T, F;	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];	real inarr_th_MEV[9], outarr_th_MEV[3]; 	real p_prev, T_prev, R_prev, u_prev, Cv_prev;	real CR;initialequations	Vc			= pi*Diam^2/4.0*slag/(Veps-1);	pfi			= pfi0[icyl]/180.0*pi;	V0		= Vc + pi*Diam^2/4.0* ( slag/2.0*(1.0-cos(pfi) + 1.0/alam*(1.0-sqrt(1.0-alam^2*sin(pfi)^2))));		inarr_ThermoProp = [p0[icyl];T0[icyl];F0[icyl];fs];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);			m0		= p0[icyl]/(outarr_ThermoProp[1]*T0[icyl])*V0;	E0		= m0*outarr_ThermoProp[2];		m_b0	= F0[icyl]*fs/(1+F0[icyl]*fs)*m0;	p_prev = p0[icyl];	T_prev = T0[icyl];	R_prev = outarr_ThermoProp[1];	u_prev = outarr_ThermoProp[2];	Cv_prev = outarr_ThermoProp[15];	equations   m 		= int(pp.f,m0);	E 		= int(pT.f,E0);	m_b	= int(pF.f,m_b0);	V   	= int(ppV.f,V0);		inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);		p = outarr_th_MEV[1];	T = outarr_th_MEV[2];	F = outarr_th_MEV[3];	T_prev = T;	p_prev = p;	inarr_ThermoProp = [p;T;F;fs];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);		R_prev = outarr_ThermoProp[1];	u_prev = outarr_ThermoProp[2];	Cv_prev = outarr_ThermoProp[15];	pp.e = p;	pT.e = T;	pF.e = F;	ppV.e = p;	pHT.T = T;	Cyl_vol = V;	m_air_cyl = m;	CR = V/Vc;implementation_end;      ZeroJunction1 352 392       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';       knot ZeroJunction        ports         pseudothermalh knot duplicatable none p [1];         signal knot out effort [1];        restrictions         causality constraint one_in p;       end;       icon bg        figures         text '0' 352 392 18 bold;       end;       implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;      ZeroJunction2 376 408       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';       knot ZeroJunction        ports         power knot duplicatable none p [1];         signal knot out effort [1];        restrictions         causality constraint one_in p;       end;       icon bg        figures         text '0' 376 408 18 bold;       end;       implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;      ZeroJunction3 328 376       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';       knot ZeroJunction        ports         pseudohydraulic knot duplicatable none p [1];         signal knot out effort [1];        restrictions         causality constraint one_in p;       end;       icon bg        figures         text '0' 328 376 18 bold;       end;       implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;     end;     connections      Thdyn_Cont_Vol_Eng_Cyl\pp <= ZeroJunction3\p;      ZeroJunction1\p => pHT;      PowerMux\output => pTFOut;      PowerDemux1\output3 => ZeroJunction2\p;      PowerDemux1\output2 => ZeroJunction1\p;      PowerDemux1\output1 => ZeroJunction3\p;      PowerDemux1\input <= pTFIn2;      ZeroJunction1\p => PowerMux\input2;      ZeroJunction2\p => PowerMux\input3;      ZeroJunction1\p => Thdyn_Cont_Vol_Eng_Cyl\pT;      ZeroJunction2\p => Thdyn_Cont_Vol_Eng_Cyl\pF;      PowerDemux\output1 => ZeroJunction3\p;      PowerDemux\output2 => ZeroJunction1\p;      PowerDemux\output3 => ZeroJunction2\p;      ZeroJunction3\p => PowerMux\input1;      PowerSensor1\p2 => ppV;      ZeroJunction1\p => MSf\p;      pTFIn1 => PowerDemux\input;      Thdyn_Cont_Vol_Eng_Cyl\ppV => PowerSensor1\p1;      Thdyn_Cont_Vol_Eng_Cyl\Cyl_vol -> vCyl;      Thdyn_Cont_Vol_Eng_Cyl\m_air_cyl -> mCyl;      PowerSensor1\P -> MSf\flow 232 608;     end;     figures      text 'Global Parameters
     real global slag, Diam, alam, Veps;
     real global pfi0[ncyl];
     real global nstroke;
     real global fs;
     string global dll_ICE;	      // dll filename for subroutines
     string global dll_fcn_ThDP;   // subroutines names in the dll file
     string global dll_fcn_th_MEV; // subroutines names in the dll file

     real global p0[nCyl]; 
     real global T0[nCyl];
     real global F0[nCyl];' 208 120 16;    implementation_end;   Submodel6 242.5 415    description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>ControlVolumes\ControlVolumeEnergy2Port.emx</LibraryPath>
  <TimeStamp>2015-6-25 13:58:59</TimeStamp>
</Description>
</Information>';    type Submodel     ports      power in pTFIn1 [3,1];      pneumatic out ppV;      signal out vCyl;      signal out mCyl;      power out pHT;      power out pTFOut [3,1];    end;    icon bg bottom shadow 11776947     figures      line 192 440 192 360 264 360 264 440 232 440 232 432 256 432 256 368 200 368 200 432 224 432 224 440 192 440 fill 15132390;      line 224 416 200 416 200 408 256 408 256 416 232 416 232 456 224 456 224 416 fill 6710886;      line 200 368 256 368 256 408 200 408 200 368 fill 55295;      text 'CV' 232 384 16;      text 'dW' 224 464 16;      spline 269 393 277 385 285 393 293 385;      text 'dQ' 280 408 16;      spline 269 400 277 392 285 400 293 392;      spline 269 386 277 378 285 386 293 378;     terminals      pTFIn1 192 352 fixed;      ppV 224 472 fixed;      vCyl 272 464 fixed;      mCyl 272 448 fixed;      pHT 280 424 fixed;      pTFOut 264 352 fixed;    end;    implementation bg     submodels      MSf 232 496       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>  <TimeStamp>2011-11-29 16:14:18</TimeStamp></Description></Information>';       type MSf        ports         power in p;         signal in flow;        restrictions         causality fixed in p;       end;       icon bg bottom        figures         text 'MSf' 232 496 18 bold;       end;       implementation eqvariables	real effort;equations	p.f = flow; 	effort = p.e;implementation_end;      plug ppV 352 656;      plug vCyl 510.8 552;      plug mCyl 509 535.9;      plug pHT 352 320;      plug pTFOut 493 392;      plug pTFIn1 208 392.1;      PowerDemux 248 392						specifications active 'inputs_3'							specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   output1 128 72 fixed;   input 128 80 fixed;   output2 128 88 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;							specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power in input;   power out output;  restrictions   causality constraint not_equal output input; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = output.e;	input.f = output.f;implementation_end;specification_end;							specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power in input [2,1];   power out output2;  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   output1 128 64 fixed;   input 128 72 fixed;   output2 128 80 fixed; end; implementation eqequations	input.e = [output1.e; output2.e];	input.f = [output1.f; output2.f];implementation_end;specification_end;							specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power in input [3,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input; end; icon bg bottom  figures   line 248 368 248 416 width 2;   rectangle 243 376 251 408 color -1;   text '3' 252 402 color 8421504 8;  terminals   output1 248 376 fixed;   output2 248 392 fixed;   output3 248 408 fixed;   input 240 392 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e];	input.f = [output1.f; output2.f; output3.f];implementation_end;specification_end;							specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power in input [4,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 80 fixed;   output4 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e];	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;specification_end;							specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power in input [5,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   output1 128 56 fixed;   output2 128 64 fixed;   output3 128 72 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;specification_end;							specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power in input [6,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 80 fixed;   output5 128 88 fixed;   output6 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;specification_end;							specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power in input [7,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   output1 128 48 fixed;   output2 128 56 fixed;   output3 128 64 fixed;   output4 128 72 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;specification_end;							specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power in input [8,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 80 fixed;   output6 128 88 fixed;   output7 128 96 fixed;   output8 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;specification_end;							specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerDemux  ports   power out output1;   power out output2;   power out output3;   power out output4;   power out output5;   power out output6;   power out output7;   power out output8;   power out output9;   power in input [9,1];  restrictions   causality constraint not_equal output1 input;   causality constraint not_equal output2 input;   causality constraint not_equal output3 input;   causality constraint not_equal output4 input;   causality constraint not_equal output5 input;   causality constraint not_equal output6 input;   causality constraint not_equal output7 input;   causality constraint not_equal output8 input;   causality constraint not_equal output9 input; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   output1 128 40 fixed;   output2 128 48 fixed;   output3 128 56 fixed;   output4 128 64 fixed;   output5 128 72 fixed;   output6 128 80 fixed;   output7 128 88 fixed;   output8 128 96 fixed;   output9 128 104 fixed;   input 128 72 fixed; end; implementation eqequations	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;						end;      PowerMux 456 392						specifications active 'inputs_3'							specification 'default'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>  <TimeStamp>2011-10-5 22:44:58</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 64 128 96 width 2;   rectangle 124 64 132 96 color -1;   text '2' 133 91 color 8421504 8;  terminals   input1 128 72 fixed;   output 128 80 fixed;   input2 128 88 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;							specification 'inputs_1'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input;   power out output;  restrictions   causality constraint not_equal input output; end; icon bg bottom  figures   line 128 64 128 80 width 2;   rectangle 124 64 132 80 color -1;   text '1' 133 82 color 8421504 8;  terminals   input 128 72 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = input.e;	output.f = input.f;implementation_end;specification_end;							specification 'inputs_2'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power out output [2,1];   power in input2;  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output; end; icon bg bottom  figures   line 128 56 128 88 width 2;   rectangle 124 56 132 88 color -1;   text '2' 133 83 color 8421504 8;  terminals   input1 128 64 fixed;   output 128 72 fixed;   input2 128 80 fixed; end; implementation eqequations	output.e = [input1.e; input2.e];	output.f = [input1.f; input2.f];implementation_end;specification_end;							specification 'inputs_3' description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power out output [3,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output; end; icon bg bottom  figures   line 456 368 456 416 width 2;   rectangle 451 368 459 400 color -1;   text '3' 460 394 color 8421504 8;  terminals   input1 456 376 fixed;   input2 456 392 fixed;   input3 456 408 fixed;   output 464 392 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e];	output.f = [input1.f; input2.f; input3.f];implementation_end;specification_end;							specification 'inputs_4'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power out output [4,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '4' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 80 fixed;   input4 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e];	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;specification_end;							specification 'inputs_5'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power out output [5,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output; end; icon bg bottom  figures   line 128 48 128 96 width 2;   rectangle 124 48 132 96 color -1;   text '5' 133 83 color 8421504 8;  terminals   input1 128 56 fixed;   input2 128 64 fixed;   input3 128 72 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;specification_end;							specification 'inputs_6'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power out output [6,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '6' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 80 fixed;   input5 128 88 fixed;   input6 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;specification_end;							specification 'inputs_7'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power out output [7,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output; end; icon bg bottom  figures   line 128 40 128 104 width 2;   rectangle 124 40 132 104 color -1;   text '7' 133 83 color 8421504 8;  terminals   input1 128 48 fixed;   input2 128 56 fixed;   input3 128 64 fixed;   input4 128 72 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;specification_end;							specification 'inputs_8'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power out output [8,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   rectangle 124 32 132 112 color -1;   text '8' 133 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 80 fixed;   input6 128 88 fixed;   input7 128 96 fixed;   input8 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;specification_end;							specification 'inputs_9'description '<Description>   <Version>4.1</Version>  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>  <TimeStamp>2011-3-4 15:12:50</TimeStamp><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate></Description>'; type PowerMux  ports   power in input1;   power in input2;   power in input3;   power in input4;   power in input5;   power in input6;   power in input7;   power in input8;   power in input9;   power out output [9,1];  restrictions   causality constraint not_equal input1 output;   causality constraint not_equal input2 output;   causality constraint not_equal input3 output;   causality constraint not_equal input4 output;   causality constraint not_equal input5 output;   causality constraint not_equal input6 output;   causality constraint not_equal input7 output;   causality constraint not_equal input8 output;   causality constraint not_equal input9 output; end; icon bg bottom  figures   line 128 32 128 112 width 2;   text '9' 132 83 color 8421504 8;  terminals   input1 128 40 fixed;   input2 128 48 fixed;   input3 128 56 fixed;   input4 128 64 fixed;   input5 128 72 fixed;   input6 128 80 fixed;   input7 128 88 fixed;   input8 128 96 fixed;   input9 128 104 fixed;   output 128 72 fixed; end; implementation eqequations	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;						end;      PowerSensor1 352 608       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>  <TimeStamp>2011-11-29 16:29:42</TimeStamp></Description></Information>';       knot PowerSensor        ports         pneumatic knot in p1 [1];         pneumatic knot out p2 [1];         signal knot out P [1] {W} ;        restrictions         causality constraint not_equal p1 p2;       end;       icon bg ellipse        figures         ellipse 345.1 600.8 358.9 615.2 fill 16777215;         text 'P' 352.5 607.8;       end;       implementation eqequations	p2.e = p1.e;	p1.f = p2.f;	P = p1.e .* p1.f;implementation_end;      Thdyn_Cont_Vol_Eng_Cyl 352 528       description '<Description> <LibraryPath>Bond Graph\C.emx</LibraryPath> <Version>No Version Info</Version> <IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <AllowLibraryUpdate>True</AllowLibraryUpdate>   <Configuration><struct>  <member>    <name>DocumentationMask</name>    <value>      <struct>        <member>          <name>MaskChoice</name>          <value>            <int>1</int>          </value>        </member>        <member>          <name>BitmapFilename</name>          <value>            <string></string>          </value>        </member>        <member>          <name>ScriptFilename</name>          <value>            <string></string>          </value>        </member>        <member>          <name>Scaling</name>          <value>            <double>1</double>          </value>        </member>      </struct>    </value>  </member></struct></Configuration><Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description></Description>';       type C        ports         pseudohydraulic in pp;         power in pF;         pseudothermalh in pT;         pneumatic out ppV;         signal out Cyl_vol;         signal out m_air_cyl;         pseudothermal out pHT;        restrictions         causality preferred out pp;         causality fixed out pHT;       end;       icon bg bottom        figures         text 'C' 352 528 51 bold;        terminals         pp 328 504 fixed;         pF 376 504 fixed;         pT 352 504 fixed;         ppV 352 552 fixed;         Cyl_vol 376 552 fixed;         m_air_cyl 376 536 fixed;         pHT 376 520 fixed;       end;       implementation eqparameters	integer icyl = 1;	integer global ncyl;	real global slag, Diam, alam, Veps;	real global pfi0[ncyl];	real global nstroke;	real global fs;	string global dll_ICE;	      // dll filename for subroutines	string global dll_fcn_ThDP;   // subroutines names in the dll file	string global dll_fcn_th_MEV; // subroutines names in the dll file	real global p0[ncyl]; 	real global T0[ncyl];	real global F0[ncyl];variables	real hidden m0, E0, m_b0, V0, Vc, pfi;	real interesting m, E, m_b, V;	real interesting p, T, F;	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];	real inarr_th_MEV[9], outarr_th_MEV[3]; 	real p_prev, T_prev, R_prev, u_prev, Cv_prev;	real CR;initialequations	Vc			= pi*Diam^2/4.0*slag/(Veps-1);	pfi			= pfi0[icyl]/180.0*pi;	V0		= Vc + pi*Diam^2/4.0* ( slag/2.0*(1.0-cos(pfi) + 1.0/alam*(1.0-sqrt(1.0-alam^2*sin(pfi)^2))));		inarr_ThermoProp = [p0[icyl];T0[icyl];F0[icyl];fs];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);			m0		= p0[icyl]/(outarr_ThermoProp[1]*T0[icyl])*V0;	E0		= m0*outarr_ThermoProp[2];		m_b0	= F0[icyl]*fs/(1+F0[icyl]*fs)*m0;	p_prev = p0[icyl];	T_prev = T0[icyl];	R_prev = outarr_ThermoProp[1];	u_prev = outarr_ThermoProp[2];	Cv_prev = outarr_ThermoProp[15];	equations   m 		= int(pp.f,m0);	E 		= int(pT.f,E0);	m_b	= int(pF.f,m_b0);	V   	= int(ppV.f,V0);		inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);		p = outarr_th_MEV[1];	T = outarr_th_MEV[2];	F = outarr_th_MEV[3];	T_prev = T;	p_prev = p;	inarr_ThermoProp = [p;T;F;fs];		outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);		R_prev = outarr_ThermoProp[1];	u_prev = outarr_ThermoProp[2];	Cv_prev = outarr_ThermoProp[15];	pp.e = p;	pT.e = T;	pF.e = F;	ppV.e = p;	pHT.T = T;	Cyl_vol = V;	m_air_cyl = m;	CR = V/Vc;implementation_end;      ZeroJunction1 352 392       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';       knot ZeroJunction        ports         pseudothermalh knot duplicatable none p [1];         signal knot out effort [1];        restrictions         causality constraint one_in p;       end;       icon bg        figures         text '0' 352 392 18 bold;       end;       implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;      ZeroJunction2 376 408       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';       knot ZeroJunction        ports         power knot duplicatable none p [1];         signal knot out effort [1];        restrictions         causality constraint one_in p;       end;       icon bg        figures         text '0' 376 408 18 bold;       end;       implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;      ZeroJunction3 328 376       description '<Information> <Description>    <Version>4.2</Version><IsMainModel>1</IsMainModel>  <KeepParameterValues>False</KeepParameterValues>    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>  <TimeStamp>2011-11-29 16:45:16</TimeStamp></Description></Information>';       knot ZeroJunction        ports         pseudohydraulic knot duplicatable none p [1];         signal knot out effort [1];        restrictions         causality constraint one_in p;       end;       icon bg        figures         text '0' 328 376 18 bold;       end;       implementation eqequations	sum (direct (p.f)) = 0;	equal (collect (p.e));	effort = first (p.e);implementation_end;     end;     connections      Thdyn_Cont_Vol_Eng_Cyl\pp <= ZeroJunction3\p;      ZeroJunction1\p => PowerMux\input2;      ZeroJunction2\p => PowerMux\input3;      ZeroJunction1\p => Thdyn_Cont_Vol_Eng_Cyl\pT;      ZeroJunction2\p => Thdyn_Cont_Vol_Eng_Cyl\pF;      PowerDemux\output1 => ZeroJunction3\p;      PowerDemux\output2 => ZeroJunction1\p;      PowerDemux\output3 => ZeroJunction2\p;      ZeroJunction3\p => PowerMux\input1;      PowerSensor1\p2 => ppV;      ZeroJunction1\p => MSf\p;      pTFIn1 => PowerDemux\input;      Thdyn_Cont_Vol_Eng_Cyl\ppV => PowerSensor1\p1;      ZeroJunction1\p => pHT;      PowerMux\output => pTFOut;      Thdyn_Cont_Vol_Eng_Cyl\Cyl_vol -> vCyl;      Thdyn_Cont_Vol_Eng_Cyl\m_air_cyl -> mCyl;      PowerSensor1\P -> MSf\flow 232 608;     end;     figures      text 'Global Parameters
     real global slag, Diam, alam, Veps;
     real global pfi0[ncyl];
     real global nstroke;
     real global fs;
     string global dll_ICE;	      // dll filename for subroutines
     string global dll_fcn_ThDP;   // subroutines names in the dll file
     string global dll_fcn_th_MEV; // subroutines names in the dll file

     real global p0[nCyl]; 
     real global T0[nCyl];
     real global F0[nCyl];' 208 120 16;    implementation_end;   Submodel9 480 344    description '<Description><Version>4.0</Version>   <LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues>   <TimeStamp>2007-11-1 22:32:1</TimeStamp>   <AllowLibraryUpdate>False</AllowLibraryUpdate></Description>';    type 'Submodel-Equation'     ports      power in p1 [3,1];      power out p2 [3,1];      signal out effort {Pa} ;    end;    icon bg ellipse     figures      ellipse 470 334 490 354;      text 'e' 478 342 16;    end;    implementation eq/* Equation SubmodelEnter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).*/equations  // start typing here	p1.e = p2.e;	p1.f = p2.f;	effort = p1.e[1] implementation_end;  end;  connections   Submodel9\effort -> CrankMechanism\p_scvg 480 640 'pAir';   Submodel3\pTFOut => Submodel5\pTFIn1 672 344;   Submodel5\pTFOut => Submodel1\pTFIn 744 344;   ROHR1\pTF => Submodel4\p1;   Submodel5\ppV => EffortSensor1\p1;   Submodel5\pHT => FlowSensor1\p1;   EffortSensor1\p2 => CrankMechanism\p1;   Submodel9\p2 => Submodel3\pTFIn;   CrankMechanism\p2 => M;   Submodel4\p2 => Submodel5\pTFIn2;   FlowSensor1\p2 => Submodel2\pQ;   ppTFIn => Submodel9\p1;   Submodel1\pTFOut => ppTFOut;   Demux\output5 -> ROHR1\fiinj 704 160;   dmf <- Submodel4\flow;   Demux\output7 -> Submodel1\dVONom 824 200;   FlowSensor1\flow -> dQCyl;   Splitter2\output -> Submodel1\CA;   Splitter2\output -> Splitter3\input 880 208;   Demux\output1 -> Submodel3\VONom 528 208;   Submodel3\dVONom <- Demux\output2 552 208;   Splitter1\input <- CrankMechanism\flow 1000 688;   Demux\output3 -> Submodel3\areaMultiplier 584 208;   CrankMechanism\q_rad -> Splitter2\input 1032 616 1032 208;   Demux\output4 -> ROHR1\x_lev 688 160;   Demux\output6 -> Submodel1\VONom 800 200;   Demux\output8 -> Submodel1\areaMultiplier 856 200;   Splitter3\output -> ROHR1\pfi 720 208;   Splitter3\output -> Submodel3\CA 608 208;   EffortSensor1\effort -> Submodel2\Pcyl 832 544 832 432;   Submodel2\Vol <- Submodel5\vCyl 904 496;   Submodel2\omega <- Splitter1\output;   Splitter1\output -> ROHR1\omega 1000 232;   contSig -> Demux\input;   ROHR1\p_max -> pMax;  end;  figures   line 704 536 704 544; implementation_end;]]>
  </Sidops>
</Model>
</Document>
