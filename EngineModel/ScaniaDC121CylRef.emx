<?xml version="1.0" encoding="UTF-8"?>
<Document>
 <Model version="4.6" build="4.6.1.6898">
  <Sidops><![CDATA[model 128 184
 description '<Information>
 <Description>
    <Version>4.6</Version>
<IsMainModel>0</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>EngineModel\ScaniaDC121CylRef.emx</LibraryPath>
  <TimeStamp>2016-8-9 16:42:04</TimeStamp>
</Description>
</Information>';
 type 'Mainmodel-38CF'
 end;
 implementation bg
  submodels
   Boundary_Amb 152 296
			specifications active 'Output'
				specification 'Input'
description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>BoundaryCondition\SePTF.emx</LibraryPath>
  <TimeStamp>2015-10-25 18:05:04</TimeStamp>
<AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Se
  ports
   power in p [3,1];
  restrictions
   causality fixed out p;
 end;
 icon bg bottom
  figures
   text 'Se' 64 304 18 bold;
 end;
 implementation eq
parameters
	real p = 100000;
	real T = 298.15;
	real F = 0;
variables
	real flow[3];
equations
	p.e = [p;T;F];
	flow = p.f;
implementation_end;
specification_end;
				specification 'Output'
 description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>BoundaryCondition\SePTF.emx</LibraryPath><TimeStamp>2015-10-26 20:04:46</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type Se
  ports
   power out p [3,1];
  restrictions
   causality fixed out p;
 end;
 icon bg bottom
  figures
   text 'Se' 152 296 color 0 18 bold;
 end;
 implementation eq
parameters
	real global pTFAmb[20,3];
	integer global caseNo;
variables
	real flow[3];
equations
	//p.e = transpose(pTFAmb[caseNo,1:3]);
	p.e = [1e5;300;0];
	flow = p.f;
implementation_end;
specification_end;
			end;
   Boundary_Exh 144 152
			specifications active 'Input'
				specification 'Input'
 description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>BoundaryCondition\SePTF.emx</LibraryPath><TimeStamp>2015-10-25 18:05:04</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type Se
  ports
   power in p [3,1];
  restrictions
   causality fixed out p;
 end;
 icon bg bottom
  figures
   text 'Se' 144 152 color 0 18 bold;
 end;
 implementation eq
parameters
	real p = 103000;
	real T = 298.15;
	real F = 0;
variables
	real flow[3];
equations
	p.e = [p;T;F];
	flow = p.f;
implementation_end;
specification_end;
				specification 'Output'
description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>BoundaryCondition\SePTF.emx</LibraryPath>
  <TimeStamp>2015-10-26 20:04:46</TimeStamp>
<AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Se
  ports
   power out p [3,1];
  restrictions
   causality fixed out p;
 end;
 icon bg bottom
  figures
   text 'Se' 64 304 color 0 18 bold;
 end;
 implementation eq
parameters
	real p = 100000;
	real T = 298.15;
	real F = 0;
variables
	real flow[3];
equations
	p.e = [p;T;F];
	flow = p.f;
implementation_end;
specification_end;
			end;
   ChargeAirCooler 528 296.5
    description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>FlowRestriction\Cooler_effectivity_externalDll.emx</LibraryPath><TimeStamp>2015-11-3 14:06:05</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations>parameters
	real Cd = 0.8;									//Discharge coefficient of the charge air cooler
	real A_air_path = 0.0032;							//Effective area of air passage
	real dm_cw = 0.92;								//mass flow of coolant
	real coeff_T_cw_K[2] = [-0.003894501462398;2.8915399004224];					//HT coefficient correction factor WRT T_cw
	real Cp_cw = 4185.5; 								//Heat capacity of coolant
	real D_cw_pipe = 0.004;							//Diameter of the tube in the cooler</GlobalRelations></Attributes></Information>';
    type Submodel
     ports
      signal in T_cw;
      signal out dQ;
      power in ppTFIn [3,1];
      power out ppTFOut [3,1];
    end;
    icon bg ellipse bottom
     figures
      ellipse 496 258 560 322 color 0;
      line 512 334 512 274 color 0;
      line 544 334 544 274 color 0;
      line 512 274 528 298 color 0;
      line 544 274 528 298 color 0;
     terminals
      T_cw 528 336 fixed;
      dQ 528 248 fixed;
    end;
    implementation bg
     submodels
      plug T_cw 336 376;
      plug dQ 336 120;
      plug ppTFIn 200 256;
      plug ppTFOut 496 256;
      PowerDemux 242.5 256
						specifications active 'inputs_3'
							specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
							specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
							specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
							specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 240 240 240 272 color 0 width 2;
   rectangle 236 240 244 272 color -1;
   text '3' 245 266 color 8421504 8;
  terminals
   output1 240 248 fixed;
   output2 240 256 fixed;
   output3 240 264 fixed;
   input 240 256 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
							specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
							specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
							specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
							specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
							specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
							specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
						end;
      PowerMux 426.5 256
						specifications active 'inputs_3'
							specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
							specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
							specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
							specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 424 240 424 272 color 0 width 2;
   rectangle 420 240 428 272 color -1;
   text '3' 429 266 color 8421504 8;
  terminals
   input1 424 248 fixed;
   input2 424 256 fixed;
   input3 424 264 fixed;
   output 424 256 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
							specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
							specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
							specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
							specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
							specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
							specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
						end;
      Submodel2 336 256.1
       description '<Description><Version>4.0</Version>
   <LibraryPath>Template\Submodel-Equation.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
   <TimeStamp>2007-11-1 22:32:1</TimeStamp>
   <AllowLibraryUpdate>False</AllowLibraryUpdate>
</Description>';
       type 'Submodel-Equation'
        ports
         signal in T_cw;
         signal out dQ;
         power in pp_in;
         power in pT_in;
         power in pF_in;
         power out pp_out;
         power out pT_out;
         power out pF_out;
        restrictions
         causality fixed in pF_in;
         causality fixed in pT_in;
         causality fixed in pp_in;
         causality fixed in pF_out;
         causality fixed in pT_out;
         causality fixed in pp_out;
       end;
       implementation eq
parameters
	real global fs;			//Stoichiometric fuel-air ratio
// Thermo package
	string global dll_ICE;
	string global dll_fcn_ThDP;
	string global dll_fcn_idealNozzle;
	string global dll_fcn_HTX;
	
	real global Cd;									//Discharge coefficient of the charge air cooler
	real global A_air_path;							//Effective area of air passage
	real global dm_cw;								//mass flow of coolant
	real global coeff_T_cw_K[2];					//HT coefficient correction factor WRT T_cw
	real global Cp_cw; 								//Heat capacity of coolant
	real global D_cw_pipe;							//Diameter of the tube in the cooler

variables
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real hidden inarr_GetFlow[7], outarr_GetFlow[3];
	real hidden inarr_HTX[5];
	real hidden aa, p_in, T_in, F_in, a, d;
	real hidden p_out;
	real hidden h, Cp, alpha;
	real interesting dm, dm_b, dE_in, dE_out;
	real hidden K, T_out_temp, err_T_out, T_mean;
	real T_out;
	real hidden C, C1, C2, N, epsilon;
	
code
	aa = pp_in.e / pp_out.e;
	T_mean = 0.5*(pT_in.e + pT_out.e);
	if (aa > 1) then
				p_in	=pp_in.e; T_in=pT_in.e; F_in= pF_in.e;	a	=aa; 
				p_out = pp_out.e;	d = 1;
			else
				p_in	=pp_out.e; T_in=pT_out.e; F_in= pF_out.e;	a	=1.0/aa;
				p_out = pp_in.e;	 	d = -1;
	end;

	/// Calculate thermodynamic properties of inlet air
	inarr_GetFlow = [Cd;A_air_path;p_in;p_out;T_in;F_in;fs];
	outarr_GetFlow = dll(dll_ICE,dll_fcn_idealNozzle,inarr_GetFlow);	

	dm		= outarr_GetFlow[1]*d;
	dE_in = outarr_GetFlow[2]*d;
	dm_b  = outarr_GetFlow[3]*d;

	if dm == 0 then
		dE_out = 0;
		T_out = T_in;
	else
		// Calculate the outlet temperature and the energy out
		K = coeff_T_cw_K[1]*T_cw + coeff_T_cw_K[2];
		T_out = T_in + 1;
		err_T_out = 1;
		while err_T_out > 1e-3 do
			T_mean = (T_in - T_out)./(log(T_in) - log(T_out));
			inarr_ThermoProp = [p_in;T_in;F_in;fs;1];
			outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
			Cp	= outarr_ThermoProp[14];
			C1 = abs(dm)*Cp;
			C2 = dm_cw*Cp_cw;
			C = C1/C2;
			inarr_HTX = [p_in;abs(dm);T_mean;D_cw_pipe;A_air_path];
			alpha = dll(dll_ICE,dll_fcn_HTX, inarr_HTX);
			N = K*alpha/C1;
			epsilon = 1 - exp((exp(-C*N^0.78)-1)/(C*N^-0.22));
			T_out_temp = T_in - epsilon*(T_in - T_cw);
			err_T_out = abs(T_out - T_out_temp)/T_out;
			T_out = T_out_temp;
		end;
	end;

	inarr_ThermoProp = [p_out;T_out;F_in;fs;1];
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);			
	h = outarr_ThermoProp[2];
	dE_out = h*dm;

	pp_in.f = dm;
	pp_out.f = dm;
	if d < 0 then
		pT_in.f = dE_out;
		pT_out.f = dE_in;		
	else
		pT_in.f = dE_in;
		pT_out.f = dE_out;		
	end;
	pF_in.f = dm_b;
	pF_out.f = dm_b;

	dQ = dE_in - dE_out;implementation_end;
     end;
     connections
      PowerDemux\output1 => Submodel2\pp_in;
      PowerDemux\output2 => Submodel2\pT_in;
      PowerDemux\output3 => Submodel2\pF_in;
      ppTFIn => PowerDemux\input;
      ppTFOut <= PowerMux\output;
      Submodel2\dQ -> dQ;
      Submodel2\pF_out => PowerMux\input3;
      Submodel2\pp_out => PowerMux\input1;
      Submodel2\pT_out => PowerMux\input2;
      Submodel2\T_cw <- T_cw;
     end;
    implementation_end;
   ChargeAirReciever 656 296
			specifications active 'Energy2PortFixedAdiab'
				specification 'Conv3PortCyl'
description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath><TimeStamp>2015-10-26 20:20:12</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations>parameters
	real p0 = 310000;
	real T0 = 304.45;
	real F0 = 0;
	real V0 = 1.15;</GlobalRelations></Attributes></Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   pneumatic out ppV;
   signal out vCyl;
   signal out mCyl;
   power out pHT;
   power out pTFOut [3,1];
   power in pTFIn2 [3,1];
  restrictions
   causality fixed out pTFIn2;
 end;
 icon bg bottom shadow 11776947
  figures
   line 653.5 801 653.5 721 725.5 721 725.5 801 693.5 801 693.5 793 717.5 793 717.5 729 661.5 729 661.5 793 685.5 793 685.5 801 653.5 801 fill 15132390;
   line 685.5 777 661.5 777 661.5 769 717.5 769 717.5 777 693.5 777 693.5 817 685.5 817 685.5 777 fill 6710886;
   line 661.5 729 717.5 729 717.5 769 661.5 769 661.5 729 fill 55295;
   text 'CV' 693.5 745 16;
   text 'dW' 685.5 825 16;
   spline 730.5 754 738.5 746 746.5 754 754.5 746;
   text 'dQ' 741.5 769 16;
   spline 730.5 761 738.5 753 746.5 761 754.5 753;
   spline 730.5 747 738.5 739 746.5 747 754.5 739;
  terminals
   pTFIn1 653.5 713 fixed;
   ppV 685.5 833 fixed;
   vCyl 733.5 825 fixed;
   mCyl 733.5 809 fixed;
   pHT 741.5 785 fixed;
   pTFOut 725.5 713 fixed;
   pTFIn2 693.5 713 fixed;
 end;
 implementation bg
  submodels
   MSf1 432 448
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
    type MSf
     ports
      power in p;
      signal in flow;
     restrictions
      causality fixed in p;
    end;
    icon bg bottom
     figures
      text 'MSf' 432 448 18 bold;
    end;
    implementation eq
variables
	real effort;
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
   MTF 352 480
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MTF.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:15:31</TimeStamp>
</Description>
</Information>';
    type MTF
     ports
      pseudopneumatic in ppIn;
      pseudothermalh in pTIn;
      power in pFIn;
      power out ppOut;
      power out pTOut;
      power out pFOut;
      signal in vCyl {m3} ;
      pneumatic out ppVOut;
      signal out mCyl;
     restrictions
      causality fixed out pTIn;
      causality fixed in pFOut;
      causality fixed in pTOut;
      causality fixed out ppIn;
      causality fixed out pFIn;
      causality fixed in ppOut;
    end;
    icon bg bottom
     figures
      text 'MTF' 352 480 'Arial Narrow' 25 bold;
     terminals
      ppIn 328 456 fixed;
      pTIn 352 456 fixed;
      pFIn 376 456 fixed;
      ppOut 328 504 fixed;
      pTOut 352 504 fixed;
      pFOut 376 504 fixed;
      vCyl 376 488 fixed;
      ppVOut 376 480 fixed;
      mCyl 376 496 fixed;
    end;
    implementation eq
parameters
	string global dll_ICE;           //dll file name
	string global dll_fcn_ThDP;			//function name in dll file
	real global fs;							// stoichiometric fuel-to-air ratio
variables
	real dm {kg/s}; // Rate of change in mass
	real dE {J/s}; // Rate of change in internal energy
	real dmb {kg/s}; // Rate of change in burned fuel mass
	real dV {m3/s}; // Rate of change in volume
	real p {Pa};  // pressure of the control volume
	real T {K};		// temperature of the control volume
	real F; 			// Fuel-to-air equivalent ratio of control volume
	real mb {kg};				// mass of burned fuel in the control volume
	real ma {kg}; 				// mass of air in the control volume
	real R {J/kgK};			// Gas constant of the gas
	real u {J/kg};				// Specific internal energy of the gas
	real rho {kg/m3};		// Density of the gas
	real rhop, rhoT, rhoF; // partial derivative of density w.r.t. p, T, F
	real Rp, RT, RF;		// partial derivative of gas constant w.r.t. p, T, F
	real up, uT, uF;   // partial derivative of internal energy w.r.t. p, T, F
	
	real hidden u1, u2, u3, u4, D;
	real hidden a11, a12, a13, a21, a22, a23;
	real hidden RtimesT;
	real hidden RtimesTSq;
	real hidden inArrThProp[5];
	real hidden outArrThProp[16];
equations
	p = ppOut.e;
	T = pTOut.e;
	F = pFOut.e;
	dV = ppVOut.f;
	dm = ppIn.f;
	dE = pTIn.f;
	dmb = pFIn.f;
	
	// Calculate the thermodynamic properties of the gas
	inArrThProp = [p;T;F;fs;1];	
	outArrThProp = dll(dll_ICE,dll_fcn_ThDP, inArrThProp);	
	R = outArrThProp[1]; 			u = outArrThProp[4];
	Rp = outArrThProp[6];			RT = outArrThProp[7];			
	RF = outArrThProp[5];			up = outArrThProp[9];			
	uT = outArrThProp[10];		uF = outArrThProp[8];
	RtimesT = R*T;
	RtimesTSq = RtimesT*RtimesT;
	rho = p/(RtimesT);
	rhop = (RtimesT - p*Rp*T)/RtimesTSq;			
	rhoT = (-p*(RT*T + R))/RtimesTSq;
	rhoF = (-p*(RF*T))/RtimesTSq;
	mCyl = rho*vCyl;
	mb = (F*fs)/(1+F*fs)*mCyl;
	ma = mCyl - mb;
	
	// Calculate the derivative of the p, T, F
	u1 = dm/mCyl - dV/vCyl;
	u2 = (dE - u*dm)/mCyl;
	u3 = (dmb*mCyl - dm*mb)/(fs*ma^2);
	
	D = -(rhoT*up - rhop*uT)/rho;
	a11 = uT / D; 		a12 = -rhoT/(rho*D);		a13 = (rhoT*uF - rhoF*uT)/(rho*D);
	a21 = -up / D;		a22 = rhop/(rho*D);		a23 = -(rhop*uF - rhoF*up)/(rho*D);

	ppOut.f = a11*u1 + a12*u2 + a13*u3;
	pTOut.f = a21*u1 + a22*u2 + a23*u3;
	pFOut.f = u3;
	
	//
		
	ppIn.e = p;
	pTIn.e = T;
	pFIn.e = F;
	ppVOut.e = p;
	
implementation_end;
   plug pTFIn1 208 392.1;
   plug ppV 528 480;
   plug vCyl 510.8 528;
   plug mCyl 512 544;
   plug pHT 472 288;
   plug pTFOut 493 392;
   plug pTFIn2 352.1 240;
   PowerDemux 248 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 248 368 248 416 width 2;
   rectangle 243 376 251 408 color -1;
   text '3' 252 402 color 8421504 8;
  terminals
   output1 248 376 fixed;
   output2 248 392 fixed;
   output3 248 408 fixed;
   input 240 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerDemux1 352 304.5
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 320 304 384 304 width 2;
   rectangle 328 299 360 307 color -1;
   text '3' 354 308 color 8421504 8;
  terminals
   output1 328 304 fixed;
   output2 352 304 fixed;
   output3 376 304 fixed;
   input 352 296 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 456 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 456 368 456 416 width 2;
   rectangle 451 368 459 400 color -1;
   text '3' 460 394 color 8421504 8;
  terminals
   input1 456 376 fixed;
   input2 456 392 fixed;
   input3 456 408 fixed;
   output 464 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   PowerSensor2 480 480
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:29:42</TimeStamp>
</Description>
</Information>';
    knot PowerSensor
     ports
      pneumatic knot in p1 [1];
      pneumatic knot out p2 [1];
      signal knot out P [1] {W} ;
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 473.1 472.8 486.9 487.2 fill 16777215;
      text 'P' 480.5 479.8;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	P = p1.e .* p1.f;
implementation_end;
   QSensor1 424 480
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\QSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:34</TimeStamp>
</Description>';
    knot QSensor
     ports
      pneumatic knot in p1 [1];
      pneumatic knot out p2 [1];
      signal knot out vCyl [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 417.1 473.3 430.9 487.4 fill 16777215;
      text 'q' 423.5 477.6;
    end;
    implementation eq
parameters
	real global V0;
equations
	p2.f = p1.f;
	p1.e = p2.e;
	vCyl = int (p1.f, V0);
     implementation_end;
   Splitter1 424 496
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 420.8 492.8 427.2 499.2 color -1 fill 0;
      ellipse 419.7 491.7 428.3 500.3 color -1;
     terminals
      input 424 496 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Thdyn_Cont_Vol_Cyl 352 568
			specifications active 'Conventional'
				specification 'Conventional'
 description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume for array of cylinders</Description>
    <TimeStamp>2015-10-19 21:36:18</TimeStamp>
</Description>
</Information>';
 type C
  ports
   power in pp;
   power in pF;
   power in pT;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 568 51 bold;
  terminals
   pp 328 544 fixed;
   pF 376 544 fixed;
   pT 352 544 fixed;
 end;
 implementation eq
parameters
	real global p0; 
	real global T0;
	real global F0;

variables
	real interesting p, T, F;

equations
	p 		= int(pp.f,p0);
	T 		= int(pT.f,T0);
	F		= int(pF.f,F0);
	
	pp.e = p;
	pT.e = T;
	pF.e = F;	

implementation_end;
specification_end;
				specification 'cyl'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume for array of cylinders</Description>
    <TimeStamp>2015-10-19 17:31:58</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   pneumatic out ppV;
   signal out vCyl;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 152 480 51 bold;
  terminals
   pp 128 456 fixed;
   pF 176 456 fixed;
   pT 152 456 fixed;
   ppV 152 504 fixed;
   vCyl 176 504 fixed;
   mCyl 176 488 fixed;
 end;
 implementation eq
parameters
	integer global iCyl;
	integer global nCyl;
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global mCyl0[nCyl]; 
	real global ECyl0[nCyl];
	real global mbCyl0[nCyl];
	real global VCyl0[nCyl];

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,mCyl0[iCyl]);
	E 		= int(pT.f,ECyl0[iCyl]);
	m_b	= int(pF.f,mbCyl0[iCyl]);
	V   	= int(ppV.f,VCyl0[iCyl]);

	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[2];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	vCyl = V;
	mCyl = m;implementation_end;
specification_end;
				specification 'Fixed'
description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 104 264 51 bold;
  terminals
   pp 80 240 fixed;
   pF 128 240 fixed;
   pT 104 240 fixed;
   mCyl 128 272 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[2];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information><Description><LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration><Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description><TimeStamp>2015-10-19 17:21:38</TimeStamp></Description></Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 104 264 51 bold;
  terminals
   pp 80 240 fixed;
   pF 128 240 fixed;
   pT 104 240 fixed;
   mCyl 128 272 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[2];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudopneumatic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   MTF\mCyl -> mCyl 416 504 456 544;
   MTF\pFOut => Thdyn_Cont_Vol_Cyl\pF;
   MTF\ppOut => Thdyn_Cont_Vol_Cyl\pp;
   MTF\ppVOut => QSensor1\p1;
   MTF\pTOut => Thdyn_Cont_Vol_Cyl\pT;
   PowerDemux1\input <= pTFIn2;
   PowerDemux1\output1 => ZeroJunction\p;
   PowerDemux1\output2 => ZeroJunction1\p;
   PowerDemux1\output3 => ZeroJunction2\p;
   PowerDemux\output1 => ZeroJunction\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   PowerSensor2\P -> MSf1\flow;
   PowerSensor2\p2 => ppV;
   pTFIn1 => PowerDemux\input;
   QSensor1\p2 => PowerSensor2\p1;
   QSensor1\vCyl -> Splitter1\input;
   Splitter1\output -> MTF\vCyl;
   vCyl <- Splitter1\output 456 528;
   ZeroJunction1\p => MSf1\p;
   ZeroJunction1\p => MTF\pTIn;
   ZeroJunction1\p => pHT;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction2\p => MTF\pFIn;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction\p => MTF\ppIn;
   ZeroJunction\p => PowerMux\input1;
  end;
  figures
   text 'Global Parameters
     real global slag, Diam, alam, Veps;
     real global pfi0[ncyl];
     real global nstroke;
     real global fs;
     string global dll_ICE;	      // dll filename for subroutines
     string global dll_fcn_ThDP;   // subroutines names in the dll file
     string global dll_fcn_th_MEV; // subroutines names in the dll file

     real global p0[nCyl]; 
     real global T0[nCyl];
     real global F0[nCyl];' 208 120 16;
 implementation_end;
specification_end;
				specification 'Energy2PortFixedAdiab'
 description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath><TimeStamp>2015-11-3 00:03:12</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations>parameters
	real m0 = 0.0181570319247945;
	real E0 = 3881.129507914;
	real mb0 = 0;
	real V0 = 0.01;
	real p0 = 156321.7046063;
	real T0 = 300;
	real F0 = 0;</GlobalRelations></Attributes></Information>';
 type Submodel
  ports
   power in pTFIn [3,1];
   signal out mCyl;
   power out pTFOut [3,1];
 end;
 icon bg bottom shadow 11776947
  figures
   rectangle 616 300 688 324 color 0 fill 12632256;
   rectangle 616 268 688 292 color 0 fill 12632256;
   rectangle 624 276 680 316 color 0 fill 55295;
   text 'CV' 651.5 297 color 0 16;
   line 676 296 700 296 color 0 fill 12632256 width 4 end open;
   line 612 296 636 296 color 0 fill 12632256 width 4 end open;
  terminals
   pTFIn 608 296 fixed;
   mCyl 647 300.8 fixed;
   pTFOut 704 296 fixed;
 end;
 implementation bg
  submodels
   plug pTFIn 208 392.1;
   plug mCyl 509 536;
   plug pTFOut 493 392.1;
   PowerDemux 250.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 249.5 368 249.5 416 color 0 width 2;
   rectangle 243.3 376 253.3 408 color -1;
   text '3' 254.5 402 color 8421504 8;
  terminals
   output1 249.5 376 fixed;
   output2 249.5 392 fixed;
   output3 249.5 408 fixed;
   input 239.5 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 458.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 457.5 368 457.5 416 color 0 width 2;
   rectangle 451.3 368 461.3 400 color -1;
   text '3' 462.5 394 color 8421504 8;
  terminals
   input1 457.5 376 fixed;
   input2 457.5 392 fixed;
   input3 457.5 408 fixed;
   output 467.5 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Fixed'
				specification 'Fixed'
 description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 color 0 51 bold;
  terminals
   pp 344.8 520.7 fixed;
   pF 359.2 520.7 fixed;
   pT 352 520.7 fixed;
   mCyl 359.2 530.4 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
   ppV 712 584 fixed;
   vCyl 736 584 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   pTFIn => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
 implementation_end;
specification_end;
				specification 'Energy2PortFixedVol'
description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>ControlVolumes\ControlVolumeEnergy3Port.emx</LibraryPath>
  <TimeStamp>2015-10-19 16:55:50</TimeStamp>
</Description>
</Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   signal out mCyl;
   power out pHT;
   power out pTFOut [3,1];
 end;
 icon bg bottom shadow 11776947
  figures
   spline 729.2 780 737.2 772 745.2 780 753.2 772;
   text 'dQ' 741.2 792 16;
   spline 729.2 788 737.2 780 745.2 788 753.2 780;
   spline 729.2 772 737.2 764 745.2 772 753.2 764;
   rectangle 654.7 748 726.7 804 fill 12632256;
   rectangle 662.7 756 718.7 796 fill 55295;
   text 'CV' 691.2 777 16;
  terminals
   pTFIn1 654.7 740 fixed;
   mCyl 686.7 812 fixed;
   pHT 742.7 804 fixed;
   pTFOut 726.7 740 fixed;
 end;
 implementation bg
  submodels
   plug pTFIn1 208 392.1;
   plug mCyl 509 535.9;
   plug pHT 472.1 288;
   plug pTFOut 493 392.1;
   PowerDemux 248 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 248 368 248 416 width 2;
   rectangle 243 376 251 408 color -1;
   text '3' 252 402 color 8421504 8;
  terminals
   output1 248 376 fixed;
   output2 248 392 fixed;
   output3 248 408 fixed;
   input 240 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 456 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 456 368 456 416 width 2;
   rectangle 451 368 459 400 color -1;
   text '3' 460 394 color 8421504 8;
  terminals
   input1 456 376 fixed;
   input2 456 392 fixed;
   input3 456 408 fixed;
   output 464 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Fixed'
				specification 'Fixed'
 description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 51 bold;
  terminals
   pp 328 504 fixed;
   pF 376 504 fixed;
   pT 352 504 fixed;
   mCyl 376 536 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
   ppV 712 584 fixed;
   vCyl 736 584 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   pTFIn1 => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   ZeroJunction1\p => pHT;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
 implementation_end;
specification_end;
				specification 'Energy3PortCyl'
description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath>
  <TimeStamp>2015-10-23 00:13:56</TimeStamp>
</Description>
</Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   pneumatic out ppV;
   signal out vCyl;
   signal out mCyl;
   power out pHT;
   power out pTFOut [3,1];
   power in pTFIn2 [3,1];
  restrictions
   causality fixed out pTFIn2;
 end;
 icon bg bottom shadow 11776947
  figures
   line 653.5 801 653.5 721 725.5 721 725.5 801 693.5 801 693.5 793 717.5 793 717.5 729 661.5 729 661.5 793 685.5 793 685.5 801 653.5 801 fill 15132390;
   line 685.5 777 661.5 777 661.5 769 717.5 769 717.5 777 693.5 777 693.5 817 685.5 817 685.5 777 fill 6710886;
   line 661.5 729 717.5 729 717.5 769 661.5 769 661.5 729 fill 55295;
   text 'CV' 693.5 745 16;
   text 'dW' 685.5 825 16;
   spline 730.5 754 738.5 746 746.5 754 754.5 746;
   text 'dQ' 741.5 769 16;
   spline 730.5 761 738.5 753 746.5 761 754.5 753;
   spline 730.5 747 738.5 739 746.5 747 754.5 739;
  terminals
   pTFIn1 653.5 713 fixed;
   ppV 685.5 833 fixed;
   vCyl 733.5 825 fixed;
   mCyl 733.5 809 fixed;
   pHT 741.5 785 fixed;
   pTFOut 725.5 713 fixed;
   pTFIn2 693.5 713 fixed;
 end;
 implementation bg
  submodels
   MSf 232 496
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
    type MSf
     ports
      power in p;
      signal in flow;
     restrictions
      causality fixed in p;
    end;
    icon bg bottom
     figures
      text 'MSf' 232 496 18 bold;
    end;
    implementation eq
variables
	real effort;
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
   plug ppV 352 656;
   plug vCyl 510.8 552;
   plug mCyl 509 535.9;
   plug pHT 472 288;
   plug pTFOut 493 392;
   plug pTFIn2 352.1 240;
   plug pTFIn1 208 392.1;
   PowerDemux 248 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 248 368 248 416 width 2;
   rectangle 243 376 251 408 color -1;
   text '3' 252 402 color 8421504 8;
  terminals
   output1 248 376 fixed;
   output2 248 392 fixed;
   output3 248 408 fixed;
   input 240 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerDemux1 352 304.5
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 320 304 384 304 width 2;
   rectangle 328 299 360 307 color -1;
   text '3' 354 308 color 8421504 8;
  terminals
   output1 328 304 fixed;
   output2 352 304 fixed;
   output3 376 304 fixed;
   input 352 296 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 456 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 456 368 456 416 width 2;
   rectangle 451 368 459 400 color -1;
   text '3' 460 394 color 8421504 8;
  terminals
   input1 456 376 fixed;
   input2 456 392 fixed;
   input3 456 408 fixed;
   output 464 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   PowerSensor1 352 608
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:29:42</TimeStamp>
</Description>
</Information>';
    knot PowerSensor
     ports
      pneumatic knot in p1 [1];
      pneumatic knot out p2 [1];
      signal knot out P [1] {W} ;
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 345.1 600.8 358.9 615.2 fill 16777215;
      text 'P' 352.5 607.8;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	P = p1.e .* p1.f;
implementation_end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Varying'
				specification 'Fixed'
description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
 description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 51 bold;
  terminals
   pp 328 504 fixed;
   pF 376 504 fixed;
   pT 352 504 fixed;
   mCyl 376 536 fixed;
   ppV 352 552 fixed;
   vCyl 376 552 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux1\input <= pTFIn2;
   PowerDemux1\output1 => ZeroJunction3\p;
   PowerDemux1\output2 => ZeroJunction1\p;
   PowerDemux1\output3 => ZeroJunction2\p;
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   PowerSensor1\P -> MSf\flow 232 608;
   PowerSensor1\p2 => ppV;
   pTFIn1 => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   Thdyn_Cont_Vol_Cyl\ppV => PowerSensor1\p1;
   Thdyn_Cont_Vol_Cyl\vCyl -> vCyl;
   ZeroJunction1\p => MSf\p;
   ZeroJunction1\p => pHT;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
  figures
   text 'Global Parameters
     real global slag, Diam, alam, Veps;
     real global pfi0[ncyl];
     real global nstroke;
     real global fs;
     string global dll_ICE;	      // dll filename for subroutines
     string global dll_fcn_ThDP;   // subroutines names in the dll file
     string global dll_fcn_th_MEV; // subroutines names in the dll file

     real global p0[nCyl]; 
     real global T0[nCyl];
     real global F0[nCyl];' 208 120 16;
 implementation_end;
specification_end;
				specification 'Energy3PortFixedAdiab'
description '<Information>
 <Description>
    <Version>4.6</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath>
  <TimeStamp>2016-3-30 23:40:37</TimeStamp>
<KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
 <Attributes>
  <GlobalRelations>parameters
	real m0 = 4.08190848280315;
	real E0 = 884402.21053548;
	real mb0 = 0;
	real V0 = 1.15;
	real p0 = 310000;
	real T0 = 304.45;
	real F0 = 0;</GlobalRelations>
 </Attributes>
</Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   signal out mCyl;
   power out pTFOut [3,1];
   power out pTFOut2 [3,1];
 end;
 icon bg bottom shadow 11776947
  figures
   line 1028 289 1056 305 color 0 fill 12632256 width 4 end open;
   line 1027 261 1055 245 color 0 fill 12632256 width 4 end open;
   line 946 277 970 277 color 0 fill 12632256 width 4 end open;
   line 975 296 1017 296 1036.8 308.5 1039.5 304.3 1017 288 975 288 975 296 975 296 color 0 fill 12632256;
   line 1018 276 1045.5 259 1049 265 1031.3 276 1050.8 288 1047.3 293.8 1018 276 1018 276 color 0 fill 12632256;
   line 974.6 288 974.6 264 1014.6 264 1038.6 248 1046.3 259.3 1018.3 276 1047.3 293.3 1038.6 304 1014.6 288 974.6 288 974.6 288 color 0 fill 55295;
   text 'CV' 1008 277 color 0 16;
   line 974.5 256 1016.5 256 1035.7 242.7 1039.5 248 1016.5 264 974.5 264 974.5 256 974.5 256 color 0 fill 12632256;
  terminals
   pTFIn1 944 280 fixed;
   mCyl 992 280 fixed;
   pTFOut 1064 240 fixed;
   pTFOut2 1065 307.3 fixed;
 end;
 implementation bg
  submodels
   plug pTFIn1 208 392.1;
   plug mCyl 509 536;
   plug pTFOut 493 392.1;
   plug pTFOut2 352 240;
   PowerDemux 250.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 249.5 368 249.5 416 color 0 width 2;
   rectangle 243.3 376 253.3 408 color -1;
   text '3' 254.5 402 color 8421504 8;
  terminals
   output1 249.5 376 fixed;
   output2 249.5 392 fixed;
   output3 249.5 408 fixed;
   input 239.5 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 458.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 457.5 368 457.5 416 color 0 width 2;
   rectangle 451.3 368 461.3 400 color -1;
   text '3' 462.5 394 color 8421504 8;
  terminals
   input1 457.5 376 fixed;
   input2 457.5 392 fixed;
   input3 457.5 408 fixed;
   output 467.5 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   PowerMux1 352 300.5
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 color 0 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 336 304 368 304 color 0 width 2;
   rectangle 336 300 368 308 color -1;
   text '3' 362 299 color 8421504 8;
  terminals
   input1 344 304 fixed;
   input2 352 304 fixed;
   input3 360 304 fixed;
   output 352 304 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Fixed'
				specification 'Fixed'
 description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 color 0 51 bold;
  terminals
   pp 344.8 520.7 fixed;
   pF 359.2 520.7 fixed;
   pT 352 520.7 fixed;
   mCyl 359.2 530.4 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
   ppV 712 584 fixed;
   vCyl 736 584 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   PowerMux1\output => pTFOut2;
   pTFIn1 => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => PowerMux1\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => PowerMux1\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => PowerMux1\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
 implementation_end;
specification_end;
			end;
   Constant1 232 104
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Sources\Constant.emx</LibraryPath>
  <TimeStamp>2007-10-19 14:48:44</TimeStamp>
</Description>';
    type Constant
     ports
      signal out output;
    end;
    icon bg bottom
     figures
      rectangle 216.1 88 247.9 120 color 0 fill 15132390;
      line 220.9 99.6 242.9 99.6 color 16711680 width 2;
      line 218.2 110.7 243.9 110.7 color 0;
      line 220.5 94.7 220.5 113 color 0;
    end;
    implementation eq
parameters
	real C = 1.0;		// output value
equations
	output = C;
     implementation_end;
   Constant2 448 400
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Sources\Constant.emx</LibraryPath>
  <TimeStamp>2007-10-19 14:48:44</TimeStamp>
</Description>';
    type Constant
     ports
      signal out output;
    end;
    icon bg bottom
     figures
      rectangle 432.1 384 463.9 416 color 0 fill 15132390;
      line 436.9 395.6 458.9 395.6 color 16711680 width 2;
      line 434.2 406.7 459.9 406.7 color 0;
      line 436.5 390.7 436.5 409 color 0;
    end;
    implementation eq
parameters
	integer global caseNo;
	real global tCWRef[1];		// output value
equations
	output = tCWRef[caseNo];
     implementation_end;
   Controller 900.1 -15.1
    description '<Information><Description><Version>4.6</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
    type Submodel
     ports
      signal in omegaE;
      signal in pTAR [2,1];
      signal in PowShaft;
      signal in dmf;
      signal out output [9,1];
      signal in dQCyl;
      signal in dhExh;
      signal in fricPow;
      signal in dhAir;
      signal out tWall;
    end;
    implementation bg
     submodels
      BSFCRef 464 352
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Sources\Constant.emx</LibraryPath><TimeStamp>2007-10-19 14:48:44</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type Constant
        ports
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 448.1 336 479.9 368 color 0 fill 15132390;
         line 452.9 347.6 474.9 347.6 color 16711680 width 2;
         line 450.2 358.7 475.9 358.7 color 0;
         line 452.5 342.7 452.5 361 color 0;
       end;
       implementation eq
parameters
	integer global caseNo;
	real global BSFCRef[20];
equations
	output = BSFCRef[caseNo];
     implementation_end;
      Constant 816 352
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Sources\Constant.emx</LibraryPath>
  <TimeStamp>2007-10-19 14:48:44</TimeStamp>
</Description>';
       type Constant
        ports
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 800.1 336 831.9 368 color 0 fill 15132390;
         line 804.9 347.6 826.9 347.6 color 16711680 width 2;
         line 802.2 358.7 827.9 358.7 color 0;
         line 804.5 342.7 804.5 361 color 0;
       end;
       implementation eq
parameters
	real C = 550;		// output value
equations
	output = C;
     implementation_end;
      Constant1 696 -120
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Sources\Constant.emx</LibraryPath>
  <TimeStamp>2007-10-19 14:48:44</TimeStamp>
</Description>';
       type Constant
        ports
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 680.1 -136 711.9 -104 color 0 fill 15132390;
         line 707.1 -124.4 685.1 -124.4 color 16711680 width 2;
         line 709.8 -113.3 684.1 -113.3 color 0;
         line 707.5 -129.3 707.5 -111 color 0;
       end;
       implementation eq
parameters
	real C = 1.1;		// output value
equations
	output = C;
     implementation_end;
      Constant3 816 -120
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Sources\Constant.emx</LibraryPath>
  <TimeStamp>2007-10-19 14:48:44</TimeStamp>
</Description>';
       type Constant
        ports
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 800.1 -136 831.9 -104 color 0 fill 15132390;
         line 827.1 -124.4 805.1 -124.4 color 16711680 width 2;
         line 829.8 -113.3 804.1 -113.3 color 0;
         line 827.5 -129.3 827.5 -111 color 0;
       end;
       implementation eq
parameters
	real C = 1;		// output value
equations
	output = C;
     implementation_end;
      Gain 776 136
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:15:12</TimeStamp>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 760.1 120 791.9 152 color 0 fill 15132390;
         text 'K' 776 136 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global hn;		// gain
equations
	output = hn * input;
    implementation_end;
      Gain1 712 352
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:15:12</TimeStamp>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 696.1 336 727.9 368 color 0 fill 15132390;
         text 'K' 712 352 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real C = 700;		// gain
equations
	output = C * input;
    implementation_end;
      Governor 522.1 -64
						specifications active 'SmokeLimit'
							specification 'default'
description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type Submodel
  ports
   signal in RPMRef;
   signal out uGov;
   signal in omegaE;
 end;
 icon bg bottom shadow 11776947
  figures
   rectangle 451.3 169 540.7 199 fill 15132390;
   text 'name' 496 184 16;
 end;
 implementation bg
  submodels
   Governor 344 224.1
    description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations>parameters
	real tau = 5;	//Time constant for RPM Command
	real BW = 5; //cutoff frequency for LP fileter for engine speed
	real K = 1.5;			// Proportional gain
	real Td = 1;		// Derivative time constant: Td &gt; 0
	real N = 0;			// Derivative gain limitation.
	real Ti = 1;			// Integral time constant: Ti &gt; 0
	real Ta = 0.5;		// Tracking time constant.t: Ta &gt; 0
	real minimum = 0.1;	// Minimum controller output
	real maximum = 1.1;	// Maximum controller output
	real output_initial = 0.6;	// The controller output at start-up
</GlobalRelations></Attributes></Information>';
    type Submodel
     ports
      signal in omegaE;
      signal in RPMRef;
      signal out uGov;
      signal in uGovSat;
    end;
    implementation bg
     submodels
      Controller 616 104
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Control\PID Control\Continuous\Controller-PID_p_sp_aw_u0.emx</LibraryPath><TimeStamp>2007-9-27 14:5:1</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'HybridCont-PID_p_sp_aw_u0'
        ports
         signal in SP;
         signal in MV;
         signal out output;
         signal in outputSat;
       end;
       icon bg bottom
        figures
         rectangle 584 72 648 136 fill 15132390;
         text 'PID' 630.4 103 color 16711680 18 bold;
         text 'SP' 596.8 86.9 color 16711680 14;
         text 'MV' 598.9 117.9 color 16711680 14;
         group
          group
           line 618.1 133.9 621.3 129 624.6 133.9 618.1 133.9 fill 0;
           line 611.7 129 631 129;
          end;
          text 'sp' 622.7 119.7 14;
         end;
         text 'p' 640.5 125.3 14;
         group
          text 'u' 610.6 81.5 14;
          text '0' 616.1 87.1;
         end;
         text 'aw' 629.1 81.5 14;
         group
          line 629.8 93.8 633.9 93.8 641.9 77.2;
          line 641.7 77.5 645.9 77.5;
         end;
        terminals
         SP 584 88 fixed;
         MV 584 120 fixed;
         output 648 104 fixed;
       end;
       implementation eq
// Created by C. Kleijn, 22 Sep 1999
parameters
	real global K;			// Proportional gain
	real global Td;		// Derivative time constant: Td > 0
	real global N;			// Derivative gain limitation.
	real global Ti;			// Integral time constant: Ti > 0
	real b = 1.0 {};			// Proportional setpoint weighting parameter: 0 <= b <= 1
	real c = 1.0 {};			// Derivative setpoint weighting parameter: 0 <= c <= 1
	real global Ta;		// Tracking time constant.t: Ta > 0
	real global minimum;	// Minimum controller output
	real global maximum;	// Maximum controller output
	real global output_initial;	// The controller output at start-up
variables
	real error,PB_high,PB_low;
	real hidden uP,uI,uD,uDstate,ideal_output,uI_initial,uD_initial;
equations
	error = SP - MV;
	uP = K * ( b * SP - MV );
	if time == 0 then 
			uI_initial = output_initial - uP;
		else 
			uI_initial = uI_initial;
		end;
	if time == 0 then 
			uD_initial = K * (c * SP - MV ) * N;
		else
			uD_initial = uD_initial;
		end;
	uI = int ( K * error / Ti  -  ( ideal_output - min([output; outputSat]) ) / Ta) + uI_initial;
	uDstate = int ( uD * N / Td ) + uD_initial;
	uD = K * (c * SP - MV ) * N - uDstate;	  
	ideal_output = uP + uI + uD;
	output = limit (ideal_output, minimum, maximum);
	PB_low = b * SP + (uI + uD - maximum)/K;
	PB_high = b * SP + (uI + uD - minimum)/K;                                                                                                                implementation_end;
      Gain1 448 88
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:15:12</TimeStamp>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 432.1 72 463.9 104 fill 15132390;
         text 'K' 448 88 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global RPMMax;		// gain
equations
	output = input/RPMMax;
    implementation_end;
      Gain2 448 144
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:15:12</TimeStamp>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 432.1 128 463.9 160 fill 15132390;
         text 'K' 448 144 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global RPMMax;		// gain
equations
	output = input /(RPMMax/30*pi);
    implementation_end;
      LowPassFilter 328 144
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Filters\LowPassFilter-BW4.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:23:6</TimeStamp>
</Description>';
       type 'LowPassFilter-BW4'
        ports
         signal in u;
         signal out y;
       end;
       icon bg bottom
        figures
         rectangle 280 128 376 160 fill 15132390;
         text 'Low-Pass Filter' 328.5 136.7 color 16711680 14;
         text 'BW 4    (rad/s) ' 330.1 150.4 color 16711680 14;
         text 'th' 324.3 146.3 color 16711680;
       end;
       implementation eq
// Created by C. Kleijn, 27 September 1999
parameters
    real global BW;	// Bandwidth (Hz)
variables
    real hidden s1y,s2y,s3y,s4y,BWrad;
equations
	BWrad = twopi*BW;
	s4y = BWrad^4.0*(u - y) - BWrad^3.0*2.6131*s1y - BWrad^2.0*3.4142*s2y - BWrad*2.6131*s3y;
  	s3y = int(s4y,0);
	s2y = int(s3y,0);
	s1y = int(s2y,0);
   	y = int(s1y,0);
        implementation_end;
      plug RPMRef 232.2 88.1;
      plug uGov 752.1 104;
      plug uGovSat 216.1 240;
      plug omegaE 168.1 143.9;
      RPMCommanTF 320 88
						specifications active 'FO'
							specification 'FO'
 description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath><TimeStamp>2008-1-24 10:10:10</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 296 71.4 344 104.6 fill 15132390;
   text 'k' 321.1 79.1 color 16711680 14;
   line 301.7 89 339.4 89 color 16711680 fill 15132390;
   text 't' 314.7 95.7 color 16711680 'SymbolProp BT' 15;
   text 's    + 1' 320 95.7 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;		// gain []
    real global tau;		// time constant [s / rad]
variables
    real rate, state;
equations
    rate = (k * input - state) / tau;
    state = int (rate);
    output = state;                    implementation_end;
specification_end;
							specification 'FOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96 216 128 fill 15132390;
   group
    text 't' 176.5 118.8 color 16711680 'SymbolProp BT' 15;
    text 's    + 1' 184 118.8 color 16711680 14;
   end;
   line 155.5 114 210.9 114 color 16711680 fill 15132390;
   group
    text 'L' 187.2 108.2 color 16711680 11;
    text 't' 181.3 105 color 16711680 'SymbolProp BT' 15;
   end;
   text 'k' 160.5 105.5 color 16711680 14;
   text '(s    + 1)' 188.8 105 color 16711680 14;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lead time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tau );
	output = state + ( tauL/tau ) * rate;  implementation_end;
specification_end;
							specification 'FOLA'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96.5 216 128.5 fill 15132390;
   line 156.6 113.5 211.9 113.5 color 16711680 fill 15132390;
   group
    text 'k' 160.5 105 color 16711680 14;
    text '(s    + 1)' 187.7 104.4 color 16711680 14;
    text 't' 180.3 104.4 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text 's    + 1' 182.4 119.4 color 16711680 14;
    text 't' 173.9 119.4 color 16711680 'SymbolProp BT' 15;
    text 'L' 179.7 122.6 color 16711680 11;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lag time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tauL );
	output = state + ( tau/tauL ) * rate;  implementation_end;
specification_end;
							specification 'SOI'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 160 97 208 128 fill 15132390;
   text 'k' 187.2 104 color 16711680 14;
   line 163.2 112.5 202.7 112.5 color 16711680 fill 15132390;
   group
    text 's(s  + 1)' 184 118.4 color 16711680 14;
    text 't' 181.9 118.4 color 16711680 'SymbolProp BT' 15;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
 	real tau = 1;		// time constant [s / rad]
variables
    real hidden rate1, state1;
    real rate2,state2;
equations
	rate1 = ( k * input );
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau;
	state2 = int(rate2);
	output = state2;                        implementation_end;
specification_end;
							specification 'SOO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.6 232 128.6 fill 15132390;
   group
    text 't' 198.4 117.9 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.1 color 16711680 11;
   end;
   group
    text 't' 153.6 117.9 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.1 color 16711680 11;
   end;
   line 140.8 112.1 226.1 112.1 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 117.9 color 16711680 14;
   text '(s    + 1)' 205.9 117.9 color 16711680 14;
   text 'k' 183.5 103.3 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s / rad]
	real tau2 = 1;		// time constant 2 [s / rad]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state1) / tau1;
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau2;
	state2 = int(rate2);
	output = state2;                         implementation_end;
specification_end;
							specification 'SOOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 97.3 232 129.3 fill 15132390;
   group
    text 't' 198.4 118.1 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.3 color 16711680 11;
   end;
   group
    text 't' 153.6 118.1 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.2 color 16711680 11;
   end;
   text 'k' 159.5 103.7 color 16711680 14;
   line 140.8 112.2 226.1 112.2 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 118.1 color 16711680 14;
   text '(s    + 1)' 205.9 118.1 color 16711680 14;
   group
    text '(s    + 1)' 187.7 103.7 color 16711680 14;
    text 't' 180.3 103.7 color 16711680 'SymbolProp BT' 15;
    text 'L' 185.1 106.9 color 16711680 11;
   end;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s ]
	real tau2 = 1;		// time constant 2 [s ]
	real tauL = 2;		// lead time [s]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = state2/k - input;
	state1 = int (rate1);
	rate2 = k/(tau1*tau2) * ( tauL*input - state1 - state2*(tau1+tau2)/k );
	state2 = int(rate2);
	output = state2;             implementation_end;
specification_end;
							specification 'SOU'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2011-3-23 10:32:13</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 200 511.7 296 543.7 fill 15132390;
   line 204.8 527.2 290.1 527.2 color 16711680 fill 15132390;
   text 's  + 2     s  + 1' 254.3 535.7 color 16711680 14;
   text 'z' 251.4 536.8 color 16711680 'SymbolProp BT' 11 symbol;
   text '2' 216.4 532 color 16711680 11;
   text 't' 210 535.7 color 16711680 'SymbolProp BT' 15;
   text 't' 258.5 535.7 color 16711680 'SymbolProp BT' 15;
   text 'k' 248.4 519.2 color 16711680 14;
   text '2' 228.4 532 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1;			// gain []
    	real tau = 1;		// time constant [s ]
	real zeta = 0.7;		// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2) / tau;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)/tau;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
							specification 'SOUO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.1 232 128.1 fill 15132390;
   line 139.2 112.4 227.2 112.4 color 16711680 fill 15132390;
   text 's  + 2      s  + ' 176 120.1 color 16711680 14;
   text 'z' 172.3 121.2 color 16711680 'SymbolProp BT' 11 symbol;
   text 'w' 181.3 120.1 color 16711680 'SymbolProp BT' 15;
   text 'k' 176.5 103.6 color 16711680 14;
   group
    text '2' 194.7 101.2 color 16711680 11;
    text 'w' 186.7 103.9 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text '2' 225.6 116.7 color 16711680 11;
    text 'w' 217.6 119.4 color 16711680 'SymbolProp BT' 15;
   end;
   text '2' 149.3 116.2 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1.0;			// gain []
	real omega = 1.0;		// frequency [rad/s]
	real zeta = 0.7;			// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2)*omega;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)*omega;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
						end;
      Splitter1 400 144
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 396.8 140.8 403.2 147.2 color -1 fill 0;
         ellipse 395.7 139.7 404.3 148.3 color -1;
        terminals
         input 400 144 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter2 520 144
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 516.8 140.8 523.2 147.2 color -1 fill 0;
         ellipse 515.7 139.7 524.3 148.3 color -1;
        terminals
         input 520 144 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
     end;
     connections
      Controller\output -> uGov;
      Gain1\output -> Controller\SP;
      Gain2\output -> Splitter2\input 508.4 144;
      LowPassFilter\y -> Splitter1\input;
      omegaE -> LowPassFilter\u;
      RPMCommanTF\output -> Gain1\input;
      RPMRef -> RPMCommanTF\input;
      Splitter1\output -> Gain2\input;
      Splitter2\output -> Controller\MV 552 144;
      uGovSat -> Controller\outputSat 504 240;
     end;
    implementation_end;
   plug RPMRef 216 224;
   plug uGov 672 296;
   plug omegaE 216.1 271.9;
  end;
  connections
   Governor\uGov -> uGov 344 296;
   omegaE -> Governor\omegaE;
   RPMRef -> Governor\RPMRef;
  end;
 implementation_end;
specification_end;
							specification 'SmokeLimit'
 description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
    <LibraryPath>Controller\Governor.emx</LibraryPath>
  <TimeStamp>2015-11-16 21:10:54</TimeStamp>
</Description>
</Information>';
 type Submodel
  ports
   signal in RPMRef;
   signal out uGov;
   signal in omegaE;
   signal in pTAR [2,1];
   signal out omegaELP;
 end;
 icon bg bottom shadow 11776947
  figures
   rectangle 477.4 -79 566.8 -49 color 0 fill 15132390;
   text 'name' 522.1 -64 color 0 16;
 end;
 implementation bg
  submodels
   Constant 440 104
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Sources\Constant.emx</LibraryPath>
  <TimeStamp>2007-10-19 14:48:44</TimeStamp>
</Description>';
    type Constant
     ports
      signal out output;
    end;
    icon bg bottom
     figures
      rectangle 424.1 88 455.9 120 color 0 fill 15132390;
      line 428.9 99.6 450.9 99.6 color 16711680 width 2;
      line 426.2 110.7 451.9 110.7 color 0;
      line 428.5 94.7 428.5 113 color 0;
    end;
    implementation eq
parameters
	real C = 1;		// output value
equations
	output = C;
     implementation_end;
   Demux 307.9 144
			specifications active 'outputs_2'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [2,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input;implementation_end;
specification_end;
				specification 'outputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output;
   signal in input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output = input;implementation_end;
specification_end;
				specification 'outputs_2'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [2,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 305.3 128 305.3 160 color 0 width 2;
   rectangle 300.3 128 310.3 160 color -1;
   text '2' 311.5 155 color 8421504 8;
  terminals
   output1 305.3 136 fixed;
   input 305.3 144 fixed;
   output2 305.3 152 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input;implementation_end;
specification_end;
				specification 'outputs_3'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal in input [3,1];
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '3' 133 82 color 8421504 8;
  terminals
   output1 128 64 fixed;
   output2 128 72 fixed;
   output3 128 80 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3] = input;implementation_end;
specification_end;
				specification 'outputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal in input [4,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4] = input;implementation_end;
specification_end;
				specification 'outputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal in input [5,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5] = input;implementation_end;
specification_end;
				specification 'outputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal in input [6,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6] = input;implementation_end;
specification_end;
				specification 'outputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal in input [7,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7] = input;implementation_end;
specification_end;
				specification 'outputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal out output8;
   signal in input [8,1];
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7; output8] = input;implementation_end;
specification_end;
				specification 'outputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal out output8;
   signal out output9;
   signal in input [9,1];
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7; output8; output9] = input;implementation_end;
specification_end;
			end;
   Governor 344 224.1
    description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations>parameters
	real tau = 5;	//Time constant for RPM Command
	real BW = 10; //cutoff frequency for LP fileter for engine speed
	real K = 1.5;			// Proportional gain
	real Td = 1;		// Derivative time constant: Td &gt; 0
	real N = 0;			// Derivative gain limitation.
	real Ti = 1;			// Integral time constant: Ti &gt; 0
	real Ta = 0.5;		// Tracking time constant.t: Ta &gt; 0
	real minimum = 0.1;	// Minimum controller output
	real maximum = 1.1;	// Maximum controller output
	real output_initial = 0.6;	// The controller output at start-up
</GlobalRelations></Attributes></Information>';
    type Submodel
     ports
      signal in omegaE;
      signal in RPMRef;
      signal out uGov;
      signal in uGovSat;
      signal out omegaELP;
    end;
    implementation bg
     submodels
      Controller 616 104
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Control\PID Control\Continuous\Controller-PID_p_sp_aw_u0.emx</LibraryPath><TimeStamp>2007-9-27 14:5:1</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'HybridCont-PID_p_sp_aw_u0'
        ports
         signal in SP;
         signal in MV;
         signal out output;
         signal in outputSat;
       end;
       icon bg bottom
        figures
         rectangle 584 72 648 136 color 0 fill 15132390;
         text 'PID' 630.4 103 color 16711680 18 bold;
         text 'SP' 596.8 86.9 color 16711680 14;
         text 'MV' 598.9 117.9 color 16711680 14;
         group
          group
           line 618.1 133.9 621.3 129 624.6 133.9 618.1 133.9 color 0 fill 0;
           line 611.7 129 631 129 color 0;
          end;
          text 'sp' 622.7 119.7 color 0 14;
         end;
         text 'p' 640.5 125.3 color 0 14;
         group
          text 'u' 610.6 81.5 color 0 14;
          text '0' 616.1 87.1 color 0;
         end;
         text 'aw' 629.1 81.5 color 0 14;
         group
          line 629.8 93.8 633.9 93.8 641.9 77.2 color 0;
          line 641.7 77.5 645.9 77.5 color 0;
         end;
        terminals
         SP 584 88 fixed;
         MV 584 120 fixed;
         output 648 104 fixed;
       end;
       implementation eq
// Created by C. Kleijn, 22 Sep 1999
parameters
	real global K;			// Proportional gain
	real global Td;		// Derivative time constant: Td > 0
	real global N;			// Derivative gain limitation.
	real global Ti;			// Integral time constant: Ti > 0
	real b = 1.0 {};			// Proportional setpoint weighting parameter: 0 <= b <= 1
	real c = 1.0 {};			// Derivative setpoint weighting parameter: 0 <= c <= 1
	real global Ta;		// Tracking time constant.t: Ta > 0
	real global minimum;	// Minimum controller output
	real global maximum;	// Maximum controller output
	real global output_initial;	// The controller output at start-up
variables
	real error,PB_high,PB_low;
	real hidden uP,uI,uD,uDstate,ideal_output,uI_initial,uD_initial;
equations
	error = SP - MV;
	uP = K * ( b * SP - MV );
	if time == 0 then 
			uI_initial = output_initial - uP;
		else 
			uI_initial = uI_initial;
		end;
	if time == 0 then 
			uD_initial = K * (c * SP - MV ) * N;
		else
			uD_initial = uD_initial;
		end;
	uI = int ( K * error / Ti  -  ( ideal_output - min([output; outputSat]) ) / Ta) + uI_initial;
	uDstate = int ( uD * N / Td ) + uD_initial;
	uD = K * (c * SP - MV ) * N - uDstate;	  
	ideal_output = uP + uI + uD;
	output = limit (ideal_output, minimum, maximum);
	PB_low = b * SP + (uI + uD - maximum)/K;
	PB_high = b * SP + (uI + uD - minimum)/K;                                                                                                                implementation_end;
      Gain1 448 88
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:15:12</TimeStamp>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 432.1 72 463.9 104 color 0 fill 15132390;
         text 'K' 448 88 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global RPMMax;		// gain
equations
	output = input/RPMMax;
    implementation_end;
      Gain2 448 144
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:15:12</TimeStamp>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 432.1 128 463.9 160 color 0 fill 15132390;
         text 'K' 448 144 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global RPMMax;		// gain
equations
	output = input /(RPMMax/30*pi);
    implementation_end;
      LowPassFilter 328 144
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Filters\LowPassFilter-BW4.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:23:6</TimeStamp>
</Description>';
       type 'LowPassFilter-BW4'
        ports
         signal in u;
         signal out y;
       end;
       icon bg bottom
        figures
         rectangle 280 128 376 160 color 0 fill 15132390;
         text 'Low-Pass Filter' 328.5 136.7 color 16711680 14;
         text 'BW 4    (rad/s) ' 330.1 150.4 color 16711680 14;
         text 'th' 324.3 146.3 color 16711680;
       end;
       implementation eq
// Created by C. Kleijn, 27 September 1999
parameters
    real global BW;	// Bandwidth (Hz)
	real global RPMRef[1];
	integer global caseNo;
variables
    real hidden s1y,s2y,s3y,s4y,BWrad,y0;
initialequations
	y0 = RPMRef[caseNo] * pi /30;
equations
	BWrad = twopi*BW;
	s4y = BWrad^4.0*(u - y) - BWrad^3.0*2.6131*s1y - BWrad^2.0*3.4142*s2y - BWrad*2.6131*s3y;
  	s3y = int(s4y,0);
	s2y = int(s3y,0);
	s1y = int(s2y,0);
   	y = int(s1y,y0);
        implementation_end;
      plug RPMRef 232.2 88.1;
      plug uGov 752 104;
      plug uGovSat 216.2 240;
      plug omegaELP 744 208;
      plug omegaE 168.1 143.9;
      RPMCommanTF 320 88
						specifications active 'FO'
							specification 'FO'
 description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath><TimeStamp>2008-1-24 10:10:10</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 296 71.4 344 104.6 color 0 fill 15132390;
   text 'k' 321.1 79.1 color 16711680 14;
   line 301.7 89 339.4 89 color 16711680 fill 15132390;
   text 't' 314.7 95.7 color 16711680 'SymbolProp BT' 15;
   text 's    + 1' 320 95.7 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;		// gain []
    real global tau;		// time constant [s / rad]
	real global RPMRef[1];
	integer global caseNo;
variables
    real rate, state, state0;
initialequations
	state0 = RPMRef[caseNo];
equations
    rate = (k * input - state) / tau;
    state = int (rate,state0);
    output = state;                    implementation_end;
specification_end;
							specification 'FOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96 216 128 fill 15132390;
   group
    text 't' 176.5 118.8 color 16711680 'SymbolProp BT' 15;
    text 's    + 1' 184 118.8 color 16711680 14;
   end;
   line 155.5 114 210.9 114 color 16711680 fill 15132390;
   group
    text 'L' 187.2 108.2 color 16711680 11;
    text 't' 181.3 105 color 16711680 'SymbolProp BT' 15;
   end;
   text 'k' 160.5 105.5 color 16711680 14;
   text '(s    + 1)' 188.8 105 color 16711680 14;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lead time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tau );
	output = state + ( tauL/tau ) * rate;  implementation_end;
specification_end;
							specification 'FOLA'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96.5 216 128.5 fill 15132390;
   line 156.6 113.5 211.9 113.5 color 16711680 fill 15132390;
   group
    text 'k' 160.5 105 color 16711680 14;
    text '(s    + 1)' 187.7 104.4 color 16711680 14;
    text 't' 180.3 104.4 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text 's    + 1' 182.4 119.4 color 16711680 14;
    text 't' 173.9 119.4 color 16711680 'SymbolProp BT' 15;
    text 'L' 179.7 122.6 color 16711680 11;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lag time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tauL );
	output = state + ( tau/tauL ) * rate;  implementation_end;
specification_end;
							specification 'SOI'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 160 97 208 128 fill 15132390;
   text 'k' 187.2 104 color 16711680 14;
   line 163.2 112.5 202.7 112.5 color 16711680 fill 15132390;
   group
    text 's(s  + 1)' 184 118.4 color 16711680 14;
    text 't' 181.9 118.4 color 16711680 'SymbolProp BT' 15;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
 	real tau = 1;		// time constant [s / rad]
variables
    real hidden rate1, state1;
    real rate2,state2;
equations
	rate1 = ( k * input );
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau;
	state2 = int(rate2);
	output = state2;                        implementation_end;
specification_end;
							specification 'SOO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.6 232 128.6 fill 15132390;
   group
    text 't' 198.4 117.9 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.1 color 16711680 11;
   end;
   group
    text 't' 153.6 117.9 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.1 color 16711680 11;
   end;
   line 140.8 112.1 226.1 112.1 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 117.9 color 16711680 14;
   text '(s    + 1)' 205.9 117.9 color 16711680 14;
   text 'k' 183.5 103.3 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s / rad]
	real tau2 = 1;		// time constant 2 [s / rad]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state1) / tau1;
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau2;
	state2 = int(rate2);
	output = state2;                         implementation_end;
specification_end;
							specification 'SOOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 97.3 232 129.3 fill 15132390;
   group
    text 't' 198.4 118.1 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.3 color 16711680 11;
   end;
   group
    text 't' 153.6 118.1 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.2 color 16711680 11;
   end;
   text 'k' 159.5 103.7 color 16711680 14;
   line 140.8 112.2 226.1 112.2 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 118.1 color 16711680 14;
   text '(s    + 1)' 205.9 118.1 color 16711680 14;
   group
    text '(s    + 1)' 187.7 103.7 color 16711680 14;
    text 't' 180.3 103.7 color 16711680 'SymbolProp BT' 15;
    text 'L' 185.1 106.9 color 16711680 11;
   end;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s ]
	real tau2 = 1;		// time constant 2 [s ]
	real tauL = 2;		// lead time [s]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = state2/k - input;
	state1 = int (rate1);
	rate2 = k/(tau1*tau2) * ( tauL*input - state1 - state2*(tau1+tau2)/k );
	state2 = int(rate2);
	output = state2;             implementation_end;
specification_end;
							specification 'SOU'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2011-3-23 10:32:13</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 200 511.7 296 543.7 fill 15132390;
   line 204.8 527.2 290.1 527.2 color 16711680 fill 15132390;
   text 's  + 2     s  + 1' 254.3 535.7 color 16711680 14;
   text 'z' 251.4 536.8 color 16711680 'SymbolProp BT' 11 symbol;
   text '2' 216.4 532 color 16711680 11;
   text 't' 210 535.7 color 16711680 'SymbolProp BT' 15;
   text 't' 258.5 535.7 color 16711680 'SymbolProp BT' 15;
   text 'k' 248.4 519.2 color 16711680 14;
   text '2' 228.4 532 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1;			// gain []
    	real tau = 1;		// time constant [s ]
	real zeta = 0.7;		// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2) / tau;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)/tau;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
							specification 'SOUO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.1 232 128.1 fill 15132390;
   line 139.2 112.4 227.2 112.4 color 16711680 fill 15132390;
   text 's  + 2      s  + ' 176 120.1 color 16711680 14;
   text 'z' 172.3 121.2 color 16711680 'SymbolProp BT' 11 symbol;
   text 'w' 181.3 120.1 color 16711680 'SymbolProp BT' 15;
   text 'k' 176.5 103.6 color 16711680 14;
   group
    text '2' 194.7 101.2 color 16711680 11;
    text 'w' 186.7 103.9 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text '2' 225.6 116.7 color 16711680 11;
    text 'w' 217.6 119.4 color 16711680 'SymbolProp BT' 15;
   end;
   text '2' 149.3 116.2 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1.0;			// gain []
	real omega = 1.0;		// frequency [rad/s]
	real zeta = 0.7;			// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2)*omega;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)*omega;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
						end;
      Splitter1 400 144
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 396.8 140.8 403.2 147.2 color -1 fill 0;
         ellipse 395.7 139.7 404.3 148.3 color -1;
        terminals
         input 400 144 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter2 520 144
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 516.8 140.8 523.2 147.2 color -1 fill 0;
         ellipse 515.7 139.7 524.3 148.3 color -1;
        terminals
         input 520 144 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
     end;
     connections
      Controller\output -> uGov;
      Gain1\output -> Controller\SP;
      Gain2\output -> Splitter2\input 508.4 144;
      LowPassFilter\y -> Splitter1\input;
      omegaE -> LowPassFilter\u;
      RPMCommanTF\output -> Gain1\input;
      RPMRef -> RPMCommanTF\input;
      Splitter1\output -> Gain2\input;
      Splitter1\output -> omegaELP 456 208;
      Splitter2\output -> Controller\MV 538.1 144 552 144;
      uGovSat -> Controller\outputSat 504 240;
     end;
    implementation_end;
   plug RPMRef 216 224;
   plug uGov 671.8 296;
   plug omegaE 216 272;
   plug pTAR 216 144;
   plug omegaELP 680 264;
   SmokeLimiter 528 224.1
    description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations>parameters
	real BW1 = 0.66; //cutoff frequency of LP filter for pressure
	real BW2 = 0.66; //cutoff frequency of LP filter for temperature
	real FMax = 0.9; //Maximum allowable fuel-air equivalent ratio in the cylinder</GlobalRelations></Attributes></Information>';
    type Submodel
     ports
      signal in uGov;
      signal in pAR;
      signal in TAR;
      signal in volEff;
      signal out uGovSat;
    end;
    implementation bg
     submodels
      LowPassFilter 216 224
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Filters\LowPassFilter-BW4.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:23:6</TimeStamp>
</Description>';
       type 'LowPassFilter-BW4'
        ports
         signal in u;
         signal out y;
       end;
       icon bg bottom
        figures
         rectangle 168 208 264 240 color 0 fill 15132390;
         text 'Low-Pass Filter' 216.5 216.7 color 16711680 14;
         text 'BW 4    (rad/s) ' 218.1 230.4 color 16711680 14;
         text 'th' 212.3 226.3 color 16711680;
       end;
       implementation eq
// Created by C. Kleijn, 27 September 1999
parameters
    real global BW1;	// Bandwidth (Hz)
variables
    real hidden s1y,s2y,s3y,s4y,BWrad;
equations
	BWrad = twopi*BW1;
	s4y = BWrad^4.0*(u - y) - BWrad^3.0*2.6131*s1y - BWrad^2.0*3.4142*s2y - BWrad*2.6131*s3y;
  	s3y = int(s4y,0);
	s2y = int(s3y,0);
	s1y = int(s2y,0);
   	y = int(s1y);
        implementation_end;
      LowPassFilter1 216 280
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Filters\LowPassFilter-BW4.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:23:6</TimeStamp>
</Description>';
       type 'LowPassFilter-BW4'
        ports
         signal in u;
         signal out y;
       end;
       icon bg bottom
        figures
         rectangle 168 264 264 296 color 0 fill 15132390;
         text 'Low-Pass Filter' 216.5 272.7 color 16711680 14;
         text 'BW 4    (rad/s) ' 218.1 286.4 color 16711680 14;
         text 'th' 212.3 282.3 color 16711680;
       end;
       implementation eq
// Created by C. Kleijn, 27 September 1999
parameters
    real global BW2;	// Bandwidth (Hz)
variables
    real hidden s1y,s2y,s3y,s4y,BWrad;
equations
	BWrad = twopi*BW2;
	s4y = BWrad^4.0*(u - y) - BWrad^3.0*2.6131*s1y - BWrad^2.0*3.4142*s2y - BWrad*2.6131*s3y;
  	s3y = int(s4y,0);
	s2y = int(s3y,0);
	s1y = int(s2y,0);
   	y = int(s1y);
        implementation_end;
      plug uGov 32 168;
      plug pAR 32.2 224;
      plug TAR 30 280;
      plug volEff 40 336;
      plug uGovSat 568 288;
      Submodel3 424 288
       description '<Description><Version>4.0</Version>
   <LibraryPath>Template\Submodel-Equation.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
   <TimeStamp>2007-11-1 22:32:1</TimeStamp>
   <AllowLibraryUpdate>False</AllowLibraryUpdate>
</Description>';
       type 'Submodel-Equation'
        ports
         signal in p_AR;
         signal out output;
         signal in T_AR;
         signal in volEff;
         signal in uGov;
       end;
       implementation eq
	/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/
parameters
	real global vDisp, fs;
	real global FMax;
	real global mqf_max;
variables
	real mAirCyc, mfCycMax, uMax;
equations
  // start typing here
	mAirCyc = (p_AR/287/(T_AR+1e-3))*vDisp*volEff;
	mfCycMax = mAirCyc*fs*FMax;
	uMax = mfCycMax/mqf_max;
	output = min([uGov; mfCycMax/mqf_max]);
 implementation_end;
      TransferFunction 216 336
						specifications active 'FO'
							specification 'FO'
 description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 192 319.4 240 352.6 color 0 fill 15132390;
   text 'k' 217.1 327.1 color 16711680 14;
   line 197.7 337 235.4 337 color 16711680 fill 15132390;
   text 't' 210.7 343.7 color 16711680 'SymbolProp BT' 15;
   text 's    + 1' 216 343.7 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;		// gain []
    real tau = 0.01;		// time constant [s / rad]
variables
    real rate, state;
equations
    rate = (k * input - state) / tau;
    state = int (rate);
    output = state;                    implementation_end;
specification_end;
							specification 'FOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96 216 128 fill 15132390;
   group
    text 't' 176.5 118.8 color 16711680 'SymbolProp BT' 15;
    text 's    + 1' 184 118.8 color 16711680 14;
   end;
   line 155.5 114 210.9 114 color 16711680 fill 15132390;
   group
    text 'L' 187.2 108.2 color 16711680 11;
    text 't' 181.3 105 color 16711680 'SymbolProp BT' 15;
   end;
   text 'k' 160.5 105.5 color 16711680 14;
   text '(s    + 1)' 188.8 105 color 16711680 14;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lead time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tau );
	output = state + ( tauL/tau ) * rate;  implementation_end;
specification_end;
							specification 'FOLA'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96.5 216 128.5 fill 15132390;
   line 156.6 113.5 211.9 113.5 color 16711680 fill 15132390;
   group
    text 'k' 160.5 105 color 16711680 14;
    text '(s    + 1)' 187.7 104.4 color 16711680 14;
    text 't' 180.3 104.4 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text 's    + 1' 182.4 119.4 color 16711680 14;
    text 't' 173.9 119.4 color 16711680 'SymbolProp BT' 15;
    text 'L' 179.7 122.6 color 16711680 11;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lag time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tauL );
	output = state + ( tau/tauL ) * rate;  implementation_end;
specification_end;
							specification 'SOI'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 160 97 208 128 fill 15132390;
   text 'k' 187.2 104 color 16711680 14;
   line 163.2 112.5 202.7 112.5 color 16711680 fill 15132390;
   group
    text 's(s  + 1)' 184 118.4 color 16711680 14;
    text 't' 181.9 118.4 color 16711680 'SymbolProp BT' 15;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
 	real tau = 1;		// time constant [s / rad]
variables
    real hidden rate1, state1;
    real rate2,state2;
equations
	rate1 = ( k * input );
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau;
	state2 = int(rate2);
	output = state2;                        implementation_end;
specification_end;
							specification 'SOO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.6 232 128.6 fill 15132390;
   group
    text 't' 198.4 117.9 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.1 color 16711680 11;
   end;
   group
    text 't' 153.6 117.9 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.1 color 16711680 11;
   end;
   line 140.8 112.1 226.1 112.1 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 117.9 color 16711680 14;
   text '(s    + 1)' 205.9 117.9 color 16711680 14;
   text 'k' 183.5 103.3 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s / rad]
	real tau2 = 1;		// time constant 2 [s / rad]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state1) / tau1;
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau2;
	state2 = int(rate2);
	output = state2;                         implementation_end;
specification_end;
							specification 'SOOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 97.3 232 129.3 fill 15132390;
   group
    text 't' 198.4 118.1 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.3 color 16711680 11;
   end;
   group
    text 't' 153.6 118.1 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.2 color 16711680 11;
   end;
   text 'k' 159.5 103.7 color 16711680 14;
   line 140.8 112.2 226.1 112.2 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 118.1 color 16711680 14;
   text '(s    + 1)' 205.9 118.1 color 16711680 14;
   group
    text '(s    + 1)' 187.7 103.7 color 16711680 14;
    text 't' 180.3 103.7 color 16711680 'SymbolProp BT' 15;
    text 'L' 185.1 106.9 color 16711680 11;
   end;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s ]
	real tau2 = 1;		// time constant 2 [s ]
	real tauL = 2;		// lead time [s]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = state2/k - input;
	state1 = int (rate1);
	rate2 = k/(tau1*tau2) * ( tauL*input - state1 - state2*(tau1+tau2)/k );
	state2 = int(rate2);
	output = state2;             implementation_end;
specification_end;
							specification 'SOU'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2011-3-23 10:32:13</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 200 511.7 296 543.7 fill 15132390;
   line 204.8 527.2 290.1 527.2 color 16711680 fill 15132390;
   text 's  + 2     s  + 1' 254.3 535.7 color 16711680 14;
   text 'z' 251.4 536.8 color 16711680 'SymbolProp BT' 11 symbol;
   text '2' 216.4 532 color 16711680 11;
   text 't' 210 535.7 color 16711680 'SymbolProp BT' 15;
   text 't' 258.5 535.7 color 16711680 'SymbolProp BT' 15;
   text 'k' 248.4 519.2 color 16711680 14;
   text '2' 228.4 532 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1;			// gain []
    	real tau = 1;		// time constant [s ]
	real zeta = 0.7;		// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2) / tau;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)/tau;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
							specification 'SOUO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.1 232 128.1 fill 15132390;
   line 139.2 112.4 227.2 112.4 color 16711680 fill 15132390;
   text 's  + 2      s  + ' 176 120.1 color 16711680 14;
   text 'z' 172.3 121.2 color 16711680 'SymbolProp BT' 11 symbol;
   text 'w' 181.3 120.1 color 16711680 'SymbolProp BT' 15;
   text 'k' 176.5 103.6 color 16711680 14;
   group
    text '2' 194.7 101.2 color 16711680 11;
    text 'w' 186.7 103.9 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text '2' 225.6 116.7 color 16711680 11;
    text 'w' 217.6 119.4 color 16711680 'SymbolProp BT' 15;
   end;
   text '2' 149.3 116.2 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1.0;			// gain []
	real omega = 1.0;		// frequency [rad/s]
	real zeta = 0.7;			// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2)*omega;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)*omega;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
						end;
     end;
     connections
      LowPassFilter\y -> Submodel3\p_AR;
      LowPassFilter1\y -> Submodel3\T_AR;
      pAR -> LowPassFilter\u;
      Submodel3\output -> uGovSat;
      TAR -> LowPassFilter1\u;
      TransferFunction\output -> Submodel3\volEff;
      uGov -> Submodel3\uGov 216 168;
      volEff -> TransferFunction\input;
     end;
    implementation_end;
   Splitter1 528 296
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 524.8 292.8 531.2 299.2 color -1 fill 0;
      ellipse 523.7 291.7 532.3 300.3 color -1;
     terminals
      input 528 296 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
  end;
  connections
   Constant\output -> SmokeLimiter\volEff 512 104;
   Demux\output1 -> SmokeLimiter\pAR;
   Demux\output2 -> SmokeLimiter\TAR 'TAR';
   Governor\omegaELP -> omegaELP 400 264;
   Governor\uGov -> SmokeLimiter\uGov;
   omegaE -> Governor\omegaE;
   pTAR -> Demux\input;
   RPMRef -> Governor\RPMRef;
   SmokeLimiter\uGovSat -> Splitter1\input;
   Splitter1\output -> Governor\uGovSat 344 296 'uGovSat';
   Splitter1\output -> uGov;
  end;
 implementation_end;
specification_end;
						end;
      Governor1 616 352
						specifications active 'SmokeLimit'
							specification 'default'
description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type Submodel
  ports
   signal in RPMRef;
   signal out uGov;
   signal in omegaE;
 end;
 icon bg bottom shadow 11776947
  figures
   rectangle 451.3 169 540.7 199 fill 15132390;
   text 'name' 496 184 16;
 end;
 implementation bg
  submodels
   Governor 344 224.1
    description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations>parameters
	real tau = 5;	//Time constant for RPM Command
	real BW = 5; //cutoff frequency for LP fileter for engine speed
	real K = 1.5;			// Proportional gain
	real Td = 1;		// Derivative time constant: Td &gt; 0
	real N = 0;			// Derivative gain limitation.
	real Ti = 1;			// Integral time constant: Ti &gt; 0
	real Ta = 0.5;		// Tracking time constant.t: Ta &gt; 0
	real minimum = 0.1;	// Minimum controller output
	real maximum = 1.1;	// Maximum controller output
	real output_initial = 0.6;	// The controller output at start-up
</GlobalRelations></Attributes></Information>';
    type Submodel
     ports
      signal in omegaE;
      signal in RPMRef;
      signal out uGov;
      signal in uGovSat;
    end;
    implementation bg
     submodels
      Controller 616 104
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Control\PID Control\Continuous\Controller-PID_p_sp_aw_u0.emx</LibraryPath><TimeStamp>2007-9-27 14:5:1</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'HybridCont-PID_p_sp_aw_u0'
        ports
         signal in SP;
         signal in MV;
         signal out output;
         signal in outputSat;
       end;
       icon bg bottom
        figures
         rectangle 584 72 648 136 fill 15132390;
         text 'PID' 630.4 103 color 16711680 18 bold;
         text 'SP' 596.8 86.9 color 16711680 14;
         text 'MV' 598.9 117.9 color 16711680 14;
         group
          group
           line 618.1 133.9 621.3 129 624.6 133.9 618.1 133.9 fill 0;
           line 611.7 129 631 129;
          end;
          text 'sp' 622.7 119.7 14;
         end;
         text 'p' 640.5 125.3 14;
         group
          text 'u' 610.6 81.5 14;
          text '0' 616.1 87.1;
         end;
         text 'aw' 629.1 81.5 14;
         group
          line 629.8 93.8 633.9 93.8 641.9 77.2;
          line 641.7 77.5 645.9 77.5;
         end;
        terminals
         SP 584 88 fixed;
         MV 584 120 fixed;
         output 648 104 fixed;
       end;
       implementation eq
// Created by C. Kleijn, 22 Sep 1999
parameters
	real global K;			// Proportional gain
	real global Td;		// Derivative time constant: Td > 0
	real global N;			// Derivative gain limitation.
	real global Ti;			// Integral time constant: Ti > 0
	real b = 1.0 {};			// Proportional setpoint weighting parameter: 0 <= b <= 1
	real c = 1.0 {};			// Derivative setpoint weighting parameter: 0 <= c <= 1
	real global Ta;		// Tracking time constant.t: Ta > 0
	real global minimum;	// Minimum controller output
	real global maximum;	// Maximum controller output
	real global output_initial;	// The controller output at start-up
variables
	real error,PB_high,PB_low;
	real hidden uP,uI,uD,uDstate,ideal_output,uI_initial,uD_initial;
equations
	error = SP - MV;
	uP = K * ( b * SP - MV );
	if time == 0 then 
			uI_initial = output_initial - uP;
		else 
			uI_initial = uI_initial;
		end;
	if time == 0 then 
			uD_initial = K * (c * SP - MV ) * N;
		else
			uD_initial = uD_initial;
		end;
	uI = int ( K * error / Ti  -  ( ideal_output - min([output; outputSat]) ) / Ta) + uI_initial;
	uDstate = int ( uD * N / Td ) + uD_initial;
	uD = K * (c * SP - MV ) * N - uDstate;	  
	ideal_output = uP + uI + uD;
	output = limit (ideal_output, minimum, maximum);
	PB_low = b * SP + (uI + uD - maximum)/K;
	PB_high = b * SP + (uI + uD - minimum)/K;                                                                                                                implementation_end;
      Gain1 448 88
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:15:12</TimeStamp>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 432.1 72 463.9 104 fill 15132390;
         text 'K' 448 88 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global RPMMax;		// gain
equations
	output = input/RPMMax;
    implementation_end;
      Gain2 448 144
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:15:12</TimeStamp>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 432.1 128 463.9 160 fill 15132390;
         text 'K' 448 144 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global RPMMax;		// gain
equations
	output = input /(RPMMax/30*pi);
    implementation_end;
      LowPassFilter 328 144
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Filters\LowPassFilter-BW4.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:23:6</TimeStamp>
</Description>';
       type 'LowPassFilter-BW4'
        ports
         signal in u;
         signal out y;
       end;
       icon bg bottom
        figures
         rectangle 280 128 376 160 fill 15132390;
         text 'Low-Pass Filter' 328.5 136.7 color 16711680 14;
         text 'BW 4    (rad/s) ' 330.1 150.4 color 16711680 14;
         text 'th' 324.3 146.3 color 16711680;
       end;
       implementation eq
// Created by C. Kleijn, 27 September 1999
parameters
    real global BW;	// Bandwidth (Hz)
variables
    real hidden s1y,s2y,s3y,s4y,BWrad;
equations
	BWrad = twopi*BW;
	s4y = BWrad^4.0*(u - y) - BWrad^3.0*2.6131*s1y - BWrad^2.0*3.4142*s2y - BWrad*2.6131*s3y;
  	s3y = int(s4y,0);
	s2y = int(s3y,0);
	s1y = int(s2y,0);
   	y = int(s1y,0);
        implementation_end;
      plug RPMRef 232.2 88.1;
      plug uGov 752.1 104;
      plug uGovSat 216.1 240;
      plug omegaE 168.1 143.9;
      RPMCommanTF 320 88
						specifications active 'FO'
							specification 'FO'
 description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath><TimeStamp>2008-1-24 10:10:10</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 296 71.4 344 104.6 fill 15132390;
   text 'k' 321.1 79.1 color 16711680 14;
   line 301.7 89 339.4 89 color 16711680 fill 15132390;
   text 't' 314.7 95.7 color 16711680 'SymbolProp BT' 15;
   text 's    + 1' 320 95.7 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;		// gain []
    real global tau;		// time constant [s / rad]
variables
    real rate, state;
equations
    rate = (k * input - state) / tau;
    state = int (rate);
    output = state;                    implementation_end;
specification_end;
							specification 'FOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96 216 128 fill 15132390;
   group
    text 't' 176.5 118.8 color 16711680 'SymbolProp BT' 15;
    text 's    + 1' 184 118.8 color 16711680 14;
   end;
   line 155.5 114 210.9 114 color 16711680 fill 15132390;
   group
    text 'L' 187.2 108.2 color 16711680 11;
    text 't' 181.3 105 color 16711680 'SymbolProp BT' 15;
   end;
   text 'k' 160.5 105.5 color 16711680 14;
   text '(s    + 1)' 188.8 105 color 16711680 14;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lead time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tau );
	output = state + ( tauL/tau ) * rate;  implementation_end;
specification_end;
							specification 'FOLA'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96.5 216 128.5 fill 15132390;
   line 156.6 113.5 211.9 113.5 color 16711680 fill 15132390;
   group
    text 'k' 160.5 105 color 16711680 14;
    text '(s    + 1)' 187.7 104.4 color 16711680 14;
    text 't' 180.3 104.4 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text 's    + 1' 182.4 119.4 color 16711680 14;
    text 't' 173.9 119.4 color 16711680 'SymbolProp BT' 15;
    text 'L' 179.7 122.6 color 16711680 11;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lag time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tauL );
	output = state + ( tau/tauL ) * rate;  implementation_end;
specification_end;
							specification 'SOI'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 160 97 208 128 fill 15132390;
   text 'k' 187.2 104 color 16711680 14;
   line 163.2 112.5 202.7 112.5 color 16711680 fill 15132390;
   group
    text 's(s  + 1)' 184 118.4 color 16711680 14;
    text 't' 181.9 118.4 color 16711680 'SymbolProp BT' 15;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
 	real tau = 1;		// time constant [s / rad]
variables
    real hidden rate1, state1;
    real rate2,state2;
equations
	rate1 = ( k * input );
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau;
	state2 = int(rate2);
	output = state2;                        implementation_end;
specification_end;
							specification 'SOO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.6 232 128.6 fill 15132390;
   group
    text 't' 198.4 117.9 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.1 color 16711680 11;
   end;
   group
    text 't' 153.6 117.9 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.1 color 16711680 11;
   end;
   line 140.8 112.1 226.1 112.1 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 117.9 color 16711680 14;
   text '(s    + 1)' 205.9 117.9 color 16711680 14;
   text 'k' 183.5 103.3 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s / rad]
	real tau2 = 1;		// time constant 2 [s / rad]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state1) / tau1;
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau2;
	state2 = int(rate2);
	output = state2;                         implementation_end;
specification_end;
							specification 'SOOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 97.3 232 129.3 fill 15132390;
   group
    text 't' 198.4 118.1 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.3 color 16711680 11;
   end;
   group
    text 't' 153.6 118.1 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.2 color 16711680 11;
   end;
   text 'k' 159.5 103.7 color 16711680 14;
   line 140.8 112.2 226.1 112.2 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 118.1 color 16711680 14;
   text '(s    + 1)' 205.9 118.1 color 16711680 14;
   group
    text '(s    + 1)' 187.7 103.7 color 16711680 14;
    text 't' 180.3 103.7 color 16711680 'SymbolProp BT' 15;
    text 'L' 185.1 106.9 color 16711680 11;
   end;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s ]
	real tau2 = 1;		// time constant 2 [s ]
	real tauL = 2;		// lead time [s]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = state2/k - input;
	state1 = int (rate1);
	rate2 = k/(tau1*tau2) * ( tauL*input - state1 - state2*(tau1+tau2)/k );
	state2 = int(rate2);
	output = state2;             implementation_end;
specification_end;
							specification 'SOU'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2011-3-23 10:32:13</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 200 511.7 296 543.7 fill 15132390;
   line 204.8 527.2 290.1 527.2 color 16711680 fill 15132390;
   text 's  + 2     s  + 1' 254.3 535.7 color 16711680 14;
   text 'z' 251.4 536.8 color 16711680 'SymbolProp BT' 11 symbol;
   text '2' 216.4 532 color 16711680 11;
   text 't' 210 535.7 color 16711680 'SymbolProp BT' 15;
   text 't' 258.5 535.7 color 16711680 'SymbolProp BT' 15;
   text 'k' 248.4 519.2 color 16711680 14;
   text '2' 228.4 532 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1;			// gain []
    	real tau = 1;		// time constant [s ]
	real zeta = 0.7;		// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2) / tau;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)/tau;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
							specification 'SOUO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.1 232 128.1 fill 15132390;
   line 139.2 112.4 227.2 112.4 color 16711680 fill 15132390;
   text 's  + 2      s  + ' 176 120.1 color 16711680 14;
   text 'z' 172.3 121.2 color 16711680 'SymbolProp BT' 11 symbol;
   text 'w' 181.3 120.1 color 16711680 'SymbolProp BT' 15;
   text 'k' 176.5 103.6 color 16711680 14;
   group
    text '2' 194.7 101.2 color 16711680 11;
    text 'w' 186.7 103.9 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text '2' 225.6 116.7 color 16711680 11;
    text 'w' 217.6 119.4 color 16711680 'SymbolProp BT' 15;
   end;
   text '2' 149.3 116.2 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1.0;			// gain []
	real omega = 1.0;		// frequency [rad/s]
	real zeta = 0.7;			// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2)*omega;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)*omega;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
						end;
      Splitter1 400 144
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 396.8 140.8 403.2 147.2 color -1 fill 0;
         ellipse 395.7 139.7 404.3 148.3 color -1;
        terminals
         input 400 144 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter2 520 144
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 516.8 140.8 523.2 147.2 color -1 fill 0;
         ellipse 515.7 139.7 524.3 148.3 color -1;
        terminals
         input 520 144 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
     end;
     connections
      Controller\output -> uGov;
      Gain1\output -> Controller\SP;
      Gain2\output -> Splitter2\input 508.4 144;
      LowPassFilter\y -> Splitter1\input;
      omegaE -> LowPassFilter\u;
      RPMCommanTF\output -> Gain1\input;
      RPMRef -> RPMCommanTF\input;
      Splitter1\output -> Gain2\input;
      Splitter2\output -> Controller\MV 552 144;
      uGovSat -> Controller\outputSat 504 240;
     end;
    implementation_end;
   plug RPMRef 216 224;
   plug uGov 672 296;
   plug omegaE 216.1 271.9;
  end;
  connections
   Governor\uGov -> uGov 344 296;
   omegaE -> Governor\omegaE;
   RPMRef -> Governor\RPMRef;
  end;
 implementation_end;
specification_end;
							specification 'SmokeLimit'
 description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
    <LibraryPath>Controller\Governor.emx</LibraryPath>
  <TimeStamp>2015-11-16 21:10:54</TimeStamp>
</Description>
</Information>';
 type Submodel
  ports
   signal in RPMRef;
   signal out uGov;
   signal in omegaE;
 end;
 icon bg bottom shadow 11776947
  figures
   rectangle 571.3 337 660.7 367 color 0 fill 15132390;
   text 'name' 616 352 color 0 16;
 end;
 implementation bg
  submodels
   Governor 344 224.1
    description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations>parameters
	real tau = 5;	//Time constant for RPM Command
	real BW = 10; //cutoff frequency for LP fileter for engine speed
	real K = 1.5;			// Proportional gain
	real Td = 1;		// Derivative time constant: Td &gt; 0
	real N = 0;			// Derivative gain limitation.
	real Ti = 1;			// Integral time constant: Ti &gt; 0
	real Ta = 0.5;		// Tracking time constant.t: Ta &gt; 0
	real minimum = 0.6;	// Minimum controller output
	real maximum = 1.1;	// Maximum controller output
	real output_initial = 0.6;	// The controller output at start-up
</GlobalRelations></Attributes></Information>';
    type Submodel
     ports
      signal in omegaE;
      signal in RPMRef;
      signal out uGov;
    end;
    implementation bg
     submodels
      Controller 616 104
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Control\PID Control\Continuous\Controller-PID_p_sp_aw_u0.emx</LibraryPath><TimeStamp>2007-9-27 14:5:1</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'HybridCont-PID_p_sp_aw_u0'
        ports
         signal in SP;
         signal in MV;
         signal out output;
         signal in outputSat;
       end;
       icon bg bottom
        figures
         rectangle 584 72 648 136 color 0 fill 15132390;
         text 'PID' 630.4 103 color 16711680 18 bold;
         text 'SP' 596.8 86.9 color 16711680 14;
         text 'MV' 598.9 117.9 color 16711680 14;
         group
          group
           line 618.1 133.9 621.3 129 624.6 133.9 618.1 133.9 color 0 fill 0;
           line 611.7 129 631 129 color 0;
          end;
          text 'sp' 622.7 119.7 color 0 14;
         end;
         text 'p' 640.5 125.3 color 0 14;
         group
          text 'u' 610.6 81.5 color 0 14;
          text '0' 616.1 87.1 color 0;
         end;
         text 'aw' 629.1 81.5 color 0 14;
         group
          line 629.8 93.8 633.9 93.8 641.9 77.2 color 0;
          line 641.7 77.5 645.9 77.5 color 0;
         end;
        terminals
         SP 584 88 fixed;
         MV 584 120 fixed;
         output 648 104 fixed;
       end;
       implementation eq
// Created by C. Kleijn, 22 Sep 1999
parameters
	real global K;			// Proportional gain
	real global Td;		// Derivative time constant: Td > 0
	real global N;			// Derivative gain limitation.
	real global Ti;			// Integral time constant: Ti > 0
	real b = 1.0 {};			// Proportional setpoint weighting parameter: 0 <= b <= 1
	real c = 1.0 {};			// Derivative setpoint weighting parameter: 0 <= c <= 1
	real global Ta;		// Tracking time constant.t: Ta > 0
	real global minimum;	// Minimum controller output
	real global maximum;	// Maximum controller output
	real global output_initial;	// The controller output at start-up
variables
	real error,PB_high,PB_low;
	real hidden uP,uI,uD,uDstate,ideal_output,uI_initial,uD_initial;
equations
	error = -1*(SP - MV);
	uP = K * ( b * error );
	if time == 0 then 
			uI_initial = output_initial - uP;
		else 
			uI_initial = uI_initial;
		end;
	if time == 0 then 
			uD_initial = K * (c * error ) * N;
		else
			uD_initial = uD_initial;
		end;
	uI = int ( K * error / Ti  -  ( ideal_output - min([output; outputSat]) ) / Ta) + uI_initial;
	uDstate = int ( uD * N / Td ) + uD_initial;
	uD = K * (c * SP - MV ) * N - uDstate;	  
	ideal_output = uP + uI + uD;
	output = limit (ideal_output, minimum, maximum);
	PB_low = b * SP + (uI + uD - maximum)/K;
	PB_high = b * SP + (uI + uD - minimum)/K;                                                                                                                implementation_end;
      Gain1 448 88
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:15:12</TimeStamp>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 432.1 72 463.9 104 color 0 fill 15132390;
         text 'K' 448 88 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global BSFCRef[20];
	integer global caseNo;
equations
	output = input/BSFCRef[caseNo];
    implementation_end;
      Gain2 448 144
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:15:12</TimeStamp>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 432.1 128 463.9 160 color 0 fill 15132390;
         text 'K' 448 144 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global BSFCRef[20];
	integer global caseNo;
equations
	output = input/BSFCRef[caseNo];
    implementation_end;
      LowPassFilter 328 144
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Filters\LowPassFilter-BW4.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:23:6</TimeStamp>
</Description>';
       type 'LowPassFilter-BW4'
        ports
         signal in u;
         signal out y;
       end;
       icon bg bottom
        figures
         rectangle 280 128 376 160 color 0 fill 15132390;
         text 'Low-Pass Filter' 328.5 136.7 color 16711680 14;
         text 'BW 4    (rad/s) ' 330.1 150.4 color 16711680 14;
         text 'th' 324.3 146.3 color 16711680;
       end;
       implementation eq
// Created by C. Kleijn, 27 September 1999
parameters
    real global BW;	// Bandwidth (Hz)
	real global BSFCRef[20];
	integer global caseNo;
variables
    real hidden s1y,s2y,s3y,s4y,BWrad,y0;
initialequations
	y0 = BSFCRef[caseNo];
equations
	BWrad = twopi*BW;
	s4y = BWrad^4.0*(u - y) - BWrad^3.0*2.6131*s1y - BWrad^2.0*3.4142*s2y - BWrad*2.6131*s3y;
  	s3y = int(s4y,0);
	s2y = int(s3y,0);
	s1y = int(s2y,0);
   	y = int(s1y,y0);
        implementation_end;
      plug RPMRef 232.2 88.1;
      plug uGov 752 104;
      plug omegaE 168.1 143.9;
      RPMCommanTF 320 88
						specifications active 'FO'
							specification 'FO'
 description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath><TimeStamp>2008-1-24 10:10:10</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 296 71.4 344 104.6 color 0 fill 15132390;
   text 'k' 321.1 79.1 color 16711680 14;
   line 301.7 89 339.4 89 color 16711680 fill 15132390;
   text 't' 314.7 95.7 color 16711680 'SymbolProp BT' 15;
   text 's    + 1' 320 95.7 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;		// gain []
    real global tau;		// time constant [s / rad]
	real global BSFCRef[20];
	integer global caseNo;
variables
    real rate, state, state0;
initialequations
	state0 = BSFCRef[caseNo];
equations
    rate = (k * input - state) / tau;
    state = int (rate,state0);
    output = state;                    implementation_end;
specification_end;
							specification 'FOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96 216 128 fill 15132390;
   group
    text 't' 176.5 118.8 color 16711680 'SymbolProp BT' 15;
    text 's    + 1' 184 118.8 color 16711680 14;
   end;
   line 155.5 114 210.9 114 color 16711680 fill 15132390;
   group
    text 'L' 187.2 108.2 color 16711680 11;
    text 't' 181.3 105 color 16711680 'SymbolProp BT' 15;
   end;
   text 'k' 160.5 105.5 color 16711680 14;
   text '(s    + 1)' 188.8 105 color 16711680 14;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lead time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tau );
	output = state + ( tauL/tau ) * rate;  implementation_end;
specification_end;
							specification 'FOLA'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96.5 216 128.5 fill 15132390;
   line 156.6 113.5 211.9 113.5 color 16711680 fill 15132390;
   group
    text 'k' 160.5 105 color 16711680 14;
    text '(s    + 1)' 187.7 104.4 color 16711680 14;
    text 't' 180.3 104.4 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text 's    + 1' 182.4 119.4 color 16711680 14;
    text 't' 173.9 119.4 color 16711680 'SymbolProp BT' 15;
    text 'L' 179.7 122.6 color 16711680 11;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lag time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tauL );
	output = state + ( tau/tauL ) * rate;  implementation_end;
specification_end;
							specification 'SOI'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 160 97 208 128 fill 15132390;
   text 'k' 187.2 104 color 16711680 14;
   line 163.2 112.5 202.7 112.5 color 16711680 fill 15132390;
   group
    text 's(s  + 1)' 184 118.4 color 16711680 14;
    text 't' 181.9 118.4 color 16711680 'SymbolProp BT' 15;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
 	real tau = 1;		// time constant [s / rad]
variables
    real hidden rate1, state1;
    real rate2,state2;
equations
	rate1 = ( k * input );
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau;
	state2 = int(rate2);
	output = state2;                        implementation_end;
specification_end;
							specification 'SOO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.6 232 128.6 fill 15132390;
   group
    text 't' 198.4 117.9 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.1 color 16711680 11;
   end;
   group
    text 't' 153.6 117.9 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.1 color 16711680 11;
   end;
   line 140.8 112.1 226.1 112.1 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 117.9 color 16711680 14;
   text '(s    + 1)' 205.9 117.9 color 16711680 14;
   text 'k' 183.5 103.3 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s / rad]
	real tau2 = 1;		// time constant 2 [s / rad]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state1) / tau1;
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau2;
	state2 = int(rate2);
	output = state2;                         implementation_end;
specification_end;
							specification 'SOOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 97.3 232 129.3 fill 15132390;
   group
    text 't' 198.4 118.1 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.3 color 16711680 11;
   end;
   group
    text 't' 153.6 118.1 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.2 color 16711680 11;
   end;
   text 'k' 159.5 103.7 color 16711680 14;
   line 140.8 112.2 226.1 112.2 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 118.1 color 16711680 14;
   text '(s    + 1)' 205.9 118.1 color 16711680 14;
   group
    text '(s    + 1)' 187.7 103.7 color 16711680 14;
    text 't' 180.3 103.7 color 16711680 'SymbolProp BT' 15;
    text 'L' 185.1 106.9 color 16711680 11;
   end;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s ]
	real tau2 = 1;		// time constant 2 [s ]
	real tauL = 2;		// lead time [s]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = state2/k - input;
	state1 = int (rate1);
	rate2 = k/(tau1*tau2) * ( tauL*input - state1 - state2*(tau1+tau2)/k );
	state2 = int(rate2);
	output = state2;             implementation_end;
specification_end;
							specification 'SOU'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2011-3-23 10:32:13</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 200 511.7 296 543.7 fill 15132390;
   line 204.8 527.2 290.1 527.2 color 16711680 fill 15132390;
   text 's  + 2     s  + 1' 254.3 535.7 color 16711680 14;
   text 'z' 251.4 536.8 color 16711680 'SymbolProp BT' 11 symbol;
   text '2' 216.4 532 color 16711680 11;
   text 't' 210 535.7 color 16711680 'SymbolProp BT' 15;
   text 't' 258.5 535.7 color 16711680 'SymbolProp BT' 15;
   text 'k' 248.4 519.2 color 16711680 14;
   text '2' 228.4 532 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1;			// gain []
    	real tau = 1;		// time constant [s ]
	real zeta = 0.7;		// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2) / tau;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)/tau;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
							specification 'SOUO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.1 232 128.1 fill 15132390;
   line 139.2 112.4 227.2 112.4 color 16711680 fill 15132390;
   text 's  + 2      s  + ' 176 120.1 color 16711680 14;
   text 'z' 172.3 121.2 color 16711680 'SymbolProp BT' 11 symbol;
   text 'w' 181.3 120.1 color 16711680 'SymbolProp BT' 15;
   text 'k' 176.5 103.6 color 16711680 14;
   group
    text '2' 194.7 101.2 color 16711680 11;
    text 'w' 186.7 103.9 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text '2' 225.6 116.7 color 16711680 11;
    text 'w' 217.6 119.4 color 16711680 'SymbolProp BT' 15;
   end;
   text '2' 149.3 116.2 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1.0;			// gain []
	real omega = 1.0;		// frequency [rad/s]
	real zeta = 0.7;			// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2)*omega;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)*omega;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
						end;
      Splitter1 400 144
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 396.8 140.8 403.2 147.2 color -1 fill 0;
         ellipse 395.7 139.7 404.3 148.3 color -1;
        terminals
         input 400 144 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter2 520 144
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 516.8 140.8 523.2 147.2 color -1 fill 0;
         ellipse 515.7 139.7 524.3 148.3 color -1;
        terminals
         input 520 144 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter3 696 104
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 692.8 100.8 699.2 107.2 color -1 fill 0;
         ellipse 691.7 99.7 700.3 108.3 color -1;
        terminals
         input 696 104 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
     end;
     connections
      Controller\output -> Splitter3\input;
      Gain1\output -> Controller\SP;
      Gain2\output -> Splitter2\input 508.4 144;
      LowPassFilter\y -> Splitter1\input;
      omegaE -> LowPassFilter\u;
      RPMCommanTF\output -> Gain1\input;
      RPMRef -> RPMCommanTF\input;
      Splitter1\output -> Gain2\input;
      Splitter2\output -> Controller\MV 538.1 144 552 144;
      Splitter3\output -> Controller\outputSat 696 200 616 200;
      Splitter3\output -> uGov;
     end;
    implementation_end;
   plug RPMRef 216 224;
   plug uGov 440 224;
   plug omegaE 216 272;
  end;
  connections
   Governor\uGov -> uGov;
   omegaE -> Governor\omegaE;
   RPMRef -> Governor\RPMRef;
  end;
 implementation_end;
specification_end;
						end;
      injectionControl 664 -64
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in throttle;
         signal out dphiFlat;
         signal out pRail;
         signal out phiInj;
         signal in omegaELP;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/
parameters
	real pRailRef = 120000000;
	real coeffInjDur124[3] = [13.0137111137019;-46.2589731330982;27.0112252116279];
	real coeffInjDur3[2] = [0.570812211745841;0.0128691268644715];
	real coeffInjDur5[2] = [-0.262997067749316;-0.0317155248669568];	
equations
	pRail = pRailRef;
	dphiFlat = throttle; 
	phiInj = -2;
  // start typing here
 implementation_end;
      IntegrateFuel 544 200
       description '<Information><Description><Version>4.3</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Block Diagram\Integrate.emx</LibraryPath><TimeStamp>2013-3-8 14:47:42</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type Integrate
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 528 184 560 216 color 0 fill 15132390;
         text '' 544 200.3 color 16711680 'Lucida Sans' 21 italic;
       end;
       implementation eq
parameters
	real initial = 0;		// initial value
equations
	output = int (input, initial);
     implementation_end;
      IntegrateShaftPower 544 264
       description '<Information><Description><Version>4.3</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Block Diagram\Integrate.emx</LibraryPath><TimeStamp>2013-3-8 14:47:42</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type Integrate
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 528 248 560 280 color 0 fill 15132390;
         text '' 544 264.3 color 16711680 'Lucida Sans' 21 italic;
       end;
       implementation eq
parameters
	real initial = 0;		// initial value
equations
	output = int (input, initial);
     implementation_end;
      LPdhExh 608 72
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Filters\LowPassFilter-BW4.emx</LibraryPath><TimeStamp>2007-9-27 15:23:6</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'LowPassFilter-BW4'
        ports
         signal in u;
         signal out y;
       end;
       icon bg bottom
        figures
         rectangle 560 56 656 88 color 0 fill 15132390;
         text 'Low-Pass Filter' 608.5 64.7 color 16711680 14;
         text 'BW 4    (rad/s) ' 610.1 78.4 color 16711680 14;
         text 'th' 604.3 74.3 color 16711680;
       end;
       implementation eq
// Created by C. Kleijn, 27 September 1999
parameters
    real BW  = 10;	// Bandwidth (Hz)
variables
    real hidden s1y,s2y,s3y,s4y,BWrad;
equations
	BWrad = twopi*BW;
	s4y = BWrad^4.0*(u - y) - BWrad^3.0*2.6131*s1y - BWrad^2.0*3.4142*s2y - BWrad*2.6131*s3y;
  	s3y = int(s4y,0);
	s2y = int(s3y,0);
	s1y = int(s2y,0);
   	y = int(s1y,0);
        implementation_end;
      LPdmf 680 168
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Filters\LowPassFilter-BW4.emx</LibraryPath><TimeStamp>2007-9-27 15:23:6</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'LowPassFilter-BW4'
        ports
         signal in u;
         signal out y;
       end;
       icon bg bottom
        figures
         rectangle 632 152 728 184 color 0 fill 15132390;
         text 'Low-Pass Filter' 680.5 160.7 color 16711680 14;
         text 'BW 4    (rad/s) ' 682.1 174.4 color 16711680 14;
         text 'th' 676.3 170.3 color 16711680;
       end;
       implementation eq
// Created by C. Kleijn, 27 September 1999
parameters
    real BW  = 10;	// Bandwidth (Hz)
variables
    real hidden s1y,s2y,s3y,s4y,BWrad;
equations
	BWrad = twopi*BW;
	s4y = BWrad^4.0*(u - y) - BWrad^3.0*2.6131*s1y - BWrad^2.0*3.4142*s2y - BWrad*2.6131*s3y;
  	s3y = int(s4y,0);
	s2y = int(s3y,0);
	s1y = int(s2y,0);
   	y = int(s1y,0);
        implementation_end;
      LPdQCyl 608 32
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Filters\LowPassFilter-BW4.emx</LibraryPath><TimeStamp>2007-9-27 15:23:6</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'LowPassFilter-BW4'
        ports
         signal in u;
         signal out y;
       end;
       icon bg bottom
        figures
         rectangle 560 16 656 48 color 0 fill 15132390;
         text 'Low-Pass Filter' 608.5 24.7 color 16711680 14;
         text 'BW 4    (rad/s) ' 610.1 38.4 color 16711680 14;
         text 'th' 604.3 34.3 color 16711680;
       end;
       implementation eq
// Created by C. Kleijn, 27 September 1999
parameters
    real BW  = 10;	// Bandwidth (Hz)
variables
    real hidden s1y,s2y,s3y,s4y,BWrad;
equations
	BWrad = twopi*BW;
	s4y = BWrad^4.0*(u - y) - BWrad^3.0*2.6131*s1y - BWrad^2.0*3.4142*s2y - BWrad*2.6131*s3y;
  	s3y = int(s4y,0);
	s2y = int(s3y,0);
	s1y = int(s2y,0);
   	y = int(s1y,0);
        implementation_end;
      LPfricPow 608 136
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Filters\LowPassFilter-BW4.emx</LibraryPath><TimeStamp>2007-9-27 15:23:6</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'LowPassFilter-BW4'
        ports
         signal in u;
         signal out y;
       end;
       icon bg bottom
        figures
         rectangle 560 120 656 152 color 0 fill 15132390;
         text 'Low-Pass Filter' 608.5 128.7 color 16711680 14;
         text 'BW 4    (rad/s) ' 610.1 142.4 color 16711680 14;
         text 'th' 604.3 138.3 color 16711680;
       end;
       implementation eq
// Created by C. Kleijn, 27 September 1999
parameters
    real BW  = 10;	// Bandwidth (Hz)
variables
    real hidden s1y,s2y,s3y,s4y,BWrad;
equations
	BWrad = twopi*BW;
	s4y = BWrad^4.0*(u - y) - BWrad^3.0*2.6131*s1y - BWrad^2.0*3.4142*s2y - BWrad*2.6131*s3y;
  	s3y = int(s4y,0);
	s2y = int(s3y,0);
	s1y = int(s2y,0);
   	y = int(s1y,0);
        implementation_end;
      LPPower 680 232
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Filters\LowPassFilter-BW4.emx</LibraryPath><TimeStamp>2007-9-27 15:23:6</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'LowPassFilter-BW4'
        ports
         signal in u;
         signal out y;
       end;
       icon bg bottom
        figures
         rectangle 632 216 728 248 color 0 fill 15132390;
         text 'Low-Pass Filter' 680.5 224.7 color 16711680 14;
         text 'BW 4    (rad/s) ' 682.1 238.4 color 16711680 14;
         text 'th' 676.3 234.3 color 16711680;
       end;
       implementation eq
// Created by C. Kleijn, 27 September 1999
parameters
    real BW  = 5;	// Bandwidth (Hz)
variables
    real hidden s1y,s2y,s3y,s4y,BWrad;
equations
	BWrad = twopi*BW;
	s4y = BWrad^4.0*(u - y) - BWrad^3.0*2.6131*s1y - BWrad^2.0*3.4142*s2y - BWrad*2.6131*s3y;
  	s3y = int(s4y,0);
	s2y = int(s3y,0);
	s1y = int(s2y,0);
   	y = int(s1y,0);
        implementation_end;
      MultiplyDivide 792 200
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:14:59</TimeStamp>
</Description>';
       knot MultiplyDivide
        ports
         signal knot duplicatable in multiply [1];
         signal knot duplicatable in divide [1];
         signal knot out output [1];
       end;
       icon bg ellipse
        figures
         ellipse 784 192 800 208 color 0 fill 16777215;
       end;
       implementation eq
code
	if mul (collect (divide)) == 0 then
		output = 0;
	else
		output = mul (collect (multiply)) ./ mul (collect (divide))*3.6e9;
	end;
	
	output = min([250; output]);
	output = max([150; output]);
     implementation_end;
      MultiplyDivide1 824 32
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:14:59</TimeStamp>
</Description>';
       knot MultiplyDivide
        ports
         signal knot duplicatable in multiply [1];
         signal knot duplicatable in divide [1];
         signal knot out output [1];
       end;
       icon bg ellipse
        figures
         ellipse 816 24 832 40 color 0 fill 16777215;
       end;
       implementation eq
code
	if mul (collect (divide)) == 0 then
		output = 0;
	else
		output = mul (collect (multiply)) ./ mul (collect (divide));
	end;	
	output = min([output,1]);
	output = max([output,0]);
	
	
     implementation_end;
      MultiplyDivide2 824 64
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:14:59</TimeStamp>
</Description>';
       knot MultiplyDivide
        ports
         signal knot duplicatable in multiply [1];
         signal knot duplicatable in divide [1];
         signal knot out output [1];
       end;
       icon bg ellipse
        figures
         ellipse 816 56 832 72 color 0 fill 16777215;
       end;
       implementation eq
code
	if mul (collect (divide)) == 0 then
		output = 0;
	else
		output = mul (collect (multiply)) ./ mul (collect (divide));
	end;	
	output = min([output,1]);
	output = max([output,0]);
	
	
     implementation_end;
      MultiplyDivide3 824 88
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:14:59</TimeStamp>
</Description>';
       knot MultiplyDivide
        ports
         signal knot duplicatable in multiply [1];
         signal knot duplicatable in divide [1];
         signal knot out output [1];
       end;
       icon bg ellipse
        figures
         ellipse 816 80 832 96 color 0 fill 16777215;
       end;
       implementation eq
code
	if mul (collect (divide)) == 0 then
		output = 0;
	else
		output = mul (collect (multiply)) ./ mul (collect (divide));
	end;	
	output = min([output,1]);
	output = max([output,0]);
	
	
     implementation_end;
      MultiplyDivide4 824 232
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:14:59</TimeStamp>
</Description>';
       knot MultiplyDivide
        ports
         signal knot duplicatable in multiply [1];
         signal knot duplicatable in divide [1];
         signal knot out output [1];
       end;
       icon bg ellipse
        figures
         ellipse 816 224 832 240 color 0 fill 16777215;
       end;
       implementation eq
code
	if mul (collect (divide)) == 0 then
		output = 0;
	else
		output = mul (collect (multiply)) ./ mul (collect (divide));
	end;	
	output = min([output,1]);
	output = max([output,0]);
	
	
     implementation_end;
      Mux 807.5 -22.5
						specifications active 'inputs_8'
							specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal out output [2,1];
   signal in input2;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 color 0 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output = [input1; input2];implementation_end;
specification_end;
							specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output = input;implementation_end;
specification_end;
							specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal out output [2,1];
   signal in input2;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output = [input1; input2];implementation_end;
specification_end;
							specification 'inputs_3'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal out output [3,1];
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '3' 133 82 color 8421504 8;
  terminals
   input1 128 64 fixed;
   input2 128 72 fixed;
   input3 128 80 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3];implementation_end;
specification_end;
							specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal out output [4,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3; input4];implementation_end;
specification_end;
							specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal in input5;
   signal out output [5,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3; input4; input5];implementation_end;
specification_end;
							specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal in input5;
   signal in input6;
   signal out output [6,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3; input4; input5; input6];implementation_end;
specification_end;
							specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal in input5;
   signal in input6;
   signal in input7;
   signal out output [7,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3; input4; input5; input6; input7];implementation_end;
specification_end;
							specification 'inputs_8'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in IVO;
   signal in IVC;
   signal in IVAreaMulti;
   signal in pRail;
   signal in phiInj;
   signal in injDur;
   signal in EVO;
   signal in EVC;
   signal out output [9,1];
   signal in EVAreaMulti;
 end;
 icon bg bottom
  figures
   line 752 -40 832 -40 color 0 width 2;
   rectangle 784 -12 864 -4 color -1;
   text '8' 803 -21.8 color 8421504 8;
  terminals
   IVO 760 -40 fixed;
   IVC 768 -40 fixed;
   IVAreaMulti 776 -40 fixed;
   pRail 784 -40 fixed;
   phiInj 792 -40 fixed;
   injDur 800 -40 fixed;
   EVO 808 -40 fixed;
   EVC 816 -40 fixed;
   output 792 -32 fixed;
   EVAreaMulti 824 -40 fixed;
 end;
 implementation eq
equations
	output = [IVO; IVC; IVAreaMulti; pRail; phiInj; injDur; EVO; EVC; EVAreaMulti];implementation_end;
specification_end;
							specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal in input5;
   signal in input6;
   signal in input7;
   signal in input8;
   signal in input9;
   signal out output [9,1];
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3; input4; input5; input6; input7; input8; input9];implementation_end;
specification_end;
						end;
      plug omegaE 447.9 -8;
      plug PowShaft 464 232;
      plug dmf 456 168;
      plug output 936 -8;
      plug dQCyl 456 32;
      plug dhExh 456 72;
      plug fricPow 456.1 135.9;
      plug dhAir 456.1 104;
      plug pTAR 440.1 -112;
      plug tWall 896 352;
      PlusMinus 528 72
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\PlusMinus.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:15:13</TimeStamp>
</Description>';
       knot PlusMinus
        ports
         signal knot duplicatable in plus [1];
         signal knot duplicatable in minus [1];
         signal knot out output [1];
       end;
       icon bg ellipse
        figures
         ellipse 520 64 536 80 color 0 fill 16777215;
       end;
       implementation eq
equations
    output = sum (collect (plus)) - sum (collect (minus));
    implementation_end;
      PlusMinus1 872 88
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\PlusMinus.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:15:13</TimeStamp>
</Description>';
       knot PlusMinus
        ports
         signal knot duplicatable in plus [1];
         signal knot duplicatable in minus [1];
         signal knot out output [1];
       end;
       icon bg ellipse
        figures
         ellipse 864 80 880 96 color 0 fill 16777215;
       end;
       implementation eq
equations
    output = sum (collect (plus)) - sum (collect (minus));
    implementation_end;
      PlusMinus2 904 64
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\PlusMinus.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:15:13</TimeStamp>
</Description>';
       knot PlusMinus
        ports
         signal knot duplicatable in plus [1];
         signal knot duplicatable in minus [1];
         signal knot out output [1];
       end;
       icon bg ellipse
        figures
         ellipse 896 56 912 72 color 0 fill 16777215;
       end;
       implementation eq
equations
    output = sum (collect (plus)) - sum (collect (minus));
    implementation_end;
      PlusMinus3 928 32
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\PlusMinus.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:15:13</TimeStamp>
</Description>';
       knot PlusMinus
        ports
         signal knot duplicatable in plus [1];
         signal knot duplicatable in minus [1];
         signal knot out output [1];
       end;
       icon bg ellipse
        figures
         ellipse 920 24 936 40 color 0 fill 16777215;
       end;
       implementation eq
equations
    output = sum (collect (plus)) - sum (collect (minus));
    implementation_end;
      RPMRef 368 -64
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Sources\Constant.emx</LibraryPath><TimeStamp>2007-10-19 14:48:44</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type Constant
        ports
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 352.1 -80 383.9 -48 color 0 fill 15132390;
         line 356.9 -68.4 378.9 -68.4 color 16711680 width 2;
         line 354.2 -57.3 379.9 -57.3 color 0;
         line 356.5 -73.3 356.5 -55 color 0;
       end;
       implementation eq
parameters
	integer global caseNo;
	real global RPMRef[1];
equations
	output = RPMRef[caseNo];
     implementation_end;
      Splitter1 768 -88
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 764.8 -91.2 771.2 -84.8 color -1 fill 0;
         ellipse 763.7 -92.3 772.3 -83.7 color -1;
        terminals
         input 768 -88 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter2 504 168
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 500.8 164.8 507.2 171.2 color -1 fill 0;
         ellipse 499.7 163.7 508.3 172.3 color -1;
        terminals
         input 504 168 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter3 504 232
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 500.8 228.8 507.2 235.2 color -1 fill 0;
         ellipse 499.7 227.7 508.3 236.3 color -1;
        terminals
         input 504 232 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter4 744 192
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 740.8 188.8 747.2 195.2 color -1 fill 0;
         ellipse 739.7 187.7 748.3 196.3 color -1;
        terminals
         input 744 192 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter5 752 216
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 748.8 212.8 755.2 219.2 color -1 fill 0;
         ellipse 747.7 211.7 756.3 220.3 color -1;
        terminals
         input 752 216 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter6 776 64
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 772.8 60.8 779.2 67.2 color -1 fill 0;
         ellipse 771.7 59.7 780.3 68.3 color -1;
        terminals
         input 776 64 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter7 776 88
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 772.8 84.8 779.2 91.2 color -1 fill 0;
         ellipse 771.7 83.7 780.3 92.3 color -1;
        terminals
         input 776 88 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter8 776 112
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 772.8 108.8 779.2 115.2 color -1 fill 0;
         ellipse 771.7 107.7 780.3 116.3 color -1;
        terminals
         input 776 112 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
     end;
     connections
      BSFCRef\output -> Governor1\RPMRef;
      Constant\output -> tWall;
      Constant1\output -> Mux\IVC 768 -72;
      Constant3\output -> Splitter1\input;
      dhAir -> PlusMinus\minus 528 104;
      dhExh -> PlusMinus\plus;
      dmf -> Splitter2\input;
      dQCyl -> LPdQCyl\u;
      fricPow -> LPfricPow\u;
      Gain\output -> Splitter8\input;
      Governor\uGov -> injectionControl\throttle;
      Governor1\uGov -> Gain1\input;
      injectionControl\dphiFlat -> Mux\injDur 800 -72;
      injectionControl\omegaELP <- Governor\omegaELP 592 -72;
      injectionControl\phiInj -> Mux\phiInj 792 -64;
      LPdhExh\y -> MultiplyDivide2\multiply 720 64;
      LPdmf\y -> Splitter4\input;
      LPdQCyl\y -> MultiplyDivide1\multiply;
      LPfricPow\y -> MultiplyDivide3\multiply 720 88;
      LPPower\y -> Splitter5\input;
      MultiplyDivide\output -> Governor1\omegaE 792 288 616 288;
      MultiplyDivide1\output -> PlusMinus3\plus;
      MultiplyDivide2\output -> PlusMinus2\plus;
      MultiplyDivide3\output -> PlusMinus1\plus;
      MultiplyDivide4\output -> PlusMinus1\plus 872 232;
      Mux\EVAreaMulti <- Splitter1\output 824 -80;
      Mux\EVC <- Splitter1\output 816 -80;
      Mux\EVO <- Splitter1\output 808 -80 772.2 -87.2;
      Mux\output -> output 792 -8;
      Mux\pRail <- injectionControl\pRail 784 -56;
      omegaE -> Governor\omegaE;
      PlusMinus\output -> LPdhExh\u;
      PlusMinus1\output -> PlusMinus2\plus 904 88;
      PlusMinus2\output -> PlusMinus3\plus 928 64;
      PowShaft -> Splitter3\input;
      pTAR -> Governor\pTAR;
      RPMRef\output -> Governor\RPMRef;
      Splitter1\output -> Mux\IVAreaMulti 776 -72;
      Splitter1\output -> Mux\IVO 760 -80;
      Splitter2\output -> IntegrateFuel\input 504 200;
      Splitter2\output -> LPdmf\u;
      Splitter3\output -> IntegrateShaftPower\input 504 264;
      Splitter3\output -> LPPower\u;
      Splitter4\output -> Gain\input 744 136 752 136;
      Splitter4\output -> MultiplyDivide\multiply;
      Splitter5\output -> MultiplyDivide\divide;
      Splitter5\output -> MultiplyDivide4\multiply 752 232;
      Splitter6\output -> MultiplyDivide1\divide 776 32;
      Splitter6\output -> MultiplyDivide2\divide;
      Splitter7\output -> MultiplyDivide3\divide;
      Splitter7\output -> Splitter6\input;
      Splitter8\output -> MultiplyDivide4\divide 824 112;
      Splitter8\output -> Splitter7\input;
     end;
    implementation_end;
   Demux 817 296
			specifications active 'outputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [2,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 color 0 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input;implementation_end;
specification_end;
				specification 'outputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output;
   signal in input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output = input;implementation_end;
specification_end;
				specification 'outputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [2,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input;implementation_end;
specification_end;
				specification 'outputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output [2,1];
   signal in input [3,1];
 end;
 icon bg bottom
  figures
   line 816 280 816 312 color 0 width 2;
   rectangle 812 280 820 312 color -1;
   text '3' 821 306 color 8421504 8;
  terminals
   output 816 288 fixed;
   input 816 296 fixed;
 end;
 implementation eq
equations
	output = input[1:2];implementation_end;
specification_end;
				specification 'outputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal in input [4,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4] = input;implementation_end;
specification_end;
				specification 'outputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal in input [5,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5] = input;implementation_end;
specification_end;
				specification 'outputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal in input [6,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6] = input;implementation_end;
specification_end;
				specification 'outputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal in input [7,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7] = input;implementation_end;
specification_end;
				specification 'outputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal out output8;
   signal in input [8,1];
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7; output8] = input;implementation_end;
specification_end;
				specification 'outputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal out output8;
   signal out output9;
   signal in input [9,1];
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7; output8; output9] = input;implementation_end;
specification_end;
			end;
   Demux1 777 120
			specifications active 'outputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [2,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 color 0 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input;implementation_end;
specification_end;
				specification 'outputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output;
   signal in input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output = input;implementation_end;
specification_end;
				specification 'outputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [2,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input;implementation_end;
specification_end;
				specification 'outputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output;
   signal in input [3,1];
 end;
 icon bg bottom
  figures
   line 776 104 776 136 color 0 width 2;
   rectangle 772 104 780 136 color -1;
   text '3' 781 130 color 8421504 8;
  terminals
   output 776 112 fixed;
   input 776 120 fixed;
 end;
 implementation eq
equations
	output = input[2];implementation_end;
specification_end;
				specification 'outputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal in input [4,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4] = input;implementation_end;
specification_end;
				specification 'outputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal in input [5,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5] = input;implementation_end;
specification_end;
				specification 'outputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal in input [6,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6] = input;implementation_end;
specification_end;
				specification 'outputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal in input [7,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7] = input;implementation_end;
specification_end;
				specification 'outputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal out output8;
   signal in input [8,1];
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7; output8] = input;implementation_end;
specification_end;
				specification 'outputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal out output8;
   signal out output9;
   signal in input [9,1];
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7; output8; output9] = input;implementation_end;
specification_end;
			end;
   Demux2 777 272
			specifications active 'outputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [2,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 color 0 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input;implementation_end;
specification_end;
				specification 'outputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output;
   signal in input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output = input;implementation_end;
specification_end;
				specification 'outputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [2,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input;implementation_end;
specification_end;
				specification 'outputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output;
   signal in input [3,1];
 end;
 icon bg bottom
  figures
   line 776 256 776 288 color 0 width 2;
   rectangle 772 256 780 288 color -1;
   text '3' 781 282 color 8421504 8;
  terminals
   output 776 264 fixed;
   input 776 272 fixed;
 end;
 implementation eq
equations
	output = input[2];implementation_end;
specification_end;
				specification 'outputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal in input [4,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4] = input;implementation_end;
specification_end;
				specification 'outputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal in input [5,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5] = input;implementation_end;
specification_end;
				specification 'outputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal in input [6,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6] = input;implementation_end;
specification_end;
				specification 'outputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal in input [7,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7] = input;implementation_end;
specification_end;
				specification 'outputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal out output8;
   signal in input [8,1];
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7; output8] = input;implementation_end;
specification_end;
				specification 'outputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal out output8;
   signal out output9;
   signal in input [9,1];
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7; output8; output9] = input;implementation_end;
specification_end;
			end;
   EffortSensor1 744 296.3
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      power knot in p1 [3,1];
      power knot out p2 [3,1];
      signal knot out effort [3,1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 737.1 288.4 750.9 304.4 color 0 fill 16777215;
      text 'e' 744.5 293.3 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   EngCylBlock4Stroke 744 208
    description '<Information><Description><Version>4.6</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
    type Submodel
     ports
      rotation out p;
      power in p1 [3,1];
      power out p2 [3,1];
      signal out dmf;
      signal out dQCyl;
      signal out fricPow;
      signal in tWall;
      signal in input [9,1];
    end;
    icon bg bottom shadow 11776947
     figures
      rectangle 649 176.5 839 239.5 color 0 fill 15132390;
      text 'name' 743 207.5 color 0 16;
    end;
    implementation bg
     submodels
      delay 584 376
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in input;
         signal out output;
         signal in omega;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/

equations
  // start typing here
  output = tdelay(input,2*pi/omega/3);
 implementation_end;
      delay1 664 376
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in input;
         signal out output;
         signal in omega;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/

equations
  // start typing here
  output = tdelay(input,4*pi/omega/3);
 implementation_end;
      delay10 728 208
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in input [3,1];
         signal out output [3,1];
         signal in omega;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/

equations
  // start typing here
  output[1] = tdelay(input[1],6*pi/omega/3);
  output[2] = tdelay(input[2],6*pi/omega/3);
  output[3] = tdelay(input[3],6*pi/omega/3);
 implementation_end;
      delay11 768.1 168
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in input [3,1];
         signal out output [3,1];
         signal in omega;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/

equations
  // start typing here
  output[1] = tdelay(input[1],8*pi/omega/3);
  output[2] = tdelay(input[2],8*pi/omega/3);
  output[3] = tdelay(input[3],8*pi/omega/3);
 implementation_end;
      delay12 816 208
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in input [3,1];
         signal out output [3,1];
         signal in omega;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/

equations
  // start typing here
  output[1] = tdelay(input[1],8*pi/omega/3);
  output[2] = tdelay(input[2],8*pi/omega/3);
  output[3] = tdelay(input[3],8*pi/omega/3);
 implementation_end;
      delay13 856.1 168
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in input [3,1];
         signal out output [3,1];
         signal in omega;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/

equations
  // start typing here
  output[1] = tdelay(input[1],10*pi/omega/3);
  output[2] = tdelay(input[2],10*pi/omega/3);
  output[3] = tdelay(input[3],10*pi/omega/3);
 implementation_end;
      delay14 904 208
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in input [3,1];
         signal out output [3,1];
         signal in omega;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/

equations
  // start typing here
  output[1] = tdelay(input[1],10*pi/omega/3);
  output[2] = tdelay(input[2],10*pi/omega/3);
  output[3] = tdelay(input[3],10*pi/omega/3);
 implementation_end;
      delay2 744 376
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in input;
         signal out output;
         signal in omega;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/

equations
  // start typing here
  output = tdelay(input,6*pi/omega/3);
 implementation_end;
      delay3 824 376
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in input;
         signal out output;
         signal in omega;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/

equations
  // start typing here
  output = tdelay(input,8*pi/omega/3);
 implementation_end;
      delay4 904 376
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in input;
         signal out output;
         signal in omega;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/

equations
  // start typing here
  output = tdelay(input,10*pi/omega/3);
 implementation_end;
      delay5 504 168
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in input [3,1];
         signal out output [3,1];
         signal in omega;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/

equations
  // start typing here
  output[1] = tdelay(input[1],2*pi/omega/3);
  output[2] = tdelay(input[2],2*pi/omega/3);
  output[3] = tdelay(input[3],2*pi/omega/3);
 implementation_end;
      delay6 552 208
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in input [3,1];
         signal out output [3,1];
         signal in omega;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/

equations
  // start typing here
  output[1] = tdelay(input[1],2*pi/omega/3);
  output[2] = tdelay(input[2],2*pi/omega/3);
  output[3] = tdelay(input[3],2*pi/omega/3);
 implementation_end;
      delay7 592 168
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in input [3,1];
         signal out output [3,1];
         signal in omega;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/

equations
  // start typing here
  output[1] = tdelay(input[1],4*pi/omega/3);
  output[2] = tdelay(input[2],4*pi/omega/3);
  output[3] = tdelay(input[3],4*pi/omega/3);
 implementation_end;
      delay8 640 208
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in input [3,1];
         signal out output [3,1];
         signal in omega;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/

equations
  // start typing here
  output[1] = tdelay(input[1],4*pi/omega/3);
  output[2] = tdelay(input[2],4*pi/omega/3);
  output[3] = tdelay(input[3],4*pi/omega/3);
 implementation_end;
      delay9 679.9 168
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in input [3,1];
         signal out output [3,1];
         signal in omega;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/

equations
  // start typing here
  output[1] = tdelay(input[1],6*pi/omega/3);
  output[2] = tdelay(input[2],6*pi/omega/3);
  output[3] = tdelay(input[3],6*pi/omega/3);
 implementation_end;
      EffortSensor1 824 496.3
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
       knot EffortSensor
        ports
         rotation knot in p1 [1];
         rotation knot out p2 [1];
         signal knot out effort [1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         ellipse 817.1 488.4 830.9 504.4 color 0 fill 16777215;
         text 'e' 824.5 493.3 color 0;
       end;
       implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
      EffortSensor2 528 439.9
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
       knot EffortSensor
        ports
         rotation knot in p1 [1];
         rotation knot out p2 [1];
         signal knot out effort [1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         ellipse 521.1 432 534.9 448 color 0 fill 16777215;
         text 'e' 528.5 436.9 color 0;
       end;
       implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
      Eng_Cyl1 432 320.5
       description '<Information><Description><Version>4.6</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration><LibraryPath>Components\engCyl4Stroke1ZoneBG.emx</LibraryPath><TimeStamp>2016-4-4 13:13:03</TimeStamp></Description><Attributes><GlobalRelations>parameters
// Cylinder dimension
	real S = 0.14;	//Length of stroke
	real lambdaR = 0.2745; //Ratio of crank rod to conneting rod
	real B = 0.127;	//Bore size
	real CR = 18; 	//Compression ratio
	real vDisp = 0.0017734761768412;

// Exhaust valve
	//Profile
	integer ExhProfNoRow1 = 30;
	integer ExhProfNoRow2 = 30;
	real ExhVVProfUp[ExhProfNoRow1] = [
			0;
			0.007;
			0.021;
			0.046;
			0.07;
			0.105;
			0.161;
			0.211;
			0.267;
			0.323;
			0.372;
			0.435;
			0.491;
			0.547;
			0.604;
			0.653;
			0.702;
			0.744;
			0.782;
			0.818;
			0.853;
			0.884;
			0.909;
			0.93;
			0.951;
			0.965;
			0.979;
			0.989;
			0.996;
			1];
	real ExhVVProfDown[ExhProfNoRow1] = [
			1;
			0.996;
			0.993;
			0.982;
			0.972;
			0.958;
			0.937;
			0.912;
			0.884;
			0.856;
			0.821;
			0.786;
			0.744;
			0.702;
			0.656;
			0.614;
			0.565;
			0.509;
			0.442;
			0.379;
			0.319;
			0.253;
			0.196;
			0.14;
			0.095;
			0.06;
			0.032;
			0.018;
			0.006;
			0];
	real ExhLift_max = 0.01425;
	real ExhCA_start_ref = 137; //Reference start CA for start of valve lift
	real ExhdCA_lift_up = 111.5;	 //Lift up time (should not be changed unless file is changed
	real ExhdCA_lift_down = 111.5; //Lift down time (should not be changed unless file is changed
	// Valve dimension
	integer noExhVV = 2;
	real DvExh = 0.041; // Valve head diameter
	real betaExh = 0.5235987755983; // Seat angle
	real wExh = 0.002; // Valve seat width
	real DpExh = 0.038; // Inner seat diameter
	real DsExh = 0.0073; // Stem diameter  
// Intake valve
	//Profile
	integer InProfNoRow1, InProfNoRow2;
	real InVVProfUp[ExhProfNoRow1] = [
			0;
			0.007;
			0.021;
			0.046;
			0.07;
			0.105;
			0.161;
			0.211;
			0.267;
			0.323;
			0.372;
			0.435;
			0.491;
			0.547;
			0.604;
			0.653;
			0.702;
			0.744;
			0.782;
			0.818;
			0.853;
			0.884;
			0.909;
			0.93;
			0.951;
			0.965;
			0.979;
			0.989;
			0.996;
			1];
	real InVVProfDown[ExhProfNoRow1] = [
			1;
			0.996;
			0.993;
			0.982;
			0.972;
			0.958;
			0.937;
			0.912;
			0.884;
			0.856;
			0.821;
			0.786;
			0.744;
			0.702;
			0.656;
			0.614;
			0.565;
			0.509;
			0.442;
			0.379;
			0.319;
			0.253;
			0.196;
			0.14;
			0.095;
			0.06;
			0.032;
			0.018;
			0.006;
			0];
	real InLift_max = 0.01425;
	real InCA_start_ref = 348; //Reference start CA for start of valve lift
	real IndCA_lift_up = 115;	 //Lift up time (should not be changed unless file is changed
	real IndCA_lift_down = 115; //Lift down time (should not be changed unless file is changed
	// Valve dimension
	integer noInVV = 2;
	real DvIntake = 0.041; // Valve head diameter
	real betaIntake = 0.5235987755983; // Seat angle
	real wIntake = 0.002; // Valve seat width
	real DpIntake = 0.038; // Inner seat diameter
	real DsIntake = 0.0073; // Stem diameter  

// Injection parameters
	real T_f = 323; //Fuel parameters
	real noHole = 8;
	real DHole = 0.00018;
	real Cd = 0.5435017652962;		//injector dimension	
 	real pRailRampUp = 0.0005;		//Pressure rise time in the injector[s]
	real pRailRampDown = 0.0005;		//Pressure rise time in the injector[s]			


// Thermal loss in cylinder
	//real T_Top = 500;	//Temperature of the cylinder head	
	//real T_Liner = 500;	//Temperature of the cylinder wall
	//real T_Pist = 500;	//Temperature of the piston top
	real mCp = 10000;
	real T_w_init = 550;
	real coeff_alpha = 2.5;
	real C_cylHT[4] = [0;-0.010733;20.1559;-5230.58];

// Initial values
	real m0 = 0.00319333953601774; 
	real E0 = 2367.429746029;
	real mb0 = 0;
	real p0 = 8941300.4597503;
	real T0 = 985.07810716031;
	real F0 = 0;
	real V0 = 0.00010432214526262;
	real phi0 = 0.01;</GlobalRelations></Attributes></Information>';
       type Submodel
        ports
         rotation out M;
         signal in contSig [9,1]; "IVO dIVO IVareaMullt throttle phiInj EVO dEVO EVareaMulti"
         signal out dmf;
         signal out dQCyl;
         power in ppTFIn [3,1];
         power out ppTFOut [3,1];
         signal out pMax;
         signal in tWall;
       end;
       icon bg bottom shadow 11776947
        figures
         line 440 403 403.1 387 438.2 333 color 0 width 2;
         ellipse 426.1 391 453.8 415 color 0 width 2;
         ellipse 430.8 323 449.2 339 color 0 width 2;
         ellipse 390.4 375 418.1 399 color 0 width 2;
         line 414.4 340 414.4 308 463.5 308 463.5 340 color 0 width 2;
         line 406.2 364 406.2 252 471.7 252 471.7 364 471.7 364 color 0 width 2;
         line 439 228 439 260 color 0 width 2;
         line 422.6 228 422.6 260 color 0 width 2;
         line 414.4 260 430.8 260 color 0 width 2;
         spline 439 260 430.8 276 439 292 447.1 276 439 260 color 0 fill 255;
         line 455.3 228 455.3 260 color 0 width 2;
         line 447.1 260 463.5 260 color 0 width 2;
         text '4Stroke' 448 368 color 0 16;
        terminals
         M 440 400 fixed;
         contSig 440 224 fixed;
         dmf 480 288 fixed;
         dQCyl 480 320 fixed;
         ppTFIn 416 224 fixed;
         ppTFOut 464 224 fixed;
       end;
       implementation bg
        submodels
         Constant 536 648
          description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Sources\Constant.emx</LibraryPath>
  <TimeStamp>2007-10-19 14:48:44</TimeStamp>
</Description>';
          type Constant
           ports
            signal out output;
          end;
          icon bg bottom
           figures
            rectangle 520.1 632 551.9 664 color 0 fill 15132390;
            line 524.9 643.6 546.9 643.6 color 16711680 width 2;
            line 522.2 654.7 547.9 654.7 color 0;
            line 524.5 638.7 524.5 657 color 0;
          end;
          implementation eq
parameters
	real C = 100000;		// output value
equations
	output = C;
     implementation_end;
         CrankMechanism1 695.5 648.5
          description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
    <LibraryPath>Mechanics\CrankMechanismKinematics.emx</LibraryPath>
  <TimeStamp>2015-10-22 22:30:23</TimeStamp>
</Description>
</Information>';
          type CrankMechanism
           ports
            power in p1;
            signal out q_rad;
            power out p2;
            signal out flow;
            signal in p_scvg;
          end;
          icon bg bottom shadow 11776947
           figures
            ellipse 691 684 715 708 color 0 width 3;
            line 704 696 674 670 704 616 color 0 width 3;
            ellipse 662 658 686 682 color 0 width 3;
            ellipse 695 608 711 624 color 0 width 3;
            line 678 624 678 592 726 592 726 624 color 0 width 3;
           terminals
            p1 704 584 fixed;
            q_rad 744 624 fixed;
            p2 704 712 fixed;
            flow 743 576 fixed;
          end;
          implementation bg
           submodels
            FlowSensor2 296 599
             knot FlowSensor
              ports
               power knot in p1 [1];
               power knot out p2 [1];
               signal knot out flow [1];
              restrictions
               causality constraint not_equal p1 p2;
             end;
             icon bg ellipse
              figures
               ellipse 289.5 593.5 302.5 606.5 color 0 fill 16777215;
               text 'f' 296.5 598.5 color 0;
             end;
             implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
      implementation_end;
            MSe 216 424
             description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:12:33</TimeStamp>
</Description>
</Information>';
             type MSe
              ports
               power in p;
               signal in p_scvg;
              restrictions
               causality fixed out p;
             end;
             icon bg bottom
              figures
               text 'MSe' 216 424 color 0 18 bold;
             end;
             implementation eq
variables
	real flow;
equations
	p.e = p_scvg;
	flow = p.f;
implementation_end;
            MTF2 296 512
             type MTF
              ports
               power in p1;
               power out p2;
               signal in pfi;
              restrictions
               causality constraint not_equal p1 p2;
             end;
             icon bg
              figures
               text 'MTF' 296 512 color 0 18 bold;
             end;
             implementation eq
parameters
	real global S, lambdaR;
variables
	real m;
	real csin, ccos;
equations	
	csin=sin(pfi);ccos=cos(pfi);
	m = S/2.0*(csin + lambdaR*csin*ccos/sqrt(1.0-(lambdaR*csin)^2));				
	p1.e = 1/(m) * p2.e;
	p2.f  = 1/(m) * p1.f;     implementation_end;
            plug q_rad 416.1 552;
            plug p2 295.9 648.1;
            plug flow 415.9 600.1;
            plug p_scvg 88 423.9;
            plug p1 295.9 312;
            OneJunction3 296 424
             knot OneJunction
              ports
               power knot duplicatable none p [1];
               signal knot out flow [1];
              restrictions
               causality constraint one_out p;
             end;
             icon bg
              figures
               text '1' 296 424 color 0 18 bold;
             end;
             implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
    implementation_end;
            QSensor4 296 551
             knot q_
              ports
               power knot in p1 [1];
               power knot out p2 [1];
               signal knot out q_rad [1];
              restrictions
               causality constraint not_equal p1 p2;
             end;
             icon bg ellipse
              figures
               ellipse 289.5 546 302.5 559 color 0 fill 16777215;
               text 'q' 295.5 550 color 0;
             end;
             implementation eq
parameters
//	integer global nCyl;
//	integer global iCyl;
	integer global nStroke;
//	real global pfi0[nCyl];
	real global phi0;
variables
	real q0;
	real b;
	real q_gr;
initialequations
	q0 	= phi0*pi/180.0;
	b 		= nStroke*180.0;	
equations
	p2.f 	= p1.f;
	p1.e 	= p2.e;
	q_rad 	= int (p1.f, q0);
	q_gr	= q_rad*180.0/pi mod b;

     implementation_end;
            Splitter1 360 552
             description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
             knot Splitter
              ports
               signal knot duplicatable out output [1];
               signal knot in input [1];
             end;
             icon bg ellipse
              figures
               ellipse 356.8 548.8 363.2 555.2 color -1 fill 0;
               ellipse 355.7 547.7 364.3 556.3 color -1;
              terminals
               input 360 552 fixed;
             end;
             implementation eq
equations
    collect (output) = input;
implementation_end;
            TF2 296 472
             type TF
              ports
               power in p1;
               power out p2;
              restrictions
               causality constraint not_equal p1 p2;
             end;
             icon bg
              figures
               text 'TF' 296 472 color 0 18 bold;
             end;
             implementation eq
parameters
	real global B;
variables
	real r;
initialequations
	r=1/(pi*B^2/4.0);
equations					
	p1.e = r * p2.e;
	p2.f = r * p1.f;       implementation_end;
           end;
           connections
            FlowSensor2\flow -> flow;
            FlowSensor2\p2 => p2;
            MTF2\p2 => QSensor4\p1;
            OneJunction3\p <= p1;
            OneJunction3\p => MSe\p;
            OneJunction3\p => TF2\p1;
            p_scvg -> MSe\p_scvg;
            QSensor4\p2 => FlowSensor2\p1;
            QSensor4\q_rad -> Splitter1\input;
            Splitter1\output -> MTF2\pfi 360 512;
            Splitter1\output -> q_rad;
            TF2\p2 => MTF2\p1;
           end;
          implementation_end;
         Demux 720 134.4
									specifications active 'outputs_8'
										specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [2,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input;implementation_end;
specification_end;
										specification 'outputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output;
   signal in input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output = input;implementation_end;
specification_end;
										specification 'outputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [2,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input;implementation_end;
specification_end;
										specification 'outputs_3'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal in input [3,1];
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '3' 133 82 color 8421504 8;
  terminals
   output1 128 64 fixed;
   output2 128 72 fixed;
   output3 128 80 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3] = input;implementation_end;
specification_end;
										specification 'outputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal in input [4,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4] = input;implementation_end;
specification_end;
										specification 'outputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal in input [5,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5] = input;implementation_end;
specification_end;
										specification 'outputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal in input [6,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6] = input;implementation_end;
specification_end;
										specification 'outputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal in input [7,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7] = input;implementation_end;
specification_end;
										specification 'outputs_8'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out IVO;
   signal out IVC;
   signal out IVAreaMulti;
   signal out pRail;
   signal out phiInj;
   signal out injDur;
   signal out EVO;
   signal out EVC;
   signal in input [9,1];
   signal out EVAreaMulti;
 end;
 icon bg bottom
  figures
   line 680 139.2 760 139.2 color 0 width 2;
   rectangle 680 127.2 760 135.2 color -1;
   text '8' 731 135.7 color 8421504 8;
  terminals
   IVO 688 139.2 fixed;
   IVC 696 139.2 fixed;
   IVAreaMulti 704 139.2 fixed;
   pRail 712 139.2 fixed;
   phiInj 728 139.2 fixed;
   injDur 736 139.2 fixed;
   EVO 744 139.2 fixed;
   EVC 752 139.2 fixed;
   input 720 147.2 fixed;
   EVAreaMulti 760 139.2 fixed;
 end;
 implementation eq
equations
	[IVO; IVC; IVAreaMulti; pRail; phiInj; injDur; EVO; EVC; EVAreaMulti] = input;implementation_end;
specification_end;
										specification 'outputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal out output8;
   signal out output9;
   signal in input [9,1];
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7; output8; output9] = input;implementation_end;
specification_end;
									end;
         Demux1 690.5 336
									specifications active 'outputs_3'
										specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [2,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 color 0 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input;implementation_end;
specification_end;
										specification 'outputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output;
   signal in input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output = input;implementation_end;
specification_end;
										specification 'outputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [2,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input;implementation_end;
specification_end;
										specification 'outputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output;
   signal in input [3,1];
 end;
 icon bg bottom
  figures
   line 688 320 688 352 color 0 width 2;
   rectangle 684 320 692 352 color -1;
   text '3' 693 346 color 8421504 8;
  terminals
   output 688 328 fixed;
   input 688 336 fixed;
 end;
 implementation eq
equations
	output = input[1];implementation_end;
specification_end;
										specification 'outputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal in input [4,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4] = input;implementation_end;
specification_end;
										specification 'outputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal in input [5,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5] = input;implementation_end;
specification_end;
										specification 'outputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal in input [6,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6] = input;implementation_end;
specification_end;
										specification 'outputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal in input [7,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7] = input;implementation_end;
specification_end;
										specification 'outputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal out output8;
   signal in input [8,1];
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7; output8] = input;implementation_end;
specification_end;
										specification 'outputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal out output8;
   signal out output9;
   signal in input [9,1];
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7; output8; output9] = input;implementation_end;
specification_end;
									end;
         Demux2 393 349.5
									specifications active 'outputs_3'
										specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [2,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 color 0 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input;implementation_end;
specification_end;
										specification 'outputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output;
   signal in input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output = input;implementation_end;
specification_end;
										specification 'outputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [2,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input;implementation_end;
specification_end;
										specification 'outputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [3,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 377 353 409 353 color 0 width 2;
   rectangle 377 349 409 357 color -1;
   text '3' 403 348 color 8421504 8;
  terminals
   output1 385 353 fixed;
   input 393 353 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input[1:2];implementation_end;
specification_end;
										specification 'outputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal in input [4,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4] = input;implementation_end;
specification_end;
										specification 'outputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal in input [5,1];
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5] = input;implementation_end;
specification_end;
										specification 'outputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal in input [6,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6] = input;implementation_end;
specification_end;
										specification 'outputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal in input [7,1];
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7] = input;implementation_end;
specification_end;
										specification 'outputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal out output8;
   signal in input [8,1];
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7; output8] = input;implementation_end;
specification_end;
										specification 'outputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal out output8;
   signal out output9;
   signal in input [9,1];
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7; output8; output9] = input;implementation_end;
specification_end;
									end;
         EffortSensor1 704 567
          description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
          knot EffortSensor
           ports
            pneumatic knot in p1 [1];
            pneumatic knot out p2 [1];
            signal knot out effort [1];
           restrictions
            causality constraint not_equal p1 p2;
          end;
          icon bg ellipse
           figures
            ellipse 697.1 561.3 710.9 575.4 color 0 fill 16777215;
            text 'e' 704.5 565.6 color 0;
          end;
          implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
         EffortSensor2 392 311.3
          description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
          knot EffortSensor
           ports
            power knot in p1 [3,1];
            power knot out p2 [3,1];
            signal knot out effort [3,1];
           restrictions
            causality constraint not_equal p1 p2;
          end;
          icon bg ellipse
           figures
            ellipse 385.1 304.4 398.9 320.4 color 0 fill 16777215;
            text 'e' 392.5 309.3 color 0;
          end;
          implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
         engCylCV 722.5 431
									specifications active 'Energy3PortCyl'
										specification 'Conv3PortCyl'
description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath><TimeStamp>2015-10-26 20:20:12</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   pneumatic out ppV;
   signal out vCyl;
   signal out mCyl;
   power out pHT;
   power out pTFOut [3,1];
   power in pTFIn2 [3,1];
  restrictions
   causality fixed out pTFIn2;
 end;
 icon bg bottom shadow 11776947
  figures
   line 672 456 672 376 744 376 744 456 712 456 712 448 736 448 736 384 680 384 680 448 704 448 704 456 672 456 color 0 fill 15132390;
   line 704 432 680 432 680 424 736 424 736 432 712 432 712 472 704 472 704 432 color 0 fill 6710886;
   line 680 384 736 384 736 424 680 424 680 384 color 0 fill 55295;
   text 'CV' 712 400 color 0 16;
   text 'dW' 704 480 color 0 16;
   spline 749 409 757 401 765 409 773 401 color 0;
   text 'dQ' 760 424 color 0 16;
   spline 749 416 757 408 765 416 773 408 color 0;
   spline 749 402 757 394 765 402 773 394 color 0;
  terminals
   pTFIn1 672 368 fixed;
   ppV 704 488 fixed;
   vCyl 752 480 fixed;
   mCyl 752 464 fixed;
   pHT 760 440 fixed;
   pTFOut 744 368 fixed;
   pTFIn2 712 368 fixed;
 end;
 implementation bg
  submodels
   MSf1 432 448
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
    type MSf
     ports
      power in p;
      signal in flow;
     restrictions
      causality fixed in p;
    end;
    icon bg bottom
     figures
      text 'MSf' 432 448 color 0 18 bold;
    end;
    implementation eq
variables
	real effort;
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
   MTF 352 480
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MTF.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:15:31</TimeStamp>
</Description>
</Information>';
    type MTF
     ports
      pseudopneumatic in ppIn;
      pseudothermalh in pTIn;
      power in pFIn;
      power out ppOut;
      power out pTOut;
      power out pFOut;
      signal in vCyl {m3} ;
      pneumatic out ppVOut;
      signal out mCyl;
     restrictions
      causality fixed out pTIn;
      causality fixed in pFOut;
      causality fixed in pTOut;
      causality fixed out ppIn;
      causality fixed out pFIn;
      causality fixed in ppOut;
    end;
    icon bg bottom
     figures
      text 'MTF' 352 480 color 0 'Arial Narrow' 25 bold;
     terminals
      ppIn 328 456 fixed;
      pTIn 352 456 fixed;
      pFIn 376 456 fixed;
      ppOut 328 504 fixed;
      pTOut 352 504 fixed;
      pFOut 376 504 fixed;
      vCyl 376 488 fixed;
      ppVOut 376 480 fixed;
      mCyl 376 496 fixed;
    end;
    implementation eq
parameters
	string global dll_ICE;           //dll file name
	string global dll_fcn_ThDP;			//function name in dll file
	real global fs;							// stoichiometric fuel-to-air ratio
variables
	real dm {kg/s}; // Rate of change in mass
	real dE {J/s}; // Rate of change in internal energy
	real dmb {kg/s}; // Rate of change in burned fuel mass
	real dV {m3/s}; // Rate of change in volume
	real p {Pa};  // pressure of the control volume
	real T {K};		// temperature of the control volume
	real F; 			// Fuel-to-air equivalent ratio of control volume
	real mb {kg};				// mass of burned fuel in the control volume
	real ma {kg}; 				// mass of air in the control volume
	real R {J/kgK};			// Gas constant of the gas
	real u {J/kg};				// Specific internal energy of the gas
	real rho {kg/m3};		// Density of the gas
	real rhop, rhoT, rhoF; // partial derivative of density w.r.t. p, T, F
	real Rp, RT, RF;		// partial derivative of gas constant w.r.t. p, T, F
	real up, uT, uF;   // partial derivative of internal energy w.r.t. p, T, F
	
	real hidden u1, u2, u3, u4, D;
	real hidden a11, a12, a13, a21, a22, a23;
	real hidden RtimesT;
	real hidden RtimesTSq;
	real hidden inArrThProp[5];
	real hidden outArrThProp[16];
equations
	p = ppOut.e;
	T = pTOut.e;
	F = pFOut.e;
	dV = ppVOut.f;
	dm = ppIn.f;
	dE = pTIn.f;
	dmb = pFIn.f;
	
	// Calculate the thermodynamic properties of the gas
	inArrThProp = [p;T;F;fs;1];	
	outArrThProp = dll(dll_ICE,dll_fcn_ThDP, inArrThProp);	
	R = outArrThProp[1]; 			u = outArrThProp[4];
	Rp = outArrThProp[6];			RT = outArrThProp[7];			
	RF = outArrThProp[5];			up = outArrThProp[9];			
	uT = outArrThProp[10];		uF = outArrThProp[8];
	RtimesT = R*T;
	RtimesTSq = RtimesT*RtimesT;
	rho = p/(RtimesT);
	rhop = (RtimesT - p*Rp*T)/RtimesTSq;			
	rhoT = (-p*(RT*T + R))/RtimesTSq;
	rhoF = (-p*(RF*T))/RtimesTSq;
	mCyl = rho*vCyl;
	mb = (F*fs)/(1+F*fs)*mCyl;
	ma = mCyl - mb;
	
	// Calculate the derivative of the p, T, F
	u1 = dm/mCyl - dV/vCyl;
	u2 = (dE - u*dm)/mCyl;
	u3 = (dmb*mCyl - dm*mb)/(fs*ma^2);
	
	D = -(rhoT*up - rhop*uT)/rho;
	a11 = uT / D; 		a12 = -rhoT/(rho*D);		a13 = (rhoT*uF - rhoF*uT)/(rho*D);
	a21 = -up / D;		a22 = rhop/(rho*D);		a23 = -(rhop*uF - rhoF*up)/(rho*D);

	ppOut.f = a11*u1 + a12*u2 + a13*u3;
	pTOut.f = a21*u1 + a22*u2 + a23*u3;
	pFOut.f = u3;
	
	//
		
	ppIn.e = p;
	pTIn.e = T;
	pFIn.e = F;
	ppVOut.e = p;
	
implementation_end;
   plug pTFIn1 208 392.1;
   plug ppV 528 480;
   plug vCyl 510.8 528;
   plug mCyl 512 544;
   plug pHT 472 288;
   plug pTFOut 493 392;
   plug pTFIn2 352.1 240;
   PowerDemux 249.5 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 248 368 248 416 color 0 width 2;
   rectangle 243 376 251 408 color -1;
   text '3' 252 402 color 8421504 8;
  terminals
   output1 248 376 fixed;
   output2 248 392 fixed;
   output3 248 408 fixed;
   input 240 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerDemux1 352 306.5
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 320 304 384 304 color 0 width 2;
   rectangle 328 299 360 307 color -1;
   text '3' 354 308 color 8421504 8;
  terminals
   output1 328 304 fixed;
   output2 352 304 fixed;
   output3 376 304 fixed;
   input 352 296 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 457.5 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 456 368 456 416 color 0 width 2;
   rectangle 451 368 459 400 color -1;
   text '3' 460 394 color 8421504 8;
  terminals
   input1 456 376 fixed;
   input2 456 392 fixed;
   input3 456 408 fixed;
   output 464 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   PowerSensor2 480 480
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:29:42</TimeStamp>
</Description>
</Information>';
    knot PowerSensor
     ports
      pneumatic knot in p1 [1];
      pneumatic knot out p2 [1];
      signal knot out P [1] {W} ;
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 473.1 472.8 486.9 487.2 color 0 fill 16777215;
      text 'P' 480.5 479.8 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	P = p1.e .* p1.f;
implementation_end;
   QSensor1 424 479
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\QSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:34</TimeStamp>
</Description>';
    knot QSensor
     ports
      pneumatic knot in p1 [1];
      pneumatic knot out p2 [1];
      signal knot out vCyl [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 417.1 473.3 430.9 487.4 color 0 fill 16777215;
      text 'q' 423.5 477.6 color 0;
    end;
    implementation eq
parameters
	real global V0;
equations
	p2.f = p1.f;
	p1.e = p2.e;
	vCyl = int (p1.f, V0);
     implementation_end;
   Splitter1 424 496
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 420.8 492.8 427.2 499.2 color -1 fill 0;
      ellipse 419.7 491.7 428.3 500.3 color -1;
     terminals
      input 424 496 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Thdyn_Cont_Vol_Cyl 352 568
			specifications active 'Conventional'
				specification 'Conventional'
 description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume for array of cylinders</Description>
    <TimeStamp>2015-10-19 21:36:18</TimeStamp>
</Description>
</Information>';
 type C
  ports
   power in pp;
   power in pF;
   power in pT;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 568 color 0 51 bold;
  terminals
   pp 328 544 fixed;
   pF 376 544 fixed;
   pT 352 544 fixed;
 end;
 implementation eq
parameters
	real global p0; 
	real global T0;
	real global F0;

variables
	real interesting p, T, F;

equations
	p 		= int(pp.f,p0);
	T 		= int(pT.f,T0);
	F		= int(pF.f,F0);
	
	pp.e = p;
	pT.e = T;
	pF.e = F;	

implementation_end;
specification_end;
				specification 'cyl'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume for array of cylinders</Description>
    <TimeStamp>2015-10-19 17:31:58</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   pneumatic out ppV;
   signal out vCyl;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 152 480 51 bold;
  terminals
   pp 128 456 fixed;
   pF 176 456 fixed;
   pT 152 456 fixed;
   ppV 152 504 fixed;
   vCyl 176 504 fixed;
   mCyl 176 488 fixed;
 end;
 implementation eq
parameters
	integer global iCyl;
	integer global nCyl;
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global mCyl0[nCyl]; 
	real global ECyl0[nCyl];
	real global mbCyl0[nCyl];
	real global VCyl0[nCyl];

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,mCyl0[iCyl]);
	E 		= int(pT.f,ECyl0[iCyl]);
	m_b	= int(pF.f,mbCyl0[iCyl]);
	V   	= int(ppV.f,VCyl0[iCyl]);

	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[2];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	vCyl = V;
	mCyl = m;implementation_end;
specification_end;
				specification 'Fixed'
description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 104 264 51 bold;
  terminals
   pp 80 240 fixed;
   pF 128 240 fixed;
   pT 104 240 fixed;
   mCyl 128 272 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[2];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information><Description><LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration><Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description><TimeStamp>2015-10-19 17:21:38</TimeStamp></Description></Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 104 264 51 bold;
  terminals
   pp 80 240 fixed;
   pF 128 240 fixed;
   pT 104 240 fixed;
   mCyl 128 272 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[2];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudopneumatic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   MTF\mCyl -> mCyl 416 504 456 544;
   MTF\pFOut => Thdyn_Cont_Vol_Cyl\pF;
   MTF\ppOut => Thdyn_Cont_Vol_Cyl\pp;
   MTF\ppVOut => QSensor1\p1;
   MTF\pTOut => Thdyn_Cont_Vol_Cyl\pT;
   PowerDemux\output1 => ZeroJunction\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerDemux1\input <= pTFIn2;
   PowerDemux1\output1 => ZeroJunction\p;
   PowerDemux1\output2 => ZeroJunction1\p;
   PowerDemux1\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   PowerSensor2\P -> MSf1\flow;
   PowerSensor2\p2 => ppV;
   pTFIn1 => PowerDemux\input;
   QSensor1\p2 => PowerSensor2\p1;
   QSensor1\vCyl -> Splitter1\input;
   Splitter1\output -> MTF\vCyl;
   vCyl <- Splitter1\output 456 528;
   ZeroJunction\p => MTF\ppIn;
   ZeroJunction\p => PowerMux\input1;
   ZeroJunction1\p => MSf1\p;
   ZeroJunction1\p => MTF\pTIn;
   ZeroJunction1\p => pHT;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction2\p => MTF\pFIn;
   ZeroJunction2\p => PowerMux\input3;
  end;
  figures
   text 'Global Parameters
     real global slag, Diam, alam, Veps;
     real global pfi0[ncyl];
     real global nstroke;
     real global fs;
     string global dll_ICE;	      // dll filename for subroutines
     string global dll_fcn_ThDP;   // subroutines names in the dll file
     string global dll_fcn_th_MEV; // subroutines names in the dll file

     real global p0[nCyl]; 
     real global T0[nCyl];
     real global F0[nCyl];' 208 120 color 0 16;
 implementation_end;
specification_end;
										specification 'Energy2PortFixedAdiab'
description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath><TimeStamp>2015-11-3 00:03:12</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations>parameters
	real m0 = 4.08190848280315;
	real E0 = 884402.21053548;
	real mb0 = 0;
	real V0 = 1.15;
	real p0 = 310000;
	real T0 = 304.45;
	real F0 = 0;</GlobalRelations></Attributes></Information>';
 type Submodel
  ports
   power in pTFIn [3,1];
   signal out mCyl;
   power out pTFOut [3,1];
 end;
 icon bg bottom shadow 11776947
  figures
   rectangle 961 279.2 1033 303.2 color 0 fill 12632256;
   rectangle 961 247.2 1033 271.2 color 0 fill 12632256;
   rectangle 969 255.2 1025 295.2 color 0 fill 55295;
   text 'CV' 996.5 276.2 color 0 16;
   line 1021 275.2 1045 275.2 color 0 fill 12632256 width 4 end open;
   line 957 275.2 981 275.2 color 0 fill 12632256 width 4 end open;
  terminals
   pTFIn 953 275.2 fixed;
   mCyl 992 280 fixed;
   pTFOut 1049 275.2 fixed;
 end;
 implementation bg
  submodels
   plug pTFIn 208 392.1;
   plug mCyl 509 536;
   plug pTFOut 493 392.1;
   PowerDemux 249.4 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 249.5 368 249.5 416 color 0 width 2;
   rectangle 243.3 376 253.3 408 color -1;
   text '3' 254.5 402 color 8421504 8;
  terminals
   output1 249.5 376 fixed;
   output2 249.5 392 fixed;
   output3 249.5 408 fixed;
   input 239.5 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 457.4 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 457.5 368 457.5 416 color 0 width 2;
   rectangle 451.3 368 461.3 400 color -1;
   text '3' 462.5 394 color 8421504 8;
  terminals
   input1 457.5 376 fixed;
   input2 457.5 392 fixed;
   input3 457.5 408 fixed;
   output 467.5 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Fixed'
				specification 'Fixed'
 description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 color 0 51 bold;
  terminals
   pp 344.8 520.7 fixed;
   pF 359.2 520.7 fixed;
   pT 352 520.7 fixed;
   mCyl 359.2 530.4 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
   ppV 712 584 fixed;
   vCyl 736 584 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   pTFIn => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
 implementation_end;
specification_end;
										specification 'Energy2PortFixedVol'
description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>ControlVolumes\ControlVolumeEnergy3Port.emx</LibraryPath>
  <TimeStamp>2015-10-19 16:55:50</TimeStamp>
</Description>
</Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   signal out mCyl;
   power out pHT;
   power out pTFOut [3,1];
 end;
 icon bg bottom shadow 11776947
  figures
   spline 729.2 780 737.2 772 745.2 780 753.2 772;
   text 'dQ' 741.2 792 16;
   spline 729.2 788 737.2 780 745.2 788 753.2 780;
   spline 729.2 772 737.2 764 745.2 772 753.2 764;
   rectangle 654.7 748 726.7 804 fill 12632256;
   rectangle 662.7 756 718.7 796 fill 55295;
   text 'CV' 691.2 777 16;
  terminals
   pTFIn1 654.7 740 fixed;
   mCyl 686.7 812 fixed;
   pHT 742.7 804 fixed;
   pTFOut 726.7 740 fixed;
 end;
 implementation bg
  submodels
   plug pTFIn1 208 392.1;
   plug mCyl 509 535.9;
   plug pHT 472.1 288;
   plug pTFOut 493 392.1;
   PowerDemux 248 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 248 368 248 416 width 2;
   rectangle 243 376 251 408 color -1;
   text '3' 252 402 color 8421504 8;
  terminals
   output1 248 376 fixed;
   output2 248 392 fixed;
   output3 248 408 fixed;
   input 240 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 456 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 456 368 456 416 width 2;
   rectangle 451 368 459 400 color -1;
   text '3' 460 394 color 8421504 8;
  terminals
   input1 456 376 fixed;
   input2 456 392 fixed;
   input3 456 408 fixed;
   output 464 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Fixed'
				specification 'Fixed'
 description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 51 bold;
  terminals
   pp 328 504 fixed;
   pF 376 504 fixed;
   pT 352 504 fixed;
   mCyl 376 536 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
   ppV 712 584 fixed;
   vCyl 736 584 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   pTFIn1 => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   ZeroJunction1\p => pHT;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
 implementation_end;
specification_end;
										specification 'Energy3PortCyl'
 description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath><TimeStamp>2015-10-23 00:13:56</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   pneumatic out ppV;
   signal out vCyl;
   signal out mCyl;
   power out pHT;
   power out pTFOut [3,1];
   power in pTFIn2 [3,1];
   signal out ECyl;
   signal out mbCyl;
  restrictions
   causality fixed out pTFIn2;
 end;
 icon bg bottom shadow 11776947
  figures
   line 672 456 672 376 744 376 744 456 712 456 712 448 736 448 736 384 680 384 680 448 704 448 704 456 672 456 color 0 fill 15132390;
   line 704 432 680 432 680 424 736 424 736 432 712 432 712 472 704 472 704 432 color 0 fill 6710886;
   line 680 384 736 384 736 424 680 424 680 384 color 0 fill 55295;
   text 'CV' 712 400 color 0 16;
   text 'dW' 704 480 color 0 16;
   spline 749 409 757 401 765 409 773 401 color 0;
   text 'dQ' 760 424 color 0 16;
   spline 749 416 757 408 765 416 773 408 color 0;
   spline 749 402 757 394 765 402 773 394 color 0;
  terminals
   pTFIn1 672 368 fixed;
   ppV 704 488 fixed;
   vCyl 752 480 fixed;
   mCyl 752 464 fixed;
   pHT 760 440 fixed;
   pTFOut 744 368 fixed;
   pTFIn2 712 368 fixed;
 end;
 implementation bg
  submodels
   MSf 232 496
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
    type MSf
     ports
      power in p;
      signal in flow;
     restrictions
      causality fixed in p;
    end;
    icon bg bottom
     figures
      text 'MSf' 232 496 color 0 18 bold;
    end;
    implementation eq
variables
	real effort;
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
   plug pTFIn1 208 392.1;
   plug ppV 351.9 656;
   plug vCyl 496 608;
   plug mCyl 509 536;
   plug pHT 472 288;
   plug pTFOut 493 392;
   plug pTFIn2 352.1 240;
   plug ECyl 512 560;
   plug mbCyl 504 584;
   PowerDemux 250.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 249.5 368 249.5 416 color 0 width 2;
   rectangle 243.3 376 253.3 408 color -1;
   text '3' 254.5 402 color 8421504 8;
  terminals
   output1 249.5 376 fixed;
   output2 249.5 392 fixed;
   output3 249.5 408 fixed;
   input 239.5 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerDemux1 352 308.2
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 320 305.8 384 305.8 color 0 width 2;
   rectangle 328 299.3 360 309.8 color -1;
   text '3' 354 311.1 color 8421504 8;
  terminals
   output1 328 305.8 fixed;
   output2 352 305.8 fixed;
   output3 376 305.8 fixed;
   input 352 295.4 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 458.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 457.5 368 457.5 416 color 0 width 2;
   rectangle 451.3 368 461.3 400 color -1;
   text '3' 462.5 394 color 8421504 8;
  terminals
   input1 457.5 376 fixed;
   input2 457.5 392 fixed;
   input3 457.5 408 fixed;
   output 467.5 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   PowerSensor1 352 608
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:29:42</TimeStamp>
</Description>
</Information>';
    knot PowerSensor
     ports
      pneumatic knot in p1 [1];
      pneumatic knot out p2 [1];
      signal knot out P [1] {W} ;
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 345.1 600.8 358.9 615.2 color 0 fill 16777215;
      text 'P' 352.5 607.8 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	P = p1.e .* p1.f;
implementation_end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Varying'
				specification 'Fixed'
description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
 description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
   signal out ECyl;
   signal out mbCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 color 0 51 bold;
  terminals
   pp 344.8 520.7 fixed;
   pF 359.2 520.7 fixed;
   pT 352 520.7 fixed;
   mCyl 359.2 530.4 fixed;
   ppV 352 535.3 fixed;
   vCyl 359.2 535.3 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;
	ECyl = E;
	mbCyl = m_b;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerDemux1\input <= pTFIn2;
   PowerDemux1\output1 => ZeroJunction3\p;
   PowerDemux1\output2 => ZeroJunction1\p;
   PowerDemux1\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   PowerSensor1\P -> MSf\flow 232 608;
   PowerSensor1\p2 => ppV;
   pTFIn1 => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\ECyl -> ECyl;
   Thdyn_Cont_Vol_Cyl\mbCyl -> mbCyl;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   Thdyn_Cont_Vol_Cyl\ppV => PowerSensor1\p1;
   Thdyn_Cont_Vol_Cyl\vCyl -> vCyl;
   ZeroJunction1\p => MSf\p;
   ZeroJunction1\p => pHT;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
  figures
   text 'Global Parameters
     real global slag, Diam, alam, Veps;
     real global pfi0[ncyl];
     real global nstroke;
     real global fs;
     string global dll_ICE;	      // dll filename for subroutines
     string global dll_fcn_ThDP;   // subroutines names in the dll file
     string global dll_fcn_th_MEV; // subroutines names in the dll file

     real global p0[nCyl]; 
     real global T0[nCyl];
     real global F0[nCyl];' 208 120 color 0 16;
 implementation_end;
specification_end;
										specification 'Energy3PortFixedAdiab'
description '<Information>
 <Description>
    <Version>4.6</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath>
  <TimeStamp>2016-3-30 23:40:37</TimeStamp>
<KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
 <Attributes>
  <GlobalRelations>parameters
	real m0 = 4.08190848280315;
	real E0 = 884402.21053548;
	real mb0 = 0;
	real V0 = 1.15;
	real p0 = 310000;
	real T0 = 304.45;
	real F0 = 0;</GlobalRelations>
 </Attributes>
</Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   signal out mCyl;
   power out pTFOut [3,1];
   power out pTFOut2 [3,1];
 end;
 icon bg bottom shadow 11776947
  figures
   line 1028 289 1056 305 color 0 fill 12632256 width 4 end open;
   line 1027 261 1055 245 color 0 fill 12632256 width 4 end open;
   line 946 277 970 277 color 0 fill 12632256 width 4 end open;
   line 975 296 1017 296 1036.8 308.5 1039.5 304.3 1017 288 975 288 975 296 975 296 color 0 fill 12632256;
   line 1018 276 1045.5 259 1049 265 1031.3 276 1050.8 288 1047.3 293.8 1018 276 1018 276 color 0 fill 12632256;
   line 974.6 288 974.6 264 1014.6 264 1038.6 248 1046.3 259.3 1018.3 276 1047.3 293.3 1038.6 304 1014.6 288 974.6 288 974.6 288 color 0 fill 55295;
   text 'CV' 1008 277 color 0 16;
   line 974.5 256 1016.5 256 1035.7 242.7 1039.5 248 1016.5 264 974.5 264 974.5 256 974.5 256 color 0 fill 12632256;
  terminals
   pTFIn1 944 280 fixed;
   mCyl 992 280 fixed;
   pTFOut 1064 240 fixed;
   pTFOut2 1065 307.3 fixed;
 end;
 implementation bg
  submodels
   plug pTFIn1 208 392.1;
   plug mCyl 509 536;
   plug pTFOut 493 392.1;
   plug pTFOut2 352 240;
   PowerDemux 250.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 249.5 368 249.5 416 color 0 width 2;
   rectangle 243.3 376 253.3 408 color -1;
   text '3' 254.5 402 color 8421504 8;
  terminals
   output1 249.5 376 fixed;
   output2 249.5 392 fixed;
   output3 249.5 408 fixed;
   input 239.5 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 458.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 457.5 368 457.5 416 color 0 width 2;
   rectangle 451.3 368 461.3 400 color -1;
   text '3' 462.5 394 color 8421504 8;
  terminals
   input1 457.5 376 fixed;
   input2 457.5 392 fixed;
   input3 457.5 408 fixed;
   output 467.5 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   PowerMux1 352 300.5
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 color 0 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 336 304 368 304 color 0 width 2;
   rectangle 336 300 368 308 color -1;
   text '3' 362 299 color 8421504 8;
  terminals
   input1 344 304 fixed;
   input2 352 304 fixed;
   input3 360 304 fixed;
   output 352 304 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Fixed'
				specification 'Fixed'
 description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 color 0 51 bold;
  terminals
   pp 344.8 520.7 fixed;
   pF 359.2 520.7 fixed;
   pT 352 520.7 fixed;
   mCyl 359.2 530.4 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
   ppV 712 584 fixed;
   vCyl 736 584 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   PowerMux1\output => pTFOut2;
   pTFIn1 => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => PowerMux1\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => PowerMux1\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => PowerMux1\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
 implementation_end;
specification_end;
									end;
         exhVV 872 312
									specifications active 'ExhVVVarLift'
										specification 'ExhVV'
description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>Components\PoppetValve.emx</LibraryPath>
  <TimeStamp>2015-11-2 23:50:38</TimeStamp>
<KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   power in pTFIn [3,1];
   signal in CA;
   signal in VONom;
   signal in dVONom;
   power out pTFOut [3,1];
   signal out aOpenEff;
   signal out Cd;
   signal in areaMultiplier;
 end;
 icon bg bottom shadow 11776947
  figures
   line 224 209 256 209 color 0 fill 15132390;
   line 224 209 224 257 color 0 fill 15132390;
   line 304 211 304 255 color 0 fill 15132390;
   line 272 209 304 209 color 0 fill 15132390;
   line 264 224 240 240 288 240 264 224 color 0 fill 8355711;
   line 256 209 256 217 240 225 232 225 232 257 224 257 color 0 fill 15132390;
   line 272 209 272 217 288 225 296 225 296 257 304 257 304 209 272 209 color 0 fill 12632256;
   line 256 209 224 209 224 257 232 257 232 225 240 225 256 217 256 209 color 0 fill 12632256;
   line 264 225 264 193 color 0 fill 15132390;
   text 'PoppetValve' 264 265 color 0 16;
  terminals
   pTFIn 208 232 fixed;
   CA 304 184 fixed;
   VONom 224 184 fixed;
   dVONom 248 184 fixed;
   pTFOut 320 232 fixed;
   aOpenEff 320 208 fixed;
   Cd 320 184 fixed;
   areaMultiplier 280 184 fixed;
 end;
 implementation bg
  submodels
   EffortSensor1 272 319
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      power knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;
      text 'e' 272.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   EffortSensor2 416 319
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      pseudohydraulic knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;
      text 'e' 416.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   ExhVVArea 328.1 200.1
			specifications active 'Exhaust'
				specification 'Exhaust'
 description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:54:56</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;
   text 'VVArea' 328 200 color 0 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	real global DvExh;		 	// Valve Seat diameter
	real global betaExh;   	// valve seat angle
	real global wExh;      	// valve seat width
	real global DpExh;    		// Valve port diameter
	real global DsExh; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then
			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));
		else 
			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then
				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);
			else
				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);
			end;
		end;
		
		L_Dv = lift/DvExh;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
				specification 'Intake'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-6-22 22:48:36</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 fill 15132390;
   text 'VVArea' 328 200 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	real global DvIntake;		 	// Valve Seat diameter
	real global betaIntake;   	// valve seat angle
	real global wIntake;      	// valve seat width
	real global DpIntake;    		// Valve port diameter
	real global DsIntake; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then
			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));
		else 
			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then
				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);
			else
				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);
			end;
		end;
		
		L_Dv = lift/DvIntake;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
			end;
   ExhVVLift1 304 120
			specifications active 'Exhaust'
				specification 'Exhaust'
 description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-11-2 23:44:24</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 267.9 104 340.1 136 color 0 fill 15132390;
   text 'VVLift' 304 120 color 0 16;
  terminals
   lift 304 144 fixed;
   CA 328 96 fixed;
   CA_start_nom 280 96 fixed;
   dCA_lift_nom 304 96 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox;
	string global fnc_interp;
	integer global ExhProfNoRow1;
	integer global ExhProfNoRow2;
	real global ExhVVProfUpX[ExhProfNoRow1];
	real global ExhVVProfUpY[ExhProfNoRow1];
	real global ExhVVProfDownX[ExhProfNoRow2];
	real global ExhVVProfDownY[ExhProfNoRow2];
	real global ExhLift_max;
	integer global nStroke;
	real global ExhCA_start_ref; //Reference start CA for start of valve lift
	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed
	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed
	real global ExhdCA_lift_top_ref; //Reference duration for lift up
variables
	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2
	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = ExhProfNoRow1;
	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 
	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;		
	inarr2[1] = ExhProfNoRow2;
	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 
	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			
equations
	CA_start = CA_start_nom*ExhCA_start_ref;
	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;	
	dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= ExhdCA_lift_up then
			inarr1[ExhProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then
							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);
							inarr2[ExhProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = ExhLift_max*lift;
 implementation_end;
specification_end;
				specification 'Intake'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:16:35</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 763.9 96 836.1 128 fill 15132390;
   text 'VVLift' 800 112 16;
  terminals
   lift 800 136 fixed;
   CA 824 88 fixed;
   CA_start_nom 776 88 fixed;
   dCA_lift_nom 800 88 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox = 'dllTool20Sim.dll';
	string global fnc_interp = 'interpolate';
	integer global InProfNoRow1;
	integer global InProfNoRow2;
	real global InVVProfUpX[InProfNoRow1]; 
	real global InVVProfUpY[InProfNoRow1];
	real global InVVProfDownX[InProfNoRow2];
	real global InVVProfDownY[InProfNoRow2];
	real global InLift_max = 1;
	real global nstorke = 2;
	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift
	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed
	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed
	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift up
variables
	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = InProfNoRow1;
	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 
	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;		
	inarr2[1] = InProfNoRow2;
	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 
	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			
equations
	CA_start = CA_start_nom*InCA_start_ref;
	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;	
	dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;
	phi = CA*180/pi mod (nstorke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= IndCA_lift_up then
			inarr1[InProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= IndCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then
							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);
							inarr2[InProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = InLift_max*lift;
 implementation_end;
specification_end;
			end;
   MultiplyDivide1 352 248
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:14:59</TimeStamp>
</Description>';
    knot MultiplyDivide
     ports
      signal knot duplicatable in multiply [1];
      signal knot duplicatable in divide [1];
      signal knot out output [1];
    end;
    icon bg ellipse
     figures
      ellipse 344 240 360 256 color 0 fill 16777215;
    end;
    implementation eq
equations
	output = mul (collect (multiply)) ./ mul (collect (divide));
     implementation_end;
   plug pTFOut 504 336;
   plug aOpenEff 520.1 280;
   plug areaMultiplier 448 32;
   plug pTFIn 200 336;
   plug dVONom 304 56;
   plug VONom 280.1 32;
   plug CA 327.8 69.9;
   plug Cd 328 264;
   PowerDemux 241.5 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 240 312 240 360 color 0 width 2;
   rectangle 235 320 243 352 color -1;
   text '3' 244 346 color 8421504 8;
  terminals
   output1 240 320 fixed;
   output2 240 336 fixed;
   output3 240 352 fixed;
   input 232 336 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 449.5 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 448 312 448 360 color 0 width 2;
   rectangle 443 312 451 344 color -1;
   text '3' 452 338 color 8421504 8;
  terminals
   input1 448 320 fixed;
   input2 448 336 fixed;
   input3 448 352 fixed;
   output 456 336 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Splitter1 352 280
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;
      ellipse 347.7 275.7 356.3 284.3 color -1;
     terminals
      input 352 280 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Submodel2 352 359.5
    description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-6-22 16:30:00</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
 </Description>
</Information>';
    type Submodel
     ports
      signal in Aeff; "Effective area of nozzle (m2)"
      pseudohydraulic in ppIn;
      pseudothermalh in pTIn;
      power in pFIn;
      pseudohydraulic out ppOut;
      pseudothermalh out pTOut;
      power out pFOut;
     restrictions
      causality fixed in ppOut;
      causality fixed in pFOut;
      causality fixed in ppIn;
      causality fixed in pTIn;
      causality fixed in pFIn;
    end;
    icon bg bottom
     figures
      text 'R' 352 336 color 0 53 bold;
      text 'IdealNozzle
CompFlow' 352 376 color 0 16;
     terminals
      Aeff 352 304 fixed;
      ppIn 320 320 fixed;
      pTIn 320 336 fixed;
      pFIn 320 352 fixed;
      ppOut 384 320 fixed;
      pTOut 384 336 fixed;
      pFOut 384 352 fixed;
    end;
    implementation eq
/* Ideal Nozzle Model
Uses ideal nozzle equation for compressible flows assuming isentropic process. 
Flow restriction field. No states.

Input 
  - Effective area of nozzle (Aeff)
  - p,T,F in
  - p,T,F out
Output
  - dm, dE, dmb in
  - dm, dE, dmb out

*/
parameters 
	real global fs;
	string global dll_ICE;
	string global dll_fcn_idealNozzle;
variables
	real pIn, TIn, FIn, pOut;
	real dm, dE, dmb;
	real aa, d, pr;
	real	inArrFlow[7];
	real outArrFlow[3];

equations
  // start typing here
 	aa = ppIn.e / ppOut.e;
	if (aa > 1) then
		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;
		pOut = ppOut.e;
	else
		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;
		pOut = ppIn.e;
	end;
	
	// Calculate thermodynamic properties from (T,P,x)
	inArrFlow = [1;Aeff;pIn;pOut;TIn;FIn;fs];
	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);	
	
	dm = outArrFlow[1]*d;
	dE = outArrFlow[2]*d;	
	dmb = outArrFlow[3]*d;
	ppIn.dm = dm;
	ppOut.dm  = dm;
	pTIn.dH = dE;
	pTOut.dH = dE;
	pFIn.f = dmb;
	pFOut.f = dmb;implementation_end;
  end;
  connections
   areaMultiplier -> MultiplyDivide1\multiply 448 248;
   CA -> ExhVVLift1\CA;
   dVONom -> ExhVVLift1\dCA_lift_nom;
   EffortSensor1\effort -> ExhVVArea\pIn 272 160 328 160;
   EffortSensor1\p2 => Submodel2\ppIn;
   EffortSensor2\effort -> ExhVVArea\pOut 416 160 352 160;
   EffortSensor2\p2 => PowerMux\input1;
   ExhVVArea\aEff -> MultiplyDivide1\multiply;
   ExhVVArea\Cd -> Cd;
   ExhVVLift1\lift -> ExhVVArea\lift;
   MultiplyDivide1\output -> Splitter1\input;
   PowerDemux\output1 => EffortSensor1\p1;
   PowerDemux\output2 => Submodel2\pTIn;
   PowerDemux\output3 => Submodel2\pFIn;
   PowerMux\output => pTFOut;
   pTFIn => PowerDemux\input;
   Splitter1\output -> aOpenEff;
   Splitter1\output -> Submodel2\Aeff;
   Submodel2\pFOut => PowerMux\input3;
   Submodel2\ppOut => EffortSensor2\p1;
   Submodel2\pTOut => PowerMux\input2;
   VONom -> ExhVVLift1\CA_start_nom;
  end;
  figures
   text 'Global parameters
      real global lift_max;     // Maximum lift of the vavle
      real global nstorke;     // number of stroke
      real hidden global CA_start_ref;        //Reference start CA for start of valve lift
      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed
      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed
      real hidden global dCA_lift_top_ref;   //Reference duration for lift up
      real global Dv;		 	// Valve Seat diameter
      real global beta;   	// valve seat angle
      real global w;      	// valve seat width
      real global Dp;    		// Valve port diameter
      real global Ds; 			// Valve stem diameter
      
' 288 504 color 0 16;
 implementation_end;
specification_end;
										specification 'ExhVVVarLift'
 description '<Information><Description><Version>4.6</Version><IsMainModel>1</IsMainModel><LibraryPath>Components\PoppetValve.emx</LibraryPath><TimeStamp>2016-4-1 23:10:28</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type Submodel
  ports
   power in pTFIn [3,1];
   signal in CA;
   signal in VONom;
   signal in dVONom;
   power out pTFOut [3,1];
   signal out aOpenEff;
   signal out Cd;
   signal in areaMultiplier;
 end;
 icon bg bottom shadow 11776947
  figures
   line 832 289 864 289 color 0 fill 15132390;
   line 832 289 832 337 color 0 fill 15132390;
   line 912 291 912 335 color 0 fill 15132390;
   line 880 289 912 289 color 0 fill 15132390;
   line 872 304 848 320 896 320 872 304 color 0 fill 8355711;
   line 864 289 864 297 848 305 840 305 840 337 832 337 color 0 fill 15132390;
   line 880 289 880 297 896 305 904 305 904 337 912 337 912 289 880 289 color 0 fill 12632256;
   line 864 289 832 289 832 337 840 337 840 305 848 305 864 297 864 289 color 0 fill 12632256;
   line 872 305 872 273 color 0 fill 15132390;
   text 'PoppetValve' 872 345 color 0 16;
  terminals
   pTFIn 816 312 fixed;
   CA 912 264 fixed;
   VONom 832 264 fixed;
   dVONom 856 264 fixed;
   pTFOut 928 312 fixed;
   aOpenEff 928 288 fixed;
   Cd 928 264 fixed;
   areaMultiplier 888 264 fixed;
 end;
 implementation bg
  submodels
   EffortSensor1 272 319
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      power knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;
      text 'e' 272.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   EffortSensor2 416 319
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      pseudohydraulic knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;
      text 'e' 416.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   IntakeVVArea 328.1 200.1
			specifications active 'Exhaust'
				specification 'Exhaust'
 description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:54:56</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;
   text 'VVArea' 328 200 color 0 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	integer global noExhVV;
	real global DvExh;		 	// Valve Seat diameter
	real global betaExh;   	// valve seat angle
	real global wExh;      	// valve seat width
	real global DpExh;    		// Valve port diameter
	real global DsExh; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then
			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));
		else 
			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then
				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);
			else
				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);
			end;
		end;
		
		L_Dv = lift/DvExh;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
				specification 'Intake'
description '<Information>
 <Description>
    <Version>4.6</Version>
  <LibraryPath>Components\ValveArea.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2016-4-4 11:12:58</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;
   text 'VVArea' 328 200 color 0 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	integer global noInVV; 		// numver of intake valves
	real global DvIntake;		 	// Valve Seat diameter
	real global betaIntake;   	// valve seat angle
	real global wIntake;      	// valve seat width
	real global DpIntake;    		// Valve port diameter
	real global DsIntake; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then
			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));
		else 
			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then
				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);
			else
				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);
			end;
		end;
		
		L_Dv = lift/DvIntake;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
			end;
   IntakeVVLift1 304 120
			specifications active 'ExhaustVarLift'
				specification 'Exhaust'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-11-2 23:44:24</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 763.9 96 836.1 128 fill 15132390;
   text 'VVLift' 800 112 16;
  terminals
   lift 800 136 fixed;
   CA 824 88 fixed;
   CA_start_nom 776 88 fixed;
   dCA_lift_nom 800 88 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox;
	string global fnc_interp;
	integer global ExhProfNoRow1;
	integer global ExhProfNoRow2;
	real global ExhVVProfUpX[ExhProfNoRow1];
	real global ExhVVProfUpY[ExhProfNoRow1];
	real global ExhVVProfDownX[ExhProfNoRow2];
	real global ExhVVProfDownY[ExhProfNoRow2];
	real global ExhLift_max;
	integer global nStroke;
	real global ExhCA_start_ref; //Reference start CA for start of valve lift
	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed
	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed
	real global ExhdCA_lift_top_ref; //Reference duration for lift up
variables
	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2
	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = ExhProfNoRow1;
	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 
	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;		
	inarr2[1] = ExhProfNoRow2;
	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 
	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			
equations
	CA_start = CA_start_nom*ExhCA_start_ref;
	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;	
	dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= ExhdCA_lift_up then
			inarr1[ExhProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then
							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);
							inarr2[ExhProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = ExhLift_max*lift;
 implementation_end;
specification_end;
				specification 'ExhaustVarLift'
 description '<Information>
 <Description>
    <Version>4.6</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2016-4-4 11:19:41</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
 <Attributes>
  <GlobalRelations></GlobalRelations>
 </Attributes>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 267.9 104 340.1 136 color 0 fill 15132390;
   text 'VVLift' 304 120 color 0 16;
  terminals
   lift 304 144 fixed;
   CA 328 96 fixed;
   CA_start_nom 280 96 fixed;
   dCA_lift_nom 304 96 fixed;
 end;
 implementation eq
parameters
	string global dllToolbox;
	string global fnc_interp;
	integer ExhProfNoRow1 = 30;
	integer ExhProfNoRow2 = 30;
	real global ExhVVProfUp[ExhProfNoRow1];
	real global ExhVVProfDown[ExhProfNoRow1];
	real global ExhLift_max;
	integer global nStroke;
	real global ExhCA_start_ref; //Reference start CA for start of valve lift
	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed
	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed
//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift up

variables
	real inarr1[ExhProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[ExhProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real CA_start_cyc;
	real dCA_total_ref;
	real phi;
	integer i;
	boolean reset;
initialequations
	CA_start_cyc = 720;
	reset = true;
	inarr1[1] = ExhProfNoRow1;
	for i = 1 to ExhProfNoRow1 do
		inarr1[i+1] = i / ExhProfNoRow1;
	end;
	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUp;		
	inarr2[1] = ExhProfNoRow2;
	for i = 1 to ExhProfNoRow2 do
		inarr2[i+1] = i / ExhProfNoRow2;
	end;	
	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDown;	
	dCA_total_ref = ExhdCA_lift_up + ExhdCA_lift_down;		
equations
	CA_start = CA_start_nom*ExhCA_start_ref;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and reset == true then
		reset = false;
		CA_start_cyc = CA_start;
		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);
		dCA_lift = dCA_total - dCA_total_ref;	
	end;
	if phi > CA_start_cyc then
		if phi < CA_start_cyc + dCA_total then
			CA_VV = (phi - CA_start_cyc)/ExhdCA_lift_up;
			if CA_VV <= 1 then
				inarr1[ExhProfNoRow1*2+2] = CA_VV;
				lift = dll(dllToolbox, fnc_interp, inarr1);
			else 	
				CA_VV = (phi - CA_start_cyc)/(ExhdCA_lift_up + dCA_lift);
				if CA_VV <= 1 then
					lift = 1;
			  	else 	
					CA_VV = (phi - (CA_start_cyc + ExhdCA_lift_up + dCA_lift))/ExhdCA_lift_down;
					inarr2[ExhProfNoRow2*2+2] = CA_VV;
					lift = dll(dllToolbox, fnc_interp,inarr2);
				end;
			end;
		else
			lift = 0;
		end;
	else
		lift = 0;	
		if reset == false then
			reset = true;
			CA_start_cyc = 720;
		end;							
	end;			
	lift = ExhLift_max*lift;
 implementation_end;
specification_end;
				specification 'Intake'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:16:35</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 267.9 96 340.1 128 color 0 fill 15132390;
   text 'VVLift' 304 112 color 0 16;
  terminals
   lift 304 136 fixed;
   CA 328 88 fixed;
   CA_start_nom 280 88 fixed;
   dCA_lift_nom 304 88 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox = 'dllTool20Sim.dll';
	string global fnc_interp = 'interpolate';
	integer global InProfNoRow1;
	integer global InProfNoRow2;
	real global InVVProfUpX[InProfNoRow1]; 
	real global InVVProfUpY[InProfNoRow1];
	real global InVVProfDownX[InProfNoRow2];
	real global InVVProfDownY[InProfNoRow2];
	real global InLift_max = 1;
	real global nstorke = 0;
	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift
	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed
	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed
	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift up
variables
	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = InProfNoRow1;
	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 
	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;		
	inarr2[1] = InProfNoRow2;
	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 
	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			
equations
	CA_start = CA_start_nom*InCA_start_ref;
	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;	
	dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;
	phi = CA*180/pi mod (nstorke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= IndCA_lift_up then
			inarr1[InProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= IndCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then
							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);
							inarr2[InProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = InLift_max*lift;
 implementation_end;
specification_end;
				specification 'IntakeLiftVar'
description '<Information><Description><Version>4.6</Version><LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2016-4-1 23:07:16</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 267.9 104 340.1 136 color 0 fill 15132390;
   text 'VVLift' 304 120 color 0 16;
  terminals
   lift 304 144 fixed;
   CA 328 96 fixed;
   CA_start_nom 280 96 fixed;
   dCA_lift_nom 304 96 fixed;
 end;
 implementation eq
parameters
	string global dllToolbox;
	string global fnc_interp;	
	integer global InProfNoRow1;
	integer global InProfNoRow2;
	real global InVVProfUp[InProfNoRow1];
	real global InVVProfDown[InProfNoRow1];
	real global InLift_max;
	real global nStroke;
	real global InCA_start_ref; //Reference start CA for start of valve lift
	real global IndCA_lift_up;	 //Lift up time (should not be changed unless file is changed
	real global IndCA_lift_down; //Lift down time (should not be changed unless file is changed
//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift up

variables
	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real CA_start_cyc;
	real dCA_total_ref;
	real phi;
	integer i;
	boolean reset;
initialequations
	CA_start_cyc = 180*nStroke;
	reset = true;
	inarr1[1] = InProfNoRow1;
	for i = 1 to InProfNoRow1 do
		inarr1[i+1] = i / InProfNoRow1;
	end;
	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUp;		
	inarr2[1] = InProfNoRow2;
	for i = 1 to InProfNoRow2 do
		inarr2[i+1] = i / InProfNoRow2;
	end;	
	inarr2[InProfNoRow2+2:InProfNoRow2*2+1] = InVVProfDown;	
	dCA_total_ref = IndCA_lift_up + IndCA_lift_down;		
equations
	CA_start = CA_start_nom*InCA_start_ref;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and reset == true then
		reset = false;
		CA_start_cyc = CA_start;
		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);
		dCA_lift = dCA_total - dCA_total_ref;	
	end;
	if phi > CA_start_cyc then
		if phi < CA_start_cyc + dCA_total then
			CA_VV = (phi - CA_start_cyc)/IndCA_lift_up;
			if CA_VV <= 1 then
				inarr1[InProfNoRow1*2+2] = CA_VV;
				lift = dll(dllToolbox, fnc_interp, inarr1);
			else 	
				CA_VV = (phi - CA_start_cyc)/(IndCA_lift_up + dCA_lift);
				if CA_VV <= 1 then
					lift = 1;
			  	else 	
					CA_VV = (phi - (CA_start_cyc + IndCA_lift_up + dCA_lift))/IndCA_lift_down;
					inarr2[InProfNoRow2*2+2] = CA_VV;
					lift = dll(dllToolbox, fnc_interp,inarr2);
				end;
			end;
		else
			lift = 0;
		end;
	else
		lift = 0;	
		if reset == false then
			reset = true;
			CA_start_cyc = 720;
		end;							
	end;			
	lift = InLift_max*lift;
 implementation_end;
specification_end;
			end;
   MultiplyDivide1 352 248
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:14:59</TimeStamp>
</Description>';
    knot MultiplyDivide
     ports
      signal knot duplicatable in multiply [1];
      signal knot duplicatable in divide [1];
      signal knot out output [1];
    end;
    icon bg ellipse
     figures
      ellipse 344 240 360 256 color 0 fill 16777215;
    end;
    implementation eq
equations
	output = mul (collect (multiply)) ./ mul (collect (divide));
     implementation_end;
   plug pTFOut 504 336;
   plug aOpenEff 520.1 280;
   plug areaMultiplier 448 32;
   plug pTFIn 200 336;
   plug dVONom 304 56;
   plug VONom 280.1 32;
   plug CA 327.8 69.9;
   plug Cd 328 264;
   PowerDemux 241.5 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 240 312 240 360 color 0 width 2;
   rectangle 235 320 243 352 color -1;
   text '3' 244 346 color 8421504 8;
  terminals
   output1 240 320 fixed;
   output2 240 336 fixed;
   output3 240 352 fixed;
   input 232 336 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 449.5 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 448 312 448 360 color 0 width 2;
   rectangle 443 312 451 344 color -1;
   text '3' 452 338 color 8421504 8;
  terminals
   input1 448 320 fixed;
   input2 448 336 fixed;
   input3 448 352 fixed;
   output 456 336 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Splitter1 352 280
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;
      ellipse 347.7 275.7 356.3 284.3 color -1;
     terminals
      input 352 280 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Submodel2 352 359.5
    description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-6-22 16:30:00</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
 </Description>
</Information>';
    type Submodel
     ports
      signal in Aeff; "Effective area of nozzle (m2)"
      pseudohydraulic in ppIn;
      pseudothermalh in pTIn;
      power in pFIn;
      pseudohydraulic out ppOut;
      pseudothermalh out pTOut;
      power out pFOut;
     restrictions
      causality fixed in ppOut;
      causality fixed in pFOut;
      causality fixed in ppIn;
      causality fixed in pTIn;
      causality fixed in pFIn;
    end;
    icon bg bottom
     figures
      text 'R' 352 336 color 0 53 bold;
      text 'IdealNozzle
CompFlow' 352 376 color 0 16;
     terminals
      Aeff 352 304 fixed;
      ppIn 320 320 fixed;
      pTIn 320 336 fixed;
      pFIn 320 352 fixed;
      ppOut 384 320 fixed;
      pTOut 384 336 fixed;
      pFOut 384 352 fixed;
    end;
    implementation eq
/* Ideal Nozzle Model
Uses ideal nozzle equation for compressible flows assuming isentropic process. 
Flow restriction field. No states.

Input 
  - Effective area of nozzle (Aeff)
  - p,T,F in
  - p,T,F out
Output
  - dm, dE, dmb in
  - dm, dE, dmb out

*/
parameters 
	real global fs;
	string global dll_ICE;
	string global dll_fcn_idealNozzle;
variables
	real pIn, TIn, FIn, pOut;
	real dm, dE, dmb;
	real aa, d, pr;
	real	inArrFlow[7];
	real outArrFlow[3];

equations
  // start typing here
 	aa = ppIn.e / ppOut.e;
	if (aa > 1) then
		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;
		pOut = ppOut.e;
	else
		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;
		pOut = ppIn.e;
	end;
	
	// Calculate thermodynamic properties from (T,P,x)
	inArrFlow = [1;Aeff;pIn;pOut;TIn;FIn;fs];
	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);	
	
	dm = outArrFlow[1]*d;
	dE = outArrFlow[2]*d;	
	dmb = outArrFlow[3]*d;
	ppIn.dm = dm;
	ppOut.dm  = dm;
	pTIn.dH = dE;
	pTOut.dH = dE;
	pFIn.f = dmb;
	pFOut.f = dmb;implementation_end;
  end;
  connections
   areaMultiplier -> MultiplyDivide1\multiply 448 248;
   CA -> IntakeVVLift1\CA;
   dVONom -> IntakeVVLift1\dCA_lift_nom;
   EffortSensor1\effort -> IntakeVVArea\pIn 272 160 328 160;
   EffortSensor1\p2 => Submodel2\ppIn;
   EffortSensor2\effort -> IntakeVVArea\pOut 416 160 352 160;
   EffortSensor2\p2 => PowerMux\input1;
   IntakeVVArea\aEff -> MultiplyDivide1\multiply;
   IntakeVVArea\Cd -> Cd;
   IntakeVVLift1\lift -> IntakeVVArea\lift;
   MultiplyDivide1\output -> Splitter1\input;
   PowerDemux\output1 => EffortSensor1\p1;
   PowerDemux\output2 => Submodel2\pTIn;
   PowerDemux\output3 => Submodel2\pFIn;
   PowerMux\output => pTFOut;
   pTFIn => PowerDemux\input;
   Splitter1\output -> aOpenEff;
   Splitter1\output -> Submodel2\Aeff;
   Submodel2\pFOut => PowerMux\input3;
   Submodel2\ppOut => EffortSensor2\p1;
   Submodel2\pTOut => PowerMux\input2;
   VONom -> IntakeVVLift1\CA_start_nom;
  end;
  figures
   text 'Global parameters
      real global lift_max;     // Maximum lift of the vavle
      real global nstorke;     // number of stroke
      real hidden global CA_start_ref;        //Reference start CA for start of valve lift
      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed
      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed
      real hidden global dCA_lift_top_ref;   //Reference duration for lift up
      real global Dv;		 	// Valve Seat diameter
      real global beta;   	// valve seat angle
      real global w;      	// valve seat width
      real global Dp;    		// Valve port diameter
      real global Ds; 			// Valve stem diameter
      
' 288 504 color 0 16;
 implementation_end;
specification_end;
										specification 'IntakeVV'
description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>Components\PoppetValve.emx</LibraryPath><TimeStamp>2015-10-20 15:58:52</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type Submodel
  ports
   power in pTFIn [3,1];
   signal in CA;
   signal in VONom;
   signal in dVONom;
   power out pTFOut [3,1];
   signal out aOpenEff;
   signal out Cd;
   signal in areaMultiplier;
 end;
 icon bg bottom shadow 11776947
  figures
   line 488 289 520 289 color 0 fill 15132390;
   line 488 289 488 337 color 0 fill 15132390;
   line 568 291 568 335 color 0 fill 15132390;
   line 536 289 568 289 color 0 fill 15132390;
   line 528 304 504 320 552 320 528 304 color 0 fill 8355711;
   line 520 289 520 297 504 305 496 305 496 337 488 337 color 0 fill 15132390;
   line 536 289 536 297 552 305 560 305 560 337 568 337 568 289 536 289 color 0 fill 12632256;
   line 520 289 488 289 488 337 496 337 496 305 504 305 520 297 520 289 color 0 fill 12632256;
   line 528 305 528 273 color 0 fill 15132390;
   text 'PoppetValve' 528 345 color 0 16;
  terminals
   pTFIn 472 312 fixed;
   CA 568 264 fixed;
   VONom 488 264 fixed;
   dVONom 512 264 fixed;
   pTFOut 584 312 fixed;
   aOpenEff 584 288 fixed;
   Cd 584 264 fixed;
   areaMultiplier 544 264 fixed;
 end;
 implementation bg
  submodels
   EffortSensor1 272 320
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      power knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;
      text 'e' 272.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   EffortSensor2 416 320
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      pseudohydraulic knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;
      text 'e' 416.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   ExhVVLift1 304 112
			specifications active 'Intake'
				specification 'Exhaust'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-11-2 23:44:24</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 763.9 96 836.1 128 fill 15132390;
   text 'VVLift' 800 112 16;
  terminals
   lift 800 136 fixed;
   CA 824 88 fixed;
   CA_start_nom 776 88 fixed;
   dCA_lift_nom 800 88 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox;
	string global fnc_interp;
	integer global ExhProfNoRow1;
	integer global ExhProfNoRow2;
	real global ExhVVProfUpX[ExhProfNoRow1];
	real global ExhVVProfUpY[ExhProfNoRow1];
	real global ExhVVProfDownX[ExhProfNoRow2];
	real global ExhVVProfDownY[ExhProfNoRow2];
	real global ExhLift_max;
	integer global nStroke;
	real global ExhCA_start_ref; //Reference start CA for start of valve lift
	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed
	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed
	real global ExhdCA_lift_top_ref; //Reference duration for lift up
variables
	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2
	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = ExhProfNoRow1;
	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 
	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;		
	inarr2[1] = ExhProfNoRow2;
	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 
	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			
equations
	CA_start = CA_start_nom*ExhCA_start_ref;
	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;	
	dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= ExhdCA_lift_up then
			inarr1[ExhProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then
							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);
							inarr2[ExhProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = ExhLift_max*lift;
 implementation_end;
specification_end;
				specification 'Intake'
 description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:16:35</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 267.9 96 340.1 128 color 0 fill 15132390;
   text 'VVLift' 304 112 color 0 16;
  terminals
   lift 304 136 fixed;
   CA 328 88 fixed;
   CA_start_nom 280 88 fixed;
   dCA_lift_nom 304 88 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox = 'dllTool20Sim.dll';
	string global fnc_interp = 'interpolate';
	integer global InProfNoRow1;
	integer global InProfNoRow2;
	real global InVVProfUpX[InProfNoRow1]; 
	real global InVVProfUpY[InProfNoRow1];
	real global InVVProfDownX[InProfNoRow2];
	real global InVVProfDownY[InProfNoRow2];
	real global InLift_max = 1;
	real global nstorke = 0;
	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift
	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed
	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed
	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift up
variables
	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = InProfNoRow1;
	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 
	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;		
	inarr2[1] = InProfNoRow2;
	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 
	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			
equations
	CA_start = CA_start_nom*InCA_start_ref;
	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;	
	dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;
	phi = CA*180/pi mod (nstorke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= IndCA_lift_up then
			inarr1[InProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= IndCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then
							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);
							inarr2[InProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = InLift_max*lift;
 implementation_end;
specification_end;
			end;
   IntakeVVArea 328.1 200.1
			specifications active 'Intake'
				specification 'Exhaust'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:54:56</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 fill 15132390;
   text 'VVArea' 328 200 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	real global DvExh;		 	// Valve Seat diameter
	real global betaExh;   	// valve seat angle
	real global wExh;      	// valve seat width
	real global DpExh;    		// Valve port diameter
	real global DsExh; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then
			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));
		else 
			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then
				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);
			else
				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);
			end;
		end;
		
		L_Dv = lift/DvExh;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
				specification 'Intake'
 description '<Information><Description><Version>4.5</Version><LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2015-6-22 22:48:36</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;
   text 'VVArea' 328 200 color 0 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	real global DvIntake;		 	// Valve Seat diameter
	real global betaIntake;   	// valve seat angle
	real global wIntake;      	// valve seat width
	real global DpIntake;    		// Valve port diameter
	real global DsIntake; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then
			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));
		else 
			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then
				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);
			else
				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);
			end;
		end;
		
		L_Dv = lift/DvIntake;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
			end;
   MultiplyDivide1 352 248
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:14:59</TimeStamp>
</Description>';
    knot MultiplyDivide
     ports
      signal knot duplicatable in multiply [1];
      signal knot duplicatable in divide [1];
      signal knot out output [1];
    end;
    icon bg ellipse
     figures
      ellipse 344 240 360 256 color 0 fill 16777215;
    end;
    implementation eq
equations
	output = mul (collect (multiply)) ./ mul (collect (divide));
     implementation_end;
   plug pTFOut 504 336;
   plug aOpenEff 520.1 280;
   plug areaMultiplier 448 32;
   plug pTFIn 200 336;
   plug dVONom 304 56;
   plug VONom 280.1 32;
   plug CA 327.8 69.9;
   plug Cd 328 264;
   PowerDemux 240 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 240 312 240 360 color 0 width 2;
   rectangle 235 320 243 352 color -1;
   text '3' 244 346 color 8421504 8;
  terminals
   output1 240 320 fixed;
   output2 240 336 fixed;
   output3 240 352 fixed;
   input 232 336 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 448 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 448 312 448 360 color 0 width 2;
   rectangle 443 312 451 344 color -1;
   text '3' 452 338 color 8421504 8;
  terminals
   input1 448 320 fixed;
   input2 448 336 fixed;
   input3 448 352 fixed;
   output 456 336 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Splitter1 352 280
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;
      ellipse 347.7 275.7 356.3 284.3 color -1;
     terminals
      input 352 280 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Submodel2 352 351
    description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-6-22 16:30:00</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
 </Description>
</Information>';
    type Submodel
     ports
      signal in Aeff; "Effective area of nozzle (m2)"
      pseudohydraulic in ppIn;
      pseudothermalh in pTIn;
      power in pFIn;
      pseudohydraulic out ppOut;
      pseudothermalh out pTOut;
      power out pFOut;
     restrictions
      causality fixed in ppOut;
      causality fixed in pFOut;
      causality fixed in ppIn;
      causality fixed in pTIn;
      causality fixed in pFIn;
    end;
    icon bg bottom
     figures
      text 'R' 352 336 color 0 53 bold;
      text 'IdealNozzle
CompFlow' 352 376 color 0 16;
     terminals
      Aeff 352 304 fixed;
      ppIn 320 320 fixed;
      pTIn 320 336 fixed;
      pFIn 320 352 fixed;
      ppOut 384 320 fixed;
      pTOut 384 336 fixed;
      pFOut 384 352 fixed;
    end;
    implementation eq
/* Ideal Nozzle Model
Uses ideal nozzle equation for compressible flows assuming isentropic process. 
Flow restriction field. No states.

Input 
  - Effective area of nozzle (Aeff)
  - p,T,F in
  - p,T,F out
Output
  - dm, dE, dmb in
  - dm, dE, dmb out

*/
parameters 
	real global fs;
	string global dll_ICE;
	string global dll_fcn_idealNozzle;
variables
	real pIn, TIn, FIn, pOut;
	real dm, dE, dmb;
	real aa, d, pr;
	real	inArrFlow[4];
	real outArrFlow[3];

equations
  // start typing here
 	aa = ppIn.e / ppOut.e;
	if (aa > 1) then
		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;
		pOut = ppOut.e;
	else
		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;
		pOut = ppIn.e;
	end;
	
	// Calculate thermodynamic properties from (T,P,x)
	inArrFlow = [1,Aeff,pIn,TIn,FIn,pOut,fs];
	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);	
	
	dm = outArrFlow[1]*d;
	dE = outArrFlow[2]*d;	
	dmb = outArrFlow[3]*d;
	ppIn.dm = dm;
	ppOut.dm  = dm;
	pTIn.dH = dE;
	pTOut.dH = dE;
	pFIn.f = dmb;
	pFOut.f = dmb;implementation_end;
  end;
  connections
   areaMultiplier -> MultiplyDivide1\multiply 448 248;
   CA -> ExhVVLift1\CA;
   dVONom -> ExhVVLift1\dCA_lift_nom;
   EffortSensor1\effort -> IntakeVVArea\pIn 272 160 328 160;
   EffortSensor1\p2 => Submodel2\ppIn;
   EffortSensor2\effort -> IntakeVVArea\pOut 416 160 352 160;
   EffortSensor2\p2 => PowerMux\input1;
   ExhVVLift1\lift -> IntakeVVArea\lift;
   IntakeVVArea\aEff -> MultiplyDivide1\multiply;
   IntakeVVArea\Cd -> Cd;
   MultiplyDivide1\output -> Splitter1\input;
   PowerDemux\output1 => EffortSensor1\p1;
   PowerDemux\output2 => Submodel2\pTIn;
   PowerDemux\output3 => Submodel2\pFIn;
   PowerMux\output => pTFOut;
   pTFIn => PowerDemux\input;
   Splitter1\output -> aOpenEff;
   Splitter1\output -> Submodel2\Aeff;
   Submodel2\pFOut => PowerMux\input3;
   Submodel2\ppOut => EffortSensor2\p1;
   Submodel2\pTOut => PowerMux\input2;
   VONom -> ExhVVLift1\CA_start_nom;
  end;
  figures
   text 'Global parameters
      real global lift_max;     // Maximum lift of the vavle
      real global nstorke;     // number of stroke
      real hidden global CA_start_ref;        //Reference start CA for start of valve lift
      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed
      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed
      real hidden global dCA_lift_top_ref;   //Reference duration for lift up
      real global Dv;		 	// Valve Seat diameter
      real global beta;   	// valve seat angle
      real global w;      	// valve seat width
      real global Dp;    		// Valve port diameter
      real global Ds; 			// Valve stem diameter
      
' 288 504 color 0 16;
 implementation_end;
specification_end;
										specification 'IntakeVVVarLift'
description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>Components\PoppetValve.emx</LibraryPath><TimeStamp>2015-10-20 15:58:52</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type Submodel
  ports
   power in pTFIn [3,1];
   signal in CA;
   signal in VONom;
   signal in dVONom;
   power out pTFOut [3,1];
   signal out aOpenEff;
   signal out Cd;
   signal in areaMultiplier;
 end;
 icon bg bottom shadow 11776947
  figures
   line 488 289 520 289 color 0 fill 15132390;
   line 488 289 488 337 color 0 fill 15132390;
   line 568 291 568 335 color 0 fill 15132390;
   line 536 289 568 289 color 0 fill 15132390;
   line 528 304 504 320 552 320 528 304 color 0 fill 8355711;
   line 520 289 520 297 504 305 496 305 496 337 488 337 color 0 fill 15132390;
   line 536 289 536 297 552 305 560 305 560 337 568 337 568 289 536 289 color 0 fill 12632256;
   line 520 289 488 289 488 337 496 337 496 305 504 305 520 297 520 289 color 0 fill 12632256;
   line 528 305 528 273 color 0 fill 15132390;
   text 'PoppetValve' 528 345 color 0 16;
  terminals
   pTFIn 472 312 fixed;
   CA 568 264 fixed;
   VONom 488 264 fixed;
   dVONom 512 264 fixed;
   pTFOut 584 312 fixed;
   aOpenEff 584 288 fixed;
   Cd 584 264 fixed;
   areaMultiplier 544 264 fixed;
 end;
 implementation bg
  submodels
   EffortSensor1 272 320
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      power knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;
      text 'e' 272.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   EffortSensor2 416 320
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      pseudohydraulic knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;
      text 'e' 416.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   IntakeVVArea 328.1 200.1
			specifications active 'Intake'
				specification 'Exhaust'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:54:56</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 fill 15132390;
   text 'VVArea' 328 200 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	real global DvExh;		 	// Valve Seat diameter
	real global betaExh;   	// valve seat angle
	real global wExh;      	// valve seat width
	real global DpExh;    		// Valve port diameter
	real global DsExh; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then
			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));
		else 
			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then
				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);
			else
				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);
			end;
		end;
		
		L_Dv = lift/DvExh;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
				specification 'Intake'
 description '<Information><Description><Version>4.5</Version><LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2015-6-22 22:48:36</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;
   text 'VVArea' 328 200 color 0 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	real global noInVV;
	real global DvIntake;		 	// Valve Seat diameter
	real global betaIntake;   	// valve seat angle
	real global wIntake;      	// valve seat width
	real global DpIntake;    		// Valve port diameter
	real global DsIntake; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then
			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));
		else 
			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then
				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);
			else
				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);
			end;
		end;
		
		L_Dv = lift/DvIntake;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*noInVV*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
			end;
   IntakeVVLift1 304 120
			specifications active 'IntakeLiftVar'
				specification 'Exhaust'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-11-2 23:44:24</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 763.9 96 836.1 128 fill 15132390;
   text 'VVLift' 800 112 16;
  terminals
   lift 800 136 fixed;
   CA 824 88 fixed;
   CA_start_nom 776 88 fixed;
   dCA_lift_nom 800 88 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox;
	string global fnc_interp;
	integer global ExhProfNoRow1;
	integer global ExhProfNoRow2;
	real global ExhVVProfUpX[ExhProfNoRow1];
	real global ExhVVProfUpY[ExhProfNoRow1];
	real global ExhVVProfDownX[ExhProfNoRow2];
	real global ExhVVProfDownY[ExhProfNoRow2];
	real global ExhLift_max;
	integer global nStroke;
	real global ExhCA_start_ref; //Reference start CA for start of valve lift
	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed
	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed
	real global ExhdCA_lift_top_ref; //Reference duration for lift up
variables
	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2
	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = ExhProfNoRow1;
	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 
	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;		
	inarr2[1] = ExhProfNoRow2;
	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 
	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			
equations
	CA_start = CA_start_nom*ExhCA_start_ref;
	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;	
	dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= ExhdCA_lift_up then
			inarr1[ExhProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then
							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);
							inarr2[ExhProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = ExhLift_max*lift;
 implementation_end;
specification_end;
				specification 'ExhaustVarLift'
description '<Information><Description><Version>4.5</Version><LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2015-10-20 15:16:35</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 355.9 256 428.1 288 color 0 fill 15132390;
   text 'VVLift' 392 272 color 0 16;
  terminals
   lift 392 296 fixed;
   CA 416 248 fixed;
   CA_start_nom 368 248 fixed;
   dCA_lift_nom 392 248 fixed;
 end;
 implementation eq
parameters
	string dllToolbox = 'C:\Users\yum\Documents\GitHub\20SimToolBox\dll20SimToolVS10\Release\dll20SimToolVS10';
	string global fnc_interp = 'interpolate';
	integer global ExhProfNoRow1 = 30;
	integer global ExhProfNoRow2 = 30;
	real global ExhVVProfUp[ExhProfNoRow1] = [
			0;
			0.007;
			0.021;
			0.046;
			0.07;
			0.105;
			0.161;
			0.211;
			0.267;
			0.323;
			0.372;
			0.435;
			0.491;
			0.547;
			0.604;
			0.653;
			0.702;
			0.744;
			0.782;
			0.818;
			0.853;
			0.884;
			0.909;
			0.93;
			0.951;
			0.965;
			0.979;
			0.989;
			0.996;
			1];
	real global ExhVVProfDown[ExhProfNoRow1] = [
			1;
			0.996;
			0.993;
			0.982;
			0.972;
			0.958;
			0.937;
			0.912;
			0.884;
			0.856;
			0.821;
			0.786;
			0.744;
			0.702;
			0.656;
			0.614;
			0.565;
			0.509;
			0.442;
			0.379;
			0.319;
			0.253;
			0.196;
			0.14;
			0.095;
			0.06;
			0.032;
			0.018;
			0.006;
			0];
	real global ExhLift_max = 0.01425;
	real global nStroke = 4;
	real hidden global ExhCA_start_ref = 130; //Reference start CA for start of valve lift
	real hidden global ExhdCA_lift_up = 123;	 //Lift up time (should not be changed unless file is changed
	real hidden global ExhdCA_lift_down = 123; //Lift down time (should not be changed unless file is changed
//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift up

variables
	real inarr1[ExhProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[ExhProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real CA_start_cyc;
	real dCA_total_ref;
	real phi;
	integer i;
	boolean reset;
initialequations
	CA_start_cyc = 720;
	reset = true;
	inarr1[1] = ExhProfNoRow1;
	for i = 1 to ExhProfNoRow1 do
		inarr1[i+1] = i / ExhProfNoRow1;
	end;
	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUp;		
	inarr2[1] = ExhProfNoRow2;
	for i = 1 to ExhProfNoRow2 do
		inarr2[i+1] = i / ExhProfNoRow2;
	end;	
	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDown;	
	dCA_total_ref = ExhdCA_lift_up + ExhdCA_lift_down;		
equations
	CA_start = CA_start_nom*ExhCA_start_ref;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and reset == true then
		reset = false;
		CA_start_cyc = CA_start;
		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);
		dCA_lift = dCA_total - dCA_total_ref;	
	end;
	if phi > CA_start_cyc then
		if phi < CA_start_cyc + dCA_total then
			CA_VV = (phi - CA_start_cyc)/ExhdCA_lift_up;
			if CA_VV <= 1 then
				inarr1[ExhProfNoRow1*2+2] = CA_VV;
				lift = dll(dllToolbox, fnc_interp, inarr1);
			else 	
				CA_VV = (phi - CA_start_cyc)/(ExhdCA_lift_up + dCA_lift);
				if CA_VV <= 1 then
					lift = 1;
			  	else 	
					CA_VV = (phi - (CA_start_cyc + ExhdCA_lift_up + dCA_lift))/ExhdCA_lift_down;
					inarr2[ExhProfNoRow2*2+2] = CA_VV;
					lift = dll(dllToolbox, fnc_interp,inarr2);
				end;
			end;
		else
			lift = 0;
		end;
	else
		lift = 0;	
		if reset == false then
			reset = true;
			CA_start_cyc = 720;
		end;							
	end;			
	lift = ExhLift_max*lift;
 implementation_end;
specification_end;
				specification 'Intake'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:16:35</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 267.9 96 340.1 128 color 0 fill 15132390;
   text 'VVLift' 304 112 color 0 16;
  terminals
   lift 304 136 fixed;
   CA 328 88 fixed;
   CA_start_nom 280 88 fixed;
   dCA_lift_nom 304 88 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox = 'dllTool20Sim.dll';
	string global fnc_interp = 'interpolate';
	integer global InProfNoRow1;
	integer global InProfNoRow2;
	real global InVVProfUpX[InProfNoRow1]; 
	real global InVVProfUpY[InProfNoRow1];
	real global InVVProfDownX[InProfNoRow2];
	real global InVVProfDownY[InProfNoRow2];
	real global InLift_max = 1;
	real global nstorke = 0;
	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift
	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed
	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed
	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift up
variables
	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = InProfNoRow1;
	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 
	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;		
	inarr2[1] = InProfNoRow2;
	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 
	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			
equations
	CA_start = CA_start_nom*InCA_start_ref;
	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;	
	dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;
	phi = CA*180/pi mod (nstorke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= IndCA_lift_up then
			inarr1[InProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= IndCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then
							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);
							inarr2[InProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = InLift_max*lift;
 implementation_end;
specification_end;
				specification 'IntakeLiftVar'
 description '<Information><Description><Version>4.6</Version><LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2016-4-1 23:07:16</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 267.9 104 340.1 136 color 0 fill 15132390;
   text 'VVLift' 304 120 color 0 16;
  terminals
   lift 304 144 fixed;
   CA 328 96 fixed;
   CA_start_nom 280 96 fixed;
   dCA_lift_nom 304 96 fixed;
 end;
 implementation eq
parameters
	string dllToolbox = 'C:\Users\yum\Documents\GitHub\20SimToolBox\dll20SimToolVS10\Release\dll20SimToolVS10';
	string global fnc_interp = 'interpolate';
	integer global InProfNoRow1 = 30;
	integer global InProfNoRow2 = 30;
	real global InVVProfUp[InProfNoRow1] = [0;0.007;0.021;0.046;0.070;0.105;0.161;0.211;0.267;0.323;
														  0.372;0.435;0.491;0.547;0.604;0.653;0.702;0.744;0.782;0.818;
														  0.853;0.884;0.909;0.930;0.951;0.965;0.979;0.989;0.996;1];
	real global InVVProfDown[InProfNoRow1] = [1;0.996;0.993;0.982;0.972;0.958;0.937;0.912;0.884;0.856;
														0.821;0.786;0.744;0.702;0.656;0.614;0.565;0.509;0.442;0.379;
														0.319;0.253;0.196;0.140;0.095;0.060;0.032;0.018;0.006;0];
	real global InLift_max = 0.014;
	real global nStroke = 4;
	real hidden global InCA_start_ref = 343; //Reference start CA for start of valve lift
	real hidden global IndCA_lift_up = 121;	 //Lift up time (should not be changed unless file is changed
	real hidden global IndCA_lift_down = 121; //Lift down time (should not be changed unless file is changed
//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift up

variables
	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real CA_start_cyc;
	real dCA_total_ref;
	real phi;
	integer i;
	boolean reset;
initialequations
	CA_start_cyc = 720;
	reset = true;
	inarr1[1] = InProfNoRow1;
	for i = 1 to InProfNoRow1 do
		inarr1[i+1] = i / InProfNoRow1;
	end;
	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUp;		
	inarr2[1] = InProfNoRow2;
	for i = 1 to InProfNoRow2 do
		inarr2[i+1] = i / InProfNoRow2;
	end;	
	inarr2[InProfNoRow2+2:InProfNoRow2*2+1] = InVVProfDown;	
	dCA_total_ref = IndCA_lift_up + IndCA_lift_down;		
equations
	CA_start = CA_start_nom*InCA_start_ref;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and reset == true then
		reset = false;
		CA_start_cyc = CA_start;
		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);
		dCA_lift = dCA_total - dCA_total_ref;	
	end;
	if phi > CA_start_cyc then
		if phi < CA_start_cyc + dCA_total then
			CA_VV = (phi - CA_start_cyc)/IndCA_lift_up;
			if CA_VV <= 1 then
				inarr1[InProfNoRow1*2+2] = CA_VV;
				lift = dll(dllToolbox, fnc_interp, inarr1);
			else 	
				CA_VV = (phi - CA_start_cyc)/(IndCA_lift_up + dCA_lift);
				if CA_VV <= 1 then
					lift = 1;
			  	else 	
					CA_VV = (phi - (CA_start_cyc + IndCA_lift_up + dCA_lift))/IndCA_lift_down;
					inarr2[InProfNoRow2*2+2] = CA_VV;
					lift = dll(dllToolbox, fnc_interp,inarr2);
				end;
			end;
		else
			lift = 0;
		end;
	else
		lift = 0;	
		if reset == false then
			reset = true;
			CA_start_cyc = 720;
		end;							
	end;			
	lift = InLift_max*lift;
 implementation_end;
specification_end;
			end;
   MultiplyDivide1 352 248
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:14:59</TimeStamp>
</Description>';
    knot MultiplyDivide
     ports
      signal knot duplicatable in multiply [1];
      signal knot duplicatable in divide [1];
      signal knot out output [1];
    end;
    icon bg ellipse
     figures
      ellipse 344 240 360 256 color 0 fill 16777215;
    end;
    implementation eq
equations
	output = mul (collect (multiply)) ./ mul (collect (divide));
     implementation_end;
   plug pTFOut 504 336;
   plug aOpenEff 520.1 280;
   plug areaMultiplier 448 32;
   plug pTFIn 200 336;
   plug dVONom 304 56;
   plug VONom 280.1 32;
   plug CA 327.8 69.9;
   plug Cd 328 264;
   PowerDemux 240 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 240 312 240 360 color 0 width 2;
   rectangle 235 320 243 352 color -1;
   text '3' 244 346 color 8421504 8;
  terminals
   output1 240 320 fixed;
   output2 240 336 fixed;
   output3 240 352 fixed;
   input 232 336 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 448 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 448 312 448 360 color 0 width 2;
   rectangle 443 312 451 344 color -1;
   text '3' 452 338 color 8421504 8;
  terminals
   input1 448 320 fixed;
   input2 448 336 fixed;
   input3 448 352 fixed;
   output 456 336 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Splitter1 352 280
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;
      ellipse 347.7 275.7 356.3 284.3 color -1;
     terminals
      input 352 280 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Submodel2 352 351
    description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-6-22 16:30:00</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
 </Description>
</Information>';
    type Submodel
     ports
      signal in Aeff; "Effective area of nozzle (m2)"
      pseudohydraulic in ppIn;
      pseudothermalh in pTIn;
      power in pFIn;
      pseudohydraulic out ppOut;
      pseudothermalh out pTOut;
      power out pFOut;
     restrictions
      causality fixed in ppOut;
      causality fixed in pFOut;
      causality fixed in ppIn;
      causality fixed in pTIn;
      causality fixed in pFIn;
    end;
    icon bg bottom
     figures
      text 'R' 352 336 color 0 53 bold;
      text 'IdealNozzle
CompFlow' 352 376 color 0 16;
     terminals
      Aeff 352 304 fixed;
      ppIn 320 320 fixed;
      pTIn 320 336 fixed;
      pFIn 320 352 fixed;
      ppOut 384 320 fixed;
      pTOut 384 336 fixed;
      pFOut 384 352 fixed;
    end;
    implementation eq
/* Ideal Nozzle Model
Uses ideal nozzle equation for compressible flows assuming isentropic process. 
Flow restriction field. No states.

Input 
  - Effective area of nozzle (Aeff)
  - p,T,F in
  - p,T,F out
Output
  - dm, dE, dmb in
  - dm, dE, dmb out

*/
parameters 
	real global fs;
	string global dll_ICE;
	string global dll_fcn_idealNozzle;
variables
	real pIn, TIn, FIn, pOut;
	real dm, dE, dmb;
	real aa, d, pr;
	real	inArrFlow[4];
	real outArrFlow[3];

equations
  // start typing here
 	aa = ppIn.e / ppOut.e;
	if (aa > 1) then
		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;
		pOut = ppOut.e;
	else
		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;
		pOut = ppIn.e;
	end;
	
	// Calculate thermodynamic properties from (T,P,x)
	inArrFlow = [1,Aeff,pIn,TIn,FIn,pOut,fs];
	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);	
	
	dm = outArrFlow[1]*d;
	dE = outArrFlow[2]*d;	
	dmb = outArrFlow[3]*d;
	ppIn.dm = dm;
	ppOut.dm  = dm;
	pTIn.dH = dE;
	pTOut.dH = dE;
	pFIn.f = dmb;
	pFOut.f = dmb;implementation_end;
  end;
  connections
   areaMultiplier -> MultiplyDivide1\multiply 448 248;
   CA -> IntakeVVLift1\CA;
   dVONom -> IntakeVVLift1\dCA_lift_nom;
   EffortSensor1\effort -> IntakeVVArea\pIn 272 160 328 160;
   EffortSensor1\p2 => Submodel2\ppIn;
   EffortSensor2\effort -> IntakeVVArea\pOut 416 160 352 160;
   EffortSensor2\p2 => PowerMux\input1;
   IntakeVVArea\aEff -> MultiplyDivide1\multiply;
   IntakeVVArea\Cd -> Cd;
   IntakeVVLift1\lift -> IntakeVVArea\lift;
   MultiplyDivide1\output -> Splitter1\input;
   PowerDemux\output1 => EffortSensor1\p1;
   PowerDemux\output2 => Submodel2\pTIn;
   PowerDemux\output3 => Submodel2\pFIn;
   PowerMux\output => pTFOut;
   pTFIn => PowerDemux\input;
   Splitter1\output -> aOpenEff;
   Splitter1\output -> Submodel2\Aeff;
   Submodel2\pFOut => PowerMux\input3;
   Submodel2\ppOut => EffortSensor2\p1;
   Submodel2\pTOut => PowerMux\input2;
   VONom -> IntakeVVLift1\CA_start_nom;
  end;
  figures
   text 'Global parameters
      real global lift_max;     // Maximum lift of the vavle
      real global nstorke;     // number of stroke
      real hidden global CA_start_ref;        //Reference start CA for start of valve lift
      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed
      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed
      real hidden global dCA_lift_top_ref;   //Reference duration for lift up
      real global Dv;		 	// Valve Seat diameter
      real global beta;   	// valve seat angle
      real global w;      	// valve seat width
      real global Dp;    		// Valve port diameter
      real global Ds; 			// Valve stem diameter
      
' 288 504 color 0 16;
 implementation_end;
specification_end;
									end;
         FlowSensor 712 335.6
          description '<Information><Description><Version>4.2</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath><TimeStamp>2011-11-29 15:50:53</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
          knot FlowSensor
           ports
            power knot in p1 [3,1];
            power knot out p2 [3,1];
            signal knot out flow [3,1];
           restrictions
            causality constraint not_equal p1 p2;
          end;
          icon bg ellipse
           figures
            ellipse 705.1 328.8 718.9 343.1 color 0 fill 16777215;
            text 'f' 712 335.2 color 0;
          end;
          implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
implementation_end;
         FlowSensor1 800 439.2
          description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:12</TimeStamp>
</Description>';
          knot FlowSensor
           ports
            pseudothermal knot in p1 [1];
            pseudothermal knot out p2 [1];
            signal knot out flow [1];
           restrictions
            causality constraint not_equal p1 p2;
          end;
          icon bg ellipse
           figures
            ellipse 793.1 432.8 806.9 447.1 color 0 fill 16777215;
            text 'f' 800.5 438.3 color 0;
          end;
          implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
      implementation_end;
         intakeVV 528 312
									specifications active 'IntakeVVVarLift'
										specification 'ExhVV'
description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>Components\PoppetValve.emx</LibraryPath>
  <TimeStamp>2015-11-2 23:50:38</TimeStamp>
<KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   power in pTFIn [3,1];
   signal in CA;
   signal in VONom;
   signal in dVONom;
   power out pTFOut [3,1];
   signal out aOpenEff;
   signal out Cd;
   signal in areaMultiplier;
 end;
 icon bg bottom shadow 11776947
  figures
   line 224 209 256 209 color 0 fill 15132390;
   line 224 209 224 257 color 0 fill 15132390;
   line 304 211 304 255 color 0 fill 15132390;
   line 272 209 304 209 color 0 fill 15132390;
   line 264 224 240 240 288 240 264 224 color 0 fill 8355711;
   line 256 209 256 217 240 225 232 225 232 257 224 257 color 0 fill 15132390;
   line 272 209 272 217 288 225 296 225 296 257 304 257 304 209 272 209 color 0 fill 12632256;
   line 256 209 224 209 224 257 232 257 232 225 240 225 256 217 256 209 color 0 fill 12632256;
   line 264 225 264 193 color 0 fill 15132390;
   text 'PoppetValve' 264 265 color 0 16;
  terminals
   pTFIn 208 232 fixed;
   CA 304 184 fixed;
   VONom 224 184 fixed;
   dVONom 248 184 fixed;
   pTFOut 320 232 fixed;
   aOpenEff 320 208 fixed;
   Cd 320 184 fixed;
   areaMultiplier 280 184 fixed;
 end;
 implementation bg
  submodels
   EffortSensor1 272 319
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      power knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;
      text 'e' 272.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   EffortSensor2 416 319
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      pseudohydraulic knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;
      text 'e' 416.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   ExhVVArea 328.1 200.1
			specifications active 'Exhaust'
				specification 'Exhaust'
 description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:54:56</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;
   text 'VVArea' 328 200 color 0 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	real global DvExh;		 	// Valve Seat diameter
	real global betaExh;   	// valve seat angle
	real global wExh;      	// valve seat width
	real global DpExh;    		// Valve port diameter
	real global DsExh; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then
			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));
		else 
			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then
				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);
			else
				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);
			end;
		end;
		
		L_Dv = lift/DvExh;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
				specification 'Intake'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-6-22 22:48:36</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 fill 15132390;
   text 'VVArea' 328 200 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	real global DvIntake;		 	// Valve Seat diameter
	real global betaIntake;   	// valve seat angle
	real global wIntake;      	// valve seat width
	real global DpIntake;    		// Valve port diameter
	real global DsIntake; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then
			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));
		else 
			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then
				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);
			else
				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);
			end;
		end;
		
		L_Dv = lift/DvIntake;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
			end;
   ExhVVLift1 304 120
			specifications active 'Exhaust'
				specification 'Exhaust'
 description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-11-2 23:44:24</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 267.9 104 340.1 136 color 0 fill 15132390;
   text 'VVLift' 304 120 color 0 16;
  terminals
   lift 304 144 fixed;
   CA 328 96 fixed;
   CA_start_nom 280 96 fixed;
   dCA_lift_nom 304 96 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox;
	string global fnc_interp;
	integer global ExhProfNoRow1;
	integer global ExhProfNoRow2;
	real global ExhVVProfUpX[ExhProfNoRow1];
	real global ExhVVProfUpY[ExhProfNoRow1];
	real global ExhVVProfDownX[ExhProfNoRow2];
	real global ExhVVProfDownY[ExhProfNoRow2];
	real global ExhLift_max;
	integer global nStroke;
	real global ExhCA_start_ref; //Reference start CA for start of valve lift
	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed
	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed
	real global ExhdCA_lift_top_ref; //Reference duration for lift up
variables
	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2
	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = ExhProfNoRow1;
	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 
	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;		
	inarr2[1] = ExhProfNoRow2;
	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 
	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			
equations
	CA_start = CA_start_nom*ExhCA_start_ref;
	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;	
	dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= ExhdCA_lift_up then
			inarr1[ExhProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then
							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);
							inarr2[ExhProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = ExhLift_max*lift;
 implementation_end;
specification_end;
				specification 'Intake'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:16:35</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 763.9 96 836.1 128 fill 15132390;
   text 'VVLift' 800 112 16;
  terminals
   lift 800 136 fixed;
   CA 824 88 fixed;
   CA_start_nom 776 88 fixed;
   dCA_lift_nom 800 88 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox = 'dllTool20Sim.dll';
	string global fnc_interp = 'interpolate';
	integer global InProfNoRow1;
	integer global InProfNoRow2;
	real global InVVProfUpX[InProfNoRow1]; 
	real global InVVProfUpY[InProfNoRow1];
	real global InVVProfDownX[InProfNoRow2];
	real global InVVProfDownY[InProfNoRow2];
	real global InLift_max = 1;
	real global nstorke = 2;
	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift
	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed
	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed
	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift up
variables
	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = InProfNoRow1;
	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 
	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;		
	inarr2[1] = InProfNoRow2;
	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 
	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			
equations
	CA_start = CA_start_nom*InCA_start_ref;
	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;	
	dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;
	phi = CA*180/pi mod (nstorke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= IndCA_lift_up then
			inarr1[InProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= IndCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then
							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);
							inarr2[InProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = InLift_max*lift;
 implementation_end;
specification_end;
			end;
   MultiplyDivide1 352 248
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:14:59</TimeStamp>
</Description>';
    knot MultiplyDivide
     ports
      signal knot duplicatable in multiply [1];
      signal knot duplicatable in divide [1];
      signal knot out output [1];
    end;
    icon bg ellipse
     figures
      ellipse 344 240 360 256 color 0 fill 16777215;
    end;
    implementation eq
equations
	output = mul (collect (multiply)) ./ mul (collect (divide));
     implementation_end;
   plug pTFOut 504 336;
   plug aOpenEff 520.1 280;
   plug areaMultiplier 448 32;
   plug pTFIn 200 336;
   plug dVONom 304 56;
   plug VONom 280.1 32;
   plug CA 327.8 69.9;
   plug Cd 328 264;
   PowerDemux 241.5 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 240 312 240 360 color 0 width 2;
   rectangle 235 320 243 352 color -1;
   text '3' 244 346 color 8421504 8;
  terminals
   output1 240 320 fixed;
   output2 240 336 fixed;
   output3 240 352 fixed;
   input 232 336 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 449.5 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 448 312 448 360 color 0 width 2;
   rectangle 443 312 451 344 color -1;
   text '3' 452 338 color 8421504 8;
  terminals
   input1 448 320 fixed;
   input2 448 336 fixed;
   input3 448 352 fixed;
   output 456 336 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Splitter1 352 280
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;
      ellipse 347.7 275.7 356.3 284.3 color -1;
     terminals
      input 352 280 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Submodel2 352 359.5
    description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-6-22 16:30:00</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
 </Description>
</Information>';
    type Submodel
     ports
      signal in Aeff; "Effective area of nozzle (m2)"
      pseudohydraulic in ppIn;
      pseudothermalh in pTIn;
      power in pFIn;
      pseudohydraulic out ppOut;
      pseudothermalh out pTOut;
      power out pFOut;
     restrictions
      causality fixed in ppOut;
      causality fixed in pFOut;
      causality fixed in ppIn;
      causality fixed in pTIn;
      causality fixed in pFIn;
    end;
    icon bg bottom
     figures
      text 'R' 352 336 color 0 53 bold;
      text 'IdealNozzle
CompFlow' 352 376 color 0 16;
     terminals
      Aeff 352 304 fixed;
      ppIn 320 320 fixed;
      pTIn 320 336 fixed;
      pFIn 320 352 fixed;
      ppOut 384 320 fixed;
      pTOut 384 336 fixed;
      pFOut 384 352 fixed;
    end;
    implementation eq
/* Ideal Nozzle Model
Uses ideal nozzle equation for compressible flows assuming isentropic process. 
Flow restriction field. No states.

Input 
  - Effective area of nozzle (Aeff)
  - p,T,F in
  - p,T,F out
Output
  - dm, dE, dmb in
  - dm, dE, dmb out

*/
parameters 
	real global fs;
	string global dll_ICE;
	string global dll_fcn_idealNozzle;
variables
	real pIn, TIn, FIn, pOut;
	real dm, dE, dmb;
	real aa, d, pr;
	real	inArrFlow[7];
	real outArrFlow[3];

equations
  // start typing here
 	aa = ppIn.e / ppOut.e;
	if (aa > 1) then
		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;
		pOut = ppOut.e;
	else
		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;
		pOut = ppIn.e;
	end;
	
	// Calculate thermodynamic properties from (T,P,x)
	inArrFlow = [1;Aeff;pIn;pOut;TIn;FIn;fs];
	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);	
	
	dm = outArrFlow[1]*d;
	dE = outArrFlow[2]*d;	
	dmb = outArrFlow[3]*d;
	ppIn.dm = dm;
	ppOut.dm  = dm;
	pTIn.dH = dE;
	pTOut.dH = dE;
	pFIn.f = dmb;
	pFOut.f = dmb;implementation_end;
  end;
  connections
   areaMultiplier -> MultiplyDivide1\multiply 448 248;
   CA -> ExhVVLift1\CA;
   dVONom -> ExhVVLift1\dCA_lift_nom;
   EffortSensor1\effort -> ExhVVArea\pIn 272 160 328 160;
   EffortSensor1\p2 => Submodel2\ppIn;
   EffortSensor2\effort -> ExhVVArea\pOut 416 160 352 160;
   EffortSensor2\p2 => PowerMux\input1;
   ExhVVArea\aEff -> MultiplyDivide1\multiply;
   ExhVVArea\Cd -> Cd;
   ExhVVLift1\lift -> ExhVVArea\lift;
   MultiplyDivide1\output -> Splitter1\input;
   PowerDemux\output1 => EffortSensor1\p1;
   PowerDemux\output2 => Submodel2\pTIn;
   PowerDemux\output3 => Submodel2\pFIn;
   PowerMux\output => pTFOut;
   pTFIn => PowerDemux\input;
   Splitter1\output -> aOpenEff;
   Splitter1\output -> Submodel2\Aeff;
   Submodel2\pFOut => PowerMux\input3;
   Submodel2\ppOut => EffortSensor2\p1;
   Submodel2\pTOut => PowerMux\input2;
   VONom -> ExhVVLift1\CA_start_nom;
  end;
  figures
   text 'Global parameters
      real global lift_max;     // Maximum lift of the vavle
      real global nstorke;     // number of stroke
      real hidden global CA_start_ref;        //Reference start CA for start of valve lift
      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed
      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed
      real hidden global dCA_lift_top_ref;   //Reference duration for lift up
      real global Dv;		 	// Valve Seat diameter
      real global beta;   	// valve seat angle
      real global w;      	// valve seat width
      real global Dp;    		// Valve port diameter
      real global Ds; 			// Valve stem diameter
      
' 288 504 color 0 16;
 implementation_end;
specification_end;
										specification 'ExhVVVarLift'
description '<Information>
 <Description>
    <Version>4.6</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>Components\PoppetValve.emx</LibraryPath>
  <TimeStamp>2016-4-1 23:10:28</TimeStamp>
<KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   power in pTFIn [3,1];
   signal in CA;
   signal in VONom;
   signal in dVONom;
   power out pTFOut [3,1];
   signal out aOpenEff;
   signal out Cd;
   signal in areaMultiplier;
 end;
 icon bg bottom shadow 11776947
  figures
   line 488 289 520 289 color 0 fill 15132390;
   line 488 289 488 337 color 0 fill 15132390;
   line 568 291 568 335 color 0 fill 15132390;
   line 536 289 568 289 color 0 fill 15132390;
   line 528 304 504 320 552 320 528 304 color 0 fill 8355711;
   line 520 289 520 297 504 305 496 305 496 337 488 337 color 0 fill 15132390;
   line 536 289 536 297 552 305 560 305 560 337 568 337 568 289 536 289 color 0 fill 12632256;
   line 520 289 488 289 488 337 496 337 496 305 504 305 520 297 520 289 color 0 fill 12632256;
   line 528 305 528 273 color 0 fill 15132390;
   text 'PoppetValve' 528 345 color 0 16;
  terminals
   pTFIn 472 312 fixed;
   CA 568 264 fixed;
   VONom 488 264 fixed;
   dVONom 512 264 fixed;
   pTFOut 584 312 fixed;
   aOpenEff 584 288 fixed;
   Cd 584 264 fixed;
   areaMultiplier 544 264 fixed;
 end;
 implementation bg
  submodels
   EffortSensor1 272 320
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      power knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;
      text 'e' 272.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   EffortSensor2 416 320
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      pseudohydraulic knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;
      text 'e' 416.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   ExhVVLift 304 120
			specifications active 'ExhaustVarLift'
				specification 'Exhaust'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-11-2 23:44:24</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 763.9 96 836.1 128 fill 15132390;
   text 'VVLift' 800 112 16;
  terminals
   lift 800 136 fixed;
   CA 824 88 fixed;
   CA_start_nom 776 88 fixed;
   dCA_lift_nom 800 88 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox;
	string global fnc_interp;
	integer global ExhProfNoRow1;
	integer global ExhProfNoRow2;
	real global ExhVVProfUpX[ExhProfNoRow1];
	real global ExhVVProfUpY[ExhProfNoRow1];
	real global ExhVVProfDownX[ExhProfNoRow2];
	real global ExhVVProfDownY[ExhProfNoRow2];
	real global ExhLift_max;
	integer global nStroke;
	real global ExhCA_start_ref; //Reference start CA for start of valve lift
	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed
	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed
	real global ExhdCA_lift_top_ref; //Reference duration for lift up
variables
	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2
	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = ExhProfNoRow1;
	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 
	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;		
	inarr2[1] = ExhProfNoRow2;
	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 
	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			
equations
	CA_start = CA_start_nom*ExhCA_start_ref;
	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;	
	dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= ExhdCA_lift_up then
			inarr1[ExhProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then
							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);
							inarr2[ExhProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = ExhLift_max*lift;
 implementation_end;
specification_end;
				specification 'ExhaustVarLift'
 description '<Information><Description><Version>4.5</Version><LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2015-10-20 15:16:35</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 267.9 104 340.1 136 color 0 fill 15132390;
   text 'VVLift' 304 120 color 0 16;
  terminals
   lift 304 144 fixed;
   CA 328 96 fixed;
   CA_start_nom 280 96 fixed;
   dCA_lift_nom 304 96 fixed;
 end;
 implementation eq
parameters
	string dllToolbox = 'C:\Users\yum\Documents\GitHub\20SimToolBox\dll20SimToolVS10\Release\dll20SimToolVS10';
	string global fnc_interp = 'interpolate';
	integer global ExhProfNoRow1 = 30;
	integer global ExhProfNoRow2 = 30;
	real global ExhVVProfUp[ExhProfNoRow1] = [
			0;
			0.007;
			0.021;
			0.046;
			0.07;
			0.105;
			0.161;
			0.211;
			0.267;
			0.323;
			0.372;
			0.435;
			0.491;
			0.547;
			0.604;
			0.653;
			0.702;
			0.744;
			0.782;
			0.818;
			0.853;
			0.884;
			0.909;
			0.93;
			0.951;
			0.965;
			0.979;
			0.989;
			0.996;
			1];
	real global ExhVVProfDown[ExhProfNoRow1] = [
			1;
			0.996;
			0.993;
			0.982;
			0.972;
			0.958;
			0.937;
			0.912;
			0.884;
			0.856;
			0.821;
			0.786;
			0.744;
			0.702;
			0.656;
			0.614;
			0.565;
			0.509;
			0.442;
			0.379;
			0.319;
			0.253;
			0.196;
			0.14;
			0.095;
			0.06;
			0.032;
			0.018;
			0.006;
			0];
	real global ExhLift_max = 0.01425;
	real global nStroke = 4;
	real hidden global ExhCA_start_ref = 130; //Reference start CA for start of valve lift
	real hidden global ExhdCA_lift_up = 123;	 //Lift up time (should not be changed unless file is changed
	real hidden global ExhdCA_lift_down = 123; //Lift down time (should not be changed unless file is changed
//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift up

variables
	real inarr1[ExhProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[ExhProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real CA_start_cyc;
	real dCA_total_ref;
	real phi;
	integer i;
	boolean reset;
initialequations
	CA_start_cyc = 720;
	reset = true;
	inarr1[1] = ExhProfNoRow1;
	for i = 1 to ExhProfNoRow1 do
		inarr1[i+1] = i / ExhProfNoRow1;
	end;
	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUp;		
	inarr2[1] = ExhProfNoRow2;
	for i = 1 to ExhProfNoRow2 do
		inarr2[i+1] = i / ExhProfNoRow2;
	end;	
	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDown;	
	dCA_total_ref = ExhdCA_lift_up + ExhdCA_lift_down;		
equations
	CA_start = CA_start_nom*ExhCA_start_ref;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and reset == true then
		reset = false;
		CA_start_cyc = CA_start;
		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);
		dCA_lift = dCA_total - dCA_total_ref;	
	end;
	if phi > CA_start_cyc then
		if phi < CA_start_cyc + dCA_total then
			CA_VV = (phi - CA_start_cyc)/ExhdCA_lift_up;
			if CA_VV <= 1 then
				inarr1[ExhProfNoRow1*2+2] = CA_VV;
				lift = dll(dllToolbox, fnc_interp, inarr1);
			else 	
				CA_VV = (phi - CA_start_cyc)/(ExhdCA_lift_up + dCA_lift);
				if CA_VV <= 1 then
					lift = 1;
			  	else 	
					CA_VV = (phi - (CA_start_cyc + ExhdCA_lift_up + dCA_lift))/ExhdCA_lift_down;
					inarr2[ExhProfNoRow2*2+2] = CA_VV;
					lift = dll(dllToolbox, fnc_interp,inarr2);
				end;
			end;
		else
			lift = 0;
		end;
	else
		lift = 0;	
		if reset == false then
			reset = true;
			CA_start_cyc = 720;
		end;							
	end;			
	lift = ExhLift_max*lift;
 implementation_end;
specification_end;
				specification 'Intake'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:16:35</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 267.9 96 340.1 128 color 0 fill 15132390;
   text 'VVLift' 304 112 color 0 16;
  terminals
   lift 304 136 fixed;
   CA 328 88 fixed;
   CA_start_nom 280 88 fixed;
   dCA_lift_nom 304 88 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox = 'dllTool20Sim.dll';
	string global fnc_interp = 'interpolate';
	integer global InProfNoRow1;
	integer global InProfNoRow2;
	real global InVVProfUpX[InProfNoRow1]; 
	real global InVVProfUpY[InProfNoRow1];
	real global InVVProfDownX[InProfNoRow2];
	real global InVVProfDownY[InProfNoRow2];
	real global InLift_max = 1;
	real global nstorke = 0;
	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift
	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed
	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed
	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift up
variables
	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = InProfNoRow1;
	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 
	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;		
	inarr2[1] = InProfNoRow2;
	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 
	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			
equations
	CA_start = CA_start_nom*InCA_start_ref;
	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;	
	dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;
	phi = CA*180/pi mod (nstorke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= IndCA_lift_up then
			inarr1[InProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= IndCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then
							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);
							inarr2[InProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = InLift_max*lift;
 implementation_end;
specification_end;
				specification 'IntakeLiftVar'
 description '<Information><Description><Version>4.6</Version><LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2016-4-1 23:07:16</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 267.9 104 340.1 136 color 0 fill 15132390;
   text 'VVLift' 304 120 color 0 16;
  terminals
   lift 304 144 fixed;
   CA 328 96 fixed;
   CA_start_nom 280 96 fixed;
   dCA_lift_nom 304 96 fixed;
 end;
 implementation eq
parameters
	string dllToolbox = 'C:\Users\yum\Documents\GitHub\20SimToolBox\dll20SimToolVS10\Release\dll20SimToolVS10';
	string global fnc_interp = 'interpolate';
	integer global InProfNoRow1 = 30;
	integer global InProfNoRow2 = 30;
	real global InVVProfUp[InProfNoRow1] = [0;0.007;0.021;0.046;0.070;0.105;0.161;0.211;0.267;0.323;
														  0.372;0.435;0.491;0.547;0.604;0.653;0.702;0.744;0.782;0.818;
														  0.853;0.884;0.909;0.930;0.951;0.965;0.979;0.989;0.996;1];
	real global InVVProfDown[InProfNoRow1] = [1;0.996;0.993;0.982;0.972;0.958;0.937;0.912;0.884;0.856;
														0.821;0.786;0.744;0.702;0.656;0.614;0.565;0.509;0.442;0.379;
														0.319;0.253;0.196;0.140;0.095;0.060;0.032;0.018;0.006;0];
	real global InLift_max = 0.014;
	real global nStroke = 4;
	real hidden global InCA_start_ref = 343; //Reference start CA for start of valve lift
	real hidden global IndCA_lift_up = 121;	 //Lift up time (should not be changed unless file is changed
	real hidden global IndCA_lift_down = 121; //Lift down time (should not be changed unless file is changed
//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift up

variables
	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real CA_start_cyc;
	real dCA_total_ref;
	real phi;
	integer i;
	boolean reset;
initialequations
	CA_start_cyc = 720;
	reset = true;
	inarr1[1] = InProfNoRow1;
	for i = 1 to InProfNoRow1 do
		inarr1[i+1] = i / InProfNoRow1;
	end;
	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUp;		
	inarr2[1] = InProfNoRow2;
	for i = 1 to InProfNoRow2 do
		inarr2[i+1] = i / InProfNoRow2;
	end;	
	inarr2[InProfNoRow2+2:InProfNoRow2*2+1] = InVVProfDown;	
	dCA_total_ref = IndCA_lift_up + IndCA_lift_down;		
equations
	CA_start = CA_start_nom*InCA_start_ref;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and reset == true then
		reset = false;
		CA_start_cyc = CA_start;
		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);
		dCA_lift = dCA_total - dCA_total_ref;	
	end;
	if phi > CA_start_cyc then
		if phi < CA_start_cyc + dCA_total then
			CA_VV = (phi - CA_start_cyc)/IndCA_lift_up;
			if CA_VV <= 1 then
				inarr1[InProfNoRow1*2+2] = CA_VV;
				lift = dll(dllToolbox, fnc_interp, inarr1);
			else 	
				CA_VV = (phi - CA_start_cyc)/(IndCA_lift_up + dCA_lift);
				if CA_VV <= 1 then
					lift = 1;
			  	else 	
					CA_VV = (phi - (CA_start_cyc + IndCA_lift_up + dCA_lift))/IndCA_lift_down;
					inarr2[InProfNoRow2*2+2] = CA_VV;
					lift = dll(dllToolbox, fnc_interp,inarr2);
				end;
			end;
		else
			lift = 0;
		end;
	else
		lift = 0;	
		if reset == false then
			reset = true;
			CA_start_cyc = 720;
		end;							
	end;			
	lift = InLift_max*lift;
 implementation_end;
specification_end;
			end;
   IntakeVVArea 328.1 200.1
			specifications active 'Exhaust'
				specification 'Exhaust'
 description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:54:56</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;
   text 'VVArea' 328 200 color 0 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	real global noExhVV;
	real global DvExh;		 	// Valve Seat diameter
	real global betaExh;   	// valve seat angle
	real global wExh;      	// valve seat width
	real global DpExh;    		// Valve port diameter
	real global DsExh; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then
			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));
		else 
			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then
				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);
			else
				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);
			end;
		end;
		
		L_Dv = lift/DvExh;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
				specification 'Intake'
 description '<Information><Description><Version>4.5</Version><LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2015-6-22 22:48:36</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;
   text 'VVArea' 328 200 color 0 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	real global DvIntake;		 	// Valve Seat diameter
	real global betaIntake;   	// valve seat angle
	real global wIntake;      	// valve seat width
	real global DpIntake;    		// Valve port diameter
	real global DsIntake; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then
			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));
		else 
			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then
				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);
			else
				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);
			end;
		end;
		
		L_Dv = lift/DvIntake;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
			end;
   MultiplyDivide1 352 248
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:14:59</TimeStamp>
</Description>';
    knot MultiplyDivide
     ports
      signal knot duplicatable in multiply [1];
      signal knot duplicatable in divide [1];
      signal knot out output [1];
    end;
    icon bg ellipse
     figures
      ellipse 344 240 360 256 color 0 fill 16777215;
    end;
    implementation eq
equations
	output = mul (collect (multiply)) ./ mul (collect (divide));
     implementation_end;
   plug pTFOut 504 336;
   plug aOpenEff 520.1 280;
   plug areaMultiplier 448 32;
   plug pTFIn 200 336;
   plug dVONom 304 56;
   plug VONom 280.1 32;
   plug CA 327.8 69.9;
   plug Cd 328 264;
   PowerDemux 240 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 240 312 240 360 color 0 width 2;
   rectangle 235 320 243 352 color -1;
   text '3' 244 346 color 8421504 8;
  terminals
   output1 240 320 fixed;
   output2 240 336 fixed;
   output3 240 352 fixed;
   input 232 336 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 448 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 448 312 448 360 color 0 width 2;
   rectangle 443 312 451 344 color -1;
   text '3' 452 338 color 8421504 8;
  terminals
   input1 448 320 fixed;
   input2 448 336 fixed;
   input3 448 352 fixed;
   output 456 336 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Splitter1 352 280
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;
      ellipse 347.7 275.7 356.3 284.3 color -1;
     terminals
      input 352 280 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Submodel2 352 351
    description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-6-22 16:30:00</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
 </Description>
</Information>';
    type Submodel
     ports
      signal in Aeff; "Effective area of nozzle (m2)"
      pseudohydraulic in ppIn;
      pseudothermalh in pTIn;
      power in pFIn;
      pseudohydraulic out ppOut;
      pseudothermalh out pTOut;
      power out pFOut;
     restrictions
      causality fixed in ppOut;
      causality fixed in pFOut;
      causality fixed in ppIn;
      causality fixed in pTIn;
      causality fixed in pFIn;
    end;
    icon bg bottom
     figures
      text 'R' 352 336 color 0 53 bold;
      text 'IdealNozzle
CompFlow' 352 376 color 0 16;
     terminals
      Aeff 352 304 fixed;
      ppIn 320 320 fixed;
      pTIn 320 336 fixed;
      pFIn 320 352 fixed;
      ppOut 384 320 fixed;
      pTOut 384 336 fixed;
      pFOut 384 352 fixed;
    end;
    implementation eq
/* Ideal Nozzle Model
Uses ideal nozzle equation for compressible flows assuming isentropic process. 
Flow restriction field. No states.

Input 
  - Effective area of nozzle (Aeff)
  - p,T,F in
  - p,T,F out
Output
  - dm, dE, dmb in
  - dm, dE, dmb out

*/
parameters 
	real global fs;
	string global dll_ICE;
	string global dll_fcn_idealNozzle;
variables
	real pIn, TIn, FIn, pOut;
	real dm, dE, dmb;
	real aa, d, pr;
	real	inArrFlow[4];
	real outArrFlow[3];

equations
  // start typing here
 	aa = ppIn.e / ppOut.e;
	if (aa > 1) then
		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;
		pOut = ppOut.e;
	else
		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;
		pOut = ppIn.e;
	end;
	
	// Calculate thermodynamic properties from (T,P,x)
	inArrFlow = [1,Aeff,pIn,TIn,FIn,pOut,fs];
	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);	
	
	dm = outArrFlow[1]*d;
	dE = outArrFlow[2]*d;	
	dmb = outArrFlow[3]*d;
	ppIn.dm = dm;
	ppOut.dm  = dm;
	pTIn.dH = dE;
	pTOut.dH = dE;
	pFIn.f = dmb;
	pFOut.f = dmb;implementation_end;
  end;
  connections
   areaMultiplier -> MultiplyDivide1\multiply 448 248;
   CA -> ExhVVLift\CA;
   dVONom -> ExhVVLift\dCA_lift_nom;
   EffortSensor1\effort -> IntakeVVArea\pIn 272 160 328 160;
   EffortSensor1\p2 => Submodel2\ppIn;
   EffortSensor2\effort -> IntakeVVArea\pOut 416 160 352 160;
   EffortSensor2\p2 => PowerMux\input1;
   ExhVVLift\lift -> IntakeVVArea\lift;
   IntakeVVArea\aEff -> MultiplyDivide1\multiply;
   IntakeVVArea\Cd -> Cd;
   MultiplyDivide1\output -> Splitter1\input;
   PowerDemux\output1 => EffortSensor1\p1;
   PowerDemux\output2 => Submodel2\pTIn;
   PowerDemux\output3 => Submodel2\pFIn;
   PowerMux\output => pTFOut;
   pTFIn => PowerDemux\input;
   Splitter1\output -> aOpenEff;
   Splitter1\output -> Submodel2\Aeff;
   Submodel2\pFOut => PowerMux\input3;
   Submodel2\ppOut => EffortSensor2\p1;
   Submodel2\pTOut => PowerMux\input2;
   VONom -> ExhVVLift\CA_start_nom;
  end;
  figures
   text 'Global parameters
      real global lift_max;     // Maximum lift of the vavle
      real global nstorke;     // number of stroke
      real hidden global CA_start_ref;        //Reference start CA for start of valve lift
      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed
      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed
      real hidden global dCA_lift_top_ref;   //Reference duration for lift up
      real global Dv;		 	// Valve Seat diameter
      real global beta;   	// valve seat angle
      real global w;      	// valve seat width
      real global Dp;    		// Valve port diameter
      real global Ds; 			// Valve stem diameter
      
' 288 504 color 0 16;
 implementation_end;
specification_end;
										specification 'IntakeVV'
description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>Components\PoppetValve.emx</LibraryPath><TimeStamp>2015-10-20 15:58:52</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type Submodel
  ports
   power in pTFIn [3,1];
   signal in CA;
   signal in VONom;
   signal in dVONom;
   power out pTFOut [3,1];
   signal out aOpenEff;
   signal out Cd;
   signal in areaMultiplier;
 end;
 icon bg bottom shadow 11776947
  figures
   line 488 289 520 289 color 0 fill 15132390;
   line 488 289 488 337 color 0 fill 15132390;
   line 568 291 568 335 color 0 fill 15132390;
   line 536 289 568 289 color 0 fill 15132390;
   line 528 304 504 320 552 320 528 304 color 0 fill 8355711;
   line 520 289 520 297 504 305 496 305 496 337 488 337 color 0 fill 15132390;
   line 536 289 536 297 552 305 560 305 560 337 568 337 568 289 536 289 color 0 fill 12632256;
   line 520 289 488 289 488 337 496 337 496 305 504 305 520 297 520 289 color 0 fill 12632256;
   line 528 305 528 273 color 0 fill 15132390;
   text 'PoppetValve' 528 345 color 0 16;
  terminals
   pTFIn 472 312 fixed;
   CA 568 264 fixed;
   VONom 488 264 fixed;
   dVONom 512 264 fixed;
   pTFOut 584 312 fixed;
   aOpenEff 584 288 fixed;
   Cd 584 264 fixed;
   areaMultiplier 544 264 fixed;
 end;
 implementation bg
  submodels
   EffortSensor1 272 320
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      power knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;
      text 'e' 272.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   EffortSensor2 416 320
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      pseudohydraulic knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;
      text 'e' 416.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   ExhVVLift1 304 112
			specifications active 'Intake'
				specification 'Exhaust'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-11-2 23:44:24</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 763.9 96 836.1 128 fill 15132390;
   text 'VVLift' 800 112 16;
  terminals
   lift 800 136 fixed;
   CA 824 88 fixed;
   CA_start_nom 776 88 fixed;
   dCA_lift_nom 800 88 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox;
	string global fnc_interp;
	integer global ExhProfNoRow1;
	integer global ExhProfNoRow2;
	real global ExhVVProfUpX[ExhProfNoRow1];
	real global ExhVVProfUpY[ExhProfNoRow1];
	real global ExhVVProfDownX[ExhProfNoRow2];
	real global ExhVVProfDownY[ExhProfNoRow2];
	real global ExhLift_max;
	integer global nStroke;
	real global ExhCA_start_ref; //Reference start CA for start of valve lift
	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed
	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed
	real global ExhdCA_lift_top_ref; //Reference duration for lift up
variables
	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2
	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = ExhProfNoRow1;
	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 
	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;		
	inarr2[1] = ExhProfNoRow2;
	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 
	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			
equations
	CA_start = CA_start_nom*ExhCA_start_ref;
	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;	
	dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= ExhdCA_lift_up then
			inarr1[ExhProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then
							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);
							inarr2[ExhProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = ExhLift_max*lift;
 implementation_end;
specification_end;
				specification 'Intake'
 description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:16:35</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 267.9 96 340.1 128 color 0 fill 15132390;
   text 'VVLift' 304 112 color 0 16;
  terminals
   lift 304 136 fixed;
   CA 328 88 fixed;
   CA_start_nom 280 88 fixed;
   dCA_lift_nom 304 88 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox = 'dllTool20Sim.dll';
	string global fnc_interp = 'interpolate';
	integer global InProfNoRow1;
	integer global InProfNoRow2;
	real global InVVProfUpX[InProfNoRow1]; 
	real global InVVProfUpY[InProfNoRow1];
	real global InVVProfDownX[InProfNoRow2];
	real global InVVProfDownY[InProfNoRow2];
	real global InLift_max = 1;
	real global nstorke = 0;
	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift
	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed
	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed
	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift up
variables
	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = InProfNoRow1;
	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 
	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;		
	inarr2[1] = InProfNoRow2;
	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 
	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			
equations
	CA_start = CA_start_nom*InCA_start_ref;
	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;	
	dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;
	phi = CA*180/pi mod (nstorke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= IndCA_lift_up then
			inarr1[InProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= IndCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then
							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);
							inarr2[InProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = InLift_max*lift;
 implementation_end;
specification_end;
			end;
   IntakeVVArea 328.1 200.1
			specifications active 'Intake'
				specification 'Exhaust'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:54:56</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 fill 15132390;
   text 'VVArea' 328 200 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	real global DvExh;		 	// Valve Seat diameter
	real global betaExh;   	// valve seat angle
	real global wExh;      	// valve seat width
	real global DpExh;    		// Valve port diameter
	real global DsExh; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then
			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));
		else 
			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then
				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);
			else
				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);
			end;
		end;
		
		L_Dv = lift/DvExh;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
				specification 'Intake'
 description '<Information><Description><Version>4.5</Version><LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2015-6-22 22:48:36</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;
   text 'VVArea' 328 200 color 0 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	real global DvIntake;		 	// Valve Seat diameter
	real global betaIntake;   	// valve seat angle
	real global wIntake;      	// valve seat width
	real global DpIntake;    		// Valve port diameter
	real global DsIntake; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then
			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));
		else 
			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then
				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);
			else
				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);
			end;
		end;
		
		L_Dv = lift/DvIntake;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
			end;
   MultiplyDivide1 352 248
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:14:59</TimeStamp>
</Description>';
    knot MultiplyDivide
     ports
      signal knot duplicatable in multiply [1];
      signal knot duplicatable in divide [1];
      signal knot out output [1];
    end;
    icon bg ellipse
     figures
      ellipse 344 240 360 256 color 0 fill 16777215;
    end;
    implementation eq
equations
	output = mul (collect (multiply)) ./ mul (collect (divide));
     implementation_end;
   plug pTFOut 504 336;
   plug aOpenEff 520.1 280;
   plug areaMultiplier 448 32;
   plug pTFIn 200 336;
   plug dVONom 304 56;
   plug VONom 280.1 32;
   plug CA 327.8 69.9;
   plug Cd 328 264;
   PowerDemux 240 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 240 312 240 360 color 0 width 2;
   rectangle 235 320 243 352 color -1;
   text '3' 244 346 color 8421504 8;
  terminals
   output1 240 320 fixed;
   output2 240 336 fixed;
   output3 240 352 fixed;
   input 232 336 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 448 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 448 312 448 360 color 0 width 2;
   rectangle 443 312 451 344 color -1;
   text '3' 452 338 color 8421504 8;
  terminals
   input1 448 320 fixed;
   input2 448 336 fixed;
   input3 448 352 fixed;
   output 456 336 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Splitter1 352 280
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;
      ellipse 347.7 275.7 356.3 284.3 color -1;
     terminals
      input 352 280 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Submodel2 352 351
    description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-6-22 16:30:00</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
 </Description>
</Information>';
    type Submodel
     ports
      signal in Aeff; "Effective area of nozzle (m2)"
      pseudohydraulic in ppIn;
      pseudothermalh in pTIn;
      power in pFIn;
      pseudohydraulic out ppOut;
      pseudothermalh out pTOut;
      power out pFOut;
     restrictions
      causality fixed in ppOut;
      causality fixed in pFOut;
      causality fixed in ppIn;
      causality fixed in pTIn;
      causality fixed in pFIn;
    end;
    icon bg bottom
     figures
      text 'R' 352 336 color 0 53 bold;
      text 'IdealNozzle
CompFlow' 352 376 color 0 16;
     terminals
      Aeff 352 304 fixed;
      ppIn 320 320 fixed;
      pTIn 320 336 fixed;
      pFIn 320 352 fixed;
      ppOut 384 320 fixed;
      pTOut 384 336 fixed;
      pFOut 384 352 fixed;
    end;
    implementation eq
/* Ideal Nozzle Model
Uses ideal nozzle equation for compressible flows assuming isentropic process. 
Flow restriction field. No states.

Input 
  - Effective area of nozzle (Aeff)
  - p,T,F in
  - p,T,F out
Output
  - dm, dE, dmb in
  - dm, dE, dmb out

*/
parameters 
	real global fs;
	string global dll_ICE;
	string global dll_fcn_idealNozzle;
variables
	real pIn, TIn, FIn, pOut;
	real dm, dE, dmb;
	real aa, d, pr;
	real	inArrFlow[4];
	real outArrFlow[3];

equations
  // start typing here
 	aa = ppIn.e / ppOut.e;
	if (aa > 1) then
		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;
		pOut = ppOut.e;
	else
		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;
		pOut = ppIn.e;
	end;
	
	// Calculate thermodynamic properties from (T,P,x)
	inArrFlow = [1,Aeff,pIn,TIn,FIn,pOut,fs];
	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);	
	
	dm = outArrFlow[1]*d;
	dE = outArrFlow[2]*d;	
	dmb = outArrFlow[3]*d;
	ppIn.dm = dm;
	ppOut.dm  = dm;
	pTIn.dH = dE;
	pTOut.dH = dE;
	pFIn.f = dmb;
	pFOut.f = dmb;implementation_end;
  end;
  connections
   areaMultiplier -> MultiplyDivide1\multiply 448 248;
   CA -> ExhVVLift1\CA;
   dVONom -> ExhVVLift1\dCA_lift_nom;
   EffortSensor1\effort -> IntakeVVArea\pIn 272 160 328 160;
   EffortSensor1\p2 => Submodel2\ppIn;
   EffortSensor2\effort -> IntakeVVArea\pOut 416 160 352 160;
   EffortSensor2\p2 => PowerMux\input1;
   ExhVVLift1\lift -> IntakeVVArea\lift;
   IntakeVVArea\aEff -> MultiplyDivide1\multiply;
   IntakeVVArea\Cd -> Cd;
   MultiplyDivide1\output -> Splitter1\input;
   PowerDemux\output1 => EffortSensor1\p1;
   PowerDemux\output2 => Submodel2\pTIn;
   PowerDemux\output3 => Submodel2\pFIn;
   PowerMux\output => pTFOut;
   pTFIn => PowerDemux\input;
   Splitter1\output -> aOpenEff;
   Splitter1\output -> Submodel2\Aeff;
   Submodel2\pFOut => PowerMux\input3;
   Submodel2\ppOut => EffortSensor2\p1;
   Submodel2\pTOut => PowerMux\input2;
   VONom -> ExhVVLift1\CA_start_nom;
  end;
  figures
   text 'Global parameters
      real global lift_max;     // Maximum lift of the vavle
      real global nstorke;     // number of stroke
      real hidden global CA_start_ref;        //Reference start CA for start of valve lift
      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed
      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed
      real hidden global dCA_lift_top_ref;   //Reference duration for lift up
      real global Dv;		 	// Valve Seat diameter
      real global beta;   	// valve seat angle
      real global w;      	// valve seat width
      real global Dp;    		// Valve port diameter
      real global Ds; 			// Valve stem diameter
      
' 288 504 color 0 16;
 implementation_end;
specification_end;
										specification 'IntakeVVVarLift'
 description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>Components\PoppetValve.emx</LibraryPath><TimeStamp>2015-10-20 15:58:52</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type Submodel
  ports
   power in pTFIn [3,1];
   signal in CA;
   signal in VONom;
   signal in dVONom;
   power out pTFOut [3,1];
   signal out aOpenEff;
   signal out Cd;
   signal in areaMultiplier;
   signal in mCyl;
 end;
 icon bg bottom shadow 11776947
  figures
   line 488 289 520 289 color 0 fill 15132390;
   line 488 289 488 337 color 0 fill 15132390;
   line 568 291 568 335 color 0 fill 15132390;
   line 536 289 568 289 color 0 fill 15132390;
   line 528 304 504 320 552 320 528 304 color 0 fill 8355711;
   line 520 289 520 297 504 305 496 305 496 337 488 337 color 0 fill 15132390;
   line 536 289 536 297 552 305 560 305 560 337 568 337 568 289 536 289 color 0 fill 12632256;
   line 520 289 488 289 488 337 496 337 496 305 504 305 520 297 520 289 color 0 fill 12632256;
   line 528 305 528 273 color 0 fill 15132390;
   text 'PoppetValve' 528 345 color 0 16;
  terminals
   pTFIn 472 312 fixed;
   CA 568 264 fixed;
   VONom 488 264 fixed;
   dVONom 512 264 fixed;
   pTFOut 584 312 fixed;
   aOpenEff 584 288 fixed;
   Cd 584 264 fixed;
   areaMultiplier 544 264 fixed;
 end;
 implementation bg
  submodels
   EffortSensor1 272 319
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      power knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 265.1 313.3 278.9 327.4 color 0 fill 16777215;
      text 'e' 272.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   EffortSensor2 416 319
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\EffortSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:27</TimeStamp>
</Description>';
    knot EffortSensor
     ports
      pseudohydraulic knot in p1 [1];
      pseudohydraulic knot out p2 [1];
      signal knot out effort [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 409.1 313.3 422.9 327.4 color 0 fill 16777215;
      text 'e' 416.5 317.6 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	effort = p1.e;
     implementation_end;
   IntakeVVArea 328.1 200.1
			specifications active 'Intake'
				specification 'Exhaust'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\PoppetValveAreaCd.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:54:56</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;
   text 'VVArea' 328 200 color 0 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	integer global noExhVV;
	real global DvExh;		 	// Valve Seat diameter
	real global betaExh;   	// valve seat angle
	real global wExh;      	// valve seat width
	real global DpExh;    		// Valve port diameter
	real global DsExh; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wExh / (sin(betaExh)*cos(betaExh)))) then
			aOpen = pi*(lift)*cos(betaExh)*(DvExh - 2*wExh + lift/2*sin(betaExh*2));
		else 
			if (lift <= (sqrt((DpExh^2 - DsExh^2)/(4*(DvExh - wExh)) - wExh^2) + wExh*tan(betaExh))) then
				aOpen = pi*(DvExh - wExh)*sqrt((lift - wExh*tan(betaExh))^2 + wExh^2);
			else
				aOpen = 0.25*pi*(DpExh^2 - DsExh^2);
			end;
		end;
		
		L_Dv = lift/DvExh;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
				specification 'Intake'
 description '<Information>
 <Description>
    <Version>4.6</Version>
  <LibraryPath>Components\ValveArea.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2016-4-4 11:12:58</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   signal in lift {m} ;
   signal in pIn {Pa} ;
   signal in pOut {Pa} ;
   signal out aOpen {m2} ; "Open area"
   signal out Cd; "Discharge coefficient"
   signal out aEff {m2} ; "Effective area of nozzle"
 end;
 icon bg bottom
  figures
   rectangle 287.8 185.1 368.4 215.2 color 0 fill 15132390;
   text 'VVArea' 328 200 color 0 16;
  terminals
   lift 304 176 fixed;
   pIn 328 176 fixed;
   pOut 352 176 fixed;
   aOpen 304 224 fixed;
   Cd 328 224 fixed;
   aEff 352 224 fixed;
 end;
 implementation eq
/* Poppet Valve Area Calculation
	This calcuates the opening area, discharge coefficient and effective opening
	area for poppet valve.
	
	Input
		lift : Valve lift [m]
		pIn : Upstream pressure [Pa]
		pOut : Downstream pressure [Pa]
	Output
		aOpen : Valve opening [m2]
		Cd : Discharge coefficient
		aEff : Effective valve opening [m2]	
	
	Version  | Created by     | Place      |  Changes
	------------------------------------------------------
	1.0      | Kevin K. Yum   | NTNU       | First model
	
*/
constants
	real CdCorrCoeffP[3] = [0.5329;-0.2047;0.04292];
	real CdCorrCoeffQ[3] = [0.5359;-0.2962;0.06275];
	// Discharge coeffcient correction factors
	real CdCorrCoeffPr[3] = [-0.006345;0.09503;0.8117];
	// Discharge coefficient correction factor	
	// The fit model was taken from the Sher, E. (1990). Scavenging 
	// the two-stroke engine. Progress in Energy and Combustion Science, 
	// 16(2), 95-124. 
parameters
	integer global noInVV; 		// numver of intake valves
	real global DvIntake;		 	// Valve Seat diameter
	real global betaIntake;   	// valve seat angle
	real global wIntake;      	// valve seat width
	real global DpIntake;    		// Valve port diameter
	real global DsIntake; 			// Valve stem diameter
variables
	real L_Dv, pr;
equations
	if (lift > 0) then
		if (lift < (wIntake / (sin(betaIntake)*cos(betaIntake)))) then
			aOpen = pi*(lift)*cos(betaIntake)*(DvIntake - 2*wIntake + lift/2*sin(betaIntake*2));
		else 
			if (lift <= (sqrt((DpIntake^2 - DsIntake^2)/(4*(DvIntake - wIntake)) - wIntake^2) + wIntake*tan(betaIntake))) then
				aOpen = pi*(DvIntake - wIntake)*sqrt((lift - wIntake*tan(betaIntake))^2 + wIntake^2);
			else
				aOpen = 0.25*pi*(DpIntake^2 - DsIntake^2);
			end;
		end;
		
		L_Dv = lift/DvIntake;
		Cd = ((L_Dv*CdCorrCoeffP[1] + CdCorrCoeffP[2])*L_Dv + CdCorrCoeffP[3])
	            / (((L_Dv + CdCorrCoeffQ[1])*L_Dv + CdCorrCoeffQ[2])*L_Dv + 
	            CdCorrCoeffQ[3]);
		if (pIn > pOut) then
			pr = pIn/pOut;
		else
			pr = pOut/pIn;
		end;	
		Cd = Cd*((CdCorrCoeffPr[1]*pr + CdCorrCoeffPr[2])*pr + CdCorrCoeffPr[3]);
		aEff = aOpen*Cd;
	else
		aOpen = 0;
		Cd = 0;
		aEff = 0;
	end;
	
	 implementation_end;
specification_end;
			end;
   IntakeVVLift1 304 120
			specifications active 'IntakeLiftVar'
				specification 'Exhaust'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-11-2 23:44:24</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 763.9 96 836.1 128 fill 15132390;
   text 'VVLift' 800 112 16;
  terminals
   lift 800 136 fixed;
   CA 824 88 fixed;
   CA_start_nom 776 88 fixed;
   dCA_lift_nom 800 88 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox;
	string global fnc_interp;
	integer global ExhProfNoRow1;
	integer global ExhProfNoRow2;
	real global ExhVVProfUpX[ExhProfNoRow1];
	real global ExhVVProfUpY[ExhProfNoRow1];
	real global ExhVVProfDownX[ExhProfNoRow2];
	real global ExhVVProfDownY[ExhProfNoRow2];
	real global ExhLift_max;
	integer global nStroke;
	real global ExhCA_start_ref; //Reference start CA for start of valve lift
	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed
	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed
	real global ExhdCA_lift_top_ref; //Reference duration for lift up
variables
	real inarr1[2*ExhProfNoRow1+2];							//length should be 2 * no. of row of profile table + 2
	real inarr2[2*ExhProfNoRow2+2];							//length should be 2 * no. of row of profile table + 2
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = ExhProfNoRow1;
	inarr1[2:ExhProfNoRow1+1] = ExhVVProfUpX; 
	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUpY;		
	inarr2[1] = ExhProfNoRow2;
	inarr2[2:ExhProfNoRow2+1] = ExhVVProfDownX; 
	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDownY;			
equations
	CA_start = CA_start_nom*ExhCA_start_ref;
	dCA_lift = dCA_lift_nom*ExhdCA_lift_top_ref;	
	dCA_total = ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= ExhdCA_lift_up then
			inarr1[ExhProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= ExhdCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= ExhdCA_lift_up + dCA_lift + ExhdCA_lift_down then
							CA_VV = phi - (CA_start + ExhdCA_lift_up + dCA_lift);
							inarr2[ExhProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = ExhLift_max*lift;
 implementation_end;
specification_end;
				specification 'ExhaustVarLift'
description '<Information>
 <Description>
    <Version>4.6</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2016-4-4 11:19:41</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
 <Attributes>
  <GlobalRelations></GlobalRelations>
 </Attributes>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 267.9 104 340.1 136 color 0 fill 15132390;
   text 'VVLift' 304 120 color 0 16;
  terminals
   lift 304 144 fixed;
   CA 328 96 fixed;
   CA_start_nom 280 96 fixed;
   dCA_lift_nom 304 96 fixed;
 end;
 implementation eq
parameters
	string global dllToolbox;
	string global fnc_interp;
	integer global ExhProfNoRow1;
	integer global ExhProfNoRow2;
	real global ExhVVProfUp[ExhProfNoRow1];
	real global ExhVVProfDown[ExhProfNoRow1];
	real global ExhLift_max;
	real global nStroke;
	real global ExhCA_start_ref; //Reference start CA for start of valve lift
	real global ExhdCA_lift_up;	 //Lift up time (should not be changed unless file is changed
	real global ExhdCA_lift_down; //Lift down time (should not be changed unless file is changed
//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift up

variables
	real inarr1[ExhProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[ExhProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real CA_start_cyc;
	real dCA_total_ref;
	real phi;
	integer i;
	boolean reset;
initialequations
	CA_start_cyc = 720;
	reset = true;
	inarr1[1] = ExhProfNoRow1;
	for i = 1 to ExhProfNoRow1 do
		inarr1[i+1] = i / ExhProfNoRow1;
	end;
	inarr1[ExhProfNoRow1+2:ExhProfNoRow1*2+1] = ExhVVProfUp;		
	inarr2[1] = ExhProfNoRow2;
	for i = 1 to ExhProfNoRow2 do
		inarr2[i+1] = i / ExhProfNoRow2;
	end;	
	inarr2[ExhProfNoRow2+2:ExhProfNoRow2*2+1] = ExhVVProfDown;	
	dCA_total_ref = ExhdCA_lift_up + ExhdCA_lift_down;		
equations
	CA_start = CA_start_nom*ExhCA_start_ref;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and reset == true then
		reset = false;
		CA_start_cyc = CA_start;
		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);
		dCA_lift = dCA_total - dCA_total_ref;	
	end;
	if phi > CA_start_cyc then
		if phi < CA_start_cyc + dCA_total then
			CA_VV = (phi - CA_start_cyc)/ExhdCA_lift_up;
			if CA_VV <= 1 then
				inarr1[ExhProfNoRow1*2+2] = CA_VV;
				lift = dll(dllToolbox, fnc_interp, inarr1);
			else 	
				CA_VV = (phi - CA_start_cyc)/(ExhdCA_lift_up + dCA_lift);
				if CA_VV <= 1 then
					lift = 1;
			  	else 	
					CA_VV = (phi - (CA_start_cyc + ExhdCA_lift_up + dCA_lift))/ExhdCA_lift_down;
					inarr2[ExhProfNoRow2*2+2] = CA_VV;
					lift = dll(dllToolbox, fnc_interp,inarr2);
				end;
			end;
		else
			lift = 0;
		end;
	else
		lift = 0;	
		if reset == false then
			reset = true;
			CA_start_cyc = 720;
		end;							
	end;			
	lift = ExhLift_max*lift;
 implementation_end;
specification_end;
				specification 'Intake'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>Components\ValveLift.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-10-20 15:16:35</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
 end;
 icon bg bottom
  figures
   rectangle 267.9 96 340.1 128 color 0 fill 15132390;
   text 'VVLift' 304 112 color 0 16;
  terminals
   lift 304 136 fixed;
   CA 328 88 fixed;
   CA_start_nom 280 88 fixed;
   dCA_lift_nom 304 88 fixed;
 end;
 implementation eq
parameters
//	real CA_start_nom = 1.1;
//	real dCA_lift_nom = 1;
	string global dllToolbox = 'dllTool20Sim.dll';
	string global fnc_interp = 'interpolate';
	integer global InProfNoRow1;
	integer global InProfNoRow2;
	real global InVVProfUpX[InProfNoRow1]; 
	real global InVVProfUpY[InProfNoRow1];
	real global InVVProfDownX[InProfNoRow2];
	real global InVVProfDownY[InProfNoRow2];
	real global InLift_max = 1;
	real global nstorke = 0;
	real hidden global InCA_start_ref = 107; //Reference start CA for start of valve lift
	real hidden global IndCA_lift_up = 37.7;	 //Lift up time (should not be changed unless file is changed
	real hidden global IndCA_lift_down = 52; //Lift down time (should not be changed unless file is changed
	real hidden global IndCA_lift_top_ref = 60; //Reference duration for lift up
variables
	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real phi;
initialequations
	inarr1[1] = InProfNoRow1;
	inarr1[2:InProfNoRow1+1] = InVVProfUpX; 
	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUpY;		
	inarr2[1] = InProfNoRow2;
	inarr2[2:InProfNoRow2+1] = InVVProfUpX; 
	inarr2[InProfNoRow2+2:InProfNoRow2+1] = InVVProfUpY;			
equations
	CA_start = CA_start_nom*InCA_start_ref;
	dCA_lift = dCA_lift_nom*IndCA_lift_top_ref;	
	dCA_total = IndCA_lift_up + dCA_lift + IndCA_lift_down;
	phi = CA*180/pi mod (nstorke*180);
	if phi > CA_start and phi < CA_start + dCA_total then
		CA_VV = phi - CA_start;
		if CA_VV <= IndCA_lift_up then
			inarr1[InProfNoRow1*2+2] = CA_VV;
			lift = dll(dllToolbox, fnc_interp, inarr1);
		else 	if CA_VV <= IndCA_lift_up + dCA_lift then
					lift = 1;
			  	else 	if CA_VV <= IndCA_lift_up + dCA_lift + IndCA_lift_down then
							CA_VV = phi - (CA_start + IndCA_lift_up + dCA_lift);
							inarr2[InProfNoRow2*2+2] = CA_VV;
							lift = dll(dllToolbox, fnc_interp,inarr2);
					 	else 
					 		lift = 0;	
						end;
				end;
		end;
	else
		lift = 0;	
	end;			
	lift = InLift_max*lift;
 implementation_end;
specification_end;
				specification 'IntakeLiftVar'
 description '<Information><Description><Version>4.6</Version><LibraryPath>Components\ValveLift.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2016-4-1 23:07:16</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>';
 type ExhVVLift
  ports
   signal out lift;
   signal in CA;
   signal in CA_start_nom;
   signal in dCA_lift_nom;
   signal in pCyl;
   signal in mCyl;
 end;
 icon bg bottom
  figures
   rectangle 267.9 104 340.1 136 color 0 fill 15132390;
   text 'VVLift' 304 120 color 0 16;
  terminals
   lift 304 144 fixed;
   CA 328 96 fixed;
   CA_start_nom 280 96 fixed;
   dCA_lift_nom 304 96 fixed;
 end;
 implementation eq
parameters
	string global dllToolbox;
	string global fnc_interp;	
	integer InProfNoRow1 = 30;
	integer InProfNoRow2 = 30;
	real global InVVProfUp[InProfNoRow1];
	real global InVVProfDown[InProfNoRow1];
	real global InLift_max;
	integer global nStroke;
	real global InCA_start_ref; //Reference start CA for start of valve lift
	real global IndCA_lift_up;	 //Lift up time (should not be changed unless file is changed
	real global IndCA_lift_down; //Lift down time (should not be changed unless file is changed
//	real hidden global IndCA_lift_top_ref = 0; //Reference duration for lift up

variables
	real inarr1[InProfNoRow1*2+2];							//length should be 2 * no. of row of profile table + 1
	real inarr2[InProfNoRow2*2+2];							//length should be 2 * no. of row of profile table + 1
	real CA_start, dCA_lift, dCA_total, CA_VV;
	real CA_start_cyc;
	real dCA_total_ref;
	real phi;
	integer i;
	boolean reset, reset1;
	real pIVC, mIVC;
initialequations
	CA_start_cyc = 180*nStroke;
	reset = true;
	inarr1[1] = InProfNoRow1;
	for i = 1 to InProfNoRow1 do
		inarr1[i+1] = i / InProfNoRow1;
	end;
	inarr1[InProfNoRow1+2:InProfNoRow1*2+1] = InVVProfUp;		
	inarr2[1] = InProfNoRow2;
	for i = 1 to InProfNoRow2 do
		inarr2[i+1] = i / InProfNoRow2;
	end;	
	inarr2[InProfNoRow2+2:InProfNoRow2*2+1] = InVVProfDown;	
	dCA_total_ref = IndCA_lift_up + IndCA_lift_down;		
	pIVC = 0;
	reset1 = false;
equations
	CA_start = CA_start_nom*InCA_start_ref;
	phi = CA*180/pi mod (nStroke*180);
	if phi > CA_start and reset == true then
		reset = false;
		CA_start_cyc = CA_start;
		dCA_total = dCA_total_ref * max([1; dCA_lift_nom]);
		dCA_lift = dCA_total - dCA_total_ref;	
	end;
	if phi > CA_start_cyc then
		if phi < CA_start_cyc + dCA_total then
			CA_VV = (phi - CA_start_cyc)/IndCA_lift_up;
			if CA_VV <= 1 then
				inarr1[InProfNoRow1*2+2] = CA_VV;
				lift = dll(dllToolbox, fnc_interp, inarr1);
			else 	
				CA_VV = (phi - CA_start_cyc)/(IndCA_lift_up + dCA_lift);
				if CA_VV <= 1 then
					lift = 1;
			  	else 	
					CA_VV = (phi - (CA_start_cyc + IndCA_lift_up + dCA_lift))/IndCA_lift_down;
					inarr2[InProfNoRow2*2+2] = CA_VV;
					lift = dll(dllToolbox, fnc_interp,inarr2);
				end;
			end;
		else
			lift = 0;
			if reset1 == false then
				reset1 = true;
				pIVC = pCyl;
				mIVC = mCyl;
			end;										
		end;
	else
		lift = 0;	
		if reset == false then
			reset = true;
			CA_start_cyc = 720;
			reset1 = false;
		end;							
	end;			
	lift = InLift_max*lift;
 implementation_end;
specification_end;
			end;
   MultiplyDivide1 352 248
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\MultiplyDivide.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:14:59</TimeStamp>
</Description>';
    knot MultiplyDivide
     ports
      signal knot duplicatable in multiply [1];
      signal knot duplicatable in divide [1];
      signal knot out output [1];
    end;
    icon bg ellipse
     figures
      ellipse 344 240 360 256 color 0 fill 16777215;
    end;
    implementation eq
equations
	output = mul (collect (multiply)) ./ mul (collect (divide));
     implementation_end;
   plug pTFOut 504.1 336;
   plug aOpenEff 520.1 280;
   plug areaMultiplier 448 32;
   plug mCyl 128 120;
   plug pTFIn 200 336;
   plug dVONom 304 56;
   plug VONom 280.1 32;
   plug CA 327.8 69.9;
   plug Cd 328 263.9;
   PowerDemux 241.5 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 240 312 240 360 color 0 width 2;
   rectangle 235 320 243 352 color -1;
   text '3' 244 346 color 8421504 8;
  terminals
   output1 240 320 fixed;
   output2 240 336 fixed;
   output3 240 352 fixed;
   input 232 336 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 449.5 336
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 448 312 448 360 color 0 width 2;
   rectangle 443 312 451 344 color -1;
   text '3' 452 338 color 8421504 8;
  terminals
   input1 448 320 fixed;
   input2 448 336 fixed;
   input3 448 352 fixed;
   output 456 336 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Splitter1 352 280
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 348.8 276.8 355.2 283.2 color -1 fill 0;
      ellipse 347.7 275.7 356.3 284.3 color -1;
     terminals
      input 352 280 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Splitter2 416 160
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 412.8 156.8 419.2 163.2 color -1 fill 0;
      ellipse 411.7 155.7 420.3 164.3 color -1;
     terminals
      input 416 160 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Submodel2 352 359.5
    description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>FlowRestriction\IdealNozzleCompGas.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-6-22 16:30:00</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
 </Description>
</Information>';
    type Submodel
     ports
      signal in Aeff; "Effective area of nozzle (m2)"
      pseudohydraulic in ppIn;
      pseudothermalh in pTIn;
      power in pFIn;
      pseudohydraulic out ppOut;
      pseudothermalh out pTOut;
      power out pFOut;
     restrictions
      causality fixed in ppOut;
      causality fixed in pFOut;
      causality fixed in ppIn;
      causality fixed in pTIn;
      causality fixed in pFIn;
    end;
    icon bg bottom
     figures
      text 'R' 352 336 color 0 53 bold;
      text 'IdealNozzle
CompFlow' 352 376 color 0 16;
     terminals
      Aeff 352 304 fixed;
      ppIn 320 320 fixed;
      pTIn 320 336 fixed;
      pFIn 320 352 fixed;
      ppOut 384 320 fixed;
      pTOut 384 336 fixed;
      pFOut 384 352 fixed;
    end;
    implementation eq
/* Ideal Nozzle Model
Uses ideal nozzle equation for compressible flows assuming isentropic process. 
Flow restriction field. No states.

Input 
  - Effective area of nozzle (Aeff)
  - p,T,F in
  - p,T,F out
Output
  - dm, dE, dmb in
  - dm, dE, dmb out

*/
parameters 
	real global fs;
	string global dll_ICE;
	string global dll_fcn_idealNozzle;
variables
	real pIn, TIn, FIn, pOut;
	real dm, dE, dmb;
	real aa, d, pr;
	real	inArrFlow[7];
	real outArrFlow[3];

equations
  // start typing here
 	aa = ppIn.e / ppOut.e;
	if (aa > 1) then
		pIn	= ppIn.e; TIn = pTIn.e; FIn = pFIn.e; d	= 1; 	pr = aa;
		pOut = ppOut.e;
	else
		pIn	= ppOut.e; TIn=pTOut.e; FIn= pFOut.e;	d	= -1; pr	= 1.0/aa;
		pOut = ppIn.e;
	end;
	
	// Calculate thermodynamic properties from (T,P,x)
	inArrFlow = [1;Aeff;pIn;pOut;TIn;FIn;fs];
	outArrFlow = dll(dll_ICE,dll_fcn_idealNozzle, inArrFlow);	
	
	dm = outArrFlow[1]*d;
	dE = outArrFlow[2]*d;	
	dmb = outArrFlow[3]*d;
	ppIn.dm = dm;
	ppOut.dm  = dm;
	pTIn.dH = dE;
	pTOut.dH = dE;
	pFIn.f = dmb;
	pFOut.f = dmb;implementation_end;
  end;
  connections
   areaMultiplier -> MultiplyDivide1\multiply 448 248;
   CA -> IntakeVVLift1\CA;
   dVONom -> IntakeVVLift1\dCA_lift_nom;
   EffortSensor1\effort -> IntakeVVArea\pIn 272 160 328 160;
   EffortSensor1\p2 => Submodel2\ppIn;
   EffortSensor2\effort -> Splitter2\input;
   EffortSensor2\p2 => PowerMux\input1;
   IntakeVVArea\aEff -> MultiplyDivide1\multiply;
   IntakeVVArea\Cd -> Cd;
   IntakeVVArea\lift <- IntakeVVLift1\lift;
   mCyl -> IntakeVVLift1\mCyl;
   MultiplyDivide1\output -> Splitter1\input;
   PowerDemux\output1 => EffortSensor1\p1;
   PowerDemux\output2 => Submodel2\pTIn;
   PowerDemux\output3 => Submodel2\pFIn;
   PowerMux\output => pTFOut;
   pTFIn => PowerDemux\input;
   Splitter1\output -> aOpenEff;
   Splitter1\output -> Submodel2\Aeff;
   Splitter2\output -> IntakeVVArea\pOut 416 160 352 160;
   Splitter2\output -> IntakeVVLift1\pCyl 416 120;
   Submodel2\pFOut => PowerMux\input3;
   Submodel2\ppOut => EffortSensor2\p1;
   Submodel2\pTOut => PowerMux\input2;
   VONom -> IntakeVVLift1\CA_start_nom;
  end;
  figures
   text 'Global parameters
      real global lift_max;     // Maximum lift of the vavle
      real global nstorke;     // number of stroke
      real hidden global CA_start_ref;        //Reference start CA for start of valve lift
      real hidden global dCA_lift_up;	//Lift up time (should not be changed unless file is changed
      real hidden global dCA_lift_down;     //Lift down time (should not be changed unless file is changed
      real hidden global dCA_lift_top_ref;   //Reference duration for lift up
      real global Dv;		 	// Valve Seat diameter
      real global beta;   	// valve seat angle
      real global w;      	// valve seat width
      real global Dp;    		// Valve port diameter
      real global Ds; 			// Valve stem diameter
      
' 288 504 color 0 16;
 implementation_end;
specification_end;
									end;
         LowPassFilter 384 424
          description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Filters\LowPassFilter-BW4.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:23:6</TimeStamp>
</Description>';
          type 'LowPassFilter-BW4'
           ports
            signal in u;
            signal out y;
          end;
          icon bg bottom
           figures
            rectangle 336 408 432 440 color 0 fill 15132390;
            text 'Low-Pass Filter' 384.5 416.7 color 16711680 14;
            text 'BW 4    (rad/s) ' 386.1 430.4 color 16711680 14;
            text 'th' 380.3 426.3 color 16711680;
          end;
          implementation eq
// Created by C. Kleijn, 27 September 1999
parameters
    real BW  = 10;	// Bandwidth (Hz)
variables
    real hidden s1y,s2y,s3y,s4y,BWrad;
equations
	BWrad = twopi*BW;
	s4y = BWrad^4.0*(u - y) - BWrad^3.0*2.6131*s1y - BWrad^2.0*3.4142*s2y - BWrad*2.6131*s3y;
  	s3y = int(s4y,0);
	s2y = int(s3y,0);
	s1y = int(s2y,0);
   	y = int(s1y,1e5);
        implementation_end;
         LowPassFilter1 384 472
          description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Filters\LowPassFilter-BW4.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:23:6</TimeStamp>
</Description>';
          type 'LowPassFilter-BW4'
           ports
            signal in u;
            signal out y;
          end;
          icon bg bottom
           figures
            rectangle 336 456 432 488 color 0 fill 15132390;
            text 'Low-Pass Filter' 384.5 464.7 color 16711680 14;
            text 'BW 4    (rad/s) ' 386.1 478.4 color 16711680 14;
            text 'th' 380.3 474.3 color 16711680;
          end;
          implementation eq
// Created by C. Kleijn, 27 September 1999
parameters
    real BW  = 10;	// Bandwidth (Hz)
variables
    real hidden s1y,s2y,s3y,s4y,BWrad;
equations
	BWrad = twopi*BW;
	s4y = BWrad^4.0*(u - y) - BWrad^3.0*2.6131*s1y - BWrad^2.0*3.4142*s2y - BWrad*2.6131*s3y;
  	s3y = int(s4y,0);
	s2y = int(s3y,0);
	s1y = int(s2y,0);
   	y = int(s1y,300);
        implementation_end;
         plug tWall 952 480;
         plug pMax 928 504;
         plug ppTFOut 976 312;
         plug ppTFIn 328 312;
         plug dQCyl 799.9 400;
         plug dmf 624 336;
         plug contSig 720 56;
         plug M 704.1 751.9;
         pMaxFinder 928.2 544
          description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>PerformanceIndexCalc\pMaxFinder.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-11-14 21:37:42</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
          type 'Submodel-Equation'
           ports
            signal in phi;
            signal out pMax;
            signal in pCyl;
            signal out phiAtPMax;
          end;
          implementation eq
parameters
	integer global nStroke;
variables
	real phi360, phiComb;
	real lastTime;
	integer newCycle;
	real pMaxTemp, phiAtPMaxTemp;
initialequations
	pMax = 0;
	lastTime = 0;
	newCycle = 1;
	pMaxTemp = 0;
	phiAtPMaxTemp = 0;
equations
	phi360 = phi*180/pi mod (180*nStroke);
	if (phi360 > 180) then
		phiComb = phi360 - 360;
	else 
		phiComb = phi360;
	end;
	if (time > lastTime) then
		if ((phiComb>-10) and (phiComb<40) and (pCyl > 50.0e5)) then
			if (newCycle==1) then
				pMax = pMaxTemp;
				phiAtPMax = phiAtPMaxTemp;
				pMaxTemp = 0.0;
				newCycle = 0;
			end;
			if (pCyl > pMaxTemp) then
				pMaxTemp = pCyl;
				phiAtPMaxTemp = phiComb;
			end;
		else 
			newCycle = 1;
		end;
		lastTime = time;
	end;

implementation_end;
         PowerMux 712 307.5
									specifications active 'inputs_3'
										specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
										specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
										specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
										specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 696 304 728 304 color 0 width 2;
   rectangle 696 300 728 308 color -1;
   text '3' 722 309 color 8421504 8;
  terminals
   input1 704 304 fixed;
   input2 712 304 fixed;
   input3 720 304 fixed;
   output 712 304 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
										specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
										specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
										specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
										specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
										specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
										specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
									end;
         PowerSensor 704 528
          description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:29:42</TimeStamp>
</Description>
</Information>';
          knot PowerSensor
           ports
            pneumatic knot in p1 [1];
            pneumatic knot out p2 [1];
            signal knot out P [1] {W} ;
           restrictions
            causality constraint not_equal p1 p2;
          end;
          icon bg ellipse
           figures
            ellipse 697.1 520.8 710.9 535.2 color 0 fill 16777215;
            text 'P' 704.5 527.8 color 0;
          end;
          implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	P = p1.e .* p1.f;
implementation_end;
         QCyl 784 439
          description '<Information><Description><Version>4.2</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\QSensor.emx</LibraryPath><TimeStamp>2011-11-29 16:34:15</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
          knot QSensor
           ports
            power knot in p1 [1];
            pseudothermal knot out p2 [1];
            signal knot out q [1];
           restrictions
            causality constraint not_equal p1 p2;
          end;
          icon bg ellipse
           figures
            ellipse 777.1 433.3 790.9 447.4 color 0 fill 16777215;
            text 'q' 783.5 437.6 color 0;
          end;
          implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	q = int (p1.f);
implementation_end;
         ROHR 711.4 256.5
									specifications active 'FixedShapeVarDurComb'
										specification 'ChmelaPhenomenological'
description '<Information>
 <Description>
    <Version>4.6</Version>
  <LibraryPath>Combustion\CombFixedROHR.emx</LibraryPath>
  <TimeStamp>2016-5-31 00:02:01</TimeStamp>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   signal in pfi;
   signal in dphiFlat;
   signal in fiinj;
   signal in omega;
   power out pp;
   power out pT;
   power out pF;
   signal out Comb_state;
   signal in pRail;
   signal in VCyl;
 end;
 icon bg bottom
  figures
   rectangle 680.9 241.5 741.9 271.5 color 0 fill 15132390;
   text 'name' 711.4 256.5 color 0 16;
  terminals
   pfi 687.4 232.5 fixed;
   dphiFlat 719.4 232.5 fixed;
   fiinj 703.4 232.5 fixed;
   omega 735.4 232.5 fixed;
   Comb_state 739.5 280 fixed;
   pRail 679.4 256.5 fixed;
   VCyl 743.4 256.5 fixed;
 end;
 implementation eq
constants
	real D_coeff[4,5] = [1.1053E+03,	-3.1164E+01,	1.4274E+00,	-5.2975E-03,	-4.6749E-04;
						    -1.3298E+03, 1.4771E+02, -5.4041E+00, -5.5594E-02, 3.5522E-03;
						    1.6637E+03, -2.4621E+02, 8.6951E+00, 9.9981E-02, -5.8678E-03;
						    -1.0697E+03, 1.6974E+02, -7.6850E+00, 6.4605E-02, 1.4729E-03];
parameters
	integer global nCyl;
	integer global nStroke;
	real global hn;
//	real global fiinj;
	real global mqf_max;
	real global fs;
	real global S, B, lambdaR, CR;
// Englib
	string global dll_ICE;
//	string dll_fcn_rohr    = 'ice_rohr';
//	string dll_icemax    = 'ice_pfimax';
//	string hidden dll_fcn_ThDP = 'thdyn_CombGasZach'; // subroutines names in the dll file
//	string dll_fcn_rohr = 		'ice_rohr2';
	real global wiebe_para[9];
	real global Cturb, Cdiss, Crate, Cmode;
	real global FComb;
	
	real global P_CR, T_CR, T_f; //Fuel parameters
	real global noHole, DHole, Cd;		//injector dimension	
 	real global pRailRampUp;		//Pressure rise time in the injector[s]
	real global pRailRampDown;		//Pressure rise time in the injector[s]
	
variables
	real phi;
	real phi_comb;
	real P, F, T;
	real fiig;
	boolean reset;
	real igdel;
	
	real PP[5,1], TT[4,1], P_R, T_R, dCA;
	real An;//Area of the nozzle holes
	real p_nom, p_inj, dP_inj;
	real rho_f, u;
	
	real E_kin_f_diss, dE_kin_f_diss, m_f_inj, Q, dQ;
	real kTurb;
	
	real pRailRampUpCA, pRailRampDownCA;
	real dV_f_inj, dm_f_inj;


initialequations
	Comb_state = 0;
	// 0: Start of new cycle / 1 : injection started / 2 : start of combustion / 5: end of combustion
//	if fiinj > 180 then fiinj = fiinj - 360; end;	
	fiig = 0;
	reset = true;
	An = noHole*DHole^2*pi/4;
	dE_kin_f_diss = 0;
	dm_f_inj = 0;
	dQ = 0;
	rho_f = 800;
	TT[1] = 1;
	T_R = T_f / T_CR;
	TT[2] = T_R;
	TT[3] = TT[2]*T_R;
	TT[4] = TT[3]*T_R;	
code
	P=pp.e; F=pF.e; T=pT.e;
	phi = pfi*180/pi mod (nStroke*180);
	
	E_kin_f_diss = resint(dE_kin_f_diss,0,reset,0);
	m_f_inj = resint(dm_f_inj,0,reset,0);
	Q = resint(dQ,0,reset,0);

	if phi > 90*nStroke then 
		phi_comb= phi - nStroke*180;  
	else
		phi_comb = phi;
	end;
	if phi_comb > fiinj and Comb_state == 0 then
		Comb_state = 1;
		// mqf = mqf_max * x_lev;
		igdel = 180/pi*omega*1e-3*0.0405*exp(5473/T)*(P*1e-5)^(-0.757);
		
		// Calculate the injection profile to be applied
		pRailRampUpCA = pRailRampUp*omega*180/pi;
		pRailRampDownCA = pRailRampDown*omega*180/pi;
		
		// no combustion if the ignition delay is too much
		if igdel > 30 then
			Comb_state = 5;
		end;
		
		fiig = fiinj + igdel;
		reset = false;

	else if phi_comb > fiig and Comb_state == 1 then
				Comb_state = 2;
			else	if phi_comb > fiig + 120 and Comb_state == 2 then
						Comb_state = 5;
						reset = true;
					end;
			end;
	end;		
	
	if phi_comb > -20 and phi_comb < -15 then
		Comb_state = 0;
	end;			

	switch Comb_state
		case 1 do
			PP[1] = 1;				P_R = P / P_CR;	
			PP[2] = P_R;			PP[3] = PP[2]*P_R;		
			PP[4] = PP[3]*P_R;	PP[5] = PP[4]*P_R;			
			rho_f = transpose(D_coeff*PP)*TT;
		   dCA = phi_comb - fiinj;
		   if dCA <= pRailRampUpCA then
				p_nom =  dCA/(pRailRampUpCA);
			else
				dCA = dCA - pRailRampUpCA;
				if dCA <= dphiFlat then
	            p_nom = 1;
				else
					dCA = dCA - dphiFlat;
					if dCA <= pRailRampDownCA then
               	p_nom = 1 - (dCA)/(pRailRampDownCA);
	            else
   					p_nom = 0;
            	end;
				end;
        	end; 			
			dQ = 0;
		case 2 do
			PP[1] = 1;				P_R = P / P_CR;	
			PP[2] = P_R;			PP[3] = PP[2]*P_R;		
			PP[4] = PP[3]*P_R;	PP[5] = PP[4]*P_R;	
			rho_f = transpose(D_coeff*PP)*TT;
		   dCA = phi_comb - fiinj;
		   if dCA <= pRailRampUpCA then
				p_nom =  dCA/(pRailRampUpCA);
			else
				dCA = dCA - pRailRampUpCA;
				if dCA <= dphiFlat then
	            p_nom = 1;
				else
					dCA = dCA - dphiFlat;
					if dCA <= pRailRampDownCA then
               	p_nom = 1 - (dCA)/(pRailRampDownCA);
	            else
   					p_nom = 0;
					end;
            end;
        	end;
			if m_f_inj == 0 then
				kTurb = 0; 
			else
				kTurb = Cturb*E_kin_f_diss / (1e-10 + m_f_inj * (1+1/(FComb*fs)));
			end;
			dQ = Cmode*(180*omega/pi)*(m_f_inj - Q/hn)*exp(Crate*sqrt(kTurb)/(VCyl^0.333));
		default do
			p_nom = 0;
			rho_f = 800;
			dQ = 0;
	end;	
	p_inj = pRail * p_nom;
	dP_inj = max([0, p_inj - P]);
	u = sqrt(2*dP_inj/rho_f); //The velocity of the droplets in the zone
	dV_f_inj = u*An*Cd;
	dm_f_inj = dV_f_inj * rho_f;
	dE_kin_f_diss = 0.5*dm_f_inj*u^2 - Cdiss*E_kin_f_diss;
	

	pp.f= dQ / hn;
	pF.f= dQ / hn;
	pT.f= dQ;
	/*
	inarr_pfimax=[time; phi; P];
	outarr_pfimax=dll(dll_ICE,dll_icemax, inarr_pfimax);

	Pmax=outarr_pfimax[1];Pmax_pfi=outarr_pfimax[2];

	p_max = [Pmax;Pmax_pfi];
	*/



implementation_end;
specification_end;
										specification 'FixedShapeFixedDurComb'
description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>FlowRestriction\CombROHR.emx</LibraryPath>
  <TimeStamp>2015-11-14 17:37:19</TimeStamp>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   signal in pfi;
   signal in x_lev;
   signal in fiinj;
   signal in omega;
   power out pp;
   power out pT;
   power out pF;
   signal out Comb_state;
 end;
 icon bg bottom
  figures
   rectangle 683.9 241.5 738.9 271.5 color 0 fill 15132390;
   text 'name' 711.4 256.5 color 0 16;
  terminals
   pfi 704.1 232 fixed;
   x_lev 687.4 232 fixed;
   fiinj 721.9 232 fixed;
   omega 739.6 232 fixed;
   Comb_state 739.6 280 fixed;
 end;
 implementation eq
parameters
	integer global nCyl;
	integer global nStroke;
	real global hn;
//	real global fiinj;
	real global mqf_max;
	real global fs;
	real global S, B, lambdaR, CR;
// Englib
	string global dll_ICE;
//	string dll_fcn_rohr    = 'ice_rohr';
//	string dll_icemax    = 'ice_pfimax';
//	string hidden dll_fcn_ThDP = 'thdyn_CombGasZach'; // subroutines names in the dll file
//	string dll_fcn_rohr = 		'ice_rohr2';
	real global wiebe_para[9];
variables
	real phi;
	real phi_comb;
	real P, F, T;
	real dmf;
	real mqf;
//	real inarr_ROHR[20], outarr_ROHR[13];
	real fiig;
//	real hidden inarr_pfimax[3], outarr_pfimax[2];
//	real hidden inarr_ThermoProp[3], outarr_ThermoProp[13];
//	real Pmax, Pmax_pfi;
//	real bmepnom, omeganom;
//	real eta_i, sfoc;
//	real mfPC, mf, Oldmf, OldmfPC;
	boolean reset;
	
	real dphi_comb, igdel, dmf_nom;
	real yp, ym, yl, yptomp, ymtomm, yltoml, df1dy, df2dy, df3dy;
	

initialequations
	Comb_state = 0;
	// 0: Start of new cycle / 1 : injection started / 2 : start of combustion / 5: end of combustion
//	if fiinj > 180 then fiinj = fiinj - 360; end;	
	fiig = 0;
	reset = true;
	mqf = 0;
	dmf = 0;
	dphi_comb = wiebe_para[3] + wiebe_para[6];

code
	P=pp.e; F=pF.e; T=pT.e;
	phi = pfi*180/pi mod (nStroke*180);
	if phi > 90*nStroke then 
		phi_comb= phi - nStroke*180;  
	else
		phi_comb = phi;
	end;
	if phi_comb > fiinj and Comb_state == 0 then
		Comb_state = 1;
		mqf = mqf_max * x_lev;
		igdel = 180/pi*omega*1e-3*0.0405*exp(5473/T)*(P*1e-5)^(-0.757);
		if igdel > 30 then
			Comb_state = 5;
		end;
		fiig = fiinj + igdel;
		reset = false;		
	else if phi_comb > fiig and phi_comb < fiig + dphi_comb and Comb_state == 1 then
				Comb_state = 2;
				reset = true;
			else	if phi_comb > fiig + dphi_comb and reset == true then
						Comb_state = 5;
						reset = false;
					end;
			end;
	end;		
	
	if phi_comb > -20 and phi_comb < -15 then
		Comb_state = 0;
		reset = true;
	end;			

	switch Comb_state
		case 2 do
			yp = max([(phi_comb - fiig) / wiebe_para[4];0]);
			ym = max([0;(phi_comb - (fiig + wiebe_para[3]))/wiebe_para[5]]);
			yl = max([0;(phi_comb - (fiig + wiebe_para[3]))/wiebe_para[6]]);
			yptomp = yp^wiebe_para[7];
			ymtomm = ym^wiebe_para[8];
			yltoml = yl^wiebe_para[9];
			df1dy = 6.9*(wiebe_para[7] + 1)*yptomp*exp(-6.9*yp*yptomp) / wiebe_para[4];
			df2dy = 6.9*(wiebe_para[8] + 1)*ymtomm*exp(-6.9*ym*ymtomm) / wiebe_para[5];
			df3dy = 6.9*(wiebe_para[9] + 1)*yltoml*exp(-6.9*yl*yltoml) / wiebe_para[6];
			dmf_nom = wiebe_para[1]*df1dy + wiebe_para[2]*df2dy + (1-wiebe_para[1] - wiebe_para[2])*df3dy;
			dmf = mqf*dmf_nom*omega*180/pi;
		default do
			dmf = 0;
	end;	

	pp.f=dmf;
	pF.f= dmf;
	pT.f=dmf*hn;
	/*
	inarr_pfimax=[time; phi; P];
	outarr_pfimax=dll(dll_ICE,dll_icemax, inarr_pfimax);

	Pmax=outarr_pfimax[1];Pmax_pfi=outarr_pfimax[2];

	p_max = [Pmax;Pmax_pfi];
	*/


implementation_end;
specification_end;
										specification 'FixedShapeVarDurComb'
 description '<Information><Description><Version>4.6</Version><LibraryPath>Combustion\CombFixedROHR.emx</LibraryPath><TimeStamp>2016-3-30 23:27:23</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type Submodel
  ports
   signal in pfi;
   signal in x_lev;
   signal in fiinj;
   signal in omega;
   power out pp;
   power out pT;
   power out pF;
   signal out Comb_state;
 end;
 icon bg bottom
  figures
   rectangle 680.9 241.5 741.9 271.5 color 0 fill 15132390;
   text 'name' 711.4 256.5 color 0 16;
  terminals
   pfi 704 232 fixed;
   x_lev 687.4 232 fixed;
   fiinj 721.9 232 fixed;
   omega 739.5 232 fixed;
   Comb_state 739.5 280 fixed;
 end;
 implementation eq
parameters
	integer global nCyl;
	integer global nStroke;
	real global hn;
//	real global fiinj;
	real global mqf_max;
	real global fs;
	real global S, B, lambdaR, CR;
// Englib
	string global dll_ICE;
//	string dll_fcn_rohr    = 'ice_rohr';
//	string dll_icemax    = 'ice_pfimax';
//	string hidden dll_fcn_ThDP = 'thdyn_CombGasZach'; // subroutines names in the dll file
//	string dll_fcn_rohr = 		'ice_rohr2';
	real global wiebe_para[9];
variables
	real phi;
	real phi_comb;
	real P, F, T;
	real dmf;
	real mqf;
//	real inarr_ROHR[20], outarr_ROHR[13];
	real fiig;
//	real hidden inarr_pfimax[3], outarr_pfimax[2];
//	real hidden inarr_ThermoProp[3], outarr_ThermoProp[13];
//	real Pmax, Pmax_pfi;
//	real bmepnom, omeganom;
//	real eta_i, sfoc;
//	real mfPC, mf, Oldmf, OldmfPC;
	boolean reset;
	real wiebe3Temp, wiebe4Temp, wiebe5Temp, wiebe6Temp;  // Wiebe parameters related to combustion duration
	
	real dphi_comb, igdel, dmf_nom;
	real yp, ym, yl, yptomp, ymtomm, yltoml, df1dy, df2dy, df3dy;
	

initialequations
	Comb_state = 0;
	// 0: Start of new cycle / 1 : injection started / 2 : start of combustion / 5: end of combustion
//	if fiinj > 180 then fiinj = fiinj - 360; end;	
	fiig = 0;
	reset = true;
	mqf = 0;
	dmf = 0;
	wiebe3Temp = wiebe_para[3];	wiebe4Temp = wiebe_para[4];	
	wiebe5Temp = wiebe_para[5];	wiebe6Temp = wiebe_para[6];	
	dphi_comb = wiebe3Temp + wiebe6Temp;
code
	P=pp.e; F=pF.e; T=pT.e;
	phi = pfi*180/pi mod (nStroke*180);
	if phi > 90*nStroke then 
		phi_comb= phi - nStroke*180;  
	else
		phi_comb = phi;
	end;
	if phi_comb > fiinj and Comb_state == 0 then
		Comb_state = 1;
		mqf = mqf_max * x_lev;
		igdel = 180/pi*omega*1e-3*0.0405*exp(5473/T)*(P*1e-5)^(-0.757);

		// Vary combustion duration according to amount of injection
		wiebe3Temp = 0.6*wiebe_para[3]*(1+0.6667*x_lev);
		wiebe4Temp = 0.6*wiebe_para[4]*(1+0.6667*x_lev);
		wiebe5Temp = 0.6*wiebe_para[5]*(1+0.6667*x_lev);
		wiebe6Temp = 0.6*wiebe_para[6]*(1+0.6667*x_lev);
		dphi_comb = wiebe3Temp + wiebe6Temp;
		// For constant duration, use following
		// dphi_comb = wiebe_para[3] + wiebe_para[6];		
		// **********************************************************

		
		if igdel > 30 then
			Comb_state = 5;
		end;
		fiig = fiinj + igdel;
		reset = false;		
	else if phi_comb > fiig and phi_comb < fiig + dphi_comb and Comb_state == 1 then
				Comb_state = 2;
				reset = true;
			else	if phi_comb > fiig + dphi_comb and reset == true then
						Comb_state = 5;
						reset = false;
					end;
			end;
	end;		
	
	if phi_comb > -20 and phi_comb < -15 then
		Comb_state = 0;
		reset = true;
	end;			

	switch Comb_state
		case 2 do
			yp = max([(phi_comb - fiig) / wiebe4Temp;0]);
			ym = max([0;(phi_comb - (fiig + wiebe3Temp))/wiebe5Temp]);
			yl = max([0;(phi_comb - (fiig + wiebe3Temp))/wiebe6Temp]);
			yptomp = yp^wiebe_para[7];
			ymtomm = ym^wiebe_para[8];
			yltoml = yl^wiebe_para[9];
			df1dy = 6.9*(wiebe_para[7] + 1)*yptomp*exp(-6.9*yp*yptomp) / wiebe4Temp;
			df2dy = 6.9*(wiebe_para[8] + 1)*ymtomm*exp(-6.9*ym*ymtomm) / wiebe5Temp;
			df3dy = 6.9*(wiebe_para[9] + 1)*yltoml*exp(-6.9*yl*yltoml) / wiebe6Temp;
			dmf_nom = wiebe_para[1]*df1dy + wiebe_para[2]*df2dy + (1-wiebe_para[1] - wiebe_para[2])*df3dy;
			dmf = mqf*dmf_nom*omega*180/pi;
		default do
			dmf = 0;
	end;	

	pp.f=dmf;
	pF.f= dmf;
	pT.f=dmf*hn;
	/*
	inarr_pfimax=[time; phi; P];
	outarr_pfimax=dll(dll_ICE,dll_icemax, inarr_pfimax);

	Pmax=outarr_pfimax[1];Pmax_pfi=outarr_pfimax[2];

	p_max = [Pmax;Pmax_pfi];
	*/


implementation_end;
specification_end;
										specification 'FixedWiebeUserInput'
description '<Information>
 <Description>
    <Version>4.6</Version>
  <LibraryPath>Combustion\CombFixedROHR.emx</LibraryPath>
  <TimeStamp>2016-4-10 09:52:35</TimeStamp>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type Submodel
  ports
   signal in pfi;
   signal in x_lev;
   signal in fiinj;
   signal in omega;
   power out pp;
   power out pT;
   power out pF;
   signal out Comb_state;
 end;
 icon bg bottom
  figures
   rectangle 680.9 241.5 741.9 271.5 color 0 fill 15132390;
   text 'name' 711.4 256.5 color 0 16;
  terminals
   pfi 704 232 fixed;
   x_lev 687.4 232 fixed;
   fiinj 721.9 232 fixed;
   omega 739.5 232 fixed;
   Comb_state 739.5 280 fixed;
 end;
 implementation eq
parameters
	integer global nCyl;
	integer global nStroke;
	real global hn;
//	real global fiinj;
	real global mqf_max;
	real global fs;
	real global S, B, lambdaR, CR;
// Englib
	string global dll_ICE;
//	string dll_fcn_rohr    = 'ice_rohr';
//	string dll_icemax    = 'ice_pfimax';
//	string hidden dll_fcn_ThDP = 'thdyn_CombGasZach'; // subroutines names in the dll file
//	string dll_fcn_rohr = 		'ice_rohr2';
variables
	real phi;
	real phi_comb;
	real P, F, T;
	real dmf;
	real mqf;
//	real inarr_ROHR[20], outarr_ROHR[13];
	real fiig;
//	real hidden inarr_pfimax[3], outarr_pfimax[2];
//	real hidden inarr_ThermoProp[3], outarr_ThermoProp[13];
//	real Pmax, Pmax_pfi;
//	real bmepnom, omeganom;
//	real eta_i, sfoc;
//	real mfPC, mf, Oldmf, OldmfPC;
	boolean reset;
	real wiebe3Temp, wiebe4Temp, wiebe5Temp, wiebe6Temp;  // Wiebe parameters related to combustion duration
	
	real dphi_comb, igdel, dmf_nom;
	real yp, ym, yl, yptomp, ymtomm, yltoml, df1dy, df2dy, df3dy;
	real global wiebe_para[9];
	real pAtInj, TAtInj, phiInj;
	

initialequations
	Comb_state = 0;
	// 0: Start of new cycle / 1 : injection started / 2 : start of combustion / 5: end of combustion
//	if fiinj > 180 then fiinj = fiinj - 360; end;	
	fiig = 0;
	reset = true;
	mqf = 0;
	dmf = 0;
	wiebe3Temp = wiebe_para[3];	wiebe4Temp = wiebe_para[4];	
	wiebe5Temp = wiebe_para[5];	wiebe6Temp = wiebe_para[6];	
	dphi_comb = wiebe3Temp + wiebe6Temp;
	
code
	P=pp.e; F=pF.e; T=pT.e;
	phi = pfi*180/pi mod (nStroke*180);
	if phi > nStroke*90 then 
		phi_comb= phi - nStroke*180;  
	else
		phi_comb = phi;
	end;
	if phi_comb > fiinj and Comb_state == 0 then
		Comb_state = 1;
		mqf = mqf_max * x_lev;
		igdel = 180/pi*omega*1e-3*0.0405*exp(5473/T)*(P*1e-5)^(-0.757);
		pAtInj = P;
		TAtInj = T;
		phiInj = phi_comb;
		// Vary combustion duration according to amount of injection
		wiebe3Temp = 0.6*wiebe_para[3]*(1+0.6667*x_lev);
		wiebe4Temp = 0.6*wiebe_para[4]*(1+0.6667*x_lev);
		wiebe5Temp = 0.6*wiebe_para[5]*(1+0.6667*x_lev);
		wiebe6Temp = 0.6*wiebe_para[6]*(1+0.6667*x_lev);
		dphi_comb = wiebe3Temp + wiebe6Temp;
		// For constant duration, use following
		// dphi_comb = wiebe_para[3] + wiebe_para[6];		
		// **********************************************************

		
		if igdel > 30 then
			Comb_state = 5;
		end;
		fiig = fiinj + igdel;
		reset = false;		
	else if phi_comb > fiig and phi_comb < fiig + dphi_comb and Comb_state == 1 then
				Comb_state = 2;
				reset = true;
			else	if phi_comb > fiig + dphi_comb and reset == true then
						Comb_state = 5;
						reset = false;
					end;
			end;
	end;		
	
	if phi_comb > -20 and phi_comb < -15 then
		Comb_state = 0;
		reset = true;
	end;			

	switch Comb_state
		case 2 do
			yp = max([(phi_comb - fiig) / wiebe4Temp;0]);
			ym = max([0;(phi_comb - (fiig + wiebe3Temp))/wiebe5Temp]);
			yl = max([0;(phi_comb - (fiig + wiebe3Temp))/wiebe6Temp]);
			yptomp = yp^wiebe_para[7];
			ymtomm = ym^wiebe_para[8];
			yltoml = yl^wiebe_para[9];
			df1dy = 6.9*(wiebe_para[7] + 1)*yptomp*exp(-6.9*yp*yptomp) / wiebe4Temp;
			df2dy = 6.9*(wiebe_para[8] + 1)*ymtomm*exp(-6.9*ym*ymtomm) / wiebe5Temp;
			df3dy = 6.9*(wiebe_para[9] + 1)*yltoml*exp(-6.9*yl*yltoml) / wiebe6Temp;
			dmf_nom = wiebe_para[1]*df1dy + wiebe_para[2]*df2dy + (1-wiebe_para[1] - wiebe_para[2])*df3dy;
			dmf = mqf*dmf_nom*omega*180/pi;
		default do
			dmf = 0;
	end;	

	pp.f=dmf;
	pF.f= dmf;
	pT.f=dmf*hn;
	/*
	inarr_pfimax=[time; phi; P];
	outarr_pfimax=dll(dll_ICE,dll_icemax, inarr_pfimax);

	Pmax=outarr_pfimax[1];Pmax_pfi=outarr_pfimax[2];

	p_max = [Pmax;Pmax_pfi];
	*/


implementation_end;
specification_end;
									end;
         SFOC 544 528.2
          description '<Information>
 <Description>
    <Version>4.5</Version>
  <LibraryPath>PerformanceIndexCalc\SFOC.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <TimeStamp>2015-11-14 21:29:40</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
          type 'Submodel-Equation'
           ports
            signal in phi;
            signal in powCyl;
            signal in dmf;
          end;
          implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/
parameters
	integer global nStroke;
	real global vDisp;
variables
	integer reset;	
	real phiTwoPi;
	real mf, mfTemp, mfCyc, W, WCyc, WTemp;
	real ISFC, IMEP;
initialequations
	mfTemp = 0;
	WTemp = 0;
	reset = 1;	
	ISFC = 0;
equations
	phiTwoPi = phi mod (nStroke*pi);

	mf = int(dmf);
	W = int(powCyl);
	
	if phiTwoPi > (nStroke-0.5)*pi and reset == 0 then
		reset = 1;
		mfCyc = mf - mfTemp;
		WCyc = W - WTemp;
		IMEP = WCyc/vDisp/1e5;
		ISFC = mfCyc / WCyc * 3.6e9;
		mfTemp = mf;
		WTemp = W;
	end;	
	
	if phiTwoPi > pi/10 and phiTwoPi < pi/8 and reset == 1 then
		reset = 0;
	end;

implementation_end;
         Splitter1 1000 408
          description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
          knot Splitter
           ports
            signal knot duplicatable out output [1];
            signal knot in input [1];
          end;
          icon bg ellipse
           figures
            ellipse 996.8 404.8 1003.2 411.2 color -1 fill 0;
            ellipse 995.7 403.7 1004.3 412.3 color -1;
           terminals
            input 1000 408 fixed;
          end;
          implementation eq
equations
    collect (output) = input;
implementation_end;
         Splitter2 912 208
          description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
          knot Splitter
           ports
            signal knot duplicatable out output [1];
            signal knot in input [1];
          end;
          icon bg ellipse
           figures
            ellipse 908.8 204.8 915.2 211.2 color -1 fill 0;
            ellipse 907.7 203.7 916.3 212.3 color -1;
           terminals
            input 912 208 fixed;
          end;
          implementation eq
equations
    collect (output) = input;
implementation_end;
         Splitter3 688 208
          description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
          knot Splitter
           ports
            signal knot duplicatable out output [1];
            signal knot in input [1];
          end;
          icon bg ellipse
           figures
            ellipse 684.8 204.8 691.2 211.2 color -1 fill 0;
            ellipse 683.7 203.7 692.3 212.3 color -1;
           terminals
            input 688 208 fixed;
          end;
          implementation eq
equations
    collect (output) = input;
implementation_end;
         Splitter4 832 544
          description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
          knot Splitter
           ports
            signal knot duplicatable out output [1];
            signal knot in input [1];
          end;
          icon bg ellipse
           figures
            ellipse 828.8 540.8 835.2 547.2 color -1 fill 0;
            ellipse 827.7 539.7 836.3 548.3 color -1;
           terminals
            input 832 544 fixed;
          end;
          implementation eq
equations
    collect (output) = input;
implementation_end;
         Splitter5 928 624
          description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
          knot Splitter
           ports
            signal knot duplicatable out output [1];
            signal knot in input [1];
          end;
          icon bg ellipse
           figures
            ellipse 924.8 620.8 931.2 627.2 color -1 fill 0;
            ellipse 923.7 619.7 932.3 628.3 color -1;
           terminals
            input 928 624 fixed;
          end;
          implementation eq
equations
    collect (output) = input;
implementation_end;
         Splitter6 656 336
          description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
          knot Splitter
           ports
            signal knot duplicatable out output [1];
            signal knot in input [1];
          end;
          icon bg ellipse
           figures
            ellipse 652.8 332.8 659.2 339.2 color -1 fill 0;
            ellipse 651.7 331.7 660.3 340.3 color -1;
           terminals
            input 656 336 fixed;
          end;
          implementation eq
equations
    collect (output) = input;
implementation_end;
         Splitter7 784 624
          description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
          knot Splitter
           ports
            signal knot duplicatable out output [1];
            signal knot in input [1];
          end;
          icon bg ellipse
           figures
            ellipse 780.8 620.8 787.2 627.2 color -1 fill 0;
            ellipse 779.7 619.7 788.3 628.3 color -1;
           terminals
            input 784 624 fixed;
          end;
          implementation eq
equations
    collect (output) = input;
implementation_end;
         Splitter8 784 480
          description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
          knot Splitter
           ports
            signal knot duplicatable out output [1];
            signal knot in input [1];
          end;
          icon bg ellipse
           figures
            ellipse 780.8 476.8 787.2 483.2 color -1 fill 0;
            ellipse 779.7 475.7 788.3 484.3 color -1;
           terminals
            input 784 480 fixed;
          end;
          implementation eq
equations
    collect (output) = input;
implementation_end;
         Splitter9 624 432
          description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
          knot Splitter
           ports
            signal knot duplicatable out output [1];
            signal knot in input [1];
          end;
          icon bg ellipse
           figures
            ellipse 620.8 428.8 627.2 435.2 color -1 fill 0;
            ellipse 619.7 427.7 628.3 436.3 color -1;
           terminals
            input 624 432 fixed;
          end;
          implementation eq
equations
    collect (output) = input;
implementation_end;
         Submodel2 848.9 424
          description '<Information>
  <Description>
    <LibraryPath>engine\HeatTransferEichelberg.emx</LibraryPath>
    <TimeStamp>2014-10-9 23:04:23</TimeStamp>
    <Version>4.4</Version>
  </Description>
</Information>
';
          type Submodel
           ports
            power in pQ;
            signal in Vol;
            signal in Pcyl;
            signal in omega;
            power out pQOut;
          end;
          icon bg bottom
           figures
            text 'dQ' 848.9 424 color 0 36;
           terminals
            pQ 824 432 fixed;
            Vol 872 432 fixed;
            Pcyl 824 408 fixed;
            omega 872 408 fixed;
          end;
          implementation bg
           submodels
            plug pQ 30 135;
            plug Vol 112.5 52.5;
            plug Pcyl 165 52.5;
            plug omega 217.6 52.5;
            plug pQOut 248 136;
            R1 168 136
             type R
              ports
               power in pTCyl;
               power out pTwall;
               signal in Vol;
               signal in Pcyl;
               signal in omega;
              restrictions
               causality fixed in pTCyl;
             end;
             icon bg bottom
              figures
               text 'R' 168 136 color 0 18 bold;
             end;
             implementation eq
parameters
	real global S, B;
	real global coeff_alpha;
variables
	real hidden Area, AreaLin, AreaPis, alfa;
	real Q;
initialequations
	AreaPis = 2*pi/4.0*B^2;	
equations				
	AreaLin=Vol*4.0/B;
	Area = AreaPis + AreaLin;
	alfa = coeff_alpha*sqrt(Pcyl*pTCyl.e*1.0e-5)*(S*omega/pi)^0.333;
	Q = alfa*Area*(pTCyl.e-pTwall.e);    

	pTCyl.f= Q;
	pTwall.f= Q;
implementation_end;
            ZeroJunction1 97.5 135
             knot ZeroJunction
              ports
               power knot duplicatable none p [1];
               signal knot out effort [1];
              restrictions
               causality constraint one_in p;
             end;
             icon bg
              figures
               text '0' 97.5 135 color 0 18 bold;
             end;
             implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
    implementation_end;
           end;
           connections
            omega -> R1\omega;
            Pcyl -> R1\Pcyl;
            pQ => ZeroJunction1\p;
            R1\pTwall => pQOut;
            Vol -> R1\Vol;
            ZeroJunction1\p => R1\pTCyl;
           end;
          implementation_end;
         Submodel9 528 464
          description '<Description><Version>4.0</Version>
   <LibraryPath>Template\Submodel-Equation.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
   <TimeStamp>2007-11-1 22:32:1</TimeStamp>
   <AllowLibraryUpdate>False</AllowLibraryUpdate>
</Description>';
          type 'Submodel-Equation'
           ports
            signal in mCyl;
            signal in mbCyl;
            signal in ECyl;
            signal in vCyl;
            signal in combState;
            signal in pAR;
            signal in TAR;
          end;
          implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/
parameters
	real global vDisp;
variables
	real mAtInj,	EAtInj, mbAtInj, vAtInj;
	real volEff;
initialequations
	mAtInj = 0;
	EAtInj = 0;
	mbAtInj = 0;
	vAtInj = 0;
equations
	if combState == 1 then
		volEff = mCyl / (pAR/(TAR*287)*vDisp);
		mAtInj = mCyl;
		EAtInj = ECyl;
		mbAtInj = mbCyl;
		vAtInj = vCyl;
	end;	
implementation_end;
         TWall 951.9 432
									specifications active 'externalInput'
										specification 'constant'
description '<Information>
 <Description>
    <Version>4.6</Version>
  <LibraryPath>HeatTransfer\TemperatureWall.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>True</KeepParameterValues>
    <TimeStamp>2016-4-11 15:13:07</TimeStamp>
<AllowLibraryUpdate>False</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type 'Submodel-Graphical'
  ports
   pseudothermal in port1;
 end;
 icon bg shadow 11776947
  figures
   rectangle 926.9 416.9 977 447.1 color 0 fill 15132390;
   text 'name' 951.9 432 color 0 16;
 end;
 implementation bg
  submodels
   MSe 432 144
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:12:33</TimeStamp>
</Description>
</Information>';
    type MSe
     ports
      power in p;
      signal in effort;
     restrictions
      causality fixed out p;
    end;
    icon bg bottom
     figures
      text 'MSe' 432 144 color 0 18 bold;
    end;
    implementation eq
variables
	real flow;
equations
	p.e = effort;
	flow = p.f;
implementation_end;
   plug port1 320 144;
   tWallConst 504 144
    description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Sources\Constant.emx</LibraryPath><TimeStamp>2007-10-19 14:48:44</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
    type Constant
     ports
      signal out output;
    end;
    icon bg bottom
     figures
      rectangle 488.1 128 519.9 160 color 0 fill 15132390;
      line 492.9 139.6 514.9 139.6 color 16711680 width 2;
      line 490.2 150.7 515.9 150.7 color 0;
      line 492.5 134.7 492.5 153 color 0;
    end;
    implementation eq
parameters
	real global T_w_init;		// output value
equations
	output = T_w_init;
     implementation_end;
  end;
  connections
   MSe\effort <- tWallConst\output;
   MSe\p <= port1;
  end;
 implementation_end;
specification_end;
										specification 'externalInput'
 description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Graphical.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>True</KeepParameterValues><TimeStamp>2007-11-1 22:32:34</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type 'Submodel-Graphical'
  ports
   pseudothermal in port1;
   signal in tWall;
  restrictions
   causality fixed out port1;
 end;
 icon bg shadow 11776947
  figures
   rectangle 926.9 416.9 977 447.1 color 0 fill 15132390;
   text 'name' 951.9 432 color 0 16;
 end;
 implementation bg
  submodels
   MSe 432 144
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:12:33</TimeStamp>
</Description>
</Information>';
    type MSe
     ports
      power in p;
      signal in effort;
     restrictions
      causality fixed out p;
    end;
    icon bg bottom
     figures
      text 'MSe' 432 144 color 0 18 bold;
    end;
    implementation eq
variables
	real flow;
equations
	p.e = effort;
	flow = p.f;
implementation_end;
   plug port1 320 144;
   plug tWall 520 144;
  end;
  connections
   MSe\p <= port1;
   tWall -> MSe\effort;
  end;
 implementation_end;
specification_end;
										specification 'heatCapacity_empiricalWallCooling_poly'
description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Graphical.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>True</KeepParameterValues><TimeStamp>2007-11-1 22:32:34</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type 'Submodel-Graphical'
  ports
   pseudothermal in port1;
  restrictions
   causality fixed out port1;
 end;
 icon bg shadow 11776947
  figures
   rectangle 934.9 432.9 985 463.1 color 0 fill 15132390;
   text 'name' 959.9 448 color 0 16;
 end;
 implementation bg
  submodels
   C 408 208
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\C.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:58:35</TimeStamp>
</Description>
</Information>';
    type C
     ports
      power in p;
      signal out state;
     restrictions
      causality preferred out p;
    end;
    icon bg bottom
     figures
      text 'C' 408 208 color 0 18 bold;
    end;
    implementation eq
parameters
	real global mCp;
	real global T_w_init;
variables
	real global E_init;
initialequations
	E_init = mCp*T_w_init;		
equations
	state = int(p.f, E_init);
	p.e = state / mCp;
implementation_end;
   plug port1 320 144;
   R 496 144
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\R.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:35:37</TimeStamp>
</Description>
</Information>';
    type R
     ports
      power in p;
    end;
    icon bg bottom
     figures
      text 'R' 496 144 color 0 18 bold;
    end;
    implementation eq
parameters
	real global C_cylHT[4];
	integer global ncyl;
variables
	real T_w;	
equations
	T_w = p.e;
	p.f = (((C_cylHT[1]*T_w + C_cylHT[2])*T_w + C_cylHT[3])*T_w + C_cylHT[4])*1e3/ncyl;
implementation_end;
   ZeroJunction 408 144
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermal knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 408 144 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   port1 => ZeroJunction\p;
   ZeroJunction\p => C\p;
   ZeroJunction\p => R\p;
  end;
 implementation_end;
specification_end;
									end;
        end;
        connections
         Constant\output -> CrankMechanism1\p_scvg;
         contSig -> Demux\input;
         CrankMechanism1\flow -> Splitter1\input 1000 576;
         CrankMechanism1\p2 => M;
         CrankMechanism1\q_rad -> Splitter7\input;
         Demux\EVAreaMulti -> exhVV\areaMultiplier 888 168;
         Demux\EVC -> exhVV\dVONom 856 168;
         Demux\EVO -> exhVV\VONom 832 168;
         Demux\injDur -> ROHR\x_lev;
         Demux\IVAreaMulti -> intakeVV\areaMultiplier 544 168;
         Demux\IVC -> intakeVV\dVONom 512 168;
         Demux\IVO -> intakeVV\VONom 488 168;
         Demux\phiInj -> ROHR\fiinj 704 176;
         Demux1\output -> Splitter6\input;
         Demux2\output1 -> LowPassFilter\u;
         Demux2\output2 -> LowPassFilter1\u;
         dmf <- Splitter6\output;
         EffortSensor1\effort -> Splitter4\input;
         EffortSensor1\p2 => CrankMechanism1\p1;
         EffortSensor2\effort -> Demux2\input;
         EffortSensor2\p1 <= ppTFIn;
         engCylCV\ECyl -> Submodel9\ECyl;
         engCylCV\mbCyl -> Submodel9\mbCyl;
         engCylCV\mCyl -> Splitter9\input;
         engCylCV\pHT => QCyl\p1;
         engCylCV\ppV => PowerSensor\p1;
         engCylCV\pTFIn2 <= FlowSensor\p2;
         engCylCV\pTFOut => exhVV\pTFIn 744 312;
         engCylCV\vCyl -> Splitter8\input;
         exhVV\pTFOut => ppTFOut;
         FlowSensor\flow -> Demux1\input;
         FlowSensor\p1 <= PowerMux\output;
         FlowSensor1\flow -> dQCyl;
         FlowSensor1\p2 => Submodel2\pQ;
         intakeVV\CA <- Splitter3\output 568 208;
         intakeVV\pTFIn <= EffortSensor2\p2;
         intakeVV\pTFOut => engCylCV\pTFIn1 672 312;
         LowPassFilter\y -> Submodel9\pAR;
         LowPassFilter1\y -> Submodel9\TAR;
         pMaxFinder\phi <- Splitter5\output;
         pMaxFinder\pMax -> pMax;
         PowerSensor\P -> SFOC\powCyl;
         PowerSensor\p2 => EffortSensor1\p1;
         QCyl\p2 => FlowSensor1\p1;
         ROHR\Comb_state -> Submodel9\combState;
         ROHR\pF => PowerMux\input3;
         ROHR\pp => PowerMux\input1;
         ROHR\pT => PowerMux\input2;
         Splitter1\output -> ROHR\omega 1000 232;
         Splitter2\output -> exhVV\CA;
         Splitter2\output -> Splitter3\input 880 208;
         Splitter3\output -> ROHR\pfi;
         Splitter4\output -> pMaxFinder\pCyl;
         Splitter4\output -> Submodel2\Pcyl 832 544 832 432;
         Splitter5\output -> Splitter2\input 1136 624 1136 208;
         Splitter6\output -> SFOC\dmf 656 512 608 512;
         Splitter7\output -> SFOC\phi 784 544 600 544;
         Splitter7\output -> Splitter5\input;
         Splitter8\output -> Submodel2\Vol 904 480;
         Splitter8\output -> Submodel9\vCyl 784 520;
         Splitter9\output -> intakeVV\mCyl;
         Splitter9\output -> Submodel9\mCyl;
         Submodel2\omega <- Splitter1\output 904 408;
         Submodel2\pQOut => TWall\port1;
         tWall -> TWall\tWall;
        end;
        figures
         line 704 536 704 544 color 0;
       implementation_end;
      FlowSensor1 496 440
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:12</TimeStamp>
</Description>';
       knot FlowSensor
        ports
         rotation knot in p1 [1];
         rotation knot out p2 [1];
         signal knot out flow [1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         ellipse 489.1 432.1 502.9 447.9 color 0 fill 16777215;
         text 'f' 496.5 438.2 color 0;
       end;
       implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
      implementation_end;
      FlowSensor2 416 168
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:12</TimeStamp>
</Description>';
       knot FlowSensor
        ports
         power knot in p1 [3,1];
         power knot out p2 [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         ellipse 409.1 160.1 422.9 175.9 color 0 fill 16777215;
         text 'f' 416.5 166.2 color 0;
       end;
       implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
      implementation_end;
      FlowSensor3 464 208
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:12</TimeStamp>
</Description>';
       knot FlowSensor
        ports
         power knot in p1 [3,1];
         power knot out p2 [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         ellipse 457.1 200.1 470.9 215.9 color 0 fill 16777215;
         text 'f' 464.5 206.2 color 0;
       end;
       implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
      implementation_end;
      FMEP 664 568
       description '<Information><Description><Version>4.2</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\R.emx</LibraryPath><TimeStamp>2011-11-29 16:35:37</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type R
        ports
         power in p;
         signal in pMax;
       end;
       icon bg bottom
        figures
         text 'R' 664 568 color 0 18 bold;
       end;
       implementation eq
parameters
	real alpha = 0.111;
	real beta = 0.008;
	real gamma = 0.2272;
	real global S;
	real global B;
	integer global nCyl;	
	integer global nStroke;
variables
	real Vp;		// mean piston speed
	real fmep;	// fmep	
	real m;		// modulus for transforming fmep to torque
initialequations
	m = B^2*pi/4*S/(nStroke*pi);
equations
	Vp = 2*S*p.f / (2*pi);
	fmep = alpha + beta*pMax/1e5 + gamma * Vp; 
	p.e = fmep*1e5*m*nCyl;
implementation_end;
      LPPower 920 552
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Filters\LowPassFilter-BW4.emx</LibraryPath><TimeStamp>2007-9-27 15:23:6</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
       type 'LowPassFilter-BW4'
        ports
         signal in u;
         signal out y;
       end;
       icon bg bottom
        figures
         rectangle 872 536 968 568 color 0 fill 15132390;
         text 'Low-Pass Filter' 920.5 544.7 color 16711680 14;
         text 'BW 4    (rad/s) ' 922.1 558.4 color 16711680 14;
         text 'th' 916.3 554.3 color 16711680;
       end;
       implementation eq
// Created by C. Kleijn, 27 September 1999
parameters
    real BW  = 5;	// Bandwidth (Hz)
variables
    real hidden s1y,s2y,s3y,s4y,BWrad;
equations
	BWrad = twopi*BW;
	s4y = BWrad^4.0*(u - y) - BWrad^3.0*2.6131*s1y - BWrad^2.0*3.4142*s2y - BWrad*2.6131*s3y;
  	s3y = int(s4y,0);
	s2y = int(s3y,0);
	s1y = int(s2y,0);
   	y = int(s1y,0);
        implementation_end;
      MSe 584 416
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:12:33</TimeStamp>
</Description>
</Information>';
       type MSe
        ports
         power out p;
         signal in effort;
        restrictions
         causality fixed out p;
       end;
       icon bg bottom
        figures
         text 'MSe' 584 416 color 0 18 bold;
       end;
       implementation eq
variables
	real flow;
equations
	p.e = effort;
	flow = p.f;
implementation_end;
      MSe1 664 416
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:12:33</TimeStamp>
</Description>
</Information>';
       type MSe
        ports
         power out p;
         signal in effort;
        restrictions
         causality fixed out p;
       end;
       icon bg bottom
        figures
         text 'MSe' 664 416 color 0 18 bold;
       end;
       implementation eq
variables
	real flow;
equations
	p.e = effort;
	flow = p.f;
implementation_end;
      MSe2 744 416
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:12:33</TimeStamp>
</Description>
</Information>';
       type MSe
        ports
         power out p;
         signal in effort;
        restrictions
         causality fixed out p;
       end;
       icon bg bottom
        figures
         text 'MSe' 744 416 color 0 18 bold;
       end;
       implementation eq
variables
	real flow;
equations
	p.e = effort;
	flow = p.f;
implementation_end;
      MSe3 824 416
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:12:33</TimeStamp>
</Description>
</Information>';
       type MSe
        ports
         power out p;
         signal in effort;
        restrictions
         causality fixed out p;
       end;
       icon bg bottom
        figures
         text 'MSe' 824 416 color 0 18 bold;
       end;
       implementation eq
variables
	real flow;
equations
	p.e = effort;
	flow = p.f;
implementation_end;
      MSe4 904 416
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:12:33</TimeStamp>
</Description>
</Information>';
       type MSe
        ports
         power out p;
         signal in effort;
        restrictions
         causality fixed out p;
       end;
       icon bg bottom
        figures
         text 'MSe' 904 416 color 0 18 bold;
       end;
       implementation eq
variables
	real flow;
equations
	p.e = effort;
	flow = p.f;
implementation_end;
      MSf 504 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
       type MSf
        ports
         power in p [3,1];
         signal in flow [3,1];
        restrictions
         causality fixed in p;
       end;
       icon bg bottom
        figures
         text 'MSf' 504 120 color 0 18 bold;
       end;
       implementation eq
variables
	real effort[3];
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
      MSf1 552 152
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
       type MSf
        ports
         power out p [3,1];
         signal in flow [3,1];
        restrictions
         causality fixed in p;
       end;
       icon bg bottom
        figures
         text 'MSf' 552 152 color 0 18 bold;
       end;
       implementation eq
variables
	real effort[3];
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
      MSf2 592 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
       type MSf
        ports
         power in p [3,1];
         signal in flow [3,1];
        restrictions
         causality fixed in p;
       end;
       icon bg bottom
        figures
         text 'MSf' 592 120 color 0 18 bold;
       end;
       implementation eq
variables
	real effort[3];
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
      MSf3 640 152
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
       type MSf
        ports
         power out p [3,1];
         signal in flow [3,1];
        restrictions
         causality fixed in p;
       end;
       icon bg bottom
        figures
         text 'MSf' 640 152 color 0 18 bold;
       end;
       implementation eq
variables
	real effort[3];
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
      MSf4 680 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
       type MSf
        ports
         power in p [3,1];
         signal in flow [3,1];
        restrictions
         causality fixed in p;
       end;
       icon bg bottom
        figures
         text 'MSf' 680 120 color 0 18 bold;
       end;
       implementation eq
variables
	real effort[3];
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
      MSf5 728 152
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
       type MSf
        ports
         power out p [3,1];
         signal in flow [3,1];
        restrictions
         causality fixed in p;
       end;
       icon bg bottom
        figures
         text 'MSf' 728 152 color 0 18 bold;
       end;
       implementation eq
variables
	real effort[3];
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
      MSf6 768 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
       type MSf
        ports
         power in p [3,1];
         signal in flow [3,1];
        restrictions
         causality fixed in p;
       end;
       icon bg bottom
        figures
         text 'MSf' 768 120 color 0 18 bold;
       end;
       implementation eq
variables
	real effort[3];
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
      MSf7 816 152
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
       type MSf
        ports
         power out p [3,1];
         signal in flow [3,1];
        restrictions
         causality fixed in p;
       end;
       icon bg bottom
        figures
         text 'MSf' 816 152 color 0 18 bold;
       end;
       implementation eq
variables
	real effort[3];
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
      MSf8 856 128
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
       type MSf
        ports
         power in p [3,1];
         signal in flow [3,1];
        restrictions
         causality fixed in p;
       end;
       icon bg bottom
        figures
         text 'MSf' 856 128 color 0 18 bold;
       end;
       implementation eq
variables
	real effort[3];
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
      MSf9 904 152
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
       type MSf
        ports
         power out p [3,1];
         signal in flow [3,1];
        restrictions
         causality fixed in p;
       end;
       icon bg bottom
        figures
         text 'MSf' 904 152 color 0 18 bold;
       end;
       implementation eq
variables
	real effort[3];
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
      plug input 616 -64;
      plug fricPow 736 536;
      plug dQCyl 1064 320;
      plug p 1291.9 496;
      plug dmf 1064 288;
      plug p2 999.9 88;
      plug p1 333 64;
      plug tWall 232 320;
      OneJunction1 664 496
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         rotation knot duplicatable none p [1];
         signal knot out flow [1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg
        figures
         text '1' 664 496 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
    implementation_end;
      PlusMinus 984 288
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\PlusMinus.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:15:13</TimeStamp>
</Description>';
       knot PlusMinus
        ports
         signal knot duplicatable in plus [1];
         signal knot duplicatable in minus [1];
         signal knot out output [1];
       end;
       icon bg ellipse
        figures
         ellipse 976 280 992 296 color 0 fill 16777215;
       end;
       implementation eq
equations
    output = sum (collect (plus)) - sum (collect (minus));
    implementation_end;
      PlusMinus1 984 320
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\PlusMinus.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:15:13</TimeStamp>
</Description>';
       knot PlusMinus
        ports
         signal knot duplicatable in plus [1];
         signal knot duplicatable in minus [1];
         signal knot out output [1];
       end;
       icon bg ellipse
        figures
         ellipse 976 312 992 328 color 0 fill 16777215;
       end;
       implementation eq
equations
    output = sum (collect (plus)) - sum (collect (minus));
    implementation_end;
      PowerSensor1 664 536
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:29:42</TimeStamp>
</Description>
</Information>';
       knot PowerSensor
        ports
         rotation knot in p1 [1];
         power knot out p2 [1];
         signal knot out P [1] {W} ;
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         ellipse 657.1 528.8 670.9 543.2 color 0 fill 16777215;
         text 'P' 664.5 535.8 color 0;
       end;
       implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	P = p1.e .* p1.f;
implementation_end;
      Splitter1 616 32
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [9,1];
         signal knot in input [9,1];
       end;
       icon bg ellipse
        figures
         ellipse 612.8 28.8 619.2 35.2 color -1 fill 0;
         ellipse 611.7 27.7 620.3 36.3 color -1;
        terminals
         input 616 32 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter3 712 328
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 708.8 324.8 715.2 331.2 color -1 fill 0;
         ellipse 707.7 323.7 716.3 332.3 color -1;
        terminals
         input 712 328 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter5 712 344
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 708.8 340.8 715.2 347.2 color -1 fill 0;
         ellipse 707.7 339.7 716.3 348.3 color -1;
        terminals
         input 712 344 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter6 344 320
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 340.8 316.8 347.2 323.2 color -1 fill 0;
         ellipse 339.7 315.7 348.3 324.3 color -1;
        terminals
         input 344 320 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter7 712 256
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 708.8 252.8 715.2 259.2 color -1 fill 0;
         ellipse 707.7 251.7 716.3 260.3 color -1;
        terminals
         input 712 256 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter8 448 168
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [3,1];
         signal knot in input [3,1];
       end;
       icon bg ellipse
        figures
         ellipse 444.8 164.8 451.2 171.2 color -1 fill 0;
         ellipse 443.7 163.7 452.3 172.3 color -1;
        terminals
         input 448 168 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter9 496 208
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [3,1];
         signal knot in input [3,1];
       end;
       icon bg ellipse
        figures
         ellipse 492.8 204.8 499.2 211.2 color -1 fill 0;
         ellipse 491.7 203.7 500.3 212.3 color -1;
        terminals
         input 496 208 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      ZeroJunction 416 64
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg
        figures
         text '0' 416 64 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction1 856 64
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg
        figures
         text '0' 856 64 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
    implementation_end;
      ZeroJunction10 768 64
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg
        figures
         text '0' 768 64 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
    implementation_end;
      ZeroJunction11 904 88
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg
        figures
         text '0' 904 88 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
    implementation_end;
      ZeroJunction3 552 88
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg
        figures
         text '0' 552 88 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
    implementation_end;
      ZeroJunction4 504 64
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg
        figures
         text '0' 504 64 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
    implementation_end;
      ZeroJunction5 592 64
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg
        figures
         text '0' 592 64 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
    implementation_end;
      ZeroJunction6 728 88
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg
        figures
         text '0' 728 88 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
    implementation_end;
      ZeroJunction7 640 88
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg
        figures
         text '0' 640 88 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
    implementation_end;
      ZeroJunction8 680 64
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg
        figures
         text '0' 680 64 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
    implementation_end;
      ZeroJunction9 816 88
       description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg
        figures
         text '0' 816 88 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
    implementation_end;
     end;
     connections
      delay\output -> MSe\effort;
      delay1\output -> MSe1\effort;
      delay10\output -> MSf5\flow;
      delay11\output -> MSf6\flow;
      delay12\output -> MSf7\flow;
      delay14\output -> MSf9\flow;
      delay2\output -> MSe2\effort;
      delay3\output -> MSe3\effort;
      delay4\output -> MSe4\effort;
      delay5\output -> MSf\flow;
      delay6\input <- Splitter9\output;
      delay6\output -> MSf1\flow;
      delay7\output -> MSf2\flow;
      delay8\input <- Splitter9\output;
      delay8\output -> MSf3\flow;
      delay9\output -> MSf4\flow;
      EffortSensor1\effort -> LPPower\u 824 552;
      EffortSensor1\p2 => p;
      EffortSensor2\effort -> Splitter5\input 528 344;
      EffortSensor2\p1 <= FlowSensor1\p2;
      Eng_Cyl1\dmf -> PlusMinus\plus;
      Eng_Cyl1\dQCyl -> PlusMinus1\plus;
      Eng_Cyl1\pMax -> FMEP\pMax 432 568;
      Eng_Cyl1\ppTFOut => FlowSensor3\p1;
      FlowSensor1\flow -> Splitter3\input 496 328;
      FlowSensor1\p1 <= Eng_Cyl1\M;
      FlowSensor2\flow -> Splitter8\input;
      FlowSensor2\p2 => Eng_Cyl1\ppTFIn;
      FlowSensor3\p2 => ZeroJunction3\p 464 88;
      FMEP\p <= PowerSensor1\p2;
      input -> Splitter1\input;
      MSe\p => OneJunction1\p;
      MSe1\p => OneJunction1\p;
      MSe2\p => OneJunction1\p;
      MSe3\p => OneJunction1\p;
      MSe4\p => OneJunction1\p;
      MSf\p <= ZeroJunction4\p;
      MSf1\p => ZeroJunction3\p;
      MSf2\p <= ZeroJunction5\p;
      MSf3\p => ZeroJunction7\p;
      MSf4\p <= ZeroJunction8\p;
      MSf5\p => ZeroJunction6\p;
      MSf7\p => ZeroJunction9\p;
      MSf8\flow <- delay13\output;
      MSf9\p => ZeroJunction11\p;
      OneJunction1\p <= EffortSensor2\p2;
      OneJunction1\p => EffortSensor1\p1;
      p1 => ZeroJunction\p;
      PlusMinus\output -> dmf;
      PlusMinus1\output -> dQCyl;
      PowerSensor1\P -> fricPow;
      PowerSensor1\p1 <= OneJunction1\p;
      Splitter1\output -> Eng_Cyl1\contSig 440 32;
      Splitter3\output -> delay\omega 712 328 584 328;
      Splitter3\output -> delay1\omega 664 328;
      Splitter3\output -> delay2\omega 744 328;
      Splitter3\output -> delay3\omega 824 328;
      Splitter3\output -> delay4\omega 904 328;
      Splitter3\output -> Splitter7\input;
      Splitter5\output -> delay\input 600 344;
      Splitter5\output -> delay1\input 680 344;
      Splitter5\output -> delay2\input 752 344;
      Splitter5\output -> delay3\input 832 344;
      Splitter5\output -> delay4\input 912 344;
      Splitter6\output -> Eng_Cyl1\tWall;
      Splitter7\output -> delay10\omega 712 256 728 248;
      Splitter7\output -> delay11\omega 768 248;
      Splitter7\output -> delay12\omega 816 248;
      Splitter7\output -> delay13\omega 856 248;
      Splitter7\output -> delay14\omega 904 248;
      Splitter7\output -> delay5\omega 504 248;
      Splitter7\output -> delay6\omega 552 248;
      Splitter7\output -> delay7\omega 592 248;
      Splitter7\output -> delay8\omega 640 248;
      Splitter7\output -> delay9\omega 680 248;
      Splitter8\output -> delay11\input;
      Splitter8\output -> delay13\input;
      Splitter8\output -> delay5\input;
      Splitter8\output -> delay7\input;
      Splitter8\output -> delay9\input;
      Splitter9\input <- FlowSensor3\flow;
      Splitter9\output -> delay10\input;
      Splitter9\output -> delay12\input;
      Splitter9\output -> delay14\input;
      tWall -> Splitter6\input;
      ZeroJunction\p => FlowSensor2\p1;
      ZeroJunction\p => ZeroJunction4\p;
      ZeroJunction1\p => MSf8\p;
      ZeroJunction10\p <= ZeroJunction8\p;
      ZeroJunction10\p => MSf6\p;
      ZeroJunction10\p => ZeroJunction1\p;
      ZeroJunction11\p => p2;
      ZeroJunction3\p => ZeroJunction7\p;
      ZeroJunction5\p <= ZeroJunction4\p 512 64;
      ZeroJunction6\p => ZeroJunction9\p;
      ZeroJunction7\p => ZeroJunction6\p;
      ZeroJunction8\p <= ZeroJunction5\p;
      ZeroJunction9\p => ZeroJunction11\p;
     end;
    implementation_end;
   ExhaustReceiver 656 120
			specifications active 'Energy2PortFixedAdiab'
				specification 'Conv3PortCyl'
description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath><TimeStamp>2015-10-26 20:20:12</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations>parameters
	real p0 = 310000;
	real T0 = 304.45;
	real F0 = 0;
	real V0 = 1.15;</GlobalRelations></Attributes></Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   pneumatic out ppV;
   signal out vCyl;
   signal out mCyl;
   power out pHT;
   power out pTFOut [3,1];
   power in pTFIn2 [3,1];
  restrictions
   causality fixed out pTFIn2;
 end;
 icon bg bottom shadow 11776947
  figures
   line 653.5 801 653.5 721 725.5 721 725.5 801 693.5 801 693.5 793 717.5 793 717.5 729 661.5 729 661.5 793 685.5 793 685.5 801 653.5 801 fill 15132390;
   line 685.5 777 661.5 777 661.5 769 717.5 769 717.5 777 693.5 777 693.5 817 685.5 817 685.5 777 fill 6710886;
   line 661.5 729 717.5 729 717.5 769 661.5 769 661.5 729 fill 55295;
   text 'CV' 693.5 745 16;
   text 'dW' 685.5 825 16;
   spline 730.5 754 738.5 746 746.5 754 754.5 746;
   text 'dQ' 741.5 769 16;
   spline 730.5 761 738.5 753 746.5 761 754.5 753;
   spline 730.5 747 738.5 739 746.5 747 754.5 739;
  terminals
   pTFIn1 653.5 713 fixed;
   ppV 685.5 833 fixed;
   vCyl 733.5 825 fixed;
   mCyl 733.5 809 fixed;
   pHT 741.5 785 fixed;
   pTFOut 725.5 713 fixed;
   pTFIn2 693.5 713 fixed;
 end;
 implementation bg
  submodels
   MSf1 432 448
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
    type MSf
     ports
      power in p;
      signal in flow;
     restrictions
      causality fixed in p;
    end;
    icon bg bottom
     figures
      text 'MSf' 432 448 18 bold;
    end;
    implementation eq
variables
	real effort;
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
   MTF 352 480
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MTF.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:15:31</TimeStamp>
</Description>
</Information>';
    type MTF
     ports
      pseudopneumatic in ppIn;
      pseudothermalh in pTIn;
      power in pFIn;
      power out ppOut;
      power out pTOut;
      power out pFOut;
      signal in vCyl {m3} ;
      pneumatic out ppVOut;
      signal out mCyl;
     restrictions
      causality fixed out pTIn;
      causality fixed in pFOut;
      causality fixed in pTOut;
      causality fixed out ppIn;
      causality fixed out pFIn;
      causality fixed in ppOut;
    end;
    icon bg bottom
     figures
      text 'MTF' 352 480 'Arial Narrow' 25 bold;
     terminals
      ppIn 328 456 fixed;
      pTIn 352 456 fixed;
      pFIn 376 456 fixed;
      ppOut 328 504 fixed;
      pTOut 352 504 fixed;
      pFOut 376 504 fixed;
      vCyl 376 488 fixed;
      ppVOut 376 480 fixed;
      mCyl 376 496 fixed;
    end;
    implementation eq
parameters
	string global dll_ICE;           //dll file name
	string global dll_fcn_ThDP;			//function name in dll file
	real global fs;							// stoichiometric fuel-to-air ratio
variables
	real dm {kg/s}; // Rate of change in mass
	real dE {J/s}; // Rate of change in internal energy
	real dmb {kg/s}; // Rate of change in burned fuel mass
	real dV {m3/s}; // Rate of change in volume
	real p {Pa};  // pressure of the control volume
	real T {K};		// temperature of the control volume
	real F; 			// Fuel-to-air equivalent ratio of control volume
	real mb {kg};				// mass of burned fuel in the control volume
	real ma {kg}; 				// mass of air in the control volume
	real R {J/kgK};			// Gas constant of the gas
	real u {J/kg};				// Specific internal energy of the gas
	real rho {kg/m3};		// Density of the gas
	real rhop, rhoT, rhoF; // partial derivative of density w.r.t. p, T, F
	real Rp, RT, RF;		// partial derivative of gas constant w.r.t. p, T, F
	real up, uT, uF;   // partial derivative of internal energy w.r.t. p, T, F
	
	real hidden u1, u2, u3, u4, D;
	real hidden a11, a12, a13, a21, a22, a23;
	real hidden RtimesT;
	real hidden RtimesTSq;
	real hidden inArrThProp[5];
	real hidden outArrThProp[16];
equations
	p = ppOut.e;
	T = pTOut.e;
	F = pFOut.e;
	dV = ppVOut.f;
	dm = ppIn.f;
	dE = pTIn.f;
	dmb = pFIn.f;
	
	// Calculate the thermodynamic properties of the gas
	inArrThProp = [p;T;F;fs;1];	
	outArrThProp = dll(dll_ICE,dll_fcn_ThDP, inArrThProp);	
	R = outArrThProp[1]; 			u = outArrThProp[4];
	Rp = outArrThProp[6];			RT = outArrThProp[7];			
	RF = outArrThProp[5];			up = outArrThProp[9];			
	uT = outArrThProp[10];		uF = outArrThProp[8];
	RtimesT = R*T;
	RtimesTSq = RtimesT*RtimesT;
	rho = p/(RtimesT);
	rhop = (RtimesT - p*Rp*T)/RtimesTSq;			
	rhoT = (-p*(RT*T + R))/RtimesTSq;
	rhoF = (-p*(RF*T))/RtimesTSq;
	mCyl = rho*vCyl;
	mb = (F*fs)/(1+F*fs)*mCyl;
	ma = mCyl - mb;
	
	// Calculate the derivative of the p, T, F
	u1 = dm/mCyl - dV/vCyl;
	u2 = (dE - u*dm)/mCyl;
	u3 = (dmb*mCyl - dm*mb)/(fs*ma^2);
	
	D = -(rhoT*up - rhop*uT)/rho;
	a11 = uT / D; 		a12 = -rhoT/(rho*D);		a13 = (rhoT*uF - rhoF*uT)/(rho*D);
	a21 = -up / D;		a22 = rhop/(rho*D);		a23 = -(rhop*uF - rhoF*up)/(rho*D);

	ppOut.f = a11*u1 + a12*u2 + a13*u3;
	pTOut.f = a21*u1 + a22*u2 + a23*u3;
	pFOut.f = u3;
	
	//
		
	ppIn.e = p;
	pTIn.e = T;
	pFIn.e = F;
	ppVOut.e = p;
	
implementation_end;
   plug pTFIn1 208 392.1;
   plug ppV 528 480;
   plug vCyl 510.8 528;
   plug mCyl 512 544;
   plug pHT 472 288;
   plug pTFOut 493 392;
   plug pTFIn2 352.1 240;
   PowerDemux 248 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 248 368 248 416 width 2;
   rectangle 243 376 251 408 color -1;
   text '3' 252 402 color 8421504 8;
  terminals
   output1 248 376 fixed;
   output2 248 392 fixed;
   output3 248 408 fixed;
   input 240 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerDemux1 352 304.5
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 320 304 384 304 width 2;
   rectangle 328 299 360 307 color -1;
   text '3' 354 308 color 8421504 8;
  terminals
   output1 328 304 fixed;
   output2 352 304 fixed;
   output3 376 304 fixed;
   input 352 296 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 456 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 456 368 456 416 width 2;
   rectangle 451 368 459 400 color -1;
   text '3' 460 394 color 8421504 8;
  terminals
   input1 456 376 fixed;
   input2 456 392 fixed;
   input3 456 408 fixed;
   output 464 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   PowerSensor2 480 480
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:29:42</TimeStamp>
</Description>
</Information>';
    knot PowerSensor
     ports
      pneumatic knot in p1 [1];
      pneumatic knot out p2 [1];
      signal knot out P [1] {W} ;
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 473.1 472.8 486.9 487.2 fill 16777215;
      text 'P' 480.5 479.8;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	P = p1.e .* p1.f;
implementation_end;
   QSensor1 424 480
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\QSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:34</TimeStamp>
</Description>';
    knot QSensor
     ports
      pneumatic knot in p1 [1];
      pneumatic knot out p2 [1];
      signal knot out vCyl [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 417.1 473.3 430.9 487.4 fill 16777215;
      text 'q' 423.5 477.6;
    end;
    implementation eq
parameters
	real global V0;
equations
	p2.f = p1.f;
	p1.e = p2.e;
	vCyl = int (p1.f, V0);
     implementation_end;
   Splitter1 424 496
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 420.8 492.8 427.2 499.2 color -1 fill 0;
      ellipse 419.7 491.7 428.3 500.3 color -1;
     terminals
      input 424 496 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Thdyn_Cont_Vol_Cyl 352 568
			specifications active 'Conventional'
				specification 'Conventional'
 description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume for array of cylinders</Description>
    <TimeStamp>2015-10-19 21:36:18</TimeStamp>
</Description>
</Information>';
 type C
  ports
   power in pp;
   power in pF;
   power in pT;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 568 51 bold;
  terminals
   pp 328 544 fixed;
   pF 376 544 fixed;
   pT 352 544 fixed;
 end;
 implementation eq
parameters
	real global p0; 
	real global T0;
	real global F0;

variables
	real interesting p, T, F;

equations
	p 		= int(pp.f,p0);
	T 		= int(pT.f,T0);
	F		= int(pF.f,F0);
	
	pp.e = p;
	pT.e = T;
	pF.e = F;	

implementation_end;
specification_end;
				specification 'cyl'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume for array of cylinders</Description>
    <TimeStamp>2015-10-19 17:31:58</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   pneumatic out ppV;
   signal out vCyl;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 152 480 51 bold;
  terminals
   pp 128 456 fixed;
   pF 176 456 fixed;
   pT 152 456 fixed;
   ppV 152 504 fixed;
   vCyl 176 504 fixed;
   mCyl 176 488 fixed;
 end;
 implementation eq
parameters
	integer global iCyl;
	integer global nCyl;
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global mCyl0[nCyl]; 
	real global ECyl0[nCyl];
	real global mbCyl0[nCyl];
	real global VCyl0[nCyl];

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,mCyl0[iCyl]);
	E 		= int(pT.f,ECyl0[iCyl]);
	m_b	= int(pF.f,mbCyl0[iCyl]);
	V   	= int(ppV.f,VCyl0[iCyl]);

	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[2];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	vCyl = V;
	mCyl = m;implementation_end;
specification_end;
				specification 'Fixed'
description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 104 264 51 bold;
  terminals
   pp 80 240 fixed;
   pF 128 240 fixed;
   pT 104 240 fixed;
   mCyl 128 272 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[2];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information><Description><LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration><Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description><TimeStamp>2015-10-19 17:21:38</TimeStamp></Description></Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 104 264 51 bold;
  terminals
   pp 80 240 fixed;
   pF 128 240 fixed;
   pT 104 240 fixed;
   mCyl 128 272 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[2];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudopneumatic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   MTF\mCyl -> mCyl 416 504 456 544;
   MTF\pFOut => Thdyn_Cont_Vol_Cyl\pF;
   MTF\ppOut => Thdyn_Cont_Vol_Cyl\pp;
   MTF\ppVOut => QSensor1\p1;
   MTF\pTOut => Thdyn_Cont_Vol_Cyl\pT;
   PowerDemux1\input <= pTFIn2;
   PowerDemux1\output1 => ZeroJunction\p;
   PowerDemux1\output2 => ZeroJunction1\p;
   PowerDemux1\output3 => ZeroJunction2\p;
   PowerDemux\output1 => ZeroJunction\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   PowerSensor2\P -> MSf1\flow;
   PowerSensor2\p2 => ppV;
   pTFIn1 => PowerDemux\input;
   QSensor1\p2 => PowerSensor2\p1;
   QSensor1\vCyl -> Splitter1\input;
   Splitter1\output -> MTF\vCyl;
   vCyl <- Splitter1\output 456 528;
   ZeroJunction1\p => MSf1\p;
   ZeroJunction1\p => MTF\pTIn;
   ZeroJunction1\p => pHT;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction2\p => MTF\pFIn;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction\p => MTF\ppIn;
   ZeroJunction\p => PowerMux\input1;
  end;
  figures
   text 'Global Parameters
     real global slag, Diam, alam, Veps;
     real global pfi0[ncyl];
     real global nstroke;
     real global fs;
     string global dll_ICE;	      // dll filename for subroutines
     string global dll_fcn_ThDP;   // subroutines names in the dll file
     string global dll_fcn_th_MEV; // subroutines names in the dll file

     real global p0[nCyl]; 
     real global T0[nCyl];
     real global F0[nCyl];' 208 120 16;
 implementation_end;
specification_end;
				specification 'Energy2PortFixedAdiab'
 description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath><TimeStamp>2015-11-3 00:03:12</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations>parameters
	real m0 = 0.00628028098093956;
	real E0 = 3932.5687296923;
	real mb0 = 0.00025212253599563;
	real V0 = 0.01;
	real p0 = 144530.00403539;
	real T0 = 800;
	real F0 = 0.61235928082879;</GlobalRelations></Attributes></Information>';
 type Submodel
  ports
   power in pTFIn [3,1];
   signal out mCyl;
   power out pTFOut [3,1];
 end;
 icon bg bottom shadow 11776947
  figures
   rectangle 624 124 696 148 color 0 fill 12632256;
   rectangle 624 92 696 116 color 0 fill 12632256;
   rectangle 632 100 688 140 color 0 fill 55295;
   text 'CV' 660.5 121 color 0 16;
   line 636 120 612 120 color 0 fill 12632256 width 4 end open;
   line 700 120 676 120 color 0 fill 12632256 width 4 end open;
  terminals
   pTFIn 704 120 fixed;
   mCyl 665 124.8 fixed;
   pTFOut 608 120 fixed;
 end;
 implementation bg
  submodels
   plug pTFIn 208 392.1;
   plug mCyl 509 536;
   plug pTFOut 493 392.1;
   PowerDemux 250.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 249.5 368 249.5 416 color 0 width 2;
   rectangle 243.3 376 253.3 408 color -1;
   text '3' 254.5 402 color 8421504 8;
  terminals
   output1 249.5 376 fixed;
   output2 249.5 392 fixed;
   output3 249.5 408 fixed;
   input 239.5 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 458.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 457.5 368 457.5 416 color 0 width 2;
   rectangle 451.3 368 461.3 400 color -1;
   text '3' 462.5 394 color 8421504 8;
  terminals
   input1 457.5 376 fixed;
   input2 457.5 392 fixed;
   input3 457.5 408 fixed;
   output 467.5 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Fixed'
				specification 'Fixed'
 description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 color 0 51 bold;
  terminals
   pp 344.8 520.7 fixed;
   pF 359.2 520.7 fixed;
   pT 352 520.7 fixed;
   mCyl 359.2 530.4 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
   ppV 712 584 fixed;
   vCyl 736 584 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   pTFIn => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
 implementation_end;
specification_end;
				specification 'Energy2PortFixedVol'
description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>ControlVolumes\ControlVolumeEnergy3Port.emx</LibraryPath>
  <TimeStamp>2015-10-19 16:55:50</TimeStamp>
</Description>
</Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   signal out mCyl;
   power out pHT;
   power out pTFOut [3,1];
 end;
 icon bg bottom shadow 11776947
  figures
   spline 729.2 780 737.2 772 745.2 780 753.2 772;
   text 'dQ' 741.2 792 16;
   spline 729.2 788 737.2 780 745.2 788 753.2 780;
   spline 729.2 772 737.2 764 745.2 772 753.2 764;
   rectangle 654.7 748 726.7 804 fill 12632256;
   rectangle 662.7 756 718.7 796 fill 55295;
   text 'CV' 691.2 777 16;
  terminals
   pTFIn1 654.7 740 fixed;
   mCyl 686.7 812 fixed;
   pHT 742.7 804 fixed;
   pTFOut 726.7 740 fixed;
 end;
 implementation bg
  submodels
   plug pTFIn1 208 392.1;
   plug mCyl 509 535.9;
   plug pHT 472.1 288;
   plug pTFOut 493 392.1;
   PowerDemux 248 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 248 368 248 416 width 2;
   rectangle 243 376 251 408 color -1;
   text '3' 252 402 color 8421504 8;
  terminals
   output1 248 376 fixed;
   output2 248 392 fixed;
   output3 248 408 fixed;
   input 240 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 456 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 456 368 456 416 width 2;
   rectangle 451 368 459 400 color -1;
   text '3' 460 394 color 8421504 8;
  terminals
   input1 456 376 fixed;
   input2 456 392 fixed;
   input3 456 408 fixed;
   output 464 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Fixed'
				specification 'Fixed'
 description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 51 bold;
  terminals
   pp 328 504 fixed;
   pF 376 504 fixed;
   pT 352 504 fixed;
   mCyl 376 536 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
   ppV 712 584 fixed;
   vCyl 736 584 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   pTFIn1 => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   ZeroJunction1\p => pHT;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
 implementation_end;
specification_end;
				specification 'Energy3PortCyl'
description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath>
  <TimeStamp>2015-10-23 00:13:56</TimeStamp>
</Description>
</Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   pneumatic out ppV;
   signal out vCyl;
   signal out mCyl;
   power out pHT;
   power out pTFOut [3,1];
   power in pTFIn2 [3,1];
  restrictions
   causality fixed out pTFIn2;
 end;
 icon bg bottom shadow 11776947
  figures
   line 653.5 801 653.5 721 725.5 721 725.5 801 693.5 801 693.5 793 717.5 793 717.5 729 661.5 729 661.5 793 685.5 793 685.5 801 653.5 801 fill 15132390;
   line 685.5 777 661.5 777 661.5 769 717.5 769 717.5 777 693.5 777 693.5 817 685.5 817 685.5 777 fill 6710886;
   line 661.5 729 717.5 729 717.5 769 661.5 769 661.5 729 fill 55295;
   text 'CV' 693.5 745 16;
   text 'dW' 685.5 825 16;
   spline 730.5 754 738.5 746 746.5 754 754.5 746;
   text 'dQ' 741.5 769 16;
   spline 730.5 761 738.5 753 746.5 761 754.5 753;
   spline 730.5 747 738.5 739 746.5 747 754.5 739;
  terminals
   pTFIn1 653.5 713 fixed;
   ppV 685.5 833 fixed;
   vCyl 733.5 825 fixed;
   mCyl 733.5 809 fixed;
   pHT 741.5 785 fixed;
   pTFOut 725.5 713 fixed;
   pTFIn2 693.5 713 fixed;
 end;
 implementation bg
  submodels
   MSf 232 496
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
    type MSf
     ports
      power in p;
      signal in flow;
     restrictions
      causality fixed in p;
    end;
    icon bg bottom
     figures
      text 'MSf' 232 496 18 bold;
    end;
    implementation eq
variables
	real effort;
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
   plug ppV 352 656;
   plug vCyl 510.8 552;
   plug mCyl 509 535.9;
   plug pHT 472 288;
   plug pTFOut 493 392;
   plug pTFIn2 352.1 240;
   plug pTFIn1 208 392.1;
   PowerDemux 248 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 248 368 248 416 width 2;
   rectangle 243 376 251 408 color -1;
   text '3' 252 402 color 8421504 8;
  terminals
   output1 248 376 fixed;
   output2 248 392 fixed;
   output3 248 408 fixed;
   input 240 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerDemux1 352 304.5
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 320 304 384 304 width 2;
   rectangle 328 299 360 307 color -1;
   text '3' 354 308 color 8421504 8;
  terminals
   output1 328 304 fixed;
   output2 352 304 fixed;
   output3 376 304 fixed;
   input 352 296 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 456 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 456 368 456 416 width 2;
   rectangle 451 368 459 400 color -1;
   text '3' 460 394 color 8421504 8;
  terminals
   input1 456 376 fixed;
   input2 456 392 fixed;
   input3 456 408 fixed;
   output 464 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   PowerSensor1 352 608
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:29:42</TimeStamp>
</Description>
</Information>';
    knot PowerSensor
     ports
      pneumatic knot in p1 [1];
      pneumatic knot out p2 [1];
      signal knot out P [1] {W} ;
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 345.1 600.8 358.9 615.2 fill 16777215;
      text 'P' 352.5 607.8;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	P = p1.e .* p1.f;
implementation_end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Varying'
				specification 'Fixed'
description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
 description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 51 bold;
  terminals
   pp 328 504 fixed;
   pF 376 504 fixed;
   pT 352 504 fixed;
   mCyl 376 536 fixed;
   ppV 352 552 fixed;
   vCyl 376 552 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux1\input <= pTFIn2;
   PowerDemux1\output1 => ZeroJunction3\p;
   PowerDemux1\output2 => ZeroJunction1\p;
   PowerDemux1\output3 => ZeroJunction2\p;
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   PowerSensor1\P -> MSf\flow 232 608;
   PowerSensor1\p2 => ppV;
   pTFIn1 => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   Thdyn_Cont_Vol_Cyl\ppV => PowerSensor1\p1;
   Thdyn_Cont_Vol_Cyl\vCyl -> vCyl;
   ZeroJunction1\p => MSf\p;
   ZeroJunction1\p => pHT;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
  figures
   text 'Global Parameters
     real global slag, Diam, alam, Veps;
     real global pfi0[ncyl];
     real global nstroke;
     real global fs;
     string global dll_ICE;	      // dll filename for subroutines
     string global dll_fcn_ThDP;   // subroutines names in the dll file
     string global dll_fcn_th_MEV; // subroutines names in the dll file

     real global p0[nCyl]; 
     real global T0[nCyl];
     real global F0[nCyl];' 208 120 16;
 implementation_end;
specification_end;
				specification 'Energy3PortFixedAdiab'
description '<Information>
 <Description>
    <Version>4.6</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath>
  <TimeStamp>2016-3-30 23:40:37</TimeStamp>
<KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
 <Attributes>
  <GlobalRelations>parameters
	real m0 = 4.08190848280315;
	real E0 = 884402.21053548;
	real mb0 = 0;
	real V0 = 1.15;
	real p0 = 310000;
	real T0 = 304.45;
	real F0 = 0;</GlobalRelations>
 </Attributes>
</Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   signal out mCyl;
   power out pTFOut [3,1];
   power out pTFOut2 [3,1];
 end;
 icon bg bottom shadow 11776947
  figures
   line 1028 289 1056 305 color 0 fill 12632256 width 4 end open;
   line 1027 261 1055 245 color 0 fill 12632256 width 4 end open;
   line 946 277 970 277 color 0 fill 12632256 width 4 end open;
   line 975 296 1017 296 1036.8 308.5 1039.5 304.3 1017 288 975 288 975 296 975 296 color 0 fill 12632256;
   line 1018 276 1045.5 259 1049 265 1031.3 276 1050.8 288 1047.3 293.8 1018 276 1018 276 color 0 fill 12632256;
   line 974.6 288 974.6 264 1014.6 264 1038.6 248 1046.3 259.3 1018.3 276 1047.3 293.3 1038.6 304 1014.6 288 974.6 288 974.6 288 color 0 fill 55295;
   text 'CV' 1008 277 color 0 16;
   line 974.5 256 1016.5 256 1035.7 242.7 1039.5 248 1016.5 264 974.5 264 974.5 256 974.5 256 color 0 fill 12632256;
  terminals
   pTFIn1 944 280 fixed;
   mCyl 992 280 fixed;
   pTFOut 1064 240 fixed;
   pTFOut2 1065 307.3 fixed;
 end;
 implementation bg
  submodels
   plug pTFIn1 208 392.1;
   plug mCyl 509 536;
   plug pTFOut 493 392.1;
   plug pTFOut2 352 240;
   PowerDemux 250.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 249.5 368 249.5 416 color 0 width 2;
   rectangle 243.3 376 253.3 408 color -1;
   text '3' 254.5 402 color 8421504 8;
  terminals
   output1 249.5 376 fixed;
   output2 249.5 392 fixed;
   output3 249.5 408 fixed;
   input 239.5 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 458.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 457.5 368 457.5 416 color 0 width 2;
   rectangle 451.3 368 461.3 400 color -1;
   text '3' 462.5 394 color 8421504 8;
  terminals
   input1 457.5 376 fixed;
   input2 457.5 392 fixed;
   input3 457.5 408 fixed;
   output 467.5 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   PowerMux1 352 300.5
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 color 0 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 336 304 368 304 color 0 width 2;
   rectangle 336 300 368 308 color -1;
   text '3' 362 299 color 8421504 8;
  terminals
   input1 344 304 fixed;
   input2 352 304 fixed;
   input3 360 304 fixed;
   output 352 304 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Fixed'
				specification 'Fixed'
 description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 color 0 51 bold;
  terminals
   pp 344.8 520.7 fixed;
   pF 359.2 520.7 fixed;
   pT 352 520.7 fixed;
   mCyl 359.2 530.4 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
   ppV 712 584 fixed;
   vCyl 736 584 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   PowerMux1\output => pTFOut2;
   pTFIn1 => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => PowerMux1\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => PowerMux1\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => PowerMux1\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
 implementation_end;
specification_end;
			end;
   FlowSensor1 744 120
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:12</TimeStamp>
</Description>';
    knot FlowSensor
     ports
      power knot in p1 [3,1];
      power knot out p2 [3,1];
      signal knot out flow [3,1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 737.1 112.1 750.9 127.9 color 0 fill 16777215;
      text 'f' 744.5 118.2 color 0;
    end;
    implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
      implementation_end;
   FlowSensor2 744 272
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:12</TimeStamp>
</Description>';
    knot FlowSensor
     ports
      power knot in p1 [3,1];
      power knot out p2 [3,1];
      signal knot out flow [3,1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 737.1 264.1 750.9 279.9 color 0 fill 16777215;
      text 'f' 744.5 270.2 color 0;
    end;
    implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
      implementation_end;
   GlobalParameters 64 -8.3
    description '<Information>
 <Description>
    <Version>4.6</Version>
  <LibraryPath>Parameters\GlobalParameters.emx</LibraryPath>
  <TimeStamp>2016-4-4 16:10:34</TimeStamp>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
    type Submodel
    end;
    implementation eq
parameters
	string global dllToolbox = 'C:\Users\yum\Documents\GitHub\20SimToolBox\dll20SimToolVS10\Release\dll20SimToolVS10';
	string global fnc_interp = 'interpolate';
// Thermo package
	string global dll_ICE = 'C:\Users\yum\Documents\GitHub\ThdynCalcPackDLL\DllICELib\Release\DLL_ICElib.dll';
	string global dll_fcn_GetTFromPhF = 'getTFromPhF';	
	string global dll_fcn_ThDP = 'getThdynCombGas';   // subroutines names in the dll file
	string global dll_fcn_th_MEV = 'getPTF'; // subroutines names in the dll file
	string global dll_fcn_idealNozzle = 'getFlowIdealNozzle';
	string global dll_fcn_comp = 'ice_comres';
	string global dll_fcn_HTX = 'getHTCoeffHTX';
	
// engine general dimension
	integer global nStroke = 4;
	real global vDisp = 0.0017734761768412;
	real global S = 0.14;
	real global B = 0.127;
	real global fs = 0.0683;
	integer global nCyl = 6;
// Fuel & Combustion	
	real global mqf_max = 0.00021;
	real global hn = 42650000;

	integer global caseNo = 1;
	real global BSFCRef[20] = [240.3086827;249.7269521;240.1627038;235.1883196;240.9179156;225.8237421;229.1852438;228.0977721;228.86532;220.1212562;219.4500671;219.1971443;217.5434644;207.9710746;211.3781797;209.751063;208.9774244;206.6537733;210.9876911;208.1901851];
	real global pTFAmb[20,3] = [
			99205, 303.54038, 0;
			99395, 310.01902, 0;
			99490, 306.17307, 0;
			99390, 305.96168, 0;
			99380, 306.73169, 0;
			99370, 306.73156, 0;
			99360, 307.73849, 0;
			99380, 308.90481, 0;
			99470, 308.51194, 0;
			99225, 308.63535, 0;
			99430, 305.8162, 0;
			99370, 307.91065, 0;
			99350, 309.10877, 0;
			99410, 315.12139, 0;
			99390, 316.33329, 0;
			99310, 304.68024, 0;
			99370, 304.86039, 0;
			99390, 304.47279, 0;
			99255, 304.39396, 0;
			99355, 303.91979, 0];
	real global wiebe_para[9] = [0.19461577585102;0.73771653157672;0.55641955034564;21.114791828278;60.118493222641;88.055837060231;1.5825539221259;1.3681026543714;3.4706402214526];			
	real global wiebePara[20,9] = [
			0.21, 0.34, 3.32, 5.1, 19.6, 60, 1.7, 0.41, 0.49;
			0.085, 0.43, 2.2, 3.9, 31.1, 80, 1.77, 0.75, 0.29;
			0.12, 0.41, 3.6, 5.3, 29.5, 80, 2.1, 0.6, 0.29;
			0.16, 0.65, 6.4, 10, 39.8, 75, 2.2, 0.55, 0.45;
			0.09, 0.65, 4.36, 7.9, 35, 60, 1.8, 0.9, 0.74;
			0.1, 0.43, 3, 5.7, 25.4, 58, 1.7, 0.92, 0.64;
			0.1, 0.43, 3.1, 5.6, 25.4, 58, 1.6, 0.92, 0.64;
			0.09, 0.42, 2.9, 5.5, 26.5, 59.5, 1.4, 0.84, 0.68;
			0.03, 0.78, 1.8, 10, 40.9, 70, 2.2, 1.6, 1.5;
			0.03, 0.76, 1.7, 10, 38.5, 56, 2.2, 1.7, 2;
			0.13, 0.5, 2.4, 5.4, 24, 65, 1.77, 0.9, 0.9;
			0.12, 0.5, 2.2, 5, 27, 70, 1.77, 0.8, 0.7;
			0.16, 0.5, 4.7, 7.5, 32.7, 63, 1.77, 0.58, 0.8;
			0.03, 0.8, 2.2, 10, 35.4, 54, 2.2, 1.7, 2.8;
			0.03, 0.78, 0.7, 10, 36.2, 54, 2.2, 1.7, 2.8;
			0.02, 0.8, 0.5, 12, 52, 60, 2.2, 1.8, 2.7;
			0.01, 0.8, 0.7, 9, 46.2, 53, 2.2, 1.6, 3.2;
			0.025, 0.75, 0.3, 10, 39, 57, 2.2, 1.8, 2.6;
			0.01, 0.78, 0.5, 10, 39.5, 57, 2.2, 1.6, 2.6;
			0.075, 0.42, 2.9, 5.4, 27.9, 61, 1.4, 0.91, 0.68];

	real global Cturb = 0.75157680387873; //Turbulence conversion efficiency
	real global Cdiss = 91.834766793526; //turbulent dissipation constant [1/s]
	real global Crate = 0.0041255287378962;  // combustion mixing rate, [s]
	real global Cmode = 26093.081006293; // Combustion gain, J/kg/deg
	real global FComb = 0.9;					//Fuel-air equivalence ratio for diffusion combustion
	real global P_CR = 1817000;		//Critical pressure in Pa
	real global T_CR = 658.1;      //Critical temperature in K

	real global TqLoad[1] = 1.0695e3; //[548.6564398;891.3724064;559.3153153;551.2133857;883.3048523;722.3940013;885.5784397;1054.515723;1053.542759;1229.137563;724.1701186;553.9894874;549.1210701;1240.070217;1394.676432;1416.717125;1557.564326;1548.98807;1562.712467;1222.340879];
	real global RPMRef[1] = 1500; //[798.91024;799.42451;1398.8489;1799.2036;1599.1848;1401.1471;1198.8876;999.10263;1799.3838;1599.2755;999.04963;1198.6673;1598.7569;1403.5971;1198.8645;1796.8962;1598.5223;1400.3606;1198.9636;999.00689];
	real global tCWRef[1] = 300; //[301.14845;302.03989;302.09638;301.91657;301.96644;302.04744;302.44916;302.54791;303.02082;303.06054;301.43568;301.88756;301.66351;302.54691;302.30795;303.9469;303.97068;303.7021;302.89895;302.69172];
	real global RPMMax = 1800;
//	real global wiebe_para[9] = [0.03;0.8;2.2;10;35.4;54;2.2;1.7;2.8];
variables
//	real global wiebe_para[9];
	real PRComp[91];
	real dmComp[91];	
initialequations
	PRComp = [1.3301976;1.3256820;1.3228599;1.3172154;1.3059267;
				1.2889934;1.2703669;1.2528692;1.2404516;1.2201318;1.1947318;1.4910630;1.4876764;1.4837253;1.4803387;
				1.4730009;1.4645343;1.4470367;1.3945438;1.3714017;1.3510818;1.3335842;1.3121355;1.2737535;1.6942616;
				1.6914393;1.6897460;1.6891816;1.6874882;1.6846660;1.6807150;1.6654751;1.5870179;1.5446849;1.5158983;
				1.4927564;1.4701787;1.4351834;1.3894638;1.9663217;1.9640640;1.9634995;1.9618062;1.9589840;1.9567262;
				1.9499530;1.9115710;1.8793980;1.7975541;1.7467545;1.7049859;1.6756350;1.6412041;1.5926623;1.5238006;
				2.3128881;2.3123236;2.3100657;2.3061147;2.2999060;2.2891815;2.2468486;2.1847600;2.0825965;2.0137348;
				1.9561619;1.9059266;1.8624647;1.7992474;1.7100658;2.7226717;2.7209783;2.7192850;2.7164629;2.7136407;
				2.6978364;2.4444027;2.3619943;2.2824082;2.2146754;2.1435559;2.0504234;1.9228598;3.5224836;3.5179680;
				3.4903104;3.0579493;2.9134524;2.8169332;2.6707432;2.4308560];
	dmComp = [0.0670261083187465;0.0862011025619044;0.105203353740451;0.119195919967571;0.132670249440985;
				0.151672493059660;0.168947253113117;0.183458071213687;0.192095451240416;0.203842289588741;
				0.219389588756596;0.0808459239213840;0.0974297117163947;0.114186235016146;0.127142312616110;
				0.137679919272668;0.150808747497116;0.171365724056524;0.217489362126767;0.229408951099576;
				0.239946572875876;0.248238466773382;0.257566841738172;0.271213906716326;0.0991571877217405;
				0.114186235016146;0.132151997567536;0.146490057483751;0.157027664140309;0.169638240491307;
				0.185876534597223;0.207642742848399;0.264131229390845;0.283306231193875;0.293843860530047;
				0.300926507616041;0.306454436881045;0.316128305534930;0.328393410876448;0.140443883905170;
				0.158582397081043;0.174475182378121;0.186394778910801;0.198659861572704;0.213688916426981;
				0.233036653734750;0.269140929462014;0.286933941388921;0.323038209556313;0.337894506226235;
				0.348950364756242;0.357415001718359;0.364324905739742;0.372789557821602;0.384190910040704;
				0.191922700615933;0.207469999783788;0.221980802764615;0.239601071626910;0.255148385914508;
				0.276396312052749;0.312673338404495;0.342904183617789;0.375380771829620;0.391791778760662;
				0.402502166281189;0.410966788123563;0.418049442769429;0.426168578482580;0.435842469816079;
				0.239428328562298;0.250829673221529;0.264822224328906;0.282788002000040;0.303517729183932;
				0.327702393258772;0.420986165586285;0.436878958443235;0.447934816973242;0.455362965308203;
				0.461754632575879;0.470046503793770;0.474710702615973;0.334439569335286;0.356896772524524;
				0.388336841869713;0.486112062394946;0.495094928550898;0.500622857815902;0.507187245468575;
			0.512542469468325];
//wiebe_para = transpose(wiebePara[caseNo,1:9]);

	
	implementation_end;
   I 920 144
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\I.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:55:55</TimeStamp>
</Description>
</Information>';
    type I
     ports
      power in p;
      signal out state;
     restrictions
      causality preferred in p;
    end;
    icon bg bottom
     figures
      text 'I' 920 144 color 0 18 bold;
    end;
    implementation eq
parameters
	real jShaft = 5;//2.74;
	integer global caseNo;
	real global RPMRef[1];
variables
	real H0;
initialequations
	H0 = RPMRef[caseNo]*pi/30*jShaft;
equations
    state = int(p.e,H0);
    p.f = state / jShaft;
implementation_end;
   LoadTemp 992.1 200.2
    description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration><LibraryPath>Load\LoadUser.emx</LibraryPath><TimeStamp>2015-11-16 22:57:52</TimeStamp></Description><Attributes><GlobalRelations>// Load Selection and Definition
// Load_index          Load_amp    Load_bias       Start_time      T_Load
// 1-Constant          N/A,        Load,           N/A,            N/A
// 2-Step,             Final,      Initial,        Step time,      N/A,
// 3-Sine,             amp,        bias,           Delay,          Period
// 4-keyboard,

parameters
	integer index = 1;
	real Load_amb = 1;
	real Start_time = 1;
	real T_Load = 10;
	integer global caseNo;
	real global TqLoad[1];

variables
	real Load_bias;

initialequations
	Load_bias = TqLoad[caseNo];</GlobalRelations></Attributes></Information>';
    type Submodel
     ports
      power in p;
    end;
    implementation bg
     submodels
      Constant 1152 208
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Sources\Constant.emx</LibraryPath>
  <TimeStamp>2007-10-19 14:48:44</TimeStamp>
</Description>';
       type Constant
        ports
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 1136.1 192 1167.9 224 color 0 fill 15132390;
         line 1140.9 203.6 1162.9 203.6 color 16711680 width 2;
         line 1138.2 214.7 1163.9 214.7 color 0;
         line 1140.5 198.7 1140.5 217 color 0;
       end;
       implementation eq
variables
	real global Load_bias;

equations
	output = Load_bias;
     implementation_end;
      Constant1 1144 408
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Sources\Constant.emx</LibraryPath>
  <TimeStamp>2007-10-19 14:48:44</TimeStamp>
</Description>';
       type Constant
        ports
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 1128.1 392 1159.9 424 color 0 fill 15132390;
         line 1132.9 403.6 1154.9 403.6 color 16711680 width 2;
         line 1130.2 414.7 1155.9 414.7 color 0;
         line 1132.5 398.7 1132.5 417 color 0;
       end;
       implementation eq
variables
	real global Load_bias;

equations
	output = Load_bias;
     implementation_end;
      MSe 776 304
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:12:33</TimeStamp>
</Description>
</Information>';
       type MSe
        ports
         power in p;
         signal in effort;
        restrictions
         causality fixed out p;
       end;
       icon bg bottom
        figures
         text 'MSe' 776 304 color 0 18 bold;
       end;
       implementation eq
variables
	real flow;
equations
	p.e = effort;
	flow = p.f;
implementation_end;
      plug p 640 304;
      Sine 1152 272
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Sources\WaveGenerator-Sine.emx</LibraryPath>
  <TimeStamp>2007-9-27 16:12:6</TimeStamp>
</Description>';
       type 'WaveGenerator-Sine'
        ports
         signal out output;
       end;
       icon bg bottom
        figures
         group
          rectangle 1136 256 1168 288 color 0 fill 15132390;
          line 1140.5 262.4 1140.5 281.6 color 0;
          line 1166.1 272 1137.3 272 color 0;
          spline 1140.9 271.9 1144.1 263.8 1147.3 271.9 1150.6 280 1153.7 271.9 1156.8 263.8 1160.1 271.9 1163.6 280.2 1166.8 272.2 color 16711680;
         end;
       end;
       implementation eq
parameters
	real global Load_amb;
	real global T_Load;
	real global Start_time;
variables
	real global Load_bias;	
	boolean hidden change;
	real hidden half;
	real omega;
initialequations
	omega = 2*pi/T_Load;	
equations
	"calculate at least 2 points per cycle to get a triangle"
	half = pi / omega;
	change = frequencyevent (half, half / 2);

	"calculate the sine wave"
	if time < Start_time then
		output = Load_bias;
	else
		output = Load_amb * sin ( omega * time) + Load_bias;
	end;
implementation_end;
      Step 1152 336
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Sources\SignalGenerator-Step.emx</LibraryPath>
  <TimeStamp>2007-9-27 16:2:44</TimeStamp>
</Description>';
       type 'SignalGenerator-Step'
        ports
         signal out output;
       end;
       icon bg bottom
        figures
         group
          rectangle 1136 320 1168 352 color 0 fill 15132390;
          line 1145.6 332.8 1162.6 332.8 color 16711680 width 2;
          line 1138.9 344 1165.1 344 color 0;
          line 1141.1 344.1 1145.7 344.1 1145.7 332.7 color 16711680 width 2;
          line 1141.1 328 1141.1 346.2 color 0;
         end;
       end;
       implementation eq
parameters
	real global Load_amp; 
	real global Start_time;
variables
	real global Load_bias;	
	boolean hidden change;
equations
	"calculate at least at the start time"
	change = timeevent (Start_time);
	
	"calculate the step signal"
	output = Load_bias + Load_amp * step (Start_time);     implementation_end;
      Switch 952 304
						specifications active 'boolean'
							specification 'boolean'
 description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram Non-Linear\Switch.emx</LibraryPath>
  <TimeStamp>2008-1-21 12:28:27</TimeStamp>
</Description>';
 type 'Switch-Boolean'
  ports
   signal in input1;
   signal in input2;
   signal out output;
   signal in input3;
   signal in input4;
 end;
 icon bg bottom
  figures
   rectangle 924 276 980 332 color 0 fill 15132390;
   ellipse 947 302.3 951 306.7 color 16711680;
   line 947 304.2 927.7 303.7 color 16711680 width 2;
   line 952.4 294.9 951.1 297.6 949.5 294.6 949.5 294.6 color 16711680 fill 16711680 open;
   line 951.3 279.7 951.1 296.7 color 16711680 open;
   line 976.8 326 972.6 326 color 16711680 width 2;
   ellipse 968.6 324.3 972.3 328.1 color 16711680;
   line 976.8 313 972.6 313 color 16711680 width 2;
   ellipse 968.6 311.3 972.3 315.1 color 16711680;
   line 976.8 296 972.6 296 color 16711680 width 2;
   ellipse 968.6 294.3 972.3 298.1 color 16711680;
   line 976.8 281 972.6 281 color 16711680 width 2;
   ellipse 968.6 279.3 972.3 283.1 color 16711680;
   line 952 304 969 282 color 16711680;
  terminals
   input1 992 280 fixed;
   input2 992 296 fixed;
   output 912 304 fixed;
   input3 992 312 fixed;
   input4 992 328 fixed;
 end;
 implementation eq
parameters
	integer global index;
equations
	switch index
		case 1 do
			output = input1;
		case 2 do
			output = input2;
		case 3 do
			output = input3;
		case 4 do
			output = input4;
		default do
			output = 0;
	end;							        implementation_end;
specification_end;
							specification 'real'
description '<Information>
 <Description>
    <Version>4.4</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Signal\Block Diagram Non-Linear\Switch.emx</LibraryPath>
  <TimeStamp>2014-9-18 09:37:34</TimeStamp>
</Description>
</Information>';
 type 'Switch-Default'
  ports
   signal in input_high;
   signal in input_low;
   signal in condition;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 448 368 480 400 fill 15132390;
   ellipse 467 382.3 471 386.7 color 16711680;
   ellipse 455.5 373.9 459.6 377.9 color 16711680;
   line 460.4 377.8 466.8 382.8 color 16711680 width 2;
   line 471 384.2 477.8 384.2 color 16711680 width 2;
   line 451.2 394 455.4 394 color 16711680 width 2;
   line 451.1 375.9 455.3 375.9 color 16711680 width 2;
   ellipse 455.7 392.3 459.4 396.1 color 16711680;
   line 465.6 374.9 466.9 377.6 468.5 374.6 468.5 374.6 color 16711680 fill 16711680 open;
   line 466.7 370.7 466.9 376.7 color 16711680 open;
  terminals
   input_high 448 392 fixed;
   input_low 448 376 fixed;
   condition 464 368 fixed;
   output 480 384 fixed;
 end;
 implementation eq
equations
	output = if condition >= 0.0 then
		input_high
	else
		if condition < 0.0 then
			input_low
		else
			0.0
		end
	end;        implementation_end;
specification_end;
						end;
      TransferFunction 1064 320
						specifications active 'FO'
							specification 'FO'
 description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 1040 303.4 1088 336.6 color 0 fill 15132390;
   text 'k' 1065.1 311.1 color 16711680 14;
   line 1045.7 321 1083.4 321 color 16711680 fill 15132390;
   text 't' 1058.7 327.7 color 16711680 'SymbolProp BT' 15;
   text 's    + 1' 1064 327.7 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;		// gain []
    real global T_Load;		// time constant [s / rad]
variables
    real rate, state;
equations
    rate = (k * input - state) / T_Load;
    state = int (rate);
    output = state;                    implementation_end;
specification_end;
							specification 'FOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96 216 128 fill 15132390;
   group
    text 't' 176.5 118.8 color 16711680 'SymbolProp BT' 15;
    text 's    + 1' 184 118.8 color 16711680 14;
   end;
   line 155.5 114 210.9 114 color 16711680 fill 15132390;
   group
    text 'L' 187.2 108.2 color 16711680 11;
    text 't' 181.3 105 color 16711680 'SymbolProp BT' 15;
   end;
   text 'k' 160.5 105.5 color 16711680 14;
   text '(s    + 1)' 188.8 105 color 16711680 14;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lead time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tau );
	output = state + ( tauL/tau ) * rate;  implementation_end;
specification_end;
							specification 'FOLA'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96.5 216 128.5 fill 15132390;
   line 156.6 113.5 211.9 113.5 color 16711680 fill 15132390;
   group
    text 'k' 160.5 105 color 16711680 14;
    text '(s    + 1)' 187.7 104.4 color 16711680 14;
    text 't' 180.3 104.4 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text 's    + 1' 182.4 119.4 color 16711680 14;
    text 't' 173.9 119.4 color 16711680 'SymbolProp BT' 15;
    text 'L' 179.7 122.6 color 16711680 11;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lag time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tauL );
	output = state + ( tau/tauL ) * rate;  implementation_end;
specification_end;
							specification 'SOI'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 160 97 208 128 fill 15132390;
   text 'k' 187.2 104 color 16711680 14;
   line 163.2 112.5 202.7 112.5 color 16711680 fill 15132390;
   group
    text 's(s  + 1)' 184 118.4 color 16711680 14;
    text 't' 181.9 118.4 color 16711680 'SymbolProp BT' 15;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
 	real tau = 1;		// time constant [s / rad]
variables
    real hidden rate1, state1;
    real rate2,state2;
equations
	rate1 = ( k * input );
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau;
	state2 = int(rate2);
	output = state2;                        implementation_end;
specification_end;
							specification 'SOO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.6 232 128.6 fill 15132390;
   group
    text 't' 198.4 117.9 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.1 color 16711680 11;
   end;
   group
    text 't' 153.6 117.9 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.1 color 16711680 11;
   end;
   line 140.8 112.1 226.1 112.1 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 117.9 color 16711680 14;
   text '(s    + 1)' 205.9 117.9 color 16711680 14;
   text 'k' 183.5 103.3 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s / rad]
	real tau2 = 1;		// time constant 2 [s / rad]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state1) / tau1;
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau2;
	state2 = int(rate2);
	output = state2;                         implementation_end;
specification_end;
							specification 'SOOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 97.3 232 129.3 fill 15132390;
   group
    text 't' 198.4 118.1 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.3 color 16711680 11;
   end;
   group
    text 't' 153.6 118.1 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.2 color 16711680 11;
   end;
   text 'k' 159.5 103.7 color 16711680 14;
   line 140.8 112.2 226.1 112.2 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 118.1 color 16711680 14;
   text '(s    + 1)' 205.9 118.1 color 16711680 14;
   group
    text '(s    + 1)' 187.7 103.7 color 16711680 14;
    text 't' 180.3 103.7 color 16711680 'SymbolProp BT' 15;
    text 'L' 185.1 106.9 color 16711680 11;
   end;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s ]
	real tau2 = 1;		// time constant 2 [s ]
	real tauL = 2;		// lead time [s]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = state2/k - input;
	state1 = int (rate1);
	rate2 = k/(tau1*tau2) * ( tauL*input - state1 - state2*(tau1+tau2)/k );
	state2 = int(rate2);
	output = state2;             implementation_end;
specification_end;
							specification 'SOU'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2011-3-23 10:32:13</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 200 511.7 296 543.7 fill 15132390;
   line 204.8 527.2 290.1 527.2 color 16711680 fill 15132390;
   text 's  + 2     s  + 1' 254.3 535.7 color 16711680 14;
   text 'z' 251.4 536.8 color 16711680 'SymbolProp BT' 11 symbol;
   text '2' 216.4 532 color 16711680 11;
   text 't' 210 535.7 color 16711680 'SymbolProp BT' 15;
   text 't' 258.5 535.7 color 16711680 'SymbolProp BT' 15;
   text 'k' 248.4 519.2 color 16711680 14;
   text '2' 228.4 532 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1;			// gain []
    	real tau = 1;		// time constant [s ]
	real zeta = 0.7;		// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2) / tau;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)/tau;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
							specification 'SOUO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.1 232 128.1 fill 15132390;
   line 139.2 112.4 227.2 112.4 color 16711680 fill 15132390;
   text 's  + 2      s  + ' 176 120.1 color 16711680 14;
   text 'z' 172.3 121.2 color 16711680 'SymbolProp BT' 11 symbol;
   text 'w' 181.3 120.1 color 16711680 'SymbolProp BT' 15;
   text 'k' 176.5 103.6 color 16711680 14;
   group
    text '2' 194.7 101.2 color 16711680 11;
    text 'w' 186.7 103.9 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text '2' 225.6 116.7 color 16711680 11;
    text 'w' 217.6 119.4 color 16711680 'SymbolProp BT' 15;
   end;
   text '2' 149.3 116.2 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1.0;			// gain []
	real omega = 1.0;		// frequency [rad/s]
	real zeta = 0.7;			// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2)*omega;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)*omega;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
						end;
      TransferFunction1 1072 224
						specifications active 'FO'
							specification 'FO'
 description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 1048 207.4 1096 240.6 color 0 fill 15132390;
   text 'k' 1073.1 215.1 color 16711680 14;
   line 1053.7 225 1091.4 225 color 16711680 fill 15132390;
   text 't' 1066.7 231.7 color 16711680 'SymbolProp BT' 15;
   text 's    + 1' 1072 231.7 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;		// gain []
    real global T_Load;		// time constant [s / rad]
variables
    real rate, state;
equations
    rate = (k * input - state) / T_Load;
    state = int (rate,600);
    output = state;                    implementation_end;
specification_end;
							specification 'FOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96 216 128 fill 15132390;
   group
    text 't' 176.5 118.8 color 16711680 'SymbolProp BT' 15;
    text 's    + 1' 184 118.8 color 16711680 14;
   end;
   line 155.5 114 210.9 114 color 16711680 fill 15132390;
   group
    text 'L' 187.2 108.2 color 16711680 11;
    text 't' 181.3 105 color 16711680 'SymbolProp BT' 15;
   end;
   text 'k' 160.5 105.5 color 16711680 14;
   text '(s    + 1)' 188.8 105 color 16711680 14;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lead time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tau );
	output = state + ( tauL/tau ) * rate;  implementation_end;
specification_end;
							specification 'FOLA'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96.5 216 128.5 fill 15132390;
   line 156.6 113.5 211.9 113.5 color 16711680 fill 15132390;
   group
    text 'k' 160.5 105 color 16711680 14;
    text '(s    + 1)' 187.7 104.4 color 16711680 14;
    text 't' 180.3 104.4 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text 's    + 1' 182.4 119.4 color 16711680 14;
    text 't' 173.9 119.4 color 16711680 'SymbolProp BT' 15;
    text 'L' 179.7 122.6 color 16711680 11;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lag time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tauL );
	output = state + ( tau/tauL ) * rate;  implementation_end;
specification_end;
							specification 'SOI'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 160 97 208 128 fill 15132390;
   text 'k' 187.2 104 color 16711680 14;
   line 163.2 112.5 202.7 112.5 color 16711680 fill 15132390;
   group
    text 's(s  + 1)' 184 118.4 color 16711680 14;
    text 't' 181.9 118.4 color 16711680 'SymbolProp BT' 15;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
 	real tau = 1;		// time constant [s / rad]
variables
    real hidden rate1, state1;
    real rate2,state2;
equations
	rate1 = ( k * input );
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau;
	state2 = int(rate2);
	output = state2;                        implementation_end;
specification_end;
							specification 'SOO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.6 232 128.6 fill 15132390;
   group
    text 't' 198.4 117.9 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.1 color 16711680 11;
   end;
   group
    text 't' 153.6 117.9 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.1 color 16711680 11;
   end;
   line 140.8 112.1 226.1 112.1 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 117.9 color 16711680 14;
   text '(s    + 1)' 205.9 117.9 color 16711680 14;
   text 'k' 183.5 103.3 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s / rad]
	real tau2 = 1;		// time constant 2 [s / rad]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state1) / tau1;
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau2;
	state2 = int(rate2);
	output = state2;                         implementation_end;
specification_end;
							specification 'SOOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 97.3 232 129.3 fill 15132390;
   group
    text 't' 198.4 118.1 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.3 color 16711680 11;
   end;
   group
    text 't' 153.6 118.1 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.2 color 16711680 11;
   end;
   text 'k' 159.5 103.7 color 16711680 14;
   line 140.8 112.2 226.1 112.2 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 118.1 color 16711680 14;
   text '(s    + 1)' 205.9 118.1 color 16711680 14;
   group
    text '(s    + 1)' 187.7 103.7 color 16711680 14;
    text 't' 180.3 103.7 color 16711680 'SymbolProp BT' 15;
    text 'L' 185.1 106.9 color 16711680 11;
   end;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s ]
	real tau2 = 1;		// time constant 2 [s ]
	real tauL = 2;		// lead time [s]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = state2/k - input;
	state1 = int (rate1);
	rate2 = k/(tau1*tau2) * ( tauL*input - state1 - state2*(tau1+tau2)/k );
	state2 = int(rate2);
	output = state2;             implementation_end;
specification_end;
							specification 'SOU'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2011-3-23 10:32:13</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 200 511.7 296 543.7 fill 15132390;
   line 204.8 527.2 290.1 527.2 color 16711680 fill 15132390;
   text 's  + 2     s  + 1' 254.3 535.7 color 16711680 14;
   text 'z' 251.4 536.8 color 16711680 'SymbolProp BT' 11 symbol;
   text '2' 216.4 532 color 16711680 11;
   text 't' 210 535.7 color 16711680 'SymbolProp BT' 15;
   text 't' 258.5 535.7 color 16711680 'SymbolProp BT' 15;
   text 'k' 248.4 519.2 color 16711680 14;
   text '2' 228.4 532 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1;			// gain []
    	real tau = 1;		// time constant [s ]
	real zeta = 0.7;		// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2) / tau;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)/tau;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
							specification 'SOUO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.1 232 128.1 fill 15132390;
   line 139.2 112.4 227.2 112.4 color 16711680 fill 15132390;
   text 's  + 2      s  + ' 176 120.1 color 16711680 14;
   text 'z' 172.3 121.2 color 16711680 'SymbolProp BT' 11 symbol;
   text 'w' 181.3 120.1 color 16711680 'SymbolProp BT' 15;
   text 'k' 176.5 103.6 color 16711680 14;
   group
    text '2' 194.7 101.2 color 16711680 11;
    text 'w' 186.7 103.9 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text '2' 225.6 116.7 color 16711680 11;
    text 'w' 217.6 119.4 color 16711680 'SymbolProp BT' 15;
   end;
   text '2' 149.3 116.2 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1.0;			// gain []
	real omega = 1.0;		// frequency [rad/s]
	real zeta = 0.7;			// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2)*omega;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)*omega;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
						end;
     end;
     connections
      Constant\output -> TransferFunction1\input;
      Constant1\output -> Switch\input4;
      p => MSe\p;
      Sine\output -> Switch\input2;
      Step\output -> TransferFunction\input;
      Switch\output -> MSe\effort;
      TransferFunction\output -> Switch\input3;
      TransferFunction1\output -> Switch\input1;
     end;
    implementation_end;
   OneJunction 920 200
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
    knot OneJunction
     ports
      rotation knot duplicatable none p [1];
      signal knot out flow [1];
     restrictions
      causality constraint one_out p;
    end;
    icon bg
     figures
      text '1' 920 200 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
   pipeBCool 400 296
			specifications active 'Energy2PortFixedAdiab'
				specification 'Conv3PortCyl'
description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath><TimeStamp>2015-10-26 20:20:12</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations>parameters
	real p0 = 310000;
	real T0 = 304.45;
	real F0 = 0;
	real V0 = 1.15;</GlobalRelations></Attributes></Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   pneumatic out ppV;
   signal out vCyl;
   signal out mCyl;
   power out pHT;
   power out pTFOut [3,1];
   power in pTFIn2 [3,1];
  restrictions
   causality fixed out pTFIn2;
 end;
 icon bg bottom shadow 11776947
  figures
   line 653.5 801 653.5 721 725.5 721 725.5 801 693.5 801 693.5 793 717.5 793 717.5 729 661.5 729 661.5 793 685.5 793 685.5 801 653.5 801 fill 15132390;
   line 685.5 777 661.5 777 661.5 769 717.5 769 717.5 777 693.5 777 693.5 817 685.5 817 685.5 777 fill 6710886;
   line 661.5 729 717.5 729 717.5 769 661.5 769 661.5 729 fill 55295;
   text 'CV' 693.5 745 16;
   text 'dW' 685.5 825 16;
   spline 730.5 754 738.5 746 746.5 754 754.5 746;
   text 'dQ' 741.5 769 16;
   spline 730.5 761 738.5 753 746.5 761 754.5 753;
   spline 730.5 747 738.5 739 746.5 747 754.5 739;
  terminals
   pTFIn1 653.5 713 fixed;
   ppV 685.5 833 fixed;
   vCyl 733.5 825 fixed;
   mCyl 733.5 809 fixed;
   pHT 741.5 785 fixed;
   pTFOut 725.5 713 fixed;
   pTFIn2 693.5 713 fixed;
 end;
 implementation bg
  submodels
   MSf1 432 448
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
    type MSf
     ports
      power in p;
      signal in flow;
     restrictions
      causality fixed in p;
    end;
    icon bg bottom
     figures
      text 'MSf' 432 448 18 bold;
    end;
    implementation eq
variables
	real effort;
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
   MTF 352 480
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MTF.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:15:31</TimeStamp>
</Description>
</Information>';
    type MTF
     ports
      pseudopneumatic in ppIn;
      pseudothermalh in pTIn;
      power in pFIn;
      power out ppOut;
      power out pTOut;
      power out pFOut;
      signal in vCyl {m3} ;
      pneumatic out ppVOut;
      signal out mCyl;
     restrictions
      causality fixed out pTIn;
      causality fixed in pFOut;
      causality fixed in pTOut;
      causality fixed out ppIn;
      causality fixed out pFIn;
      causality fixed in ppOut;
    end;
    icon bg bottom
     figures
      text 'MTF' 352 480 'Arial Narrow' 25 bold;
     terminals
      ppIn 328 456 fixed;
      pTIn 352 456 fixed;
      pFIn 376 456 fixed;
      ppOut 328 504 fixed;
      pTOut 352 504 fixed;
      pFOut 376 504 fixed;
      vCyl 376 488 fixed;
      ppVOut 376 480 fixed;
      mCyl 376 496 fixed;
    end;
    implementation eq
parameters
	string global dll_ICE;           //dll file name
	string global dll_fcn_ThDP;			//function name in dll file
	real global fs;							// stoichiometric fuel-to-air ratio
variables
	real dm {kg/s}; // Rate of change in mass
	real dE {J/s}; // Rate of change in internal energy
	real dmb {kg/s}; // Rate of change in burned fuel mass
	real dV {m3/s}; // Rate of change in volume
	real p {Pa};  // pressure of the control volume
	real T {K};		// temperature of the control volume
	real F; 			// Fuel-to-air equivalent ratio of control volume
	real mb {kg};				// mass of burned fuel in the control volume
	real ma {kg}; 				// mass of air in the control volume
	real R {J/kgK};			// Gas constant of the gas
	real u {J/kg};				// Specific internal energy of the gas
	real rho {kg/m3};		// Density of the gas
	real rhop, rhoT, rhoF; // partial derivative of density w.r.t. p, T, F
	real Rp, RT, RF;		// partial derivative of gas constant w.r.t. p, T, F
	real up, uT, uF;   // partial derivative of internal energy w.r.t. p, T, F
	
	real hidden u1, u2, u3, u4, D;
	real hidden a11, a12, a13, a21, a22, a23;
	real hidden RtimesT;
	real hidden RtimesTSq;
	real hidden inArrThProp[5];
	real hidden outArrThProp[16];
equations
	p = ppOut.e;
	T = pTOut.e;
	F = pFOut.e;
	dV = ppVOut.f;
	dm = ppIn.f;
	dE = pTIn.f;
	dmb = pFIn.f;
	
	// Calculate the thermodynamic properties of the gas
	inArrThProp = [p;T;F;fs;1];	
	outArrThProp = dll(dll_ICE,dll_fcn_ThDP, inArrThProp);	
	R = outArrThProp[1]; 			u = outArrThProp[4];
	Rp = outArrThProp[6];			RT = outArrThProp[7];			
	RF = outArrThProp[5];			up = outArrThProp[9];			
	uT = outArrThProp[10];		uF = outArrThProp[8];
	RtimesT = R*T;
	RtimesTSq = RtimesT*RtimesT;
	rho = p/(RtimesT);
	rhop = (RtimesT - p*Rp*T)/RtimesTSq;			
	rhoT = (-p*(RT*T + R))/RtimesTSq;
	rhoF = (-p*(RF*T))/RtimesTSq;
	mCyl = rho*vCyl;
	mb = (F*fs)/(1+F*fs)*mCyl;
	ma = mCyl - mb;
	
	// Calculate the derivative of the p, T, F
	u1 = dm/mCyl - dV/vCyl;
	u2 = (dE - u*dm)/mCyl;
	u3 = (dmb*mCyl - dm*mb)/(fs*ma^2);
	
	D = -(rhoT*up - rhop*uT)/rho;
	a11 = uT / D; 		a12 = -rhoT/(rho*D);		a13 = (rhoT*uF - rhoF*uT)/(rho*D);
	a21 = -up / D;		a22 = rhop/(rho*D);		a23 = -(rhop*uF - rhoF*up)/(rho*D);

	ppOut.f = a11*u1 + a12*u2 + a13*u3;
	pTOut.f = a21*u1 + a22*u2 + a23*u3;
	pFOut.f = u3;
	
	//
		
	ppIn.e = p;
	pTIn.e = T;
	pFIn.e = F;
	ppVOut.e = p;
	
implementation_end;
   plug pTFIn1 208 392.1;
   plug ppV 528 480;
   plug vCyl 510.8 528;
   plug mCyl 512 544;
   plug pHT 472 288;
   plug pTFOut 493 392;
   plug pTFIn2 352.1 240;
   PowerDemux 248 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 248 368 248 416 width 2;
   rectangle 243 376 251 408 color -1;
   text '3' 252 402 color 8421504 8;
  terminals
   output1 248 376 fixed;
   output2 248 392 fixed;
   output3 248 408 fixed;
   input 240 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerDemux1 352 304.5
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 320 304 384 304 width 2;
   rectangle 328 299 360 307 color -1;
   text '3' 354 308 color 8421504 8;
  terminals
   output1 328 304 fixed;
   output2 352 304 fixed;
   output3 376 304 fixed;
   input 352 296 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 456 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 456 368 456 416 width 2;
   rectangle 451 368 459 400 color -1;
   text '3' 460 394 color 8421504 8;
  terminals
   input1 456 376 fixed;
   input2 456 392 fixed;
   input3 456 408 fixed;
   output 464 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   PowerSensor2 480 480
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:29:42</TimeStamp>
</Description>
</Information>';
    knot PowerSensor
     ports
      pneumatic knot in p1 [1];
      pneumatic knot out p2 [1];
      signal knot out P [1] {W} ;
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 473.1 472.8 486.9 487.2 fill 16777215;
      text 'P' 480.5 479.8;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	P = p1.e .* p1.f;
implementation_end;
   QSensor1 424 480
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\QSensor.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:59:34</TimeStamp>
</Description>';
    knot QSensor
     ports
      pneumatic knot in p1 [1];
      pneumatic knot out p2 [1];
      signal knot out vCyl [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 417.1 473.3 430.9 487.4 fill 16777215;
      text 'q' 423.5 477.6;
    end;
    implementation eq
parameters
	real global V0;
equations
	p2.f = p1.f;
	p1.e = p2.e;
	vCyl = int (p1.f, V0);
     implementation_end;
   Splitter1 424 496
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 420.8 492.8 427.2 499.2 color -1 fill 0;
      ellipse 419.7 491.7 428.3 500.3 color -1;
     terminals
      input 424 496 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Thdyn_Cont_Vol_Cyl 352 568
			specifications active 'Conventional'
				specification 'Conventional'
 description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume for array of cylinders</Description>
    <TimeStamp>2015-10-19 21:36:18</TimeStamp>
</Description>
</Information>';
 type C
  ports
   power in pp;
   power in pF;
   power in pT;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 568 51 bold;
  terminals
   pp 328 544 fixed;
   pF 376 544 fixed;
   pT 352 544 fixed;
 end;
 implementation eq
parameters
	real global p0; 
	real global T0;
	real global F0;

variables
	real interesting p, T, F;

equations
	p 		= int(pp.f,p0);
	T 		= int(pT.f,T0);
	F		= int(pF.f,F0);
	
	pp.e = p;
	pT.e = T;
	pF.e = F;	

implementation_end;
specification_end;
				specification 'cyl'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume for array of cylinders</Description>
    <TimeStamp>2015-10-19 17:31:58</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   pneumatic out ppV;
   signal out vCyl;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 152 480 51 bold;
  terminals
   pp 128 456 fixed;
   pF 176 456 fixed;
   pT 152 456 fixed;
   ppV 152 504 fixed;
   vCyl 176 504 fixed;
   mCyl 176 488 fixed;
 end;
 implementation eq
parameters
	integer global iCyl;
	integer global nCyl;
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global mCyl0[nCyl]; 
	real global ECyl0[nCyl];
	real global mbCyl0[nCyl];
	real global VCyl0[nCyl];

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,mCyl0[iCyl]);
	E 		= int(pT.f,ECyl0[iCyl]);
	m_b	= int(pF.f,mbCyl0[iCyl]);
	V   	= int(ppV.f,VCyl0[iCyl]);

	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[2];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	vCyl = V;
	mCyl = m;implementation_end;
specification_end;
				specification 'Fixed'
description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 104 264 51 bold;
  terminals
   pp 80 240 fixed;
   pF 128 240 fixed;
   pT 104 240 fixed;
   mCyl 128 272 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[2];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information><Description><LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration><Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description><TimeStamp>2015-10-19 17:21:38</TimeStamp></Description></Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 104 264 51 bold;
  terminals
   pp 80 240 fixed;
   pF 128 240 fixed;
   pT 104 240 fixed;
   mCyl 128 272 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[4], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[2];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudopneumatic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   MTF\mCyl -> mCyl 416 504 456 544;
   MTF\pFOut => Thdyn_Cont_Vol_Cyl\pF;
   MTF\ppOut => Thdyn_Cont_Vol_Cyl\pp;
   MTF\ppVOut => QSensor1\p1;
   MTF\pTOut => Thdyn_Cont_Vol_Cyl\pT;
   PowerDemux1\input <= pTFIn2;
   PowerDemux1\output1 => ZeroJunction\p;
   PowerDemux1\output2 => ZeroJunction1\p;
   PowerDemux1\output3 => ZeroJunction2\p;
   PowerDemux\output1 => ZeroJunction\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   PowerSensor2\P -> MSf1\flow;
   PowerSensor2\p2 => ppV;
   pTFIn1 => PowerDemux\input;
   QSensor1\p2 => PowerSensor2\p1;
   QSensor1\vCyl -> Splitter1\input;
   Splitter1\output -> MTF\vCyl;
   vCyl <- Splitter1\output 456 528;
   ZeroJunction1\p => MSf1\p;
   ZeroJunction1\p => MTF\pTIn;
   ZeroJunction1\p => pHT;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction2\p => MTF\pFIn;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction\p => MTF\ppIn;
   ZeroJunction\p => PowerMux\input1;
  end;
  figures
   text 'Global Parameters
     real global slag, Diam, alam, Veps;
     real global pfi0[ncyl];
     real global nstroke;
     real global fs;
     string global dll_ICE;	      // dll filename for subroutines
     string global dll_fcn_ThDP;   // subroutines names in the dll file
     string global dll_fcn_th_MEV; // subroutines names in the dll file

     real global p0[nCyl]; 
     real global T0[nCyl];
     real global F0[nCyl];' 208 120 16;
 implementation_end;
specification_end;
				specification 'Energy2PortFixedAdiab'
 description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath><TimeStamp>2015-11-3 00:03:12</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations>parameters
	real m0 = 0.00614320326531894;
	real E0 = 1554.936596996;
	real mb0 = 0;
	real V0 = 0.004;
	real p0 = 156321.7046063;
	real T0 = 354.48189813386;
	real F0 = 0;</GlobalRelations></Attributes></Information>';
 type Submodel
  ports
   power in pTFIn [3,1];
   signal out mCyl;
   power out pTFOut [3,1];
 end;
 icon bg bottom shadow 11776947
  figures
   rectangle 360 300 432 324 color 0 fill 12632256;
   rectangle 360 268 432 292 color 0 fill 12632256;
   rectangle 368 276 424 316 color 0 fill 55295;
   text 'CV' 395.5 297 color 0 16;
   line 420 296 444 296 color 0 fill 12632256 width 4 end open;
   line 356 296 380 296 color 0 fill 12632256 width 4 end open;
  terminals
   pTFIn 352 296 fixed;
   mCyl 391 300.8 fixed;
   pTFOut 448 296 fixed;
 end;
 implementation bg
  submodels
   plug pTFIn 208 392.1;
   plug mCyl 509 536;
   plug pTFOut 493 392.1;
   PowerDemux 250.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 249.5 368 249.5 416 color 0 width 2;
   rectangle 243.3 376 253.3 408 color -1;
   text '3' 254.5 402 color 8421504 8;
  terminals
   output1 249.5 376 fixed;
   output2 249.5 392 fixed;
   output3 249.5 408 fixed;
   input 239.5 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 458.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 457.5 368 457.5 416 color 0 width 2;
   rectangle 451.3 368 461.3 400 color -1;
   text '3' 462.5 394 color 8421504 8;
  terminals
   input1 457.5 376 fixed;
   input2 457.5 392 fixed;
   input3 457.5 408 fixed;
   output 467.5 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Fixed'
				specification 'Fixed'
 description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 color 0 51 bold;
  terminals
   pp 344.8 520.7 fixed;
   pF 359.2 520.7 fixed;
   pT 352 520.7 fixed;
   mCyl 359.2 530.4 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
   ppV 712 584 fixed;
   vCyl 736 584 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   pTFIn => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
 implementation_end;
specification_end;
				specification 'Energy2PortFixedVol'
description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>ControlVolumes\ControlVolumeEnergy3Port.emx</LibraryPath>
  <TimeStamp>2015-10-19 16:55:50</TimeStamp>
</Description>
</Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   signal out mCyl;
   power out pHT;
   power out pTFOut [3,1];
 end;
 icon bg bottom shadow 11776947
  figures
   spline 729.2 780 737.2 772 745.2 780 753.2 772;
   text 'dQ' 741.2 792 16;
   spline 729.2 788 737.2 780 745.2 788 753.2 780;
   spline 729.2 772 737.2 764 745.2 772 753.2 764;
   rectangle 654.7 748 726.7 804 fill 12632256;
   rectangle 662.7 756 718.7 796 fill 55295;
   text 'CV' 691.2 777 16;
  terminals
   pTFIn1 654.7 740 fixed;
   mCyl 686.7 812 fixed;
   pHT 742.7 804 fixed;
   pTFOut 726.7 740 fixed;
 end;
 implementation bg
  submodels
   plug pTFIn1 208 392.1;
   plug mCyl 509 535.9;
   plug pHT 472.1 288;
   plug pTFOut 493 392.1;
   PowerDemux 248 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 248 368 248 416 width 2;
   rectangle 243 376 251 408 color -1;
   text '3' 252 402 color 8421504 8;
  terminals
   output1 248 376 fixed;
   output2 248 392 fixed;
   output3 248 408 fixed;
   input 240 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 456 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 456 368 456 416 width 2;
   rectangle 451 368 459 400 color -1;
   text '3' 460 394 color 8421504 8;
  terminals
   input1 456 376 fixed;
   input2 456 392 fixed;
   input3 456 408 fixed;
   output 464 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Fixed'
				specification 'Fixed'
 description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 51 bold;
  terminals
   pp 328 504 fixed;
   pF 376 504 fixed;
   pT 352 504 fixed;
   mCyl 376 536 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
   ppV 712 584 fixed;
   vCyl 736 584 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   pTFIn1 => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   ZeroJunction1\p => pHT;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
 implementation_end;
specification_end;
				specification 'Energy3PortCyl'
description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath>
  <TimeStamp>2015-10-23 00:13:56</TimeStamp>
</Description>
</Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   pneumatic out ppV;
   signal out vCyl;
   signal out mCyl;
   power out pHT;
   power out pTFOut [3,1];
   power in pTFIn2 [3,1];
  restrictions
   causality fixed out pTFIn2;
 end;
 icon bg bottom shadow 11776947
  figures
   line 653.5 801 653.5 721 725.5 721 725.5 801 693.5 801 693.5 793 717.5 793 717.5 729 661.5 729 661.5 793 685.5 793 685.5 801 653.5 801 fill 15132390;
   line 685.5 777 661.5 777 661.5 769 717.5 769 717.5 777 693.5 777 693.5 817 685.5 817 685.5 777 fill 6710886;
   line 661.5 729 717.5 729 717.5 769 661.5 769 661.5 729 fill 55295;
   text 'CV' 693.5 745 16;
   text 'dW' 685.5 825 16;
   spline 730.5 754 738.5 746 746.5 754 754.5 746;
   text 'dQ' 741.5 769 16;
   spline 730.5 761 738.5 753 746.5 761 754.5 753;
   spline 730.5 747 738.5 739 746.5 747 754.5 739;
  terminals
   pTFIn1 653.5 713 fixed;
   ppV 685.5 833 fixed;
   vCyl 733.5 825 fixed;
   mCyl 733.5 809 fixed;
   pHT 741.5 785 fixed;
   pTFOut 725.5 713 fixed;
   pTFIn2 693.5 713 fixed;
 end;
 implementation bg
  submodels
   MSf 232 496
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
    type MSf
     ports
      power in p;
      signal in flow;
     restrictions
      causality fixed in p;
    end;
    icon bg bottom
     figures
      text 'MSf' 232 496 18 bold;
    end;
    implementation eq
variables
	real effort;
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
   plug ppV 352 656;
   plug vCyl 510.8 552;
   plug mCyl 509 535.9;
   plug pHT 472 288;
   plug pTFOut 493 392;
   plug pTFIn2 352.1 240;
   plug pTFIn1 208 392.1;
   PowerDemux 248 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 248 368 248 416 width 2;
   rectangle 243 376 251 408 color -1;
   text '3' 252 402 color 8421504 8;
  terminals
   output1 248 376 fixed;
   output2 248 392 fixed;
   output3 248 408 fixed;
   input 240 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerDemux1 352 304.5
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 320 304 384 304 width 2;
   rectangle 328 299 360 307 color -1;
   text '3' 354 308 color 8421504 8;
  terminals
   output1 328 304 fixed;
   output2 352 304 fixed;
   output3 376 304 fixed;
   input 352 296 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 456 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 456 368 456 416 width 2;
   rectangle 451 368 459 400 color -1;
   text '3' 460 394 color 8421504 8;
  terminals
   input1 456 376 fixed;
   input2 456 392 fixed;
   input3 456 408 fixed;
   output 464 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   PowerSensor1 352 608
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:29:42</TimeStamp>
</Description>
</Information>';
    knot PowerSensor
     ports
      pneumatic knot in p1 [1];
      pneumatic knot out p2 [1];
      signal knot out P [1] {W} ;
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 345.1 600.8 358.9 615.2 fill 16777215;
      text 'P' 352.5 607.8;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	P = p1.e .* p1.f;
implementation_end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Varying'
				specification 'Fixed'
description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
 description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 51 bold;
  terminals
   pp 328 504 fixed;
   pF 376 504 fixed;
   pT 352 504 fixed;
   mCyl 376 536 fixed;
   ppV 352 552 fixed;
   vCyl 376 552 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux1\input <= pTFIn2;
   PowerDemux1\output1 => ZeroJunction3\p;
   PowerDemux1\output2 => ZeroJunction1\p;
   PowerDemux1\output3 => ZeroJunction2\p;
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   PowerSensor1\P -> MSf\flow 232 608;
   PowerSensor1\p2 => ppV;
   pTFIn1 => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   Thdyn_Cont_Vol_Cyl\ppV => PowerSensor1\p1;
   Thdyn_Cont_Vol_Cyl\vCyl -> vCyl;
   ZeroJunction1\p => MSf\p;
   ZeroJunction1\p => pHT;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
  figures
   text 'Global Parameters
     real global slag, Diam, alam, Veps;
     real global pfi0[ncyl];
     real global nstroke;
     real global fs;
     string global dll_ICE;	      // dll filename for subroutines
     string global dll_fcn_ThDP;   // subroutines names in the dll file
     string global dll_fcn_th_MEV; // subroutines names in the dll file

     real global p0[nCyl]; 
     real global T0[nCyl];
     real global F0[nCyl];' 208 120 16;
 implementation_end;
specification_end;
				specification 'Energy3PortFixedAdiab'
description '<Information>
 <Description>
    <Version>4.6</Version>
<IsMainModel>1</IsMainModel>
    <LibraryPath>ControlVolumes\ControlVolume.emx</LibraryPath>
  <TimeStamp>2016-3-30 23:40:37</TimeStamp>
<KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
 <Attributes>
  <GlobalRelations>parameters
	real m0 = 4.08190848280315;
	real E0 = 884402.21053548;
	real mb0 = 0;
	real V0 = 1.15;
	real p0 = 310000;
	real T0 = 304.45;
	real F0 = 0;</GlobalRelations>
 </Attributes>
</Information>';
 type Submodel
  ports
   power in pTFIn1 [3,1];
   signal out mCyl;
   power out pTFOut [3,1];
   power out pTFOut2 [3,1];
 end;
 icon bg bottom shadow 11776947
  figures
   line 1028 289 1056 305 color 0 fill 12632256 width 4 end open;
   line 1027 261 1055 245 color 0 fill 12632256 width 4 end open;
   line 946 277 970 277 color 0 fill 12632256 width 4 end open;
   line 975 296 1017 296 1036.8 308.5 1039.5 304.3 1017 288 975 288 975 296 975 296 color 0 fill 12632256;
   line 1018 276 1045.5 259 1049 265 1031.3 276 1050.8 288 1047.3 293.8 1018 276 1018 276 color 0 fill 12632256;
   line 974.6 288 974.6 264 1014.6 264 1038.6 248 1046.3 259.3 1018.3 276 1047.3 293.3 1038.6 304 1014.6 288 974.6 288 974.6 288 color 0 fill 55295;
   text 'CV' 1008 277 color 0 16;
   line 974.5 256 1016.5 256 1035.7 242.7 1039.5 248 1016.5 264 974.5 264 974.5 256 974.5 256 color 0 fill 12632256;
  terminals
   pTFIn1 944 280 fixed;
   mCyl 992 280 fixed;
   pTFOut 1064 240 fixed;
   pTFOut2 1065 307.3 fixed;
 end;
 implementation bg
  submodels
   plug pTFIn1 208 392.1;
   plug mCyl 509 536;
   plug pTFOut 493 392.1;
   plug pTFOut2 352 240;
   PowerDemux 250.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 249.5 368 249.5 416 color 0 width 2;
   rectangle 243.3 376 253.3 408 color -1;
   text '3' 254.5 402 color 8421504 8;
  terminals
   output1 249.5 376 fixed;
   output2 249.5 392 fixed;
   output3 249.5 408 fixed;
   input 239.5 392 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 458.9 392
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 457.5 368 457.5 416 color 0 width 2;
   rectangle 451.3 368 461.3 400 color -1;
   text '3' 462.5 394 color 8421504 8;
  terminals
   input1 457.5 376 fixed;
   input2 457.5 392 fixed;
   input3 457.5 408 fixed;
   output 467.5 392 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   PowerMux1 352 300.5
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 color 0 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 336 304 368 304 color 0 width 2;
   rectangle 336 300 368 308 color -1;
   text '3' 362 299 color 8421504 8;
  terminals
   input1 344 304 fixed;
   input2 352 304 fixed;
   input3 360 304 fixed;
   output 352 304 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Thdyn_Cont_Vol_Cyl 352 528
			specifications active 'Fixed'
				specification 'Fixed'
 description '<Information>
 <Description>
    <LibraryPath>C:\Users\yum\Documents\GitHub\EngineSystemLibrary_20Sim\ControlVolumes\CapacitorThermodynamicGasFixedVol.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with fixed volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-19 17:21:38</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 352 528 color 0 51 bold;
  terminals
   pp 344.8 520.7 fixed;
   pF 359.2 520.7 fixed;
   pT 352 520.7 fixed;
   mCyl 359.2 530.4 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	V = V0;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	mCyl = m;

implementation_end;
specification_end;
				specification 'Varying'
description '<Information>
 <Description>
    <LibraryPath>ControlVolumes\CapacitorThermodynamicGas.emx</LibraryPath>
  <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
  <Description>Thermodynamic control volume with varying volume and no chemical reaction inside</Description>
    <TimeStamp>2015-10-27 22:31:23</TimeStamp>
</Description>
</Information>';
 type C
  ports
   pseudohydraulic in pp;
   power in pF;
   pseudothermalh in pT;
   signal out mCyl;
   power out ppV;
   signal out vCyl;
  restrictions
   causality preferred out pp;
 end;
 icon bg bottom
  figures
   text 'C' 712 560 51 bold;
  terminals
   pp 688 536 fixed;
   pF 736 536 fixed;
   pT 712 536 fixed;
   mCyl 736 568 fixed;
   ppV 712 584 fixed;
   vCyl 736 584 fixed;
 end;
 implementation eq
parameters
	real global fs;
	string global dll_ICE;	      // dll filename for subroutines
	string global dll_fcn_ThDP;   // subroutines names in the dll file
	string global dll_fcn_th_MEV; // subroutines names in the dll file

	real global m0; 
	real global E0;
	real global mb0;
	real global V0;

variables
	real interesting m, E, m_b, V;
	real interesting p, T, F;
	real hidden inarr_ThermoProp[5], outarr_ThermoProp[16];
	real inarr_th_MEV[9], outarr_th_MEV[3]; 
	real p_prev, T_prev, R_prev, u_prev, Cv_prev;

initialequations
	p_prev = 10e5;
	T_prev = 400;
	R_prev = 287;
	u_prev = 2.8508e+05;
	Cv_prev = 7.31e+02;
	
equations
	m 		= int(pp.f,m0);
	E 		= int(pT.f,E0);
	m_b	= int(pF.f,mb0);
	V 		= int(ppV.f,V0);
	
	inarr_th_MEV = [m;E;m_b;V;T_prev;R_prev;u_prev;Cv_prev;fs];
	outarr_th_MEV = dll(dll_ICE,dll_fcn_th_MEV, inarr_th_MEV);	

	p = outarr_th_MEV[1];
	T = outarr_th_MEV[2];
	F = outarr_th_MEV[3];

	T_prev = T;
	p_prev = p;
	inarr_ThermoProp = [p;T;F;fs;1];	
	outarr_ThermoProp = dll(dll_ICE,dll_fcn_ThDP, inarr_ThermoProp);	
	R_prev = outarr_ThermoProp[1];
	u_prev = outarr_ThermoProp[4];
	Cv_prev = outarr_ThermoProp[15];

	pp.e = p;
	pT.e = T;
	pF.e = F;
	ppV.e = p;
	mCyl = m;
	vCyl = V;

implementation_end;
specification_end;
			end;
   ZeroJunction1 352 392
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudothermalh knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 352 392 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 376 408
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 376 408 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction3 328 376
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      pseudohydraulic knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 328 376 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   PowerDemux\output1 => ZeroJunction3\p;
   PowerDemux\output2 => ZeroJunction1\p;
   PowerDemux\output3 => ZeroJunction2\p;
   PowerMux\output => pTFOut;
   PowerMux1\output => pTFOut2;
   pTFIn1 => PowerDemux\input;
   Thdyn_Cont_Vol_Cyl\mCyl -> mCyl;
   ZeroJunction1\p => PowerMux\input2;
   ZeroJunction1\p => PowerMux1\input2;
   ZeroJunction1\p => Thdyn_Cont_Vol_Cyl\pT;
   ZeroJunction2\p => PowerMux\input3;
   ZeroJunction2\p => PowerMux1\input3;
   ZeroJunction2\p => Thdyn_Cont_Vol_Cyl\pF;
   ZeroJunction3\p => PowerMux\input1;
   ZeroJunction3\p => PowerMux1\input1;
   ZeroJunction3\p => Thdyn_Cont_Vol_Cyl\pp;
  end;
 implementation_end;
specification_end;
			end;
   plotTurbocharger 64 24
    description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
    type 'Submodel-Equation'
    end;
    implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/
parameters
	real PRSurge[7] = [1.324659;1.4829504;1.6929289;1.9497488;2.3099425;2.7137473;3.5197415];
	real dmSurge[7] = [0.0653322208226380;0.0799781262676960;0.0997931770345013;0.138561748047928;0.191976224506412;0.239790801722864;0.334558433195456];
	real PRChock[7] = [1.1947318;1.2737535;1.3894638;1.5238006;1.7100658;1.9228598;2.430856];
	real dmChock[7] = [0.2193895887566;0.27121390671633;0.32839341087645;0.3841909100407;0.43584246981608;0.47471070261597;0.51254246946833];
	real PR1[11] = [1.3301976;1.325682;1.3228599;1.3172154;1.3059267;1.2889934;1.2703669;1.2528692;1.2404516;1.2201318;1.1947318];
	real PR2[13] = [1.491063;1.4876764;1.4837253;1.4803387;1.4730009;1.4645343;1.4470367;1.3945438;1.3714017;1.3510818;1.3335842;1.3121355;1.2737535];
	real PR3[15] = [1.6942616;1.6914393;1.689746;1.6891816;1.6874882;1.684666;1.680715;1.6654751;1.5870179;1.5446849;1.5158983;1.4927564;1.4701787;1.4351834;1.3894638];
	real PR4[16] = [1.9663217;1.964064;1.9634995;1.9618062;1.958984;1.9567262;1.949953;1.911571;1.879398;1.7975541;1.7467545;1.7049859;1.675635;1.6412041;1.5926623;1.5238006];
	real PR5[15] = [2.3128881;2.3123236;2.3100657;2.3061147;2.299906;2.2891815;2.2468486;2.18476;2.0825965;2.0137348;1.9561619;1.9059266;1.8624647;1.7992474;1.7100658];
	real PR6[13] = [2.7226717;2.7209783;2.719285;2.7164629;2.7136407;2.6978364;2.4444027;2.3619943;2.2824082;2.2146754;2.1435559;2.0504234;1.9228598];
	real PR7[8] = [3.5224836;3.517968;3.4903104;3.0579493;2.9134524;2.8169332;2.6707432;2.430856];
	real dm1[11] = [0.067026108318747;0.086201102561904;0.10520335374045;0.11919591996757;0.13267024944099;0.15167249305966;0.16894725311312;0.18345807121369;0.19209545124042;0.20384228958874;0.2193895887566];
	real dm2[13] = [0.080845923921384;0.097429711716395;0.11418623501615;0.12714231261611;0.13767991927267;0.15080874749712;0.17136572405652;0.21748936212677;0.22940895109958;0.23994657287588;0.24823846677338;0.25756684173817;0.27121390671633];
	real dm3[15] = [0.09915718772174;0.11418623501615;0.13215199756754;0.14649005748375;0.15702766414031;0.16963824049131;0.18587653459722;0.2076427428484;0.26413122939085;0.28330623119387;0.29384386053005;0.30092650761604;0.30645443688104;0.31612830553493;0.32839341087645];
	real dm4[16] = [0.14044388390517;0.15858239708104;0.17447518237812;0.1863947789108;0.1986598615727;0.21368891642698;0.23303665373475;0.26914092946201;0.28693394138892;0.32303820955631;0.33789450622623;0.34895036475624;0.35741500171836;0.36432490573974;0.3727895578216;0.3841909100407];
	real dm5[15] = [0.19192270061593;0.20746999978379;0.22198080276461;0.23960107162691;0.25514838591451;0.27639631205275;0.3126733384045;0.34290418361779;0.37538077182962;0.39179177876066;0.40250216628119;0.41096678812356;0.41804944276943;0.42616857848258;0.43584246981608];
	real dm6[13] = [0.2394283285623;0.25082967322153;0.26482222432891;0.28278800200004;0.30351772918393;0.32770239325877;0.42098616558629;0.43687895844323;0.44793481697324;0.4553629653082;0.46175463257588;0.47004650379377;0.47471070261597];
	real dm7[8] = [0.33443956933529;0.35689677252452;0.38833684186971;0.48611206239495;0.4950949285509;0.5006228578159;0.50718724546858;0.51254246946832];
variables
	integer i;	
	real x1, x2, x3, x4, x5, x6, x7, x8, x9;
	real y1, y2, y3, y4, y5, y6, y7, y8, y9;
initialequations
	i = 0;	
equations
  // start typing here
	i = i + 1;
	if i < 17 then
		if i < 16 then
			if i < 14 then
				if i <12 then
					if i < 9 then
						if i < 8 then
							x1 = dmSurge[i];
							x2 = dmChock[i];
							y1 = PRSurge[i];
							y2 = PRChock[i];
						end;	
						x9 = dm7[i];
						y9 = PR7[i];		
					end;
					x3 = dm1[i];
					y3 = PR1[i];
				end;
				x4 = dm2[i];
				y4 = PR2[i];
				x8 = dm6[i];
				y8 = PR6[i];
			end;
			x5 = dm3[i];
			y5 = PR3[i];	
			x7 = dm5[i];
			y7 = PR5[i];			
		end;		
		x6 = dm4[i];
		y6 = PR4[i];			
	end;					

				
					
		

 implementation_end;
   PowerSensor1 880 200
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\PowerSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:29:42</TimeStamp>
</Description>
</Information>';
    knot PowerSensor
     ports
      rotation knot in p1 [1];
      rotation knot out p2 [1];
      signal knot out P [1] {W} ;
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 873.1 192.8 886.9 207.2 color 0 fill 16777215;
      text 'P' 880.5 199.8 color 0;
    end;
    implementation eq
equations
	p2.e = p1.e;
	p1.f = p2.f;
	P = p1.e .* p1.f;
implementation_end;
   Turbocharger1 264.4 224.5
			specifications active 'CompMapTurbParam1'
				specification 'CompMapTurbParam'
description '<Information>
 <Description>
    <Version>4.5</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
    <LibraryPath>FlowRestriction\Turbocharger.emx</LibraryPath>
  <TimeStamp>2015-10-27 22:34:23</TimeStamp>
</Description>
 <Attributes>
  <GlobalRelations>parameters
	real i = 5.3;
	real r[3] = [0;0;0];
	real omegat0 = 2046.9734340558;
// Turbine
	real flow_coeff_turb[3] = [-1.564;-4.793;1.564];
									//Flow coefficient for the flow model a*x^b+c
	real eff_coeff_turb[6] = [-1.089;0.9185;-0.1066;0.2123;-0.05319;-0.0054512];
variables
	real h0TC;

initialequations
	h0TC = omegat0*i;</GlobalRelations>
 </Attributes>
</Information>';
 type Submodel
  ports
   power in input [3,1];
   signal in eta_t_corr;
   power in input1 [3,1];
   power out output [3,1];
   power out output1 [3,1];
 end;
 icon bg bottom shadow 11776947
  figures
   group
    line 240.8 248.3 288.1 248.3 304 296 224.9 296 240.8 248.3 color 0 fill 15132390;
    line 224.9 153 304 153 288.1 200.7 240.8 200.7 224.9 153 color 0 fill 15132390;
    line 256.5 200.7 256.5 248.3 272.4 248.3 272.4 200.7 256.5 200.7 color 0 fill 15132390;
   end;
  terminals
   input 312 152 fixed;
   eta_t_corr 264 144 fixed;
   input1 216 296 fixed;
   output 216 152 fixed;
   output1 312 296 fixed;
 end;
 implementation bg
  submodels
   COMPRES1 232 344
    description '<Information>
  <Description>
    <LibraryPath>FlowRestriction\Compressor_map_externalDll.emx</LibraryPath>
    <TimeStamp>2015-10-26 20:00:06</TimeStamp>
    <Version>4.5</Version>
  </Description>
</Information>
';
    type R
     ports
      power in ppin;
      power in pTin;
      power out ppout;
      power out pTout;
      power in pFin;
      power out pFout;
      power in pMech;
      signal in eta_t;
     restrictions
      causality fixed in ppin;
      causality fixed in pTout;
      causality fixed in pTin;
      causality fixed in ppout;
    end;
    icon bg left
     figures
      group
       line 202.2 366.5 261.8 366.5 color 0;
       line 217.2 321.5 246.9 321.5 261.8 366.5 color 0;
       line 217.2 321.5 202.2 366.5 color 0;
      end;
     terminals
      ppin 192 320 fixed;
      pTin 192 344 fixed;
      ppout 272 320 fixed;
      pTout 272 344 fixed;
      pFin 192 368 fixed;
      pFout 272 368 fixed;
      pMech 232 312 fixed;
    end;
    implementation eq
parameters
	real global fs;
// Thermo package
	string global dll_ICE; 
	string global dll_fcn_comp;
	
variables
	real pu, pd, fu, fd, tu, td, omegat, pr;
	real momc, dmc, dmco, dmfc, dmfco, deu, ded, etaic;
	real hidden inarr[10], outarr[8];
	real interesting eta_TC;

initialequations
	dmc = 0;
	etaic = 0;
	
	
code
   pu 	= ppin.e;	pd 	= ppout.e;
	fu  	= pFin.e;  	fd 	= pFout.e;
	tu	= pTin.e;		td 	= pTout.e;
	omegat = pMech.f;

// Calculating correction factor for compressor efficiency to match the flow	
	pr = pd/pu;

// Compressor calculation		
	inarr[1:10]  = [pu; tu; fu; pd; td; fd; omegat; dmc; etaic; fs];
	outarr = dll(dll_ICE,dll_fcn_comp, inarr);
	dmc	= outarr[1];
	deu	= outarr[2];
	dmfc	= outarr[3];
	dmco	= outarr[4];
	ded	= outarr[5];
	dmfco	= outarr[6];
	momc	= outarr[7];
	etaic = outarr[8];
	
	eta_TC = etaic*eta_t;
// Assigning variables	
	ppin.f	= dmc;
	ppout.f	= dmco;
	pFin.f	= dmfc;
	pFout.f	= dmfco;
	pTin.f	= deu;
	pTout.f	= ded;
	pMech.e	= momc;
	
	
	
	implementation_end;
   plug eta_t_corr 232 25;
   plug input1 77.1 344;
   plug output 134 80;
   plug output1 367 344;
   plug input 325 80;
   PowerDemux 137 344
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 136 328 136 360 color 0 width 2;
   rectangle 132 328 140 360 color -1;
   text '3' 141 354 color 8421504 8;
  terminals
   output1 136 336 fixed;
   output2 136 344 fixed;
   output3 136 352 fixed;
   input 136 344 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerDemux1 324 80
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 325 64 325 96 color 0 width 2;
   rectangle 321 64 329 96 color -1;
   text '3' 320 90 color 8421504 8;
  terminals
   output1 325 72 fixed;
   output2 325 80 fixed;
   output3 325 88 fixed;
   input 325 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 345 344
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 344 328 344 360 color 0 width 2;
   rectangle 340 328 348 360 color -1;
   text '3' 349 354 color 8421504 8;
  terminals
   input1 344 336 fixed;
   input2 344 344 fixed;
   input3 344 352 fixed;
   output 344 344 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   PowerMux1 156 80
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 157 64 157 96 color 0 width 2;
   rectangle 153 64 161 96 color -1;
   text '3' 152 90 color 8421504 8;
  terminals
   input1 157 72 fixed;
   input2 157 80 fixed;
   input3 157 88 fixed;
   output 157 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Shaft 232 216
			specifications active 'Shaft1RB'
				specification 'Shaft1RB'
 description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>Mechanics\RotatingShaft.emx</LibraryPath><TimeStamp>2015-10-26 11:49:57</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>';
 type Submodel
  ports
   power in p;
   power out p1;
 end;
 icon bg bottom shadow 11776947
  figures
   rectangle 207.6 201 256.4 231 color 0 fill 15132390;
   text 'name' 232 216 color 0 16;
 end;
 implementation bg
  submodels
   I 208 88
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\I.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:55:55</TimeStamp>
</Description>
</Information>';
    type I
     ports
      power in p;
      signal out state;
     restrictions
      causality preferred in p;
    end;
    icon bg bottom
     figures
      text 'I' 208 88 color 0 18 bold;
    end;
    implementation eq
parameters
	real global i;
variables
	real global h0TC;	
equations
    state = int(p.e,h0TC);
    p.f = state / i;
implementation_end;
   plug p 117 184;
   plug p1 312 184;
   OneJunction 208 184
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
    knot OneJunction
     ports
      power knot duplicatable none p [1];
      signal knot out flow [1];
     restrictions
      causality constraint one_out p;
    end;
    icon bg
     figures
      text '1' 208 184 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
   R 208 280
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\R.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:35:37</TimeStamp>
</Description>
</Information>';
    type R
     ports
      power in p;
    end;
    icon bg bottom
     figures
      text 'R' 208 280 color 0 18 bold;
    end;
    implementation eq
parameters
	real global r[3];
equations
	p.e = (r[1] * p.f + r[2])*p.f + r[3];
implementation_end;
  end;
  connections
   OneJunction\p => I\p;
   OneJunction\p => p1;
   OneJunction\p => R\p;
   p => OneJunction\p;
  end;
 implementation_end;
specification_end;
			end;
   TURBIN1 231.9 80
    description '<Information>
 <Description>
    <LibraryPath>FlowRestriction\Turbine_polynomial.emx</LibraryPath>
  <TimeStamp>2015-10-26 20:00:16</TimeStamp>
  <Version>4.5</Version>
</Description>
</Information>';
    type R
     ports
      power in ppin;
      power in pTin;
      power out ppout;
      power out pTout;
      power in pFin;
      power out pFout;
      power out pMech;
      signal out eta_t;
      signal in eta_t_corr;
     restrictions
      causality fixed in ppin;
      causality fixed in pTin;
      causality fixed in ppout;
      causality fixed in pTout;
    end;
    icon bg bottom
     figures
      group
       line 261.7 57.5 202.2 57.5 color 0;
       line 246.8 102.5 217.1 102.5 202.2 57.5 color 0;
       line 246.8 102.5 261.7 57.5 color 0;
      end;
     terminals
      ppin 272 56 fixed;
      pTin 271.9 80 fixed;
      ppout 192 56 fixed;
      pTout 191.9 80 fixed;
      pFin 272 104 fixed;
      pFout 192 104 fixed;
      pMech 231.9 112 fixed;
    end;
    implementation eq
parameters
	real global flow_coeff_turb[3];
									//Flow coefficient for the flow model a*x^b+c
	real global eff_coeff_turb[6];
// Thermo package
	string global dll_ICE;
	string global dll_fcn_ThDP;
	string global dll_fcn_GetTFromPhF;
	real global fs;

variables
	real pu, pd, fu, fd, tu, td, omegat, er, td_calc, tdi;
	real interesting momt, dmt, dmft, deu, ded, dedd;
//	real interesting eta_t;
	real hidden dmt_corr;
	real hidden hu, dhi, hdi, k;
	real Uc;
	real hidden hd, err_td, dtd;
// Thermo package
	real inarr[5], outarr[16];

//initialequations
//	eff_coeff = eff_coeff_T_cw * [T_cw;1];
code
   pu 	= ppin.e;	pd 	= ppout.e;
	fu  	= pFin.e;  	fd 	= pFout.e;
	tu		= pTin.e;	td 	= pTout.e;
	omegat = pMech.f;
	
	// Calculation of the turbine is based on the flow model
	//      m_dot = a*ER^b + c 
	// where the flow parameters a, b, c are found by fitting 
	// the given turbine map or compressor matching procedure. 
	// The efficiency is modeled using 2nd order polynomial of
	// ER and Uc (Blade-speed ratio)

	// Calculating mass flow
	er = pu / pd;
	dmt_corr = flow_coeff_turb[1]*er^flow_coeff_turb[2] + flow_coeff_turb[3];
	dmt = dmt_corr*(pu/1000)/sqrt(tu);
	dmft = dmt*fu*fs/(1+fu*fs);
	
	// Calculating inlet flow enthalpy and energy flow
	inarr 	= [pu; tu; fu; fs; 1];
	outarr	= dll(dll_ICE,dll_fcn_ThDP, inarr);
	hu = outarr[2];
	deu = dmt*hu;

	// Calculating  efficiency of the turbine and outlet enthalpy and temperature
	k = outarr[13];
	tdi = tu*er^((1-k)/k);
	inarr 	= [pd;tdi;fu;fs;1];
	outarr	= dll(dll_ICE,dll_fcn_ThDP, inarr);
	hdi = outarr[2];
	dhi = (hu - hdi);
	Uc = omegat/sqrt(2*dhi);
	eta_t = limit(eff_coeff_turb[1] + eff_coeff_turb[2]*Uc + eff_coeff_turb[3]*Uc^2 
			+ eff_coeff_turb[4]*er + eff_coeff_turb[5]*Uc*er + eff_coeff_turb[6]*er^2,0.5,1);
	eta_t = eta_t_corr*eta_t;
	dedd = dmt*eta_t*dhi;
	ded = deu - dedd;
	
	// Calculating the torque
	momt = dedd / omegat;

	ppin.f	= dmt;
	ppout.f	= dmt;
	pFin.f	= dmft;
	pFout.f	= dmft;
	pTin.f	= deu;
	pTout.f	= ded;

	pMech.e	= momt;
	
	// Calculating the discharge temperature
	hd = ded / dmt;
	inarr[1:4] = [pd; hd; fu; fs];
	td_calc = dll(dll_ICE,dll_fcn_GetTFromPhF,inarr);
	
	


implementation_end;
  end;
  connections
   COMPRES1\pFout => PowerMux\input3;
   COMPRES1\ppout => PowerMux\input1;
   COMPRES1\pTout => PowerMux\input2;
   eta_t_corr -> TURBIN1\eta_t_corr;
   input => PowerDemux1\input;
   input1 => PowerDemux\input;
   PowerDemux\output1 => COMPRES1\ppin;
   PowerDemux\output2 => COMPRES1\pTin;
   PowerDemux\output3 => COMPRES1\pFin;
   PowerMux\output => output1;
   PowerMux1\output => output;
   Shaft\p1 => COMPRES1\pMech;
   TURBIN1\eta_t -> COMPRES1\eta_t 296 160 296 256;
   TURBIN1\pFin <= PowerDemux1\output3;
   TURBIN1\pFout => PowerMux1\input3;
   TURBIN1\pMech => Shaft\p;
   TURBIN1\ppin <= PowerDemux1\output1;
   TURBIN1\ppout => PowerMux1\input1;
   TURBIN1\pTin <= PowerDemux1\output2;
   TURBIN1\pTout => PowerMux1\input2;
  end;
 implementation_end;
specification_end;
				specification 'CompMapTurbParam1'
 description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration><LibraryPath>FlowRestriction\Turbocharger.emx</LibraryPath><TimeStamp>2015-10-27 22:34:23</TimeStamp></Description><Attributes><GlobalRelations>parameters
	real i = 0.00043403280118523;
	real r[3] = [0;0;0];
	real omegat0 = 6637.7934154761;
// Turbine
	real flow_coeff_turb[3] = [-0.034017970697901;-3.2595327063386;0.04676510884448];
									//Flow coefficient for the flow model a*x^b+c
	real Uc_opt = 0.54345264737898;
	real Dturb_wheel = 0.0725;
	real eta_t_max = 0.72;	
	real tRef = 550;

variables
	real h0TC;

initialequations
	h0TC = omegat0*i;</GlobalRelations></Attributes></Information>';
 type Submodel
  ports
   power in input [3,1];
   signal in eta_t_corr;
   power in input1 [3,1];
   power out output [3,1];
   power out output1 [3,1];
 end;
 icon bg bottom shadow 11776947
  figures
   group
    line 240.8 248.3 288.1 248.3 304 296 224.9 296 240.8 248.3 color 0 fill 15132390;
    line 224.9 153 304 153 288.1 200.7 240.8 200.7 224.9 153 color 0 fill 15132390;
    line 256.5 200.7 256.5 248.3 272.4 248.3 272.4 200.7 256.5 200.7 color 0 fill 15132390;
   end;
  terminals
   input 312 152 fixed;
   eta_t_corr 264 144 fixed;
   input1 216 296 fixed;
   output 216 152 fixed;
   output1 312 296 fixed;
 end;
 implementation bg
  submodels
   COMPRES1 232 344
    description '<Information>
  <Description>
    <LibraryPath>FlowRestriction\Compressor_map_externalDll.emx</LibraryPath>
    <TimeStamp>2015-10-26 20:00:06</TimeStamp>
    <Version>4.5</Version>
  </Description>
</Information>
';
    type R
     ports
      power in ppin;
      power in pTin;
      power out ppout;
      power out pTout;
      power in pFin;
      power out pFout;
      power in pMech;
      signal in eta_t;
     restrictions
      causality fixed in ppin;
      causality fixed in pTout;
      causality fixed in pTin;
      causality fixed in ppout;
    end;
    icon bg left
     figures
      group
       line 202.2 366.5 261.8 366.5 color 0;
       line 217.2 321.5 246.9 321.5 261.8 366.5 color 0;
       line 217.2 321.5 202.2 366.5 color 0;
      end;
     terminals
      ppin 192 320 fixed;
      pTin 192 344 fixed;
      ppout 272 320 fixed;
      pTout 272 344 fixed;
      pFin 192 368 fixed;
      pFout 272 368 fixed;
      pMech 232 312 fixed;
    end;
    implementation eq
parameters
	real global fs;
// Thermo package
	string global dll_ICE; 
	string global dll_fcn_comp;
	
variables
	real pu, pd, fu, fd, tu, td, omegat, pr;
	real momc, dmc, dmco, dmfc, dmfco, deu, ded, etaic;
	real hidden inarr[10], outarr[8];
	real interesting eta_TC;

initialequations
	dmc = 0;
	etaic = 0;
	
	
code
   pu 	= ppin.e;	pd 	= ppout.e;
	fu  	= pFin.e;  	fd 	= pFout.e;
	tu	= pTin.e;		td 	= pTout.e;
	omegat = pMech.f;

// Calculating correction factor for compressor efficiency to match the flow	
	pr = pd/pu;

// Compressor calculation		
	inarr[1:10]  = [pu; tu; fu; pd; td; fd; omegat; dmc; etaic; fs];
	outarr = dll(dll_ICE,dll_fcn_comp, inarr);
	dmc	= outarr[1];
	deu	= outarr[2];
	dmfc	= outarr[3];
	dmco	= outarr[4];
	ded	= outarr[5];
	dmfco	= outarr[6];
	momc	= outarr[7];
	etaic = outarr[8];
	
	eta_TC = etaic*eta_t;
// Assigning variables	
	ppin.f	= dmc;
	ppout.f	= dmco;
	pFin.f	= dmfc;
	pFout.f	= dmfco;
	pTin.f	= deu;
	pTout.f	= ded;
	pMech.e	= momc;
	
	
	
	implementation_end;
   plug eta_t_corr 232 8;
   plug input1 40 344;
   plug output 120 72;
   plug output1 432 344;
   plug input 352 72;
   PowerDemux 138.5 344
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 136 328 136 360 color 0 width 2;
   rectangle 132 328 140 360 color -1;
   text '3' 141 354 color 8421504 8;
  terminals
   output1 136 336 fixed;
   output2 136 344 fixed;
   output3 136 352 fixed;
   input 136 344 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerDemux1 293.5 72
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   output1 128 72 fixed;
   input 128 80 fixed;
   output2 128 88 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal output input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power in input [2,1];
   power out output2;
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   output1 128 64 fixed;
   input 128 72 fixed;
   output2 128 80 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power in input [3,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
 end;
 icon bg bottom
  figures
   line 296 56 296 88 color 0 width 2;
   rectangle 292 56 300 88 color -1;
   text '3' 291 82 color 8421504 8;
  terminals
   output1 296 64 fixed;
   output2 296 72 fixed;
   output3 296 80 fixed;
   input 296 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power in input [4,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 80 fixed;
   output4 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power in input [5,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   output1 128 56 fixed;
   output2 128 64 fixed;
   output3 128 72 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power in input [6,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 80 fixed;
   output5 128 88 fixed;
   output6 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power in input [7,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   output1 128 48 fixed;
   output2 128 56 fixed;
   output3 128 64 fixed;
   output4 128 72 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power in input [8,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 80 fixed;
   output6 128 88 fixed;
   output7 128 96 fixed;
   output8 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out output1;
   power out output2;
   power out output3;
   power out output4;
   power out output5;
   power out output6;
   power out output7;
   power out output8;
   power out output9;
   power in input [9,1];
  restrictions
   causality constraint not_equal output1 input;
   causality constraint not_equal output2 input;
   causality constraint not_equal output3 input;
   causality constraint not_equal output4 input;
   causality constraint not_equal output5 input;
   causality constraint not_equal output6 input;
   causality constraint not_equal output7 input;
   causality constraint not_equal output8 input;
   causality constraint not_equal output9 input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   output1 128 40 fixed;
   output2 128 48 fixed;
   output3 128 56 fixed;
   output4 128 64 fixed;
   output5 128 72 fixed;
   output6 128 80 fixed;
   output7 128 88 fixed;
   output8 128 96 fixed;
   output9 128 104 fixed;
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f; output9.f];specification_end;
			end;
   PowerMux 346.5 344
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 344 328 344 360 color 0 width 2;
   rectangle 340 328 348 360 color -1;
   text '3' 349 354 color 8421504 8;
  terminals
   input1 344 336 fixed;
   input2 344 344 fixed;
   input3 344 352 fixed;
   output 344 344 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   PowerMux1 157.5 72
			specifications active 'inputs_3'
				specification 'default'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 64 128 96 width 2;
   rectangle 124 64 132 96 color -1;
   text '2' 133 91 color 8421504 8;
  terminals
   input1 128 72 fixed;
   output 128 80 fixed;
   input2 128 88 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
				specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
				specification 'inputs_3'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 160 56 160 88 color 0 width 2;
   rectangle 156 56 164 88 color -1;
   text '3' 155 82 color 8421504 8;
  terminals
   input1 160 64 fixed;
   input2 160 72 fixed;
   input3 160 80 fixed;
   output 160 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
				specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
			end;
   Shaft 232 216
			specifications active 'Shaft1RB'
				specification 'Shaft1RB'
 description '<Information><Description><Version>4.5</Version><IsMainModel>1</IsMainModel><LibraryPath>Mechanics\RotatingShaft.emx</LibraryPath><TimeStamp>2015-10-26 11:49:57</TimeStamp><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description><Attributes><GlobalRelations></GlobalRelations></Attributes></Information>';
 type Submodel
  ports
   power in p;
   power out p1;
 end;
 icon bg bottom shadow 11776947
  figures
   rectangle 207.6 201 256.4 231 color 0 fill 15132390;
   text 'name' 232 216 color 0 16;
 end;
 implementation bg
  submodels
   I 208 88
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\I.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:55:55</TimeStamp>
</Description>
</Information>';
    type I
     ports
      power in p;
      signal out state;
     restrictions
      causality preferred in p;
    end;
    icon bg bottom
     figures
      text 'I' 208 88 color 0 18 bold;
    end;
    implementation eq
parameters
	real global i;
variables
	real global h0TC;	
equations
    state = int(p.e,h0TC);
    p.f = state / i;
implementation_end;
   plug p 117 184;
   plug p1 312 184;
   OneJunction 208 184
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
    knot OneJunction
     ports
      power knot duplicatable none p [1];
      signal knot out flow [1];
     restrictions
      causality constraint one_out p;
    end;
    icon bg
     figures
      text '1' 208 184 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
   R 208 280
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\R.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:35:37</TimeStamp>
</Description>
</Information>';
    type R
     ports
      power in p;
    end;
    icon bg bottom
     figures
      text 'R' 208 280 color 0 18 bold;
    end;
    implementation eq
parameters
	real global r[3];
equations
	p.e = (r[1] * p.f + r[2])*p.f + r[3];
implementation_end;
  end;
  connections
   OneJunction\p => I\p;
   OneJunction\p => p1;
   OneJunction\p => R\p;
   p => OneJunction\p;
  end;
 implementation_end;
specification_end;
			end;
   TURBIN1 231.9 72
			specifications active 'flow_ER_Eff_UcPoly'
				specification 'flow_ER_Eff_UcERPoly'
description '<Information>
 <Description>
    <LibraryPath>FlowRestriction\Turbine_polynomial.emx</LibraryPath>
  <TimeStamp>2015-11-3 14:48:18</TimeStamp>
  <Version>4.5</Version>
</Description>
</Information>';
 type R
  ports
   power in ppin;
   power in pTin;
   power out ppout;
   power out pTout;
   power in pFin;
   power out pFout;
   power out pMech;
   signal out eta_t;
   signal in eta_t_corr;
  restrictions
   causality fixed in ppin;
   causality fixed in pTin;
   causality fixed in ppout;
   causality fixed in pTout;
 end;
 icon bg bottom
  figures
   group
    line 525.7 129.5 466.2 129.5 color 0;
    line 510.8 174.5 481.1 174.5 466.2 129.5 color 0;
    line 510.8 174.5 525.7 129.5 color 0;
   end;
  terminals
   ppin 536 128 fixed;
   pTin 535.9 152 fixed;
   ppout 456 128 fixed;
   pTout 455.9 152 fixed;
   pFin 536 176 fixed;
   pFout 456 176 fixed;
   pMech 495.9 184 fixed;
 end;
 implementation eq
parameters
	real global flow_coeff_turb[3];
									//Flow coefficient for the flow model a*x^b+c
	real global eff_coeff_turb[6];
// Thermo package
	string global dll_ICE;
	string global dll_fcn_ThDP;
	string global dll_fcn_GetTFromPhF;
	real global fs;

variables
	real pu, pd, fu, fd, tu, td, omegat, er, td_calc, tdi;
	real interesting momt, dmt, dmft, deu, ded, dedd;
//	real interesting eta_t;
	real hidden dmt_corr;
	real hidden hu, dhi, hdi, k;
	real Uc;
	real hidden hd, err_td, dtd;
// Thermo package
	real inarr[5], outarr[16];

//initialequations
//	eff_coeff = eff_coeff_T_cw * [T_cw;1];
code
   pu 	= ppin.e;	pd 	= ppout.e;
	fu  	= pFin.e;  	fd 	= pFout.e;
	tu		= pTin.e;	td 	= pTout.e;
	omegat = pMech.f;
	
	// Calculation of the turbine is based on the flow model
	//      m_dot = a*ER^b + c 
	// where the flow parameters a, b, c are found by fitting 
	// the given turbine map or compressor matching procedure. 
	// The efficiency is modeled using 2nd order polynomial of
	// ER and Uc (Blade-speed ratio)

	// Calculating mass flow
	er = pu / pd;
	dmt_corr = flow_coeff_turb[1]*er^flow_coeff_turb[2] + flow_coeff_turb[3];
	dmt = dmt_corr*(pu/1000)/sqrt(tu);
	dmft = dmt*fu*fs/(1+fu*fs);
	
	// Calculating inlet flow enthalpy and energy flow
	inarr 	= [pu; tu; fu; fs; 1];
	outarr	= dll(dll_ICE,dll_fcn_ThDP, inarr);
	hu = outarr[2];
	deu = dmt*hu;

	// Calculating  efficiency of the turbine and outlet enthalpy and temperature
	k = outarr[16];
	tdi = tu*er^((1-k)/k);
	inarr 	= [pd;tdi;fu;fs;1];
	outarr	= dll(dll_ICE,dll_fcn_ThDP, inarr);
	hdi = outarr[2];
	dhi = (hu - hdi);
	Uc = omegat/sqrt(2*dhi);
	eta_t = limit(eff_coeff_turb[1] + eff_coeff_turb[2]*Uc + eff_coeff_turb[3]*Uc^2 
			+ eff_coeff_turb[4]*er + eff_coeff_turb[5]*Uc*er + eff_coeff_turb[6]*er^2,0.5,1);
	eta_t = eta_t_corr*eta_t;
	dedd = dmt*eta_t*dhi;
	ded = deu - dedd;
	
	// Calculating the torque
	momt = dedd / omegat;

	ppin.f	= dmt;
	ppout.f	= dmt;
	pFin.f	= dmft;
	pFout.f	= dmft;
	pTin.f	= deu;
	pTout.f	= ded;

	pMech.e	= momt;
	
	// Calculating the discharge temperature
	hd = ded / dmt;
	inarr[1:4] = [pd; hd; fu; fs];
	td_calc = dll(dll_ICE,dll_fcn_GetTFromPhF,inarr);
	
	


implementation_end;
specification_end;
				specification 'flow_ER_Eff_UcPoly'
 description '<Information>
 <Description>
    <LibraryPath>FlowRestriction\Turbine_polynomial.emx</LibraryPath>
  <TimeStamp>2016-4-4 16:55:39</TimeStamp>
  <Version>4.6</Version>
<IsMainModel>0</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
  <AllowLibraryUpdate>True</AllowLibraryUpdate>
  <Configuration>
   <struct>
    <member>
     <name>DocumentationMask</name>
     <value>
      <struct></struct>
     </value>
    </member>
   </struct>
  </Configuration>
 </Description>
</Information>';
 type R
  ports
   power in ppin;
   power in pTin;
   power out ppout;
   power out pTout;
   power in pFin;
   power out pFout;
   power out pMech;
   signal out eta_t;
   signal in eta_t_corr;
  restrictions
   causality fixed in ppin;
   causality fixed in pTin;
   causality fixed in ppout;
   causality fixed in pTout;
 end;
 icon bg bottom
  figures
   group
    line 261.7 49.5 202.2 49.5 color 0;
    line 246.8 94.5 217.1 94.5 202.2 49.5 color 0;
    line 246.8 94.5 261.7 49.5 color 0;
   end;
  terminals
   ppin 272 48 fixed;
   pTin 271.9 72 fixed;
   ppout 192 48 fixed;
   pTout 191.9 72 fixed;
   pFin 272 96 fixed;
   pFout 192 96 fixed;
   pMech 231.9 104 fixed;
 end;
 implementation eq
parameters
	real global flow_coeff_turb[3];
									//Flow coefficient for the flow model a*x^b+c
// Thermo package
	string global dll_ICE;
	string global dll_fcn_ThDP;
	string global dll_fcn_GetTFromPhF;
	real global fs;
	real global Uc_opt;
	real global Dturb_wheel;
	real global eta_t_max;	
	real global tRef;

variables
	real pu, pd, fu, fd, tu, td, omegat, er, td_calc, tdi;
	real interesting momt, dmt, dmft, deu, ded, dedd;
//	real interesting eta_t;
	real hidden dmt_corr;
	real hidden hu, dhi, hdi, k;
	real Uc_nom;
	real hidden hd, err_td, dtd;
// Thermo package
	real inarr[5], outarr[16];

//initialequations
//	eff_coeff = eff_coeff_T_cw * [T_cw;1];
code
   pu 	= ppin.e;	pd 	= ppout.e;
	fu  	= pFin.e;  	fd 	= pFout.e;
	tu		= pTin.e;	td 	= pTout.e;
	omegat = pMech.f;
	
	// Calculation of the turbine is based on the flow model
	//      m_dot = a*ER^b + c 
	// where the flow parameters a, b, c are found by fitting 
	// the given turbine map or compressor matching procedure. 
	// The efficiency is modeled using 2nd order polynomial of
	// ER and Uc (Blade-speed ratio)

	// Calculating mass flow
	er = pu / pd;
	dmt_corr = flow_coeff_turb[1]*er^flow_coeff_turb[2] + flow_coeff_turb[3];
	dmt = dmt_corr*(pu/1000)/sqrt(tu);
	dmft = dmt*fu*fs/(1+fu*fs);
	
	// Calculating inlet flow enthalpy and energy flow
	inarr 	= [pu; tu; fu; fs; 1];
	outarr	= dll(dll_ICE,dll_fcn_ThDP, inarr);
	hu = outarr[2];
	deu = dmt*hu;

	// Calculating  efficiency of the turbine and outlet enthalpy and temperature
	k = outarr[16];
	tdi = tu*er^((1-k)/k);
	inarr 	= [pd;tdi;fu;fs;1];
	outarr	= dll(dll_ICE,dll_fcn_ThDP, inarr);
	hdi = outarr[2];
	dhi = (hu - hdi);
	Uc_nom = 0.5*(Dturb_wheel)*(omegat)/sqrt(2*abs(dhi)) / Uc_opt;
	eta_t = eta_t_max*Uc_nom*(2 - Uc_nom);


	eta_t = eta_t_corr*eta_t;
	dedd = dmt*eta_t*dhi;
	ded = deu - dedd;
	
	// Calculating the torque
	momt = dedd / omegat;

	ppin.f	= dmt;
	ppout.f	= dmt;
	pFin.f	= dmft;
	pFout.f	= dmft;
	pTin.f	= deu;
	pTout.f	= ded;

	pMech.e	= momt;
	
	// Calculating the discharge temperature
	hd = ded / dmt;
	inarr[1:4] = [pd; hd; fu; fs];
	td_calc = dll(dll_ICE,dll_fcn_GetTFromPhF,inarr);
	
	


implementation_end;
specification_end;
			end;
  end;
  connections
   COMPRES1\pFout => PowerMux\input3;
   COMPRES1\ppout => PowerMux\input1;
   COMPRES1\pTout => PowerMux\input2;
   eta_t_corr -> TURBIN1\eta_t_corr;
   input => PowerDemux1\input;
   input1 => PowerDemux\input;
   PowerDemux\output1 => COMPRES1\ppin;
   PowerDemux\output2 => COMPRES1\pTin;
   PowerDemux\output3 => COMPRES1\pFin;
   PowerDemux1\output1 => TURBIN1\ppin;
   PowerDemux1\output2 => TURBIN1\pTin;
   PowerDemux1\output3 => TURBIN1\pFin;
   PowerMux\output => output1;
   PowerMux1\output => output;
   Shaft\p1 => COMPRES1\pMech;
   TURBIN1\eta_t -> COMPRES1\eta_t 288 160 288 232;
   TURBIN1\pFout => PowerMux1\input3;
   TURBIN1\pMech => Shaft\p;
   TURBIN1\ppout => PowerMux1\input1;
   TURBIN1\pTout => PowerMux1\input2;
  end;
 implementation_end;
specification_end;
			end;
  end;
  connections
   Boundary_Amb\p => Turbocharger1\input1;
   Boundary_Exh\p <= Turbocharger1\output;
   ChargeAirCooler\ppTFOut => ChargeAirReciever\pTFIn;
   ChargeAirReciever\pTFOut => EffortSensor1\p1;
   Constant1\output -> Turbocharger1\eta_t_corr 264 104;
   Constant2\output -> ChargeAirCooler\T_cw 528 400;
   Controller\output -> EngCylBlock4Stroke\input 832 64 832 160;
   Controller\tWall -> EngCylBlock4Stroke\tWall 848 56 848 168;
   Demux\output -> Controller\pTAR 1056 288 1056 80;
   Demux1\output -> Controller\dhExh;
   Demux2\output -> Controller\dhAir 1040 264 1040 88;
   EffortSensor1\effort -> Demux\input;
   EffortSensor1\p2 => FlowSensor2\p1;
   EngCylBlock4Stroke\dmf -> Controller\dmf 856 168 856 56;
   EngCylBlock4Stroke\dQCyl -> Controller\dQCyl 864 168 864 56;
   EngCylBlock4Stroke\fricPow -> Controller\fricPow 872 168 872 56;
   EngCylBlock4Stroke\p => PowerSensor1\p1;
   EngCylBlock4Stroke\p2 => FlowSensor1\p1;
   FlowSensor1\flow -> Demux1\input;
   FlowSensor1\p2 => ExhaustReceiver\pTFIn 744 120;
   FlowSensor2\flow -> Demux2\input;
   FlowSensor2\p2 => EngCylBlock4Stroke\p1;
   OneJunction\flow -> Controller\omegaE 896 184 896 56;
   OneJunction\p => I\p;
   OneJunction\p => LoadTemp\p;
   pipeBCool\pTFOut => ChargeAirCooler\ppTFIn;
   PowerSensor1\P -> Controller\PowShaft 880 56;
   PowerSensor1\p2 => OneJunction\p;
   Turbocharger1\input <= ExhaustReceiver\pTFOut 544 152;
   Turbocharger1\output1 => pipeBCool\pTFIn;
  end;
 implementation_end;
]]>
</Sidops>
 </Model>
 <Experiments>
     <DefaultExperiment><![CDATA[Experiment 1]]>
</DefaultExperiment>
  <Experiment>
    <Name>Experiment 1</Name>
    <CreatedBy></CreatedBy>
    <Info></Info>
<ExpData>
  <VersionNumber>4.6</VersionNumber>
  <ModelProperties>
  </ModelProperties>
  <Variables>
   <Constants>
   </Constants>
   <Parameters>
    <Variable>
     <Name>EngCylBlock4Stroke\Eng_Cyl1\InProfNoRow1</Name>
     <ArithmeticType>integer</ArithmeticType>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>EngCylBlock4Stroke\Eng_Cyl1\InProfNoRow2</Name>
     <ArithmeticType>integer</ArithmeticType>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>Load_amp</Name>
     <Value>0</Value>
    </Variable>
   </Parameters>
   <Initials>
    <Variable>
     <Name>Controller\Governor1\Governor\Controller\uDstate_state_initial</Name>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>Controller\Governor1\Governor\Controller\uI_state_initial</Name>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>Controller\Governor1\Governor\LowPassFilter\y0</Name>
     <Value>240.3086827</Value>
    </Variable>
    <Variable>
     <Name>Controller\Governor1\Governor\RPMCommanTF\state0</Name>
     <Value>240.3086827</Value>
    </Variable>
    <Variable>
     <Name>Controller\Governor\Governor\Controller\uDstate_state_initial</Name>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>Controller\Governor\Governor\Controller\uI_state_initial</Name>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>Controller\Governor\Governor\LowPassFilter\y0</Name>
     <Value>157.07963267949</Value>
    </Variable>
    <Variable>
     <Name>Controller\Governor\Governor\RPMCommanTF\state0</Name>
     <Value>1500</Value>
    </Variable>
    <Variable>
     <Name>Controller\Governor\SmokeLimiter\LowPassFilter1\y_initial</Name>
     <Value>310</Value>
    </Variable>
    <Variable>
     <Name>Controller\Governor\SmokeLimiter\LowPassFilter\y_initial</Name>
     <Value>150000</Value>
    </Variable>
    <Variable>
     <Name>Controller\Governor\SmokeLimiter\TransferFunction\state_initial</Name>
     <Value>0.9</Value>
    </Variable>
    <Variable>
     <Name>EngCylBlock4Stroke\Eng_Cyl1\CrankMechanism1\QSensor4\q0</Name>
     <Value>0.000174532925199433</Value>
    </Variable>
    <Variable>
     <Name>EngCylBlock4Stroke\Eng_Cyl1\QCyl\q_initial</Name>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>EngCylBlock4Stroke\Eng_Cyl1\SFOC\mf_initial</Name>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>EngCylBlock4Stroke\Eng_Cyl1\SFOC\W_initial</Name>
     <Value>0.000104322145262619</Value>
    </Variable>
    <Variable>
     <Name>I\H0</Name>
     <Value>785.398163397448</Value>
    </Variable>
    <Variable>
     <Name>LoadTemp\TransferFunction\state_initial</Name>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>Turbocharger1\h0TC</Name>
     <Value>2.88102006980797</Value>
    </Variable>
   </Initials>
  </Variables>
  <PlotSpecs>
   <VarNames>
    <VarName>time</VarName>
    <VarName>Controller\Governor\Governor\Gain1\output</VarName>
    <VarName>Controller\Governor\Governor\Controller\MV</VarName>
    <VarName>Controller\Governor\SmokeLimiter\Submodel3\output</VarName>
    <VarName>I\p.f</VarName>
    <VarName>Controller\LPPower\y</VarName>
    <VarName>Turbocharger1\COMPRES1\pr</VarName>
    <VarName>Turbocharger1\TURBIN1\er</VarName>
    <VarName>Turbocharger1\TURBIN1\dmt</VarName>
    <VarName>Turbocharger1\COMPRES1\dmc</VarName>
    <VarName>Turbocharger1\COMPRES1\omegat</VarName>
    <VarName>Turbocharger1\COMPRES1\etaic</VarName>
    <VarName>Turbocharger1\TURBIN1\eta_t</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\engCylCV\Thdyn_Cont_Vol_Cyl\p</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl2\engCylCV\Thdyn_Cont_Vol_Cyl\p</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl3\engCylCV\Thdyn_Cont_Vol_Cyl\p</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl4\engCylCV\Thdyn_Cont_Vol_Cyl\p</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl5\engCylCV\Thdyn_Cont_Vol_Cyl\p</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl6\engCylCV\Thdyn_Cont_Vol_Cyl\p</VarName>
    <VarName>plotTurbocharger\y1</VarName>
    <VarName>plotTurbocharger\y2</VarName>
    <VarName>plotTurbocharger\x1</VarName>
    <VarName>plotTurbocharger\x2</VarName>
    <VarName>plotTurbocharger\y3</VarName>
    <VarName>plotTurbocharger\x3</VarName>
    <VarName>plotTurbocharger\y4</VarName>
    <VarName>plotTurbocharger\x4</VarName>
    <VarName>plotTurbocharger\y5</VarName>
    <VarName>plotTurbocharger\x5</VarName>
    <VarName>plotTurbocharger\y6</VarName>
    <VarName>plotTurbocharger\x6</VarName>
    <VarName>plotTurbocharger\y7</VarName>
    <VarName>plotTurbocharger\x7</VarName>
    <VarName>plotTurbocharger\y8</VarName>
    <VarName>plotTurbocharger\x8</VarName>
    <VarName>plotTurbocharger\y9</VarName>
    <VarName>plotTurbocharger\x9</VarName>
    <VarName>ChargeAirCooler\Submodel2\dm</VarName>
    <VarName>ChargeAirCooler\PowerDemux\output1.e</VarName>
    <VarName>ChargeAirCooler\Submodel2\pp_out.e</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\phi_comb</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\engCylCV\Thdyn_Cont_Vol_Cyl\V</VarName>
    <VarName>Controller\MultiplyDivide\output</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\SFOC\ISFC</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\igdel</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\fiinj</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\intakeVV\IntakeVVLift1\pIVC</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\Submodel9\mAtInj</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\Submodel9\EAtInj</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\Submodel9\mbAtInj</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\Submodel9\vAtInj</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\intakeVV\IntakeVVLift1\mIVC</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\pMaxFinder\pMax</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\SFOC\IMEP</VarName>
    <VarName>EngCylBlock4Stroke\FMEP\fmep</VarName>
    <VarName>Controller\BSFCRef\output</VarName>
    <VarName>Controller\MultiplyDivide4\output</VarName>
    <VarName>Controller\PlusMinus1\output</VarName>
    <VarName>Controller\PlusMinus2\output</VarName>
    <VarName>Controller\PlusMinus3\output</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl3\Submodel2\R1\pTwall.e</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\Submodel9\volEff</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\engCylCV\Thdyn_Cont_Vol_Cyl\F</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\engCylCV\Thdyn_Cont_Vol_Cyl\T</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\EffortSensor1\effort</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl5\ROHR\phi_comb</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl2\ROHR\phi_comb</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl4\ROHR\phi_comb</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl6\ROHR\phi_comb</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl3\ROHR\phi_comb</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\QCyl\p2.dQ</VarName>
    <VarName>Controller\Governor\Governor\uGov</VarName>
    <VarName>Controller\PowShaft</VarName>
    <VarName>EngCylBlock4Stroke\p2.f[1]</VarName>
    <VarName>ChargeAirReciever\pTFOut.f[1]</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\intakeVV\aOpenEff</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\exhVV\aOpenEff</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl6\dQCyl</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\pAtInj</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\TAtInj</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\phiInj</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\dm_f_inj</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\dQ</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\p_inj</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\m_f_inj</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl2\Submodel2\Pcyl</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl3\Submodel2\Pcyl</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl4\Submodel2\Pcyl</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl5\Submodel2\Pcyl</VarName>
    <VarName>EngCylBlock4Stroke\Eng_Cyl6\Submodel2\Pcyl</VarName>
    <VarName>EngCylBlock4Stroke\EffortSensor2\p2.T</VarName>
    <VarName>EngCylBlock4Stroke\MSe\p.e</VarName>
    <VarName>EngCylBlock4Stroke\MSe1\p.e</VarName>
    <VarName>EngCylBlock4Stroke\MSe2\p.e</VarName>
    <VarName>EngCylBlock4Stroke\MSe3\p.e</VarName>
    <VarName>EngCylBlock4Stroke\MSe4\p.e</VarName>
   </VarNames>
   <Plots>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>1</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-0.4</Minimum>
       <Maximum>1.6</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>speedPURef</Label>
      </Axis>
      <Axis>
       <Minimum>12662450</Minimum>
       <Maximum>12662950</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>speedPUMV</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>Controller\Governor\SmokeLimiter\Submodel3\output</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>Controller\Governor\Governor\uGov</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Controller\Governor\Governor\Gain1\output</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Controller\Governor\Governor\Controller\MV</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>255</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>255</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Controller\Governor\SmokeLimiter\Submodel3\output</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>65280</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>65280</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Controller\Governor\Governor\uGov</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.642335766423358</X>
       <Y>0.748424237330868</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>2</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>false</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>ScaniaDC121CylRef</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-2000000</Minimum>
       <Maximum>18000000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>p</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>p</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>p</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>p</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>p</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>p</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\engCylCV\Thdyn_Cont_Vol_Cyl\p</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl2\engCylCV\Thdyn_Cont_Vol_Cyl\p</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>255</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>255</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl3\engCylCV\Thdyn_Cont_Vol_Cyl\p</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>65280</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>65280</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl4\engCylCV\Thdyn_Cont_Vol_Cyl\p</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>0</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>0</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl5\engCylCV\Thdyn_Cont_Vol_Cyl\p</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>10040319</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>10040319</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl6\engCylCV\Thdyn_Cont_Vol_Cyl\p</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>3</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(1)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-800000</Minimum>
       <Maximum>1200000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>Controller\PowShaft</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>Controller\LPPower\y</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Controller\PowShaft</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Controller\LPPower\y</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.885668276972625</X>
       <Y>0.250836120401338</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>4</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(2)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-20</Minimum>
       <Maximum>180</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>I\p.f</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>I\p.f</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>5</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>ScaniaDC121CylRef</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>0.6</Minimum>
       <Maximum>2.6</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>Turbocharger1\COMPRES1\pr</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>Turbocharger1\TURBIN1\er</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Turbocharger1\COMPRES1\pr</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Turbocharger1\TURBIN1\er</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.560497641892991</X>
       <Y>0.124082532567426</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>6</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-0.1</Minimum>
       <Maximum>0.4</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>Turbocharger1\TURBIN1\dmt</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>Turbocharger1\COMPRES1\dmc</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Turbocharger1\TURBIN1\dmt</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Turbocharger1\COMPRES1\dmc</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.511857707509881</X>
       <Y>0.631578947368421</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>7</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(1)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>4500</Minimum>
       <Maximum>9500</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>Turbocharger1\COMPRES1\omegat</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Turbocharger1\COMPRES1\omegat</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>8</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(2)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-7000</Minimum>
       <Maximum>3000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>Turbocharger1\COMPRES1\etaic</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>Turbocharger1\TURBIN1\eta_t</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Turbocharger1\COMPRES1\etaic</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Turbocharger1\TURBIN1\eta_t</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.69047619047619</X>
       <Y>0.547486033519553</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>9</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>ScaniaDC121CylRef</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-0.3</Minimum>
       <Maximum>0.7</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\p2.f[1]</Label>
      </Axis>
      <Axis>
       <Minimum>-6</Minimum>
       <Maximum>14</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>ChargeAirReciever\pTFOut.f[1]</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\p2.f[1]</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>ChargeAirReciever\pTFOut.f[1]</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>10</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(1)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>-359.999453047218</Minimum>
       <Maximum>359.999456644087</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>phi_comb</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-9.99999999999999e-005</Minimum>
       <Maximum>0.0009</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\intakeVV\aOpenEff</Label>
      </Axis>
      <Axis>
       <Minimum>-9.99999999999999e-005</Minimum>
       <Maximum>0.0009</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\exhVV\aOpenEff</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\phi_comb</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\intakeVV\aOpenEff</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\phi_comb</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\exhVV\aOpenEff</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>11</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>ScaniaDC121CylRef</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>0.51254246946833</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>dmc</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>5</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>pr</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>5</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>y1</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>5</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>y2</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>5</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>y3</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>5</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>y4</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>5</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>y5</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>5</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>y6</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>5</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>y7</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>5</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>y8</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>5</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>y9</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Turbocharger1\COMPRES1\dmc</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Turbocharger1\COMPRES1\pr</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>0</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\x1</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\y1</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>0</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>255</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\x2</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\y2</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\x3</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\y3</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>255</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>255</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\x4</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\y4</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>65280</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>65280</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\x5</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\y5</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>10040319</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>10040319</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\x6</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\y6</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16763904</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16763904</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\x7</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\y7</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>26367</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>26367</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\x8</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\y8</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>3368448</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>3368448</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\x9</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>plotTurbocharger\y9</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>12</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>ScaniaDC121CylRef</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-0.15</Minimum>
       <Maximum>0.35</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>dm</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>ChargeAirCooler\Submodel2\dm</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>13</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>140000</Minimum>
       <Maximum>240000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>ScavengeAirCooler1\PowerDemux\output1.e</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>ScavengeAirCooler1\Submodel2\pp_out.e</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>ChargeAirCooler\PowerDemux\output1.e</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>ChargeAirCooler\Submodel2\pp_out.e</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.356902356902357</X>
       <Y>0.490740740740741</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>14</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>false</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(2)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-20000</Minimum>
       <Maximum>80000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl6\dQCyl</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl6\dQCyl</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>15</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(3)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-10000</Minimum>
       <Maximum>90000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>p2.dQ</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\QCyl\p2.dQ</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>16</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(4)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>-359.999453047218</Minimum>
       <Maximum>359.999456644087</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>phi_comb</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-2000000</Minimum>
       <Maximum>18000000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>p</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\phi_comb</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\engCylCV\Thdyn_Cont_Vol_Cyl\p</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>17</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-0.1</Minimum>
       <Maximum>0.9</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>F</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\engCylCV\Thdyn_Cont_Vol_Cyl\F</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>18</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(5)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>200</Minimum>
       <Maximum>2200</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>T</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\engCylCV\Thdyn_Cont_Vol_Cyl\T</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>19</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(6)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0.000104322128096588</Minimum>
       <Maximum>0.0018777983047992</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>V</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-2000000</Minimum>
       <Maximum>18000000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\engCylCV\Thdyn_Cont_Vol_Cyl\p</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\engCylCV\Thdyn_Cont_Vol_Cyl\V</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\engCylCV\Thdyn_Cont_Vol_Cyl\p</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>20</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>SFC</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-150</Minimum>
       <Maximum>350</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>BSFC</Label>
      </Axis>
      <Axis>
       <Minimum>-100000</Minimum>
       <Maximum>0</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>ISFC</Label>
      </Axis>
      <Axis>
       <Minimum>-100000</Minimum>
       <Maximum>0</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>BSFCRef</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Controller\MultiplyDivide\output</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\SFOC\ISFC</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>255</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>255</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Controller\BSFCRef\output</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.577825159914712</X>
       <Y>0.143796992481203</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>21</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>ScaniaDC121CylRef</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>5500000</Minimum>
       <Maximum>10500000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\ROHR\pAtInj</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\pAtInj</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.758620689655172</X>
       <Y>0.181528662420382</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>22</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>970</Minimum>
       <Maximum>1020</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\ROHR\TAtInj</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\TAtInj</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>23</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(1)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-4</Minimum>
       <Maximum>6</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\ROHR\igdel</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\ROHR\fiinj</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\igdel</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\fiinj</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.479554754393872</X>
       <Y>0.544059775840598</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>24</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(7)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-100000</Minimum>
       <Maximum>400000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\intakeVV\IntakeVVLift1\pIVC</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\intakeVV\IntakeVVLift1\pIVC</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.390663390663391</X>
       <Y>0.58</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>25</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(8)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>-359.999453047218</Minimum>
       <Maximum>359.999456644087</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>phi_comb</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>0.002</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>cylVol</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\phi_comb</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\engCylCV\Thdyn_Cont_Vol_Cyl\V</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>26</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(2)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-0.0005</Minimum>
       <Maximum>0.0045</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\Submodel9\mAtInj</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\intakeVV\IntakeVVLift1\mIVC</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\Submodel9\mAtInj</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\intakeVV\IntakeVVLift1\mIVC</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.435042735042735</X>
       <Y>0.427397260273973</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>27</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(3)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-1000</Minimum>
       <Maximum>4000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\Submodel9\EAtInj</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\Submodel9\EAtInj</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.468590831918506</X>
       <Y>0.491780821917808</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>28</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(4)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-2e-006</Minimum>
       <Maximum>8e-006</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\Submodel9\mbAtInj</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\Submodel9\mbAtInj</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>29</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(5)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-4e-005</Minimum>
       <Maximum>0.00016</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\Submodel9\vAtInj</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\Submodel9\vAtInj</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.508196721311475</X>
       <Y>0.834246575342466</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>30</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(6)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-3.5</Minimum>
       <Maximum>1.5</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\ROHR\phiInj</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\phiInj</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>31</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(4)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-2000000</Minimum>
       <Maximum>18000000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\pMaxFinder\pMax</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\pMaxFinder\pMax</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.638066202090592</X>
       <Y>0.634935304990758</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>32</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(5)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-15</Minimum>
       <Maximum>35</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\SFOC\IMEP</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\FMEP\fmep</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\SFOC\IMEP</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\FMEP\fmep</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.57603305785124</X>
       <Y>0.095229713078683</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>33</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>EnergyBalance</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-0.1</Minimum>
       <Maximum>1.2</Maximum>
       <Linear>true</Linear>
       <Scaling>0</Scaling>
       <Label>powShaft</Label>
      </Axis>
      <Axis>
       <Minimum>-0.1</Minimum>
       <Maximum>1.2</Maximum>
       <Linear>true</Linear>
       <Scaling>0</Scaling>
       <Label>powFric</Label>
      </Axis>
      <Axis>
       <Minimum>-0.1</Minimum>
       <Maximum>1.2</Maximum>
       <Linear>true</Linear>
       <Scaling>0</Scaling>
       <Label>dHExh</Label>
      </Axis>
      <Axis>
       <Minimum>-0.1</Minimum>
       <Maximum>1.2</Maximum>
       <Linear>true</Linear>
       <Scaling>0</Scaling>
       <Label>dQCyl</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>0</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>0</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Controller\MultiplyDivide4\output</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Controller\PlusMinus1\output</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>255</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>255</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Controller\PlusMinus2\output</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>65280</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>65280</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>Controller\PlusMinus3\output</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.149468791146697</X>
       <Y>0.469941866207616</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>34</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>tWall</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-400</Minimum>
       <Maximum>1600</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl3\Submodel2\R1\pTwall.e</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl3\Submodel2\R1\pTwall.e</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
      <Position>
       <X>0.612693246541904</X>
       <Y>-0.0526802218114602</Y>
      </Position>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>35</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>volEff</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-0.2</Minimum>
       <Maximum>1.8</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\Submodel9\volEff</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\Submodel9\volEff</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>36</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>Injection</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-0.03</Minimum>
       <Maximum>0.07</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\ROHR\dm_f_inj</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\dm_f_inj</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>37</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>Combustion</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-1500000</Minimum>
       <Maximum>3500000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\ROHR\dQ</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\dQ</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>38</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-40000000</Minimum>
       <Maximum>160000000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\ROHR\p_inj</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\p_inj</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>39</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(1)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-0.00015</Minimum>
       <Maximum>0.00035</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\ROHR\m_f_inj</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\m_f_inj</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>40</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>cylPressure</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-2000000</Minimum>
       <Maximum>18000000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\EffortSensor1\effort</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl2\Submodel2\Pcyl</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl3\Submodel2\Pcyl</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl4\Submodel2\Pcyl</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl5\Submodel2\Pcyl</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl6\Submodel2\Pcyl</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\EffortSensor1\effort</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl2\Submodel2\Pcyl</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>255</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>255</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl3\Submodel2\Pcyl</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>65280</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>65280</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl4\Submodel2\Pcyl</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>0</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>0</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl5\Submodel2\Pcyl</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>10040319</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>10040319</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl6\Submodel2\Pcyl</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>41</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>phiComb</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-500</Minimum>
       <Maximum>500</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl1\ROHR\phi_comb</Label>
      </Axis>
      <Axis>
       <Minimum>-500</Minimum>
       <Maximum>500</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl2\ROHR\phi_comb</Label>
      </Axis>
      <Axis>
       <Minimum>-500</Minimum>
       <Maximum>500</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>phi_comb</Label>
      </Axis>
      <Axis>
       <Minimum>-500</Minimum>
       <Maximum>500</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl4\ROHR\phi_comb</Label>
      </Axis>
      <Axis>
       <Minimum>-500</Minimum>
       <Maximum>500</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl5\ROHR\phi_comb</Label>
      </Axis>
      <Axis>
       <Minimum>-500</Minimum>
       <Maximum>500</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\Eng_Cyl6\ROHR\phi_comb</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl1\ROHR\phi_comb</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>255</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>255</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl2\ROHR\phi_comb</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl3\ROHR\phi_comb</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>0</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>0</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl4\ROHR\phi_comb</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>65280</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>65280</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl5\ROHR\phi_comb</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>10040319</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>10040319</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\Eng_Cyl6\ROHR\phi_comb</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>42</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>Tq</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>24.8326999999946</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>time</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-3000</Minimum>
       <Maximum>7000</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\EffortSensor2\p2.T</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\MSe\p.e</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\MSe1\p.e</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\MSe2\p.e</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\MSe3\p.e</Label>
      </Axis>
      <Axis>
       <Minimum>0</Minimum>
       <Maximum>10</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>EngCylBlock4Stroke\MSe4\p.e</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\EffortSensor2\p2.T</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\MSe\p.e</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>255</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>255</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\MSe1\p.e</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>65280</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>65280</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\MSe2\p.e</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>0</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>0</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\MSe3\p.e</VarName>
       </YCurveData>
      </Curve>
      <Curve>
       <LineColor>10040319</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>10040319</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>time</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>EngCylBlock4Stroke\MSe4\p.e</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
   </Plots>
   <PlotPanels>
    <PlotPanel>
     <PlotPanelId>1</PlotPanelId>
     <PlotPanelVisible>true</PlotPanelVisible>
     <Name>Window 1</Name>
     <Tiling>0</Tiling>
     <PlotIds>
       <PlotId>1</PlotId>
       <PlotId>3</PlotId>
       <PlotId>4</PlotId>
       <PlotId>20</PlotId>
       <PlotId>31</PlotId>
       <PlotId>32</PlotId>
       <PlotId>33</PlotId>
       <PlotId>34</PlotId>
       <PlotId>35</PlotId>
     </PlotIds>
     <ToggleState>Base</ToggleState>
    </PlotPanel>
    <PlotPanel>
     <PlotPanelId>2</PlotPanelId>
     <PlotPanelVisible>false</PlotPanelVisible>
     <Name>Window 2</Name>
     <Tiling>0</Tiling>
     <PlotIds>
       <PlotId>2</PlotId>
       <PlotId>10</PlotId>
       <PlotId>14</PlotId>
       <PlotId>15</PlotId>
       <PlotId>16</PlotId>
       <PlotId>17</PlotId>
       <PlotId>18</PlotId>
       <PlotId>19</PlotId>
       <PlotId>24</PlotId>
       <PlotId>25</PlotId>
     </PlotIds>
     <ToggleState>Base</ToggleState>
    </PlotPanel>
    <PlotPanel>
     <PlotPanelId>3</PlotPanelId>
     <PlotPanelVisible>true</PlotPanelVisible>
     <Name>Window 3</Name>
     <Tiling>0</Tiling>
     <PlotIds>
       <PlotId>5</PlotId>
       <PlotId>6</PlotId>
       <PlotId>7</PlotId>
       <PlotId>8</PlotId>
     </PlotIds>
     <ToggleState>Base</ToggleState>
    </PlotPanel>
    <PlotPanel>
     <PlotPanelId>4</PlotPanelId>
     <PlotPanelVisible>true</PlotPanelVisible>
     <Name>Window 4</Name>
     <Tiling>0</Tiling>
     <PlotIds>
       <PlotId>9</PlotId>
     </PlotIds>
     <ToggleState>Base</ToggleState>
    </PlotPanel>
    <PlotPanel>
     <PlotPanelId>5</PlotPanelId>
     <PlotPanelVisible>true</PlotPanelVisible>
     <Name>Window 5</Name>
     <Tiling>0</Tiling>
     <PlotIds>
       <PlotId>11</PlotId>
     </PlotIds>
     <ToggleState>Base</ToggleState>
    </PlotPanel>
    <PlotPanel>
     <PlotPanelId>6</PlotPanelId>
     <PlotPanelVisible>true</PlotPanelVisible>
     <Name>Window 6</Name>
     <Tiling>0</Tiling>
     <PlotIds>
       <PlotId>12</PlotId>
       <PlotId>13</PlotId>
     </PlotIds>
     <ToggleState>Base</ToggleState>
    </PlotPanel>
    <PlotPanel>
     <PlotPanelId>7</PlotPanelId>
     <PlotPanelVisible>false</PlotPanelVisible>
     <Name>Window 7</Name>
     <Tiling>0</Tiling>
     <PlotIds>
       <PlotId>21</PlotId>
       <PlotId>22</PlotId>
       <PlotId>23</PlotId>
       <PlotId>26</PlotId>
       <PlotId>27</PlotId>
       <PlotId>28</PlotId>
       <PlotId>29</PlotId>
       <PlotId>30</PlotId>
     </PlotIds>
     <ToggleState>Base</ToggleState>
    </PlotPanel>
    <PlotPanel>
     <PlotPanelId>8</PlotPanelId>
     <PlotPanelVisible>false</PlotPanelVisible>
     <Name>Window 8</Name>
     <Tiling>0</Tiling>
     <PlotIds>
       <PlotId>36</PlotId>
       <PlotId>37</PlotId>
       <PlotId>38</PlotId>
       <PlotId>39</PlotId>
     </PlotIds>
     <ToggleState>Base</ToggleState>
    </PlotPanel>
    <PlotPanel>
     <PlotPanelId>9</PlotPanelId>
     <PlotPanelVisible>false</PlotPanelVisible>
     <Name>Window 9</Name>
     <Tiling>0</Tiling>
     <PlotIds>
       <PlotId>40</PlotId>
       <PlotId>41</PlotId>
     </PlotIds>
     <ToggleState>Base</ToggleState>
    </PlotPanel>
    <PlotPanel>
     <PlotPanelId>10</PlotPanelId>
     <PlotPanelVisible>true</PlotPanelVisible>
     <Name>Window 10</Name>
     <Tiling>0</Tiling>
     <PlotIds>
       <PlotId>42</PlotId>
     </PlotIds>
     <ToggleState>Base</ToggleState>
    </PlotPanel>
   </PlotPanels>
   <WindowRectangles virtualDesktopWidth="3072" virtualDesktopHeight="960">
     <WindowRectangle monitor="0" left="0" top="0" right="1536" bottom="960" plotpanelid="1">
0 0.00416667 1 0.923958
     </WindowRectangle>
     <WindowRectangle monitor="0" left="0" top="0" right="1536" bottom="960" plotpanelid="2">
0 0.0229167 0.740885 0.958333
     </WindowRectangle>
     <WindowRectangle monitor="0" left="0" top="0" right="1536" bottom="960" plotpanelid="3">
0.00520833 0.0322917 1.00521 0.959375
     </WindowRectangle>
     <WindowRectangle monitor="0" left="0" top="0" right="1536" bottom="960" plotpanelid="4">
0.188151 0.24375 0.48112 0.74375
     </WindowRectangle>
     <WindowRectangle monitor="0" left="0" top="0" right="1536" bottom="960" plotpanelid="5">
0.188151 0.24375 0.48112 0.74375
     </WindowRectangle>
     <WindowRectangle monitor="0" left="0" top="0" right="1536" bottom="960" plotpanelid="6">
0.188151 0.24375 0.664714 0.74375
     </WindowRectangle>
     <WindowRectangle monitor="0" left="0" top="0" right="1536" bottom="960" plotpanelid="7">
0.00195313 0.0791667 0.736328 0.825
     </WindowRectangle>
     <WindowRectangle monitor="0" left="0" top="0" right="1536" bottom="960" plotpanelid="8">
0 0.021875 0.740885 0.857292
     </WindowRectangle>
     <WindowRectangle monitor="0" left="0" top="0" right="1536" bottom="960" plotpanelid="9">
0 0.021875 0.740885 0.857292
     </WindowRectangle>
     <WindowRectangle monitor="0" left="0" top="0" right="1536" bottom="960" plotpanelid="10">
0 0.0239583 1 0.958333
     </WindowRectangle>
   </WindowRectangles>
  </PlotSpecs>
  <RunSpecs>
   <SimulatorSettings>
    <StartTime>0</StartTime>
    <FinishTime>50</FinishTime>
    <Warp>true</Warp>
    <UseOutputAfterEach>true</UseOutputAfterEach>
    <OutputAfterEach>0.0001</OutputAfterEach>
    <EventEpsilon>1e-006</EventEpsilon>
    <AlgebraicTolerance>1e-007</AlgebraicTolerance>
    <SteadyStateAnalysis>false</SteadyStateAnalysis>
    <UpdateHoldInstructions>true</UpdateHoldInstructions>
   </SimulatorSettings>
   <IntegrationMethods>
    <IntegrationMethod>
     <Name>Euler</Name>
     <StepSize>0.01</StepSize>
     <AutoStepSize>false</AutoStepSize>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>BackwardEuler</Name>
     <AbsoluteTolerance>1e-005</AbsoluteTolerance>
     <RelativeTolerance>1e-005</RelativeTolerance>
     <AlgebraicAbsoluteTolerance>1e-005</AlgebraicAbsoluteTolerance>
     <AlgebraicRelativeTolerance>1e-005</AlgebraicRelativeTolerance>
     <StepSize>0.01</StepSize>
     <Alpha>1</Alpha>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>AdamsBashforth</Name>
     <StepSize>0.01</StepSize>
     <AutoStepSize>false</AutoStepSize>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>RungeKutta2</Name>
     <StepSize>1e-005</StepSize>
     <AutoStepSize>false</AutoStepSize>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>RungeKutta4</Name>
     <StepSize>0.0001</StepSize>
     <AutoStepSize>false</AutoStepSize>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>RungeKutta8</Name>
     <UseInitialStepSize>false</UseInitialStepSize>
     <InitialStepSize>0</InitialStepSize>
     <UseMaximumStepSize>false</UseMaximumStepSize>
     <MaximumStepSize>0</MaximumStepSize>
     <AbsoluteTolerance>1e-006</AbsoluteTolerance>
     <RelativeTolerance>1e-006</RelativeTolerance>
     <SafetyFactor>0.9</SafetyFactor>
     <Factor1>0.33</Factor1>
     <Factor2>6</Factor2>
     <Beta>0</Beta>
     <UseMaxNrSteps>false</UseMaxNrSteps>
     <MaxNrSteps>100000</MaxNrSteps>
     <UseStiffDetection>false</UseStiffDetection>
     <MaxNrStiffnessSteps>1000</MaxNrStiffnessSteps>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>RungeKuttaFehlberg</Name>
     <UseInitialStepSize>false</UseInitialStepSize>
     <InitialStepSize>0</InitialStepSize>
     <UseMaximumStepSize>false</UseMaximumStepSize>
     <MaximumStepSize>0</MaximumStepSize>
     <AbsoluteTolerance>1e-006</AbsoluteTolerance>
     <RelativeTolerance>1e-006</RelativeTolerance>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>VodeAdams</Name>
     <UseInitialStepSize>false</UseInitialStepSize>
     <InitialStepSize>0</InitialStepSize>
     <UseMaximumStepSize>false</UseMaximumStepSize>
     <MaximumStepSize>0</MaximumStepSize>
     <AbsoluteTolerance>1e-006</AbsoluteTolerance>
     <RelativeTolerance>1e-006</RelativeTolerance>
     <VodeUseBDF>true</VodeUseBDF>
     <VodeUseNewton>true</VodeUseNewton>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>BDFMethod</Name>
     <AbsoluteTolerance>1e-005</AbsoluteTolerance>
     <RelativeTolerance>1e-005</RelativeTolerance>
     <AlgebraicAbsoluteTolerance>1e-005</AlgebraicAbsoluteTolerance>
     <AlgebraicRelativeTolerance>1e-005</AlgebraicRelativeTolerance>
     <UseInitialStepSize>false</UseInitialStepSize>
     <InitialStepSize>0</InitialStepSize>
     <UseMaximumStepSize>false</UseMaximumStepSize>
     <MaximumStepSize>0</MaximumStepSize>
     <UseFixedStepSize>false</UseFixedStepSize>
     <FixedStepSize>0</FixedStepSize>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>MeBDFiMethod</Name>
     <AbsoluteTolerance>1e-005</AbsoluteTolerance>
     <RelativeTolerance>1e-005</RelativeTolerance>
     <AlgebraicAbsoluteTolerance>1e-005</AlgebraicAbsoluteTolerance>
     <AlgebraicRelativeTolerance>1e-005</AlgebraicRelativeTolerance>
     <UseInitialStepSize>false</UseInitialStepSize>
     <InitialStepSize>0</InitialStepSize>
     <UseMaximumStepSize>false</UseMaximumStepSize>
     <MaximumStepSize>0</MaximumStepSize>
     <UseFixedStepSize>false</UseFixedStepSize>
     <FixedStepSize>0</FixedStepSize>
    </IntegrationMethod>
    <SelectedIntegrationMethod>4</SelectedIntegrationMethod>
   </IntegrationMethods>
  </RunSpecs>
  <MultipleRun>
   <NrSteps>10</NrSteps>
   <CopyFromStates>false</CopyFromStates>
   <JoinParameterVariation>true</JoinParameterVariation>
   <ClearAfterRun>true</ClearAfterRun>
   <RedrawAfterRun>false</RedrawAfterRun>
   <DrawDuringSimulation>true</DrawDuringSimulation>
   <ActionBeforeOptimization>0</ActionBeforeOptimization>
   <CompareValue>0</CompareValue>
   <UseCompareValue>true</UseCompareValue>
   <MultipleRunType>MultipleRun</MultipleRunType>
   <Minimize>true</Minimize>
   <OptimizationVariable></OptimizationVariable>
   <ResulVarUsage>UseEndValue</ResulVarUsage>
   <Tolerance>0.001</Tolerance>
   <OptimizationMethod>BroydonFletcherGoldfarbShanno</OptimizationMethod>
   <MultipleRunVariables>
   </MultipleRunVariables>
  </MultipleRun>
  <ExportData>
   <WriteAsText>true</WriteAsText>
   <ReadAsText>true</ReadAsText>
   <WriteHeader>true</WriteHeader>
   <ReadHeader>true</ReadHeader>
   <ReadFilename></ReadFilename>
   <WriteFilename></WriteFilename>
   <DoWrite>false</DoWrite>
   <ExportVariables>
   </ExportVariables>
   <ImportVariables>
   </ImportVariables>
  </ExportData>
  <BreakPoints>
  </BreakPoints>
  <AnimationPlayback>
   <PlaybackSpeed>1</PlaybackSpeed>
  </AnimationPlayback>
</ExpData>
  </Experiment>
</Experiments>
</Document>
